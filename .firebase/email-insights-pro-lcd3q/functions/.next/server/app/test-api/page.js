(()=>{var e={};e.id=990,e.ids=[990],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8301:(e,s,t)=>{Promise.resolve().then(t.bind(t,32022))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16812:(e,s,t)=>{"use strict";t.d(s,{$T:()=>u,HW:()=>c,ME:()=>d,Mr:()=>p,iC:()=>m,mk:()=>o,qb:()=>n,tm:()=>l});var a=t(91199);t(42087);var r=t(33331);let i=process.env.EPMAILPRO_PUBLIC_KEY;async function n(e,s,t={},a=null){if(!i)throw Error("Missing EPMAILPRO_PUBLIC_KEY. Check your .env file and App Hosting backend configuration.");let r=s.startsWith("/")?s.substring(1):s,l=`https://app.epmailpro.com/api/${r}`,d={"X-MW-PUBLIC-KEY":i},o={method:e,headers:d,cache:"no-store"};if("GET"===e){let e=new URLSearchParams(Object.entries(t).map(([e,s])=>[e,String(s)]));e.toString()&&(l+=`?${e.toString()}`)}else a&&(d["Content-Type"]="application/json",o.body=JSON.stringify(a));let c={url:l,headers:{...d},body:o.body||null};try{let e=await fetch(l,o),s=await e.text();if(!e.ok){let t=`API request failed with status ${e.status}.`;try{let e=JSON.parse(s),a=e.error||(e.data?e.data.error:JSON.stringify(e));t+=` Details: ${a}`}catch(e){t+=` Response body: ${s}`}let a=Error(t);throw a.statusCode=e.status,a.requestInfo=c,a}if(!s)return{data:null,requestInfo:c};try{let e=JSON.parse(s);if(e.status&&"success"!==e.status){let s=Error(`API returned a failure status: ${JSON.stringify(e.error||e)}`);throw s.requestInfo=c,s}return{data:e.data?.records||e.data?.record||e.data||e,requestInfo:c}}catch(t){if("[]"===s)return{data:[],requestInfo:c};let e=Error(`Invalid JSON response from API. Raw text: ${s}`);throw e.requestInfo=c,e}}catch(e){throw e.requestInfo||(e.requestInfo=c),e}}async function l(e){try{let{data:s}=await n("GET",`campaigns/${e}`);if(!s)return null;return s}catch(s){return console.error(`Could not fetch details for campaign ${e}. Reason:`,s),null}}async function d(){let{data:e}=await n("GET","campaigns",{page:"1",per_page:"50"}),s=(Array.isArray(e)?e:e?.records)||[];if(0===s.length)return[];let t=s.map(e=>l(e.campaign_uid));return(await Promise.allSettled(t)).filter(e=>"fulfilled"===e.status&&null!==e.value).map(e=>e.value).filter(e=>{if(!e||!e.name)return!1;let s=e.name.toLowerCase();return!s.includes("farm")&&!s.includes("test")})}async function o(e){try{let{data:s}=await n("GET",`campaigns/${e}/stats`);if(!s||Array.isArray(s)&&0===s.length)return null;return{...s,campaign_uid:e}}catch(s){return console.error(`Could not fetch or process stats for campaign ${e}. Reason:`,s),null}}async function c(e){let{data:s}=await n("GET",`lists/${e}/subscribers`,{page:"1",per_page:"10000",status:"unsubscribed"});return(Array.isArray(s)?s:s?.records)||[]}async function u(e,s){try{let{data:t}=await n("GET",`lists/${e}/subscribers`,{EMAIL:s});if(!t||Array.isArray(t)&&0===t.length)return null;return(Array.isArray(t)?t:t.records)[0]||null}catch(e){if(404===e.statusCode)return null;return console.error(`Could not fetch details for subscriber ${s}. Reason:`,e),null}}async function p(){let{data:e}=await n("GET","lists");return((Array.isArray(e)?e:e?.records)||[]).filter(e=>{if(!e||!e.general?.name)return!1;let s=e.general.name.toLowerCase();return!s.includes("farm")&&!s.includes("test")})}async function m(e){let s,t="rg591800s2a2c",a=`suppression-lists/${t}/emails`;try{let r=await n("POST",a,{},{email:e});s={listUid:t,status:"success",data:r.data}}catch(e){s={listUid:t,status:"failed",error:e.message}}return{message:`Attempted to add '${e}' to suppression list ${t}.`,success:"success"===s.status,result:s}}(0,r.D)([n,l,d,o,c,u,p,m]),(0,a.A)(n,"7852ec3e7ddc063b967db2f7fa0623d0218c23a252",null),(0,a.A)(l,"402d30a181f7d9d554d07daf8513ef4b075d357756",null),(0,a.A)(d,"0067fe022ae68bb788d0078518de7518dd262db809",null),(0,a.A)(o,"401debd37c56a1149e44bf2d2bcd5ed06b8e3ca457",null),(0,a.A)(c,"4061fbe8a50e3fd214674a2e1bfed3286bb3b0afb4",null),(0,a.A)(u,"606f0c2220a7ea490bc89fc1a2d9eb7648a15a3281",null),(0,a.A)(p,"00807426360c2866649fea2b69a90e07a1eab79d6d",null),(0,a.A)(m,"40ee5602e76ad4c4ecc1742a645ea73634620569cb",null)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32022:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/test-api/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/test-api/page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},34680:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(60687),r=t(43210),i=t(29523),n=t(44493),l=t(89667),d=t(54300),o=t(4780);let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));c.displayName="Textarea";var u=t(6475);let p=(0,u.createServerReference)("7852ec3e7ddc063b967db2f7fa0623d0218c23a252",u.callServer,void 0,u.findSourceMapURL,"makeApiRequest"),m=(0,u.createServerReference)("40ee5602e76ad4c4ecc1742a645ea73634620569cb",u.callServer,void 0,u.findSourceMapURL,"addEmailToSuppressionList");var f=t(52579);function h(){let[e,s]=(0,r.useState)("campaigns"),[t,o]=(0,r.useState)("vm551z0vny5b9"),[u,h]=(0,r.useState)("GET"),[b,x]=(0,r.useState)("{}"),[v,g]=(0,r.useState)([{key:"page",value:"1"},{key:"per_page",value:"10"}]),[y,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),[P,S]=(0,r.useState)(null),[A,C]=(0,r.useState)(null),[E,k]=(0,r.useState)(""),[T,$]=(0,r.useState)(!1),[R,G]=(0,r.useState)(null),I=async()=>{j(!0),S(null),N(null),C(null);let s=e.replace("{uid}",t),a="GET"===u?v.reduce((e,s)=>(s.key&&(e[s.key]=s.value),e),{}):{},r=null;if("POST"===u)try{r=JSON.parse(b)}catch(e){S("Invalid JSON in request body."),j(!1);return}try{let e=await p(u,s,a,r);N(e.data),C(e.requestInfo)}catch(e){S(e.message),C(e.requestInfo)}finally{j(!1)}},_=async()=>{if(!E)return void alert("Please enter an email address.");$(!0),G(null),G(await m(E)),$(!1)},q=(e,s,t)=>{let a=[...v];a[e][s]=t,g(a)},O=e=>g(v.filter((s,t)=>t!==e)),M=(e,t="GET",a=[],r="{}")=>{h(t),s(e),g(a),x(r)};return(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground p-8 font-sans space-y-8",children:[(0,a.jsxs)(n.Zp,{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{className:"text-2xl",children:"Add Email to Suppression List"}),(0,a.jsx)(n.BT,{children:"This action will add an email to the master suppression list (`rg591800s2a2c`), which will block them from receiving any future campaigns."})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"suppression-email",children:"Email Address"}),(0,a.jsx)(l.p,{id:"suppression-email",type:"email",placeholder:"example@test.com",value:E,onChange:e=>k(e.target.value),disabled:T})]}),(0,a.jsx)(i.$,{onClick:_,disabled:T||!E,children:T?(0,a.jsx)(f.A,{className:"animate-spin"}):"Add to Suppression List"}),R&&(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Suppression Result"}),(0,a.jsx)("pre",{className:"bg-muted p-4 rounded-md text-sm overflow-x-auto",children:JSON.stringify(R,null,2)})]})]})]}),(0,a.jsxs)(n.Zp,{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{className:"text-2xl",children:"EP MailPro API Test Page"}),(0,a.jsx)(n.BT,{children:"A utility to test various endpoints and parameters of the EP MailPro API. The correct authentication (`X-MW-PUBLIC-KEY`) is automatically applied."})]}),(0,a.jsxs)(n.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{className:"font-semibold",children:"Test Presets"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>M("campaigns","GET",[{key:"page",value:"1"},{key:"per_page",value:"10"}]),children:"Get Campaigns"}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>M("campaigns/{uid}/stats"),children:"Get Campaign Stats"}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>M("campaigns/{uid}/unsubscribes"),children:"Get Campaign Unsubscribes"}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>M("lists"),children:"Get Lists"}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>M("lists/{uid}/subscribers"),children:"Get Subscribers"}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>M("lists/{uid}/subscribers","GET",[{key:"status",value:"unsubscribed"}]),children:"Get Unsubscribes"}),(0,a.jsx)(i.$,{variant:"destructive",size:"sm",onClick:()=>M("lists/{uid}/subscribers","POST",[],'{\n  "EMAIL": "example@test.com",\n  "status": "unsubscribed"\n}'),children:"Create/Unsubscribe Subscriber"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"method",children:"Method"}),(0,a.jsxs)("select",{id:"method",value:u,onChange:e=>h(e.target.value),className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"GET",children:"GET"}),(0,a.jsx)("option",{value:"POST",children:"POST"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(d.J,{htmlFor:"endpoint",children:"Endpoint Path"}),(0,a.jsx)(l.p,{id:"endpoint",value:e,onChange:e=>s(e.target.value),placeholder:"e.g., campaigns or lists/{uid}/subscribers"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(d.J,{htmlFor:"uid",children:["Campaign/List UID (replaces `'",t,"'` in path)"]}),(0,a.jsx)(l.p,{id:"uid",value:t,onChange:e=>o(e.target.value),placeholder:"Enter a specific UID to test"})]}),"GET"===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(d.J,{children:"Query Parameters"}),v.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.p,{value:e.key,onChange:e=>q(s,"key",e.target.value),placeholder:"Key"}),(0,a.jsx)(l.p,{value:e.value,onChange:e=>q(s,"value",e.target.value),placeholder:"Value"}),(0,a.jsx)(i.$,{variant:"destructive",size:"sm",onClick:()=>O(s),children:"Remove"})]},s)),(0,a.jsx)(i.$,{variant:"secondary",size:"sm",onClick:()=>g([...v,{key:"",value:""}]),children:"Add Parameter"})]}),"POST"===u&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"body",children:"Request Body (JSON)"}),(0,a.jsx)(c,{id:"body",value:b,onChange:e=>x(e.target.value),rows:5,placeholder:'{ "key": "value" }'})]}),(0,a.jsx)(i.$,{onClick:I,disabled:y,className:"w-full",children:y?(0,a.jsx)(f.A,{className:"animate-spin"}):"Run Test"}),(A||P||w)&&(0,a.jsxs)("div",{className:"space-y-6 pt-6 border-t",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Results"}),A&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-lg mb-2",children:"Request Info"}),(0,a.jsx)("pre",{className:"bg-muted p-4 rounded-md text-sm overflow-x-auto",children:`URL: ${A.url}

Headers:
${JSON.stringify(A.headers,null,2)}`})]}),P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-lg mb-2 text-destructive",children:"Error"}),(0,a.jsx)("pre",{className:"bg-destructive/10 text-destructive p-4 rounded-md text-sm overflow-x-auto whitespace-pre-wrap",children:P})]}),w&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-lg mb-2",children:"Response Body"}),(0,a.jsx)("pre",{className:"bg-muted p-4 rounded-md text-sm overflow-x-auto",children:JSON.stringify(w,null,2)})]})]})]})]})]})}function b(){let[e,s]=(0,r.useState)(!1);return e?(0,a.jsx)(h,{}):null}},39436:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o});var a=t(65239),r=t(48088),i=t(88170),n=t.n(i),l=t(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o={children:["",{children:["test-api",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,32022)),"/home/user/studio/src/app/test-api/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/test-api/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/test-api/page",pathname:"/test-api",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},48621:(e,s,t)=>{Promise.resolve().then(t.bind(t,34680))},48903:(e,s,t)=>{"use strict";t.r(s),t.d(s,{"0067fe022ae68bb788d0078518de7518dd262db809":()=>a.ME,"00807426360c2866649fea2b69a90e07a1eab79d6d":()=>a.Mr,"401debd37c56a1149e44bf2d2bcd5ed06b8e3ca457":()=>a.mk,"402d30a181f7d9d554d07daf8513ef4b075d357756":()=>a.tm,"4061fbe8a50e3fd214674a2e1bfed3286bb3b0afb4":()=>a.HW,"40ee5602e76ad4c4ecc1742a645ea73634620569cb":()=>a.iC,"606f0c2220a7ea490bc89fc1a2d9eb7648a15a3281":()=>a.$T,"7852ec3e7ddc063b967db2f7fa0623d0218c23a252":()=>a.qb});var a=t(16812)},54300:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var a=t(60687),r=t(43210),i=t(3416),n=r.forwardRef((e,s)=>(0,a.jsx)(i.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var l=t(24224),d=t(4780);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n,{ref:t,className:(0,d.cn)(o(),e),...s}));c.displayName=n.displayName},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[447,724,611,30,215,184],()=>t(39436));module.exports=a})();