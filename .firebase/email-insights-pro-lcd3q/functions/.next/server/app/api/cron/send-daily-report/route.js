(()=>{var e={};e.id=642,e.ids=[642],e.modules={247:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(r||(t.DiscrError=r={}))},288:(e,t,r)=>{"use strict";var n=r(71e3),o=r(16361),i=r(55085),a=r(39985),s=r(75738),l=r(19515),u=r(7509),c=r(97222),p=r(36407),d=r(15686),h=r(24666),m=r(22827),f=r(79843);t.schema=[n.map,i.seq,a.string,o.nullTag,l.trueTag,l.falseTag,c.intBin,c.intOct,c.int,c.intHex,u.floatNaN,u.floatExp,u.float,s.binary,p.merge,d.omap,h.pairs,m.set,f.intTime,f.floatTime,f.timestamp]},581:(e,t,r)=>{"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(58668));function o(){this.parents=[]}function i(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function a(e){i.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function s(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}o.prototype={constructor:o,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&!o.prototype[r.type])throw new n.default('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new n.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;t<r;t++)this.acceptKey(e,t),!e[t]&&(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new n.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);if(this.current=this.parents.shift(),!this.mutating||t)return t;if(!1!==t)return e}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:i,Decorator:i,BlockStatement:a,DecoratorBlock:a,PartialStatement:s,PartialBlockStatement:function(e){s.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=o,e.exports=t.default},643:e=>{"use strict";e.exports=require("node:perf_hooks")},987:(e,t,r)=>{"use strict";r.d(t,{s:()=>i,u:()=>o});var n=(0,r(48811).o)();function o(e){n=e}function i(e){try{n(e)}catch(e){}}},991:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CompressionAlgorithm:()=>i.U,OTLPExporterBase:()=>a.S,OTLPExporterBrowserBase:()=>y,OTLPExporterError:()=>u.N,OTLPExporterNodeBase:()=>n.u,appendResourcePathToUrl:()=>s.Ir,appendRootPathToUrlIfNeeded:()=>s.u3,configureCompression:()=>o.Ft,configureExporterTimeout:()=>s.rH,createHttpAgent:()=>o.KX,invalidTimeout:()=>s.xl,parseHeaders:()=>s.QG,sendWithHttp:()=>o.Pk,sendWithXhr:()=>d});var n=r(59524),o=r(11423),i=r(96526),a=r(11765),s=r(36646),l=r(86713),u=r(73213),c=function(){return(c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function d(e,t,r,n,o,i){var a,d,h=!1,m=setTimeout(function(){clearTimeout(a),h=!0,d.readyState===XMLHttpRequest.DONE?i(new u.N("Request Timeout")):d.abort()},n),f=function(n,g){void 0===n&&(n=s.J9),void 0===g&&(g=s.Tj),(d=new XMLHttpRequest).open("POST",t),Object.entries(c(c({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach(function(e){var t=p(e,2),r=t[0],n=t[1];d.setRequestHeader(r,n)}),d.send(e),d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE&&!1===h)if(d.status>=200&&d.status<=299)l.s.debug("xhr success",e),o(),clearTimeout(m),clearTimeout(a);else if(d.status&&(0,s.$q)(d.status)&&n>0){var t=void 0;g=s.Q5*g,a=setTimeout(function(){f(n-1,g)},d.getResponseHeader("Retry-After")?(0,s.u6)(d.getResponseHeader("Retry-After")):Math.round(Math.random()*(s.Rr-g)+g))}else i(new u.N("Failed to export with XHR (status: "+d.status+")",d.status)),clearTimeout(m),clearTimeout(a)},d.onabort=function(){h&&i(new u.N("Request Timeout")),clearTimeout(m),clearTimeout(a)},d.onerror=function(){h&&i(new u.N("Request Timeout")),clearTimeout(m),clearTimeout(a)}};f()}var h=r(34392),m=r(28038),f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=function(e){function t(t,r,n){void 0===t&&(t={});var o=e.call(this,t)||this;return o._useXHR=!1,o._serializer=r,o._contentType=n,o._useXHR=!!t.headers||"function"!=typeof navigator.sendBeacon,o._useXHR?o._headers=Object.assign({},(0,s.QG)(t.headers),h.parseKeyPairsIntoRecord((0,m._)().OTEL_EXPORTER_OTLP_HEADERS)):o._headers={},o}return f(t,e),t.prototype.onInit=function(){},t.prototype.onShutdown=function(){},t.prototype.send=function(e,t,r){var n,o=this;if(this._shutdownOnce.isCalled)return void l.s.debug("Shutdown already started. Cannot send objects");var i=null!=(n=this._serializer.serializeRequest(e))?n:new Uint8Array,a=new Promise(function(e,t){if(o._useXHR)d(i,o.url,g(g({},o._headers),{"Content-Type":o._contentType}),o.timeoutMillis,e,t);else{var r,n;r=o.url,n={type:o._contentType},navigator.sendBeacon(r,new Blob([i],n))?(l.s.debug("sendBeacon - can send",i),e()):t(new u.N("sendBeacon - cannot send "+i))}}).then(t,r);this._sendingPromises.push(a);var s=function(){var e=o._sendingPromises.indexOf(a);o._sendingPromises.splice(e,1)};a.then(s,s)},t}(a.S)},1037:(e,t,r)=>{"use strict";var n;r.d(t,{V:()=>n}),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(n||(n={}))},1256:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{enumFormatter:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455);let u={name:"enum",config:{contentType:"text/enum",constrained:!0},handler:e=>{let t;if(e&&"string"!==e.type&&"enum"!==e.type)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:"Must supply a 'string' or 'enum' schema type when using the enum parser format."});return e?.enum&&(t=`Output should be ONLY one of the following enum values. Do not output any additional information or add quotes.

${e.enum.map(e=>e.toString()).join("\n")}`),{parseMessage:e=>e.text.replace(/['"]/g,"").trim(),instructions:t}}}},1664:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullDef=void 0,t.parseNullDef=function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}},1708:e=>{"use strict";e.exports=require("node:process")},1746:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{assertValidToolNames:()=>h,resolveRestartedTools:()=>b,resolveResumeOption:()=>v,resolveToolRequest:()=>f,resolveToolRequests:()=>g,toPendingOutput:()=>m,toToolMap:()=>d}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(95566),c=r(92426),p=r(71622);function d(e){h(e);let t={};for(let r of e){let e=r.__action.name;t[e.substring(e.lastIndexOf("/")+1)]=r}return t}function h(e){let t={};for(let r of e){let e=r.__action.name,n=e.substring(e.lastIndexOf("/")+1);if(t[n])throw new l.GenkitError({status:"INVALID_ARGUMENT",message:`Cannot provide two tools with the same name: '${e}' and '${t[n]}'`});t[n]=e}}function m(e,t){return{...e,metadata:{...e.metadata,pendingOutput:t.toolResponse.output}}}async function f(e,t,r,n){let o=r[t.toolRequest.name];if(!o)throw new l.GenkitError({status:"NOT_FOUND",message:`Tool ${t.toolRequest.name} not found`,detail:{request:e}});if((0,c.isPromptAction)(o))return{preamble:await o(t.toolRequest.input),response:{toolResponse:{name:t.toolRequest.name,ref:t.toolRequest.ref,output:`transferred to ${t.toolRequest.name}`}}};try{let e=await o(t.toolRequest.input,function(e){let t={metadata:e.metadata};return e.metadata?.resumed&&(t.resumed=e.metadata.resumed),t}(t));return{response:(0,l.stripUndefinedProps)({toolResponse:{name:t.toolRequest.name,ref:t.toolRequest.ref,output:e}})}}catch(e){if(e instanceof p.ToolInterruptError||"ToolInterruptError"===e.name)return u.logger.debug(`tool '${r[t.toolRequest?.name].__action.name}' triggered an interrupt${e.metadata?`: ${JSON.stringify(e.metadata)}`:""}`),{interrupt:{toolRequest:t.toolRequest,metadata:{...t.metadata,interrupt:e.metadata||!0}}};throw e}}async function g(e,t,r){let n,o=d(await (0,p.resolveTools)(e,t.tools)),i=[],a=!1,s={...r,content:[...r.content]};return(await Promise.all(s.content.map(async(e,r)=>{if(!e.toolRequest)return;let{preamble:u,response:c,interrupt:p}=await f(t,e,o);if(u){if(n)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:"Model attempted to transfer to multiple prompt tools."});n=u}c&&(i.push(c),s.content.splice(r,1,m(e,c))),p&&(s.content.splice(r,1,p),a=!0)})),a)?{revisedModelMessage:s}:{toolMessage:{role:"tool",content:i},transferPreamble:n}}async function y(e,t,r){if(t.metadata?.pendingOutput){let{pendingOutput:e,...r}=t.metadata,n={toolResponse:{name:t.toolRequest.name,ref:t.toolRequest.ref,output:e},metadata:{...r,source:"pending"}};return(0,l.stripUndefinedProps)({toolResponse:n,toolRequest:{...t,metadata:r}})}let n=function(e,t){let r=t.toolRequest?.name||t.toolResponse?.name,n=t.toolRequest?.ref||t.toolResponse?.ref;return e.find(e=>e.toolResponse?.name===r&&e.toolResponse?.ref===n)}(e.resume?.respond||[],t);if(n){let{interrupt:e,...r}=t.metadata||{};return(0,l.stripUndefinedProps)({toolResponse:n,toolRequest:{...t,metadata:{...r,resolvedInterrupt:e}}})}let o=function(e,t){let r=t.toolRequest?.name||t.toolResponse?.name,n=t.toolRequest?.ref||t.toolResponse?.ref;return e.find(e=>e.toolRequest?.name===r&&e.toolRequest?.ref===n)}(e.resume?.restart||[],t);if(o){let{response:n,interrupt:i,preamble:a}=await f(e,o,r);if(a)throw new l.GenkitError({status:"INTERNAL",message:`Prompt tool '${o.toolRequest.name}' executed inside 'restart' resolution. This should never happen.`});if(i)return{interrupt:i};if(n){let{interrupt:e,...r}=t.metadata||{};return(0,l.stripUndefinedProps)({toolResponse:n,toolRequest:{...t,metadata:{...r,resolvedInterrupt:e}}})}}throw new l.GenkitError({status:"INVALID_ARGUMENT",message:`Unresolved tool request '${t.toolRequest.name}${t.toolRequest.ref?`#${t.toolRequest.ref}`:""}' was not handled by the 'resume' argument. You must supply replies or restarts for all interrupted tool requests.'`})}async function v(e,t){if(!t.resume)return{revisedRequest:t};let r=d(await (0,p.resolveTools)(e,t.tools)),n=t.messages,o=n.at(-1);if(!o||"model"!==o.role||!o.content.find(e=>e.toolRequest))throw new l.GenkitError({status:"FAILED_PRECONDITION",message:"Cannot 'resume' generation unless the previous message is a model message with at least one tool request."});let i=[],a=!1;if(o.content=await Promise.all(o.content.map(async e=>{if(!(0,p.isToolRequest)(e))return e;let n=await y(t,e,r);return n.interrupt?(a=!0,n.interrupt):(i.push(n.toolResponse),n.toolRequest)})),a)return{interruptedResponse:{finishReason:"interrupted",finishMessage:"One or more tools triggered interrupts while resuming generation. The model was not called.",message:o}};let s=o.content.filter(e=>!!e.toolRequest).length;if(i.length!==s)throw new l.GenkitError({status:"FAILED_PRECONDITION",message:`Expected ${s} tool responses but resolved to ${i.length}.`,detail:{toolResponses:i,message:o}});let u={role:"tool",content:i,metadata:{resumed:t.resume.metadata||!0}};return(0,l.stripUndefinedProps)({revisedRequest:{...t,resume:void 0,messages:[...n,u]},toolMessage:u})}async function b(e,t){let r=d(await (0,p.resolveTools)(e,t.tools)),n=t.messages.at(-1);if(!n||"model"!==n.role)return[];let o=n.content.filter(e=>e.toolRequest&&e.metadata?.resumed);return await Promise.all(o.map(async e=>{let{response:n,interrupt:o}=await f(t,e,r);return o||m(e,n)}))}},1791:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEffectsDef=void 0;let n=r(70350),o=r(18271);t.parseEffectsDef=function(e,t){return"input"===t.effectStrategy?(0,n.parseDef)(e.schema._def,t):(0,o.parseAnyDef)(t)}},2784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.defaultOptions=t.jsonDescription=t.ignoreOverride=void 0,t.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),t.jsonDescription=(e,t)=>{if(t.description)try{return{...e,...JSON.parse(t.description)}}catch{}return e},t.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},t.getDefaultOptions=e=>"string"==typeof e?{...t.defaultOptions,name:e}:{...t.defaultOptions,...e}},2843:e=>{"use strict";class t{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=t},2845:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},2929:(e,t,r)=>{"use strict";var n=r(46076),o=r(20923);function i(e){let t,r;try{t=RegExp("(.*?)(?<![ 	])[ 	]*\r?\n","sy"),r=RegExp("[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?\n","sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=t.exec(e);if(!n)return e;let o=n[1],i=" ",a=t.lastIndex;for(r.lastIndex=a;n=r.exec(e);)""===n[1]?"\n"===i?o+=i:i="\n":(o+=i+n[1],i=" "),a=r.lastIndex;let s=/[ \t]*(.*)/sy;return s.lastIndex=a,n=s.exec(e),o+i+(n?.[1]??"")}let a={0:"\0",a:"\x07",b:"\b",e:"\x1b",f:"\f",n:"\n",r:"\r",t:"	",v:"\v",N:"\x85",_:"\xa0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};t.resolveFlowScalar=function(e,t,r){let s,l,{offset:u,type:c,source:p,end:d}=e,h=(e,t,n)=>r(u+e,t,n);switch(c){case"scalar":s=n.Scalar.PLAIN,l=function(e,t){let r="";switch(e[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":r=`block scalar indicator ${e[0]}`;break;case"@":case"`":r=`reserved character ${e[0]}`}return r&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),i(e)}(p,h);break;case"single-quoted-scalar":var m,f;s=n.Scalar.QUOTE_SINGLE,m=p,f=h,("'"!==m[m.length-1]||1===m.length)&&f(m.length,"MISSING_CHAR","Missing closing 'quote"),l=i(m.slice(1,-1)).replace(/''/g,"'");break;case"double-quoted-scalar":s=n.Scalar.QUOTE_DOUBLE,l=function(e,t){let r="";for(let n=1;n<e.length-1;++n){let o=e[n];if("\r"!==o||"\n"!==e[n+1])if("\n"===o){let{fold:t,offset:o}=function(e,t){let r="",n=e[t+1];for(;(" "===n||"	"===n||"\n"===n||"\r"===n)&&("\r"!==n||"\n"===e[t+2]);)"\n"===n&&(r+="\n"),t+=1,n=e[t+1];return r||(r=" "),{fold:r,offset:t}}(e,n);r+=t,n=o}else if("\\"===o){let o=e[++n],i=a[o];if(i)r+=i;else if("\n"===o)for(o=e[n+1];" "===o||"	"===o;)o=e[++n+1];else if("\r"===o&&"\n"===e[n+1])for(o=e[++n+1];" "===o||"	"===o;)o=e[++n+1];else if("x"===o||"u"===o||"U"===o){let i={x:2,u:4,U:8}[o];r+=function(e,t,r,n){let o=e.substr(t,r),i=o.length===r&&/^[0-9a-fA-F]+$/.test(o)?parseInt(o,16):NaN;if(isNaN(i)){let o=e.substr(t-2,r+2);return n(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(i)}(e,n+1,i,t),n+=i}else{let o=e.substr(n-1,2);t(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),r+=o}}else if(" "===o||"	"===o){let t=n,i=e[n+1];for(;" "===i||"	"===i;)i=e[++n+1];"\n"!==i&&("\r"!==i||"\n"!==e[n+2])&&(r+=n>t?e.slice(t,n+1):o)}else r+=o}return('"'!==e[e.length-1]||1===e.length)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),r}(p,h);break;default:return r(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${c}`),{value:"",type:null,comment:"",range:[u,u+p.length,u+p.length]}}let g=u+p.length,y=o.resolveEnd(d,g,t,r);return{value:l,type:s,comment:y.comment,range:[u,g,y.offset]}}},3139:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectParser=void 0;let n=r(47649),o=r(18271),i=r(23592),a=r(52618),s=r(54437),l=r(32769),u=r(21754),c=r(92041),p=r(7604),d=r(1791),h=r(27040),m=r(95652),f=r(66766),g=r(6711),y=r(11955),v=r(50807),b=r(1664),_=r(94188),E=r(6028),S=r(14662),x=r(15229),w=r(19623),T=r(78624),A=r(50236),O=r(29781),N=r(24192),P=r(4983),C=r(3769),k=r(89470),I=r(63379),D=r(7631);t.selectParser=(e,t,r)=>{switch(t){case n.ZodFirstPartyTypeKind.ZodString:return(0,N.parseStringDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNumber:return(0,E.parseNumberDef)(e,r);case n.ZodFirstPartyTypeKind.ZodObject:return(0,S.parseObjectDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBigInt:return(0,a.parseBigintDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBoolean:return(0,s.parseBooleanDef)();case n.ZodFirstPartyTypeKind.ZodDate:return(0,c.parseDateDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUndefined:return(0,C.parseUndefinedDef)(r);case n.ZodFirstPartyTypeKind.ZodNull:return(0,b.parseNullDef)(r);case n.ZodFirstPartyTypeKind.ZodArray:return(0,i.parseArrayDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUnion:case n.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,k.parseUnionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodIntersection:return(0,m.parseIntersectionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodTuple:return(0,P.parseTupleDef)(e,r);case n.ZodFirstPartyTypeKind.ZodRecord:return(0,A.parseRecordDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLiteral:return(0,f.parseLiteralDef)(e,r);case n.ZodFirstPartyTypeKind.ZodEnum:return(0,h.parseEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,y.parseNativeEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNullable:return(0,_.parseNullableDef)(e,r);case n.ZodFirstPartyTypeKind.ZodOptional:return(0,x.parseOptionalDef)(e,r);case n.ZodFirstPartyTypeKind.ZodMap:return(0,g.parseMapDef)(e,r);case n.ZodFirstPartyTypeKind.ZodSet:return(0,O.parseSetDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLazy:return()=>e.getter()._def;case n.ZodFirstPartyTypeKind.ZodPromise:return(0,T.parsePromiseDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNaN:case n.ZodFirstPartyTypeKind.ZodNever:return(0,v.parseNeverDef)(r);case n.ZodFirstPartyTypeKind.ZodEffects:return(0,d.parseEffectsDef)(e,r);case n.ZodFirstPartyTypeKind.ZodAny:return(0,o.parseAnyDef)(r);case n.ZodFirstPartyTypeKind.ZodUnknown:return(0,I.parseUnknownDef)(r);case n.ZodFirstPartyTypeKind.ZodDefault:return(0,p.parseDefaultDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBranded:return(0,l.parseBrandedDef)(e,r);case n.ZodFirstPartyTypeKind.ZodReadonly:return(0,D.parseReadonlyDef)(e,r);case n.ZodFirstPartyTypeKind.ZodCatch:return(0,u.parseCatchDef)(e,r);case n.ZodFirstPartyTypeKind.ZodPipeline:return(0,w.parsePipelineDef)(e,r);case n.ZodFirstPartyTypeKind.ZodFunction:case n.ZodFirstPartyTypeKind.ZodVoid:case n.ZodFirstPartyTypeKind.ZodSymbol:default:return}}},3190:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;let n=r(37439),o=r(22964),i=r(45346),a={message:"boolean schema is false"};function s(e,t){let{gen:r,data:o}=e;(0,n.reportError)({gen:r,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e},a,void 0,t)}t.topBoolOrEmptySchema=function(e){let{gen:t,schema:r,validateName:n}=e;!1===r?s(e,!1):"object"==typeof r&&!0===r.$async?t.return(i.default.data):(t.assign((0,o._)`${n}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){let{gen:r,schema:n}=e;!1===n?(r.var(t,!1),s(e)):r.var(t,!0)}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3706:(e,t,r)=>{"use strict";let n=/\s+/g;class o{constructor(e,t){if(t=a(t),e instanceof o)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else return new o(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!y(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&f)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;let n=this.options.loose,o=n?c[p.HYPHENRANGELOOSE]:c[p.HYPHENRANGE];l("hyphen replace",e=e.replace(o,C(this.options.includePrerelease))),l("comparator trim",e=e.replace(c[p.COMPARATORTRIM],d)),l("tilde trim",e=e.replace(c[p.TILDETRIM],h)),l("caret trim",e=e.replace(c[p.CARETTRIM],m));let a=e.split(" ").map(e=>_(e,this.options)).join(" ").split(/\s+/).map(e=>P(e,this.options));n&&(a=a.filter(e=>(l("loose invalid filter",e,this.options),!!e.match(c[p.COMPARATORLOOSE])))),l("range list",a);let u=new Map;for(let e of a.map(e=>new s(e,this.options))){if(y(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");let v=[...u.values()];return i.set(t,v),v}intersects(e,t){if(!(e instanceof o))throw TypeError("a Range is required");return this.set.some(r=>b(r,t)&&e.set.some(e=>b(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(k(this.set[t],e,this.options))return!0;return!1}}e.exports=o;let i=new(r(2843)),a=r(98300),s=r(14239),l=r(38267),u=r(64487),{safeRe:c,t:p,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:m}=r(26515),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:g}=r(32397),y=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,b=(e,t)=>{let r=!0,n=e.slice(),o=n.pop();for(;r&&n.length;)r=n.every(e=>o.intersects(e,t)),o=n.pop();return r},_=(e,t)=>(l("comp",e,t),l("caret",e=w(e,t)),l("tildes",e=S(e,t)),l("xrange",e=A(e,t)),l("stars",e=N(e,t)),e),E=e=>!e||"x"===e.toLowerCase()||"*"===e,S=(e,t)=>e.trim().split(/\s+/).map(e=>x(e,t)).join(" "),x=(e,t)=>{let r=t.loose?c[p.TILDELOOSE]:c[p.TILDE];return e.replace(r,(t,r,n,o,i)=>{let a;return l("tilde",e,t,r,n,o,i),E(r)?a="":E(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:E(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(l("replaceTilde pr",i),a=`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,l("tilde return",a),a})},w=(e,t)=>e.trim().split(/\s+/).map(e=>T(e,t)).join(" "),T=(e,t)=>{l("caret",e,t);let r=t.loose?c[p.CARETLOOSE]:c[p.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,o,i,a)=>{let s;return l("caret",e,t,r,o,i,a),E(r)?s="":E(o)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:E(i)?s="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(l("replaceCaret pr",a),s="0"===r?"0"===o?`>=${r}.${o}.${i}-${a} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i}-${a} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===o?`>=${r}.${o}.${i}${n} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i} <${+r+1}.0.0-0`),l("caret return",s),s})},A=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>O(e,t)).join(" ")),O=(e,t)=>{e=e.trim();let r=t.loose?c[p.XRANGELOOSE]:c[p.XRANGE];return e.replace(r,(r,n,o,i,a,s)=>{l("xRange",e,r,n,o,i,a,s);let u=E(o),c=u||E(i),p=c||E(a);return"="===n&&p&&(n=""),s=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(i=0),a=0,">"===n?(n=">=",c?(o=+o+1,i=0):i=+i+1,a=0):"<="===n&&(n="<",c?o=+o+1:i=+i+1),"<"===n&&(s="-0"),r=`${n+o}.${i}.${a}${s}`):c?r=`>=${o}.0.0${s} <${+o+1}.0.0-0`:p&&(r=`>=${o}.${i}.0${s} <${o}.${+i+1}.0-0`),l("xRange return",r),r})},N=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[p.STAR],"")),P=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?p.GTE0PRE:p.GTE0],"")),C=e=>(t,r,n,o,i,a,s,l,u,c,p,d)=>(r=E(n)?"":E(o)?`>=${n}.0.0${e?"-0":""}`:E(i)?`>=${n}.${o}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`,l=E(u)?"":E(c)?`<${+u+1}.0.0-0`:E(p)?`<${u}.${+c+1}.0-0`:d?`<=${u}.${c}.${p}-${d}`:e?`<${u}.${c}.${+p+1}-0`:`<=${l}`,`${r} ${l}`.trim()),k=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},3769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUndefinedDef=void 0;let n=r(18271);t.parseUndefinedDef=function(e){return{not:(0,n.parseAnyDef)(e)}}},4048:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var n=r(19771),o=r(58504),i=r(86713),a=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};function s(){var e,t,r,s;return e=this,t=void 0,r=void 0,s=function(){var e,t,r,s;return a(this,function(a){switch(a.label){case 0:e="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",t="%windir%\\System32\\REG.exe","ia32"===n.arch&&"PROCESSOR_ARCHITEW6432"in n.env&&(t="%windir%\\sysnative\\cmd.exe /c "+t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,o.q)(t+" "+e)];case 2:if(2===(r=a.sent().stdout.split("REG_SZ")).length)return[2,r[1].trim()];return[3,4];case 3:return s=a.sent(),i.s.debug("error reading machine id: "+s),[3,4];case 4:return[2,""]}})},new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})}},4573:e=>{"use strict";e.exports=require("node:buffer")},4983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTupleDef=void 0;let n=r(70350);t.parseTupleDef=function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:(0,n.parseDef)(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}},5757:(e,t,r)=>{"use strict";let n;r.d(t,{YF:()=>A});var o=r(97955);let i=["debug","info","warn","error"],a="__genkit_logger",s={shouldLog(e){return i.indexOf(this.level)<=i.indexOf(e)},debug(...e){this.shouldLog("debug")&&console.debug(...e)},info(...e){this.shouldLog("info")&&console.info(...e)},warn(...e){this.shouldLog("warn")&&console.warn(...e)},error(...e){this.shouldLog("error")&&console.error(...e)},level:"info"};function l(){return global[a]||(global[a]=s),global[a]}class u{defaultLogger=s;init(e){global[a]=e}info(...e){l().info.apply(l(),e)}debug(...e){l().debug.apply(l(),e)}error(...e){l().error.apply(l(),e)}warn(...e){l().warn.apply(l(),e)}setLogLevel(e){l().level=e}logStructured(e,t){l().info(e,t)}logStructuredError(e,t){l().error(e,t)}}let c=new u;r(76423),r(88581),r(87334),r(73816);var p=r(27633);r(31179),r(68360),r(11346),r(72448),r(41479),r(79882);var d=r(94371),h=r(14659);Symbol("Let zodToJsonSchema decide on which parser to use");let m=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function f(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,o="",i=!1,a=!1,s=!1;for(let e=0;e<n.length;e++){if(i){o+=n[e],i=!1;continue}if(r.i){if(a){if(n[e].match(/[a-z]/)){s?(o+=n[e],o+=`${n[e-2]}-${n[e]}`.toUpperCase(),s=!1):"-"===n[e+1]&&n[e+2]?.match(/[a-z]/)?(o+=n[e],s=!0):o+=`${n[e]}${n[e].toUpperCase()}`;continue}}else if(n[e].match(/[a-z]/)){o+=`[${n[e]}${n[e].toUpperCase()}]`;continue}}if(r.m){if("^"===n[e]){o+=`(^|(?<=[\r
]))`;continue}else if("$"===n[e]){o+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===n[e]){o+=a?`${n[e]}\r
`:`[${n[e]}\r
]`;continue}o+=n[e],"\\"===n[e]?i=!0:a&&"]"===n[e]?a=!1:a||"["!==n[e]||(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}h(new d),p.GenkitError;r(643),r(40101),r(93283),r(67062),r(52060);function g(e){let t={...e};return t.withConfig=t=>g({...e,config:t}),t.withVersion=t=>g({...e,version:t}),t}var y=r(44192),v=r(14501),b=r(35774),_=r(81272),E=r(16540),S=r(94871);async function x(e,t){let r=["v1"];if(t?.apiVersion&&(r=Array.isArray(t?.apiVersion)?t?.apiVersion:[t?.apiVersion]),r.includes("v1beta")&&Object.keys(b.SUPPORTED_GEMINI_MODELS).forEach(r=>(0,b.defineGoogleAIModel)({ai:e,name:r,apiKey:t?.apiKey,apiVersion:"v1beta",baseUrl:t?.baseUrl,debugTraces:t?.experimental_debugTraces})),r.includes("v1")&&(Object.keys(b.SUPPORTED_GEMINI_MODELS).forEach(r=>(0,b.defineGoogleAIModel)({ai:e,name:r,apiKey:t?.apiKey,apiVersion:void 0,baseUrl:t?.baseUrl,debugTraces:t?.experimental_debugTraces})),Object.keys(v.SUPPORTED_MODELS).forEach(r=>(0,v.defineGoogleAIEmbedder)(e,r,{apiKey:t?.apiKey}))),t?.models)for(let r of t?.models){let n="string"==typeof r?r:r.name.split("/")[1],o="string"==typeof r?(0,b.gemini)(r):r;(0,b.defineGoogleAIModel)({ai:e,name:n,apiKey:t?.apiKey,baseUrl:t?.baseUrl,info:{...o.info,label:`Google AI - ${n}`},debugTraces:t?.experimental_debugTraces})}}async function w(e,t,r,n){var o,i,a;"embedder"===t?(o=e,i=r,a=n,(0,v.defineGoogleAIEmbedder)(o,`googleai/${i}`,{apiKey:a?.apiKey})):r.startsWith("veo")?"background-model"===t&&(0,S.defineVeoModel)(e,r,n?.apiKey):"model"===t&&function(e,t,r){if(t.startsWith("imagen"))return(0,_.defineImagenModel)(e,t,r?.apiKey);let n=(0,b.gemini)(t);(0,b.defineGoogleAIModel)({ai:e,name:n.name,apiKey:r?.apiKey,baseUrl:r?.baseUrl,info:{...n.info,label:`Google AI - ${t}`},debugTraces:r?.experimental_debugTraces})}(e,r,n)}async function T(e){let t=e?.apiKey||(0,y.getApiKeyFromEnvVar)();if(!t)return c.error("Pass in the API key or set the GEMINI_API_KEY or GOOGLE_API_KEY environment variable."),[];let r=await (0,E.listModels)(e?.baseUrl||"https://generativelanguage.googleapis.com",t);return[...r.filter(e=>e.supportedGenerationMethods.includes("predict")&&e.name.includes("imagen")).filter(e=>!e.description||!e.description.includes("deprecated")).map(e=>{let t=e.name.split("/").at(-1);return(0,o.modelActionMetadata)({name:`googleai/${t}`,info:{..._.GENERIC_IMAGEN_INFO},configSchema:_.ImagenConfigSchema})}),...r.filter(e=>e.supportedGenerationMethods.includes("predictLongRunning")&&e.name.includes("veo")).filter(e=>!e.description||!e.description.includes("deprecated")).map(e=>{let t=e.name.split("/").at(-1);return(0,o.modelActionMetadata)({name:`googleai/${t}`,info:{...S.GENERIC_VEO_INFO},configSchema:S.VeoConfigSchema,background:!0})}),...r.filter(e=>e.supportedGenerationMethods.includes("generateContent")).filter(e=>!e.description||!e.description.includes("deprecated")).map(e=>{let t=(0,b.gemini)(e.name.startsWith("models/")?e.name.substring(7):e.name);return(0,o.modelActionMetadata)({name:t.name,info:t.info,configSchema:b.GeminiConfigSchema})}),...r.filter(e=>e.supportedGenerationMethods.includes("embedContent")).filter(e=>!e.description||!e.description.includes("deprecated")).map(e=>{let t="googleai/"+(e.name.startsWith("models/")?e.name.substring(7):e.name);return(0,o.embedderActionMetadata)({name:t,configSchema:v.GeminiEmbeddingConfigSchema,info:{dimensions:768,label:`Google Gen AI - ${t}`,supports:{input:["text"]}}})})]}let A=function(e){var t,r,n;let o;return t=async t=>await x(t,e),r=async(t,r,n)=>await w(t,r,n,e),n=async()=>o||(o=await T(e)),e=>({name:"googleai",initializer:async()=>{await t(e)},resolver:async(t,n)=>{if(r)return await r(e,t,n)},listActions:async()=>n?await n():[]})};A.model=(e,t)=>e.startsWith("imagen")?g({name:`googleai/${e}`,config:t,configSchema:_.ImagenConfigSchema}):e.startsWith("veo")?g({name:`googleai/${e}`,config:t,configSchema:S.VeoConfigSchema}):g({name:`googleai/${e}`,config:t,configSchema:b.GeminiConfigSchema}),A.embedder=(e,t)=>(0,o.embedderRef)({name:`googleai/${e}`,config:t,configSchema:v.GeminiEmbeddingConfigSchema})},6028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumberDef=void 0;let n=r(88524);t.parseNumberDef=function(e,t){let r={type:"number"};if(!e.checks)return r;for(let o of e.checks)switch(o.kind){case"int":r.type="integer",(0,n.addErrorMessage)(r,"type",o.message,t);break;case"min":"jsonSchema7"===t.target?o.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",o.value,o.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",o.value,o.message,t):(o.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",o.value,o.message,t));break;case"max":"jsonSchema7"===t.target?o.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",o.value,o.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",o.value,o.message,t):(o.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",o.value,o.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",o.value,o.message,t)}return r}},6711:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMapDef=void 0;let n=r(70350),o=r(50236),i=r(18271);t.parseMapDef=function(e,t){return"record"===t.mapStrategy?(0,o.parseRecordDef)(e,t):{type:"array",maxItems:125,items:{type:"array",items:[(0,n.parseDef)(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||(0,i.parseAnyDef)(t),(0,n.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||(0,i.parseAnyDef)(t)],minItems:2,maxItems:2}}}},6750:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GenkitSpanProcessorWrapper:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(90704);class u{constructor(e){this.processor=e}forceFlush(){return this.processor.forceFlush()}onStart(e,t){return this.processor.onStart(e,t)}onEnd(e){return Object.keys(e.attributes).find(e=>e.startsWith(l.ATTR_PREFIX+":"))?this.processor.onEnd(new c(e)):this.processor.onEnd(e)}async shutdown(){return this.processor.shutdown()}}class c{constructor(e){this.span=e}get name(){return this.span.name}get kind(){return this.span.kind}get parentSpanId(){return this.span.parentSpanId}get startTime(){return this.span.startTime}get endTime(){return this.span.endTime}get status(){return this.span.status}get attributes(){let e={};for(let[t,r]of Object.entries(this.span.attributes))t.startsWith(l.ATTR_PREFIX+":")||(e[t]=r);return e}get links(){return this.span.links}get events(){return this.span.events}get duration(){return this.span.duration}get ended(){return this.span.ended}get resource(){return this.span.resource}get instrumentationLibrary(){return this.span.instrumentationLibrary}get droppedAttributesCount(){return this.span.droppedAttributesCount}get droppedEventsCount(){return this.span.droppedEventsCount}get droppedLinksCount(){return this.span.droppedLinksCount}spanContext(){return this.span.spanContext()}}},6962:(e,t,r)=>{"use strict";var n=r(75240);t.flowIndentCheck=function(e,t,r){if(t?.type==="flow-collection"){let o=t.end[0];o.indent===e&&("]"===o.source||"}"===o.source)&&n.containsNewline(t)&&r(o,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}},7110:(e,t,r)=>{"use strict";let n=r(58361);e.exports=(e,t)=>{let r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},7180:(e,t,r)=>{"use strict";let n=r(55511),o=r(29021),i=r(48178),a=r(27910).PassThrough,s=r(91292),l=r(18199),u=r(63356),c=r(89066),p=r(74508),d=r(38099),h=r(89047),m=r(39449),f=r(41748);class g{constructor(e,t){this.nodeCounter=0,t=t||{},this.baseBoundary=t.baseBoundary||n.randomBytes(8).toString("hex"),this.boundaryPrefix=t.boundaryPrefix||"--_NmP",this.disableFileAccess=!!t.disableFileAccess,this.disableUrlAccess=!!t.disableUrlAccess,this.normalizeHeaderKey=t.normalizeHeaderKey,this.date=new Date,this.rootNode=t.rootNode||this,this.keepBcc=!!t.keepBcc,t.filename&&(this.filename=t.filename,e||(e=l.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(t.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=t.parentNode,this.hostname=t.hostname,this.newline=t.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],e&&this.setHeader("Content-Type",e)}createChild(e,t){t||"object"!=typeof e||(t=e,e=void 0);let r=new g(e,t);return this.appendChild(r),r}appendChild(e){return e.rootNode!==this.rootNode&&(e.rootNode=this.rootNode,e._nodeId=++this.rootNode.nodeCounter),e.parentNode=this,this.childNodes.push(e),e}replace(e){return e===this?this:(this.parentNode.childNodes.forEach((t,r)=>{t===this&&(e.rootNode=this.rootNode,e.parentNode=this.parentNode,e._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,e.parentNode.childNodes[r]=e)}),e)}remove(){if(!this.parentNode)return this;for(let e=this.parentNode.childNodes.length-1;e>=0;e--)if(this.parentNode.childNodes[e]===this)return this.parentNode.childNodes.splice(e,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(e,t){let r=!1,n;if(!t&&e&&"object"==typeof e)return e.key&&"value"in e?this.setHeader(e.key,e.value):Array.isArray(e)?e.forEach(e=>{this.setHeader(e.key,e.value)}):Object.keys(e).forEach(t=>{this.setHeader(t,e[t])}),this;n={key:e=this._normalizeHeaderKey(e),value:t};for(let t=0,o=this._headers.length;t<o;t++)this._headers[t].key===e&&(r?(this._headers.splice(t,1),t--,o--):(this._headers[t]=n,r=!0));return r||this._headers.push(n),this}addHeader(e,t){return!t&&e&&"object"==typeof e?e.key&&e.value?this.addHeader(e.key,e.value):Array.isArray(e)?e.forEach(e=>{this.addHeader(e.key,e.value)}):Object.keys(e).forEach(t=>{this.addHeader(t,e[t])}):Array.isArray(t)?t.forEach(t=>{this.addHeader(e,t)}):this._headers.push({key:this._normalizeHeaderKey(e),value:t}),this}getHeader(e){e=this._normalizeHeaderKey(e);for(let t=0,r=this._headers.length;t<r;t++)if(this._headers[t].key===e)return this._headers[t].value}setContent(e){return this.content=e,"function"==typeof this.content.pipe?(this._contentErrorHandler=e=>{this.content.removeListener("error",this._contentErrorHandler),this.content=e},this.content.once("error",this._contentErrorHandler)):"string"==typeof this.content&&(this._isPlainText=l.isPlainText(this.content),this._isPlainText&&l.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(e){let t;e||(t=new Promise((t,r)=>{e=s.callbackPromise(t,r)}));let r=this.createReadStream(),n=[],o=0,i=!1;return r.on("readable",()=>{let e;for(;null!==(e=r.read());)n.push(e),o+=e.length}),r.once("error",t=>{if(!i)return i=!0,e(t)}),r.once("end",t=>{if(!i)return i=!0,t&&t.length&&(n.push(t),o+=t.length),e(null,Buffer.concat(n,o))}),t}getTransferEncoding(){let e=!1,t=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return this.content&&((e=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim())&&["base64","quoted-printable"].includes(e)||(/^text\//i.test(t)?e=this._isPlainText&&!this._hasLongLines?"7bit":"string"==typeof this.content||this.content instanceof Buffer?"Q"===this._getTextEncoding(this.content)?"quoted-printable":"base64":"B"===this.textEncoding?"base64":"quoted-printable":/^(multipart|message)\//i.test(t)||(e=e||"base64"))),e}buildHeaders(){let e=this.getTransferEncoding(),t=[];if(e&&this.setHeader("Content-Transfer-Encoding",e),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this){this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0");for(let e=this._headers.length-2;e>=0;e--){let t=this._headers[e];"Content-Type"===t.key&&(this._headers.splice(e,1),this._headers.push(t))}}return this._headers.forEach(e=>{let r,n,o=e.key,i=e.value,a={};if(!i||"object"!=typeof i||["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(o)||(Object.keys(i).forEach(e=>{"value"!==e&&(a[e]=i[e])}),(i=(i.value||"").toString()).trim())){if(a.prepared)return void(a.foldLines?t.push(l.foldLines(o+": "+i)):t.push(o+": "+i));switch(e.key){case"Content-Disposition":r=l.parseHeaderValue(i),this.filename&&(r.params.filename=this.filename),i=l.buildHeaderValue(r);break;case"Content-Type":r=l.parseHeaderValue(i),this._handleContentType(r),r.value.match(/^text\/plain\b/)&&"string"==typeof this.content&&/[\u0080-\uFFFF]/.test(this.content)&&(r.params.charset="utf-8"),i=l.buildHeaderValue(r),this.filename&&(((n=this._encodeWords(this.filename))!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(n))&&(n='"'+n+'"'),i+="; name="+n);break;case"Bcc":if(!this.keepBcc)return}if(((i=this._encodeHeaderValue(o,i))||"").toString().trim()){if("function"==typeof this.normalizeHeaderKey){let e=this.normalizeHeaderKey(o,i);e&&"string"==typeof e&&e.length&&(o=e)}t.push(l.foldLines(o+": "+i,76))}}}),t.join("\r\n")}createReadStream(e){let t,r=new a(e=e||{}),n=r;this.stream(r,e,e=>{if(e)return void n.emit("error",e);r.end()});for(let e=0,r=this._transforms.length;e<r;e++)t="function"==typeof this._transforms[e]?this._transforms[e]():this._transforms[e],n.once("error",e=>{t.emit("error",e)}),n=n.pipe(t);t=new h,n.once("error",e=>{t.emit("error",e)}),n=n.pipe(t);for(let e=0,r=this._processFuncs.length;e<r;e++)n=(t=this._processFuncs[e])(n);if(this.newline){let e=["win","windows","dos","\r\n"].includes(this.newline.toString().toLowerCase())?new m:new f,t=n.pipe(e);return n.on("error",e=>t.emit("error",e)),t}return n}transform(e){this._transforms.push(e)}processFunc(e){this._processFuncs.push(e)}stream(e,t,r){let n,o,i=this.getTransferEncoding(),a=!1,s=e=>{a||(a=!0,r(e))},l=()=>{let r=0,n=()=>{if(r>=this.childNodes.length)return e.write("\r\n--"+this.boundary+"--\r\n"),s();let o=this.childNodes[r++];e.write((r>1?"\r\n":"")+"--"+this.boundary+"\r\n"),o.stream(e,t,e=>{if(e)return s(e);setImmediate(n)})};if(!this.multipart)return s();setImmediate(n)};this._raw?setImmediate(()=>{if("[object Error]"===Object.prototype.toString.call(this._raw))return s(this._raw);"function"==typeof this._raw.pipe&&this._raw.removeListener("error",this._contentErrorHandler);let t=this._getStream(this._raw);t.pipe(e,{end:!1}),t.on("error",t=>e.emit("error",t)),t.on("end",l)}):(e.write(this.buildHeaders()+"\r\n\r\n"),setImmediate(()=>{if(!this.content)return setImmediate(l);{if("[object Error]"===Object.prototype.toString.call(this.content))return s(this.content);"function"==typeof this.content.pipe&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=e=>s(e),this.content.once("error",this._contentErrorHandler));let r=()=>{["quoted-printable","base64"].includes(i)?((n=new("base64"===i?c:u).Encoder(t)).pipe(e,{end:!1}),n.once("end",l),n.once("error",e=>s(e)),(o=this._getStream(this.content)).pipe(n)):((o=this._getStream(this.content)).pipe(e,{end:!1}),o.once("end",l)),o.once("error",e=>s(e))};if(this.content._resolve){let e=[],t=0,n=!1,o=this._getStream(this.content);o.on("error",e=>{n||(n=!0,s(e))}),o.on("readable",()=>{let r;for(;null!==(r=o.read());)e.push(r),t+=r.length}),o.on("end",()=>{n||(n=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(e,t),setImmediate(r))})}else setImmediate(r);return}}))}setEnvelope(e){let t;this._envelope={from:!1,to:[]},e.from&&(t=[],this._convertAddresses(this._parseAddresses(e.from),t),(t=t.filter(e=>e&&e.address)).length&&t[0]&&(this._envelope.from=t[0].address)),["to","cc","bcc"].forEach(t=>{e[t]&&this._convertAddresses(this._parseAddresses(e[t]),this._envelope.to)}),this._envelope.to=this._envelope.to.map(e=>e.address).filter(e=>e);let r=["to","cc","bcc","from"];return Object.keys(e).forEach(t=>{r.includes(t)||(this._envelope[t]=e[t])}),this}getAddresses(){let e={};return this._headers.forEach(t=>{let r=t.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(r)&&(Array.isArray(e[r])||(e[r]=[]),this._convertAddresses(this._parseAddresses(t.value),e[r]))}),e}getEnvelope(){if(this._envelope)return this._envelope;let e={from:!1,to:[]};return this._headers.forEach(t=>{let r=[];"From"===t.key||!e.from&&["Reply-To","Sender"].includes(t.key)?(this._convertAddresses(this._parseAddresses(t.value),r),r.length&&r[0]&&(e.from=r[0].address)):["To","Cc","Bcc"].includes(t.key)&&this._convertAddresses(this._parseAddresses(t.value),e.to)}),e.to=e.to.map(e=>e.address),e}messageId(){let e=this.getHeader("Message-ID");return e||(e=this._generateMessageId(),this.setHeader("Message-ID",e)),e}setRaw(e){return this._raw=e,this._raw&&"function"==typeof this._raw.pipe&&(this._contentErrorHandler=e=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=e},this._raw.once("error",this._contentErrorHandler)),this}_getStream(e){let t;return e._resolvedValue?(t=new a,setImmediate(()=>{try{t.end(e._resolvedValue)}catch(e){t.emit("error",e)}}),t):"function"==typeof e.pipe?e:e&&"string"==typeof e.path&&!e.href?this.disableFileAccess?(t=new a,setImmediate(()=>t.emit("error",Error("File access rejected for "+e.path))),t):o.createReadStream(e.path):e&&"string"==typeof e.href?this.disableUrlAccess?(t=new a,setImmediate(()=>t.emit("error",Error("Url access rejected for "+e.href))),t):d(e.href,{headers:e.httpHeaders}):(t=new a,setImmediate(()=>{try{t.end(e||"")}catch(e){t.emit("error",e)}}),t)}_parseAddresses(e){return[].concat.apply([],[].concat(e).map(e=>e&&e.address?(e.address=this._normalizeAddress(e.address),e.name=e.name||"",[e]):p(e)))}_normalizeHeaderKey(e){return e=(e||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,e=>e.toUpperCase()).replace(/^Content-Features$/i,"Content-features")}_handleContentType(e){this.contentType=e.value.trim().toLowerCase(),this.multipart=!!/^multipart\//i.test(this.contentType)&&this.contentType.substr(this.contentType.indexOf("/")+1),this.multipart?this.boundary=e.params.boundary=e.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(e,t){switch(e=this._normalizeHeaderKey(e)){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(t));case"Message-ID":case"In-Reply-To":case"Content-Id":return"<"!==(t=(t||"").toString().replace(/\r?\n|\r/g," ")).charAt(0)&&(t="<"+t),">"!==t.charAt(t.length-1)&&(t+=">"),t;case"References":return(t=[].concat.apply([],[].concat(t||"").map(e=>(e=(e||"").toString().replace(/\r?\n|\r/g," ").trim()).replace(/<[^>]*>/g,e=>e.replace(/\s/g,"")).split(/\s+/))).map(e=>("<"!==e.charAt(0)&&(e="<"+e),">"!==e.charAt(e.length-1)&&(e+=">"),e))).join(" ").trim();case"Date":if("[object Date]"===Object.prototype.toString.call(t))return t.toUTCString().replace(/GMT/,"+0000");return t=(t||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(t);case"Content-Type":case"Content-Disposition":return(t||"").toString().replace(/\r?\n|\r/g," ");default:return t=(t||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(t)}}_convertAddresses(e,t){let r=[];return t=t||[],[].concat(e||[]).forEach(e=>{if(e.address)e.address=this._normalizeAddress(e.address),e.name?e.name&&r.push(`${this._encodeAddressName(e.name)} <${e.address}>`):r.push(e.address.indexOf(" ")>=0?`<${e.address}>`:`${e.address}`),e.address&&!t.filter(t=>t.address===e.address).length&&t.push(e);else if(e.group){let n=(e.group.length?this._convertAddresses(e.group,t):"").trim();r.push(`${this._encodeAddressName(e.name)}:${n};`)}}),r.join(", ")}_normalizeAddress(e){let t,r=(e=(e||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim()).lastIndexOf("@");if(r<0)return e;let n=e.substr(0,r),o=e.substr(r+1);try{t=i.toASCII(o.toLowerCase())}catch(e){}return n.indexOf(" ")>=0&&('"'!==n.charAt(0)&&(n='"'+n),'"'!==n.substr(-1)&&(n+='"')),`${n}@${t}`}_encodeAddressName(e){if(!/^[\w ]*$/.test(e))if(/^[\x20-\x7e]*$/.test(e))return'"'+e.replace(/([\\"])/g,"\\$1")+'"';else return l.encodeWord(e,this._getTextEncoding(e),52);return e}_encodeWords(e){return l.encodeWords(e,this._getTextEncoding(e),52,!0)}_getTextEncoding(e){e=(e||"").toString();let t=this.textEncoding;return t||(t=(e.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length<(e.match(/[a-z]/gi)||[]).length?"Q":"B"),t}_generateMessageId(){return"<"+[2,2,2,6].reduce((e,t)=>e+"-"+n.randomBytes(t).toString("hex"),n.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}}e.exports=g},7252:e=>{"use strict";e.exports=require("express")},7269:(e,t,r)=>{"use strict";r.d(t,{Dm:()=>m,nW:()=>f,xc:()=>h});var n=r(98542),o=r(65183),i=r(92971),a=r(77572),s=n.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse,l=n.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest,u=n.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse,c=n.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest,p=n.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse,d=n.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest,h={serializeRequest:function(e){var t=(0,a.W)(e);return l.encode(t).finish()},deserializeResponse:function(e){return s.decode(e)}},m={serializeRequest:function(e){var t=(0,i.K)(e);return c.encode(t).finish()},deserializeResponse:function(e){return u.decode(e)}},f={serializeRequest:function(e){var t=(0,o.s)(e);return d.encode(t).finish()},deserializeResponse:function(e){return p.decode(e)}}},7509:(e,t,r)=>{"use strict";var n=r(46076),o=r(11206);let i={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:o.stringifyNumber};t.float={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){let t=new n.Scalar(parseFloat(e.replace(/_/g,""))),r=e.indexOf(".");if(-1!==r){let n=e.substring(r+1).replace(/_/g,"");"0"===n[n.length-1]&&(t.minFractionDigits=n.length)}return t},stringify:o.stringifyNumber},t.floatExp={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():o.stringifyNumber(e)}},t.floatNaN=i},7562:(e,t,r)=>{"use strict";var n=r(99122);t.toJS=function e(t,r,o){if(Array.isArray(t))return t.map((t,r)=>e(t,String(r),o));if(t&&"function"==typeof t.toJSON){if(!o||!n.hasAnchor(t))return t.toJSON(r,o);let e={aliasCount:0,count:1,res:void 0};o.anchors.set(t,e),o.onCreate=t=>{e.res=t,delete o.onCreate};let i=t.toJSON(r,o);return o.onCreate&&o.onCreate(i),i}return"bigint"!=typeof t||o?.keep?t:Number(t)}},7575:(e,t,r)=>{"use strict";let n=r(91645),o=r(34631),i=r(79551);e.exports=function e(t,r,a,s){let l,u,c,p=i.parse(t);l={host:p.hostname,port:Number(p.port)?Number(p.port):"https:"===p.protocol?443:80},"https:"===p.protocol?(l.rejectUnauthorized=!1,u=o.connect.bind(o)):u=n.connect.bind(n);let d=!1,h=e=>{if(!d){d=!0;try{c.destroy()}catch(e){}s(e)}},m=()=>{let e=Error("Proxy socket timed out");e.code="ETIMEDOUT",h(e)};(c=u(l,()=>{if(d)return;let e={Host:a+":"+r,Connection:"close"};p.auth&&(e["Proxy-Authorization"]="Basic "+Buffer.from(p.auth).toString("base64")),c.write("CONNECT "+a+":"+r+" HTTP/1.1\r\n"+Object.keys(e).map(t=>t+": "+e[t]).join("\r\n")+"\r\n\r\n");let t="",n=e=>{let r,o;if(!d&&(t+=e.toString("binary"),r=t.match(/\r\n\r\n/))){if(c.removeListener("data",n),o=t.substr(r.index+r[0].length),t=t.substr(0,r.index),o&&c.unshift(Buffer.from(o,"binary")),d=!0,!(r=t.match(/^HTTP\/\d+\.\d+ (\d+)/i))||"2"!==(r[1]||"").charAt(0)){try{c.destroy()}catch(e){}return s(Error("Invalid response from proxy"+(r&&": "+r[1]||"")))}return c.removeListener("error",h),c.removeListener("timeout",m),c.setTimeout(0),s(null,c)}};c.on("data",n)})).setTimeout(e.timeout||3e4),c.on("timeout",m),c.once("error",h)}},7604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDefaultDef=void 0;let n=r(70350);t.parseDefaultDef=function(e,t){return{...(0,n.parseDef)(e.innerType._def,t),default:e.defaultValue()}}},7631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseReadonlyDef=void 0;let n=r(70350);t.parseReadonlyDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},7895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;let n=r(70350),o=r(68078),i=r(18271);t.zodToJsonSchema=(e,t)=>{let r=(0,o.getRefs)(t),a="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,o])=>({...e,[t]:(0,n.parseDef)(o._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??(0,i.parseAnyDef)(r)}),{}):void 0,s="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,l=(0,n.parseDef)(e._def,void 0===s?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??(0,i.parseAnyDef)(r),u="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==u&&(l.title=u),r.flags.hasReferencedOpenAiAnyType&&(a||(a={}),a[r.openAiAnyTypeName]||(a[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let c=void 0===s?a?{...l,[r.definitionPath]:a}:l:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...a,[s]:l}};return"jsonSchema7"===r.target?c.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c}},8008:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{calculateTTL:()=>E,extractCacheConfig:()=>v,findLastIndex:()=>_,generateCacheKey:()=>f,getContentForCache:()=>g,lookupContextCache:()=>y,validateContextCacheRequest:()=>b}),e.exports=u(o({},"__esModule",{value:!0}),c);var p=((e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(r(55511)),d=r(48334),h=r(90780),m=r(21932);function f(e){return p.default.createHash("sha256").update(JSON.stringify(e)).digest("hex")}function g(e,t,r,n){if(!r)throw Error("No model version provided for context caching");if(!t.history?.length)throw Error("No history provided for context caching");var o=e,i=t;if(i.history?.length!==o.messages.length-1)throw new d.GenkitError({status:"INTERNAL",message:"Genkit request history and Gemini chat request history length do not match"});let{endOfCachedContents:a,cacheConfig:s}=n,l={model:r,contents:t.history.slice(0,a+1)};return t.history=t.history.slice(a+1),{cachedContent:l,chatRequest:t,cacheConfig:s}}async function y(e,t,r=100,n=100){let o,i=0;try{for(;i<r;){let{cachedContents:r,nextPageToken:a}=await e.list({pageSize:n,pageToken:o}),s=r?.find(e=>e.displayName===t);if(s)return s;if(!a)break;o=a,i++}}catch(t){let e=t instanceof Error?t.message:"Unknown Network Error";throw new d.GenkitError({status:"INTERNAL",message:`Error looking up context cache: ${e}`})}return null}let v=e=>{let t=_(e.messages,e=>!!e.metadata?.cache);return -1===t?null:{endOfCachedContents:t,cacheConfig:m.cacheConfigSchema.parse(e.messages[t].metadata?.cache)}};function b(e,t){if(!t||!h.CONTEXT_CACHE_SUPPORTED_MODELS.includes(t))throw new d.GenkitError({status:"INVALID_ARGUMENT",message:h.INVALID_ARGUMENT_MESSAGES.modelVersion});if(e.tools?.length)throw new d.GenkitError({status:"INVALID_ARGUMENT",message:h.INVALID_ARGUMENT_MESSAGES.tools});if(e.config?.codeExecution)throw new d.GenkitError({status:"INVALID_ARGUMENT",message:h.INVALID_ARGUMENT_MESSAGES.codeExecution});return!0}function _(e,t){for(let r=e.length-1;r>=0;r--)if(t(e[r],r,e))return r;return -1}function E(e){return!0===e.cacheConfig?h.DEFAULT_TTL:!1===e.cacheConfig?0:e.cacheConfig.ttlSeconds||h.DEFAULT_TTL}},8010:(e,t,r)=>{"use strict";r.d(t,{db:()=>s});var n=r(89579),o=r(34717),i=r(25492);let a=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyDLtdLHWg5nW07lFUlcmqsa90WKjTHMtlM",authDomain:"email-insights-pro-lcd3q.firebaseapp.com",projectId:"email-insights-pro-lcd3q",storageBucket:"email-insights-pro-lcd3q.firebasestorage.app",messagingSenderId:"56610768571",appId:"1:56610768571:web:04c62c52c047925da14b9e"}),s=(0,o.aU)(a);(0,i.xI)(a)},8346:(e,t,r)=>{"use strict";let n=r(94735),o=r(89231),i=r(20068),a=r(16435),s=r(91292),l=r(49074);class u extends n{constructor(e){let t;super(),"string"==typeof(e=e||{})&&(e={url:e});let r=e.service;"function"==typeof e.getSocket&&(this.getSocket=e.getSocket),e.url&&(t=s.parseConnectionUrl(e.url),r=r||t.service),this.options=s.assign(!1,e,t,r&&a(r)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=s.getLogger(this.options,{component:this.options.component||"smtp-pool"});let n=new i(this.options);this.name="SMTP (pool)",this.version=l.version+"[client:"+n.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}getSocket(e,t){return setImmediate(()=>t(null,!1))}send(e,t){return!this._closed&&(this._queue.push({mail:e,requeueAttempts:0,callback:t}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate(()=>this._processMessages()),!0)}close(){let e,t=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!t&&!this._queue.length)return;for(let r=t-1;r>=0;r--)this._connections[r]&&this._connections[r].available&&((e=this._connections[r]).close(),this.logger.info({tnx:"connection",cid:e.id,action:"removed"},"Connection #%s removed",e.id));if(t&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let r=()=>{if(!this._queue.length)return void this.logger.debug({tnx:"connection"},"Pending queue entries cleared");let t=this._queue.shift();if(t&&"function"==typeof t.callback)try{t.callback(Error("Connection pool was closed"))}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}setImmediate(r)};setImmediate(r)}_processMessages(){let e,t,r;if(this._closed)return;if(!this._queue.length){this.idling||(this.idling=!0,this.emit("idle"));return}for(t=0,r=this._connections.length;t<r;t++)if(this._connections[t].available){e=this._connections[t];break}if(!e&&this._connections.length<this.options.maxConnections&&(e=this._createConnection()),!e){this.idling=!1;return}!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let n=e.queueEntry=this._queue.shift();n.messageId=(e.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),e.available=!1,this.logger.debug({tnx:"pool",cid:e.id,messageId:n.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",n.messageId,e.id,e.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),e.send(n.mail,(t,r)=>{if(n===e.queueEntry){try{n.callback(t,r)}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}})}_createConnection(){let e=new o(this);return e.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:e.id,action:"conection"},"Created new pool resource #%s",e.id),e.on("available",()=>{this.logger.debug({tnx:"connection",cid:e.id,action:"available"},"Connection #%s became available",e.id),this._closed?this.close():this._processMessages()}),e.once("error",t=>{if("EMAXLIMIT"!==t.code?this.logger.error({err:t,tnx:"pool",cid:e.id},"Pool Error for #%s: %s",e.id,t.message):this.logger.debug({tnx:"pool",cid:e.id,action:"maxlimit"},"Max messages limit exchausted for #%s",e.id),e.queueEntry){try{e.queueEntry.callback(t)}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}this._removeConnection(e),this._continueProcessing()}),e.once("close",()=>{this.logger.info({tnx:"connection",cid:e.id,action:"closed"},"Connection #%s was closed",e.id),this._removeConnection(e),e.queueEntry?setTimeout(()=>{e.queueEntry&&(this._shouldRequeuOnConnectionClose(e.queueEntry)?this._requeueEntryOnConnectionClose(e):this._failDeliveryOnConnectionClose(e)),this._continueProcessing()},50):this._continueProcessing()}),this._connections.push(e),e}_shouldRequeuOnConnectionClose(e){return void 0===this.options.maxRequeues||this.options.maxRequeues<0||e.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(e){if(e.queueEntry&&e.queueEntry.callback){try{e.queueEntry.callback(Error("Reached maximum number of retries after connection was closed"))}catch(t){this.logger.error({err:t,tnx:"callback",messageId:e.queueEntry.messageId,cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}}_requeueEntryOnConnectionClose(e){e.queueEntry.requeueAttempts=e.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:e.id,messageId:e.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",e.queueEntry.messageId,e.id,e.queueEntry.requeueAttempts),this._queue.unshift(e.queueEntry),e.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout(()=>this._processMessages(),100)}_removeConnection(e){let t=this._connections.indexOf(e);-1!==t&&this._connections.splice(t,1)}_checkRateLimit(e){if(!this._rateLimit.limit)return e();let t=Date.now();return this._rateLimit.counter<this._rateLimit.limit?e():(this._rateLimit.waiting.push(e),this._rateLimit.checkpoint<=t-this._rateLimit.delta)?this._clearRateLimit():void(!this._rateLimit.timeout&&(this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(t-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=t))}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;)setImmediate(this._rateLimit.waiting.shift())}isIdle(){return this.idling}verify(e){let t;e||(t=new Promise((t,r)=>{e=s.callbackPromise(t,r)}));let r=new o(this).auth;return this.getSocket(this.options,(t,n)=>{if(t)return e(t);let o=this.options;n&&n.connection&&(this.logger.info({tnx:"proxy",remoteAddress:n.connection.remoteAddress,remotePort:n.connection.remotePort,destHost:o.host||"",destPort:o.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",n.connection.remoteAddress,n.connection.remotePort,o.host||"",o.port||""),o=s.assign(!1,o),Object.keys(n).forEach(e=>{o[e]=n[e]}));let a=new i(o),l=!1;a.once("error",t=>{if(!l)return l=!0,a.close(),e(t)}),a.once("end",()=>{if(!l)return l=!0,e(Error("Connection closed"))});let u=()=>{if(!l)return l=!0,a.quit(),e(null,!0)};a.connect(()=>{if(!l)if(r&&(a.allowsAuth||o.forceAuth))a.login(r,t=>{if(!l){if(t)return l=!0,a.close(),e(t);u()}});else if(!r&&a.allowsAuth&&o.forceAuth){let t=Error("Authentication info was not provided");return t.code="NoAuth",l=!0,a.close(),e(t)}else u()})}),t}}e.exports=u},8404:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{CommonRetrieverOptionsSchema:()=>_,Document:()=>p.Document,DocumentDataSchema:()=>p.DocumentDataSchema,IndexerInfoSchema:()=>S,RetrieverInfoSchema:()=>f,defineIndexer:()=>y,defineRetriever:()=>g,defineSimpleRetriever:()=>w,index:()=>b,indexerRef:()=>x,retrieve:()=>v,retrieverRef:()=>E}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(72448),c=r(40101),p=r(40101);let d=l.z.object({query:c.DocumentDataSchema,options:l.z.any().optional()}),h=l.z.object({documents:l.z.array(c.DocumentDataSchema)}),m=l.z.object({documents:l.z.array(c.DocumentDataSchema),options:l.z.any().optional()}),f=l.z.object({label:l.z.string().optional(),supports:l.z.object({media:l.z.boolean().optional()}).optional()});function g(e,t,r){var n;return(n=(0,l.defineAction)(e,{actionType:"retriever",name:t.name,inputSchema:t.configSchema?d.extend({options:t.configSchema.optional()}):d,outputSchema:h,metadata:{type:"retriever",info:t.info,retriever:{customOptions:t.configSchema?(0,u.toJsonSchema)({schema:t.configSchema}):void 0}}},e=>r(new c.Document(e.query),e.options))).__configSchema=t.configSchema,n}function y(e,t,r){var n;return(n=(0,l.defineAction)(e,{actionType:"indexer",name:t.name,inputSchema:t.configSchema?m.extend({options:t.configSchema.optional()}):m,outputSchema:l.z.void(),metadata:{type:"indexer",embedderInfo:t.embedderInfo,indexer:{customOptions:t.configSchema?(0,u.toJsonSchema)({schema:t.configSchema}):void 0}}},e=>r(e.documents.map(e=>new c.Document(e)),e.options))).__configSchema=t.configSchema,n}async function v(e,t){let r;if(!(r="string"==typeof t.retriever?await e.lookupAction(`/retriever/${t.retriever}`):Object.hasOwnProperty.call(t.retriever,"info")?await e.lookupAction(`/retriever/${t.retriever.name}`):t.retriever))throw Error("Unable to resolve the retriever");return(await r({query:"string"==typeof t.query?c.Document.fromText(t.query):t.query,options:t.options})).documents.map(e=>new c.Document(e))}async function b(e,t){let r;if(!(r="string"==typeof t.indexer?await e.lookupAction(`/indexer/${t.indexer}`):Object.hasOwnProperty.call(t.indexer,"info")?await e.lookupAction(`/indexer/${t.indexer.name}`):t.indexer))throw Error("Unable to utilize the provided indexer");return await r({documents:t.documents,options:t.options})}let _=l.z.object({k:l.z.number().describe("Number of documents to retrieve").optional()});function E(e){return{...e}}let S=f;function x(e){return{...e}}function w(e,t,r){return g(e,{name:t.name,configSchema:t.configSchema},async(e,n)=>({documents:(await r(e,n)).map(e=>{let r=function(e,t){if(!e)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:"Items returned from simple retriever must be non-null."});if("string"==typeof e)return c.Document.fromText(e);if("function"==typeof t.content){let r=t.content(e);return"string"==typeof r?c.Document.fromText(r):new c.Document({content:r})}if("string"==typeof t.content&&"object"==typeof e)return c.Document.fromText(e[t.content]);throw new l.GenkitError({status:"INVALID_ARGUMENT",message:`Cannot convert item to document without content option. Item: ${JSON.stringify(e)}`})}(e,t);return"string"!=typeof e&&(r.metadata=function(e,t){if("string"!=typeof e){if(Array.isArray(t.metadata)&&"object"==typeof e){let r={};return t.metadata.forEach(t=>r[t]=e[t]),r}if("function"==typeof t.metadata)return t.metadata(e);if(!t.metadata&&"object"==typeof e){let r={...e};return"string"==typeof t.content&&delete r[t.content],r}throw new l.GenkitError({status:"INVALID_ARGUMENT",message:`Unable to extract metadata from item with supplied options. Item: ${JSON.stringify(e)}`})}}(e,t)),r})}))}},8436:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{AsyncStore:()=>y,Registry:()=>g,parseRegistryKey:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(85094),u=r(16698),c=r(88581),p=r(87334),d=r(27633),h=r(95566),m=r(72448);function f(e){let t=e.split("/");if(!(t.length<3))return t.length>=4?{actionType:t[1],pluginName:t[2],actionName:t.slice(3).join("/")}:{actionType:t[1],actionName:t[2]}}class g{actionsById={};pluginsByName={};schemasByName={};valueByTypeAndName={};allPluginsInitialized=!1;apiStability="stable";asyncStore;dotprompt;parent;context;constructor(e){e?(this.parent=e,this.apiStability=e?.apiStability,this.asyncStore=e.asyncStore,this.dotprompt=e.dotprompt):(this.asyncStore=new y,this.dotprompt=new l.Dotprompt({schemaResolver:async e=>{let t=await this.lookupSchema(e);if(!t)throw new d.GenkitError({message:`Schema '${e}' not found`,status:"NOT_FOUND"});return(0,m.toJsonSchema)(t)}}))}static withParent(e){return new g(e)}async lookupAction(e){let t=f(e);return t?.pluginName&&this.pluginsByName[t.pluginName]&&(await this.initializePlugin(t.pluginName),this.actionsById[e]||await this.resolvePluginAction(t.pluginName,t.actionType,t.actionName)),await this.actionsById[e]||this.parent?.lookupAction(e)}async lookupBackgroundAction(e){return(0,p.lookupBackgroundAction)(this,e)}registerAction(e,t){if(e!==t.__action.actionType)throw new d.GenkitError({status:"INVALID_ARGUMENT",message:`action type (${e}) does not match type on action (${t.__action.actionType})`});let r=`/${e}/${t.__action.name}`;h.logger.debug(`registering ${r}`),this.actionsById.hasOwnProperty(r)&&h.logger.warn(`WARNING: ${r} already has an entry in the registry. Overwriting.`),this.actionsById[r]=t}registerActionAsync(e,t,r){let n=`/${e}/${t}`;h.logger.debug(`registering ${n} (async)`),this.actionsById.hasOwnProperty(n)&&h.logger.warn(`WARNING: ${n} already has an entry in the registry. Overwriting.`),this.actionsById[n]=r}async listActions(){await this.initializeAllPlugins();let e={};return await Promise.all(Object.entries(this.actionsById).map(async([t,r])=>{e[t]=await r})),{...await this.parent?.listActions(),...e}}async listResolvableActions(){let e={};for(let[t,r]of(await Promise.all(Object.entries(this.pluginsByName).map(async([t,r])=>{if(r.listActions)try{(await r.listActions()).forEach(r=>{if(!r.name)throw new d.GenkitError({status:"INVALID_ARGUMENT",message:`Invalid metadata when listing actions from ${t} - name required`});if(!r.actionType)throw new d.GenkitError({status:"INVALID_ARGUMENT",message:`Invalid metadata when listing actions from ${t} - actionType required`});e[`/${r.actionType}/${r.name}`]=r})}catch(e){h.logger.error(`Error listing actions for ${t}
`,e)}})),Object.entries(await this.listActions())))e[t]=r.__action;return{...await this.parent?.listResolvableActions(),...e}}async initializeAllPlugins(){if(!this.allPluginsInitialized){for(let e of Object.keys(this.pluginsByName))await this.initializePlugin(e);this.allPluginsInitialized=!0}}registerPluginProvider(e,t){let r;if(this.pluginsByName[e])throw Error(`Plugin ${e} already registered`);this.allPluginsInitialized=!1;let n=!1;this.pluginsByName[e]={name:t.name,initializer:()=>(n||(r=t.initializer(),n=!0),r),resolver:async(e,r)=>{t.resolver&&await t.resolver(e,r)},listActions:async()=>t.listActions?await t.listActions():[]}}lookupPlugin(e){return this.pluginsByName[e]||this.parent?.lookupPlugin(e)}async resolvePluginAction(e,t,r){let n=this.pluginsByName[e];if(n)return await (0,c.runOutsideActionRuntimeContext)(this,async()=>{n.resolver&&await n.resolver(t,r)})}async initializePlugin(e){if(this.pluginsByName[e])return await (0,c.runOutsideActionRuntimeContext)(this,()=>this.pluginsByName[e].initializer())}registerSchema(e,t){if(this.schemasByName[e])throw Error(`Schema ${e} already registered`);this.schemasByName[e]=t}registerValue(e,t,r){this.valueByTypeAndName[e]||(this.valueByTypeAndName[e]={}),this.valueByTypeAndName[e][t]=r}async lookupValue(e,t){let r=function(e){let t=e.split("/");if(t.length>=4)return t[2]}(t);return!this.valueByTypeAndName[e]?.[t]&&r&&await this.initializePlugin(r),this.valueByTypeAndName[e]?.[t]||this.parent?.lookupValue(e,t)}async listValues(e){return await this.initializeAllPlugins(),{...await this.parent?.listValues(e)||{},...this.valueByTypeAndName[e]||{}}}lookupSchema(e){return this.schemasByName[e]||this.parent?.lookupSchema(e)}}class y{asls={};getStore(e){return this.asls[e]?.getStore()}run(e,t,r){return this.asls[e]||(this.asls[e]=new u.AsyncLocalStorage),this.asls[e].run(t,r)}}},8536:(e,t,r)=>{"use strict";let n=r(24800);e.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},9269:(e,t,r)=>{"use strict";var n=r(19771),o=r(60823),i=r(89900),a=r(75853),s=r(99122),l=r(15108),u=r(20923);function c(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];let{offset:t,source:r}=e;return[t,t+("string"==typeof r?r.length:1)]}function p(e){let t="",r=!1,n=!1;for(let o=0;o<e.length;++o){let i=e[o];switch(i[0]){case"#":t+=(""===t?"":n?"\n\n":"\n")+(i.substring(1)||" "),r=!0,n=!1;break;case"%":e[o+1]?.[0]!=="#"&&(o+=1),r=!1;break;default:r||(n=!0),r=!1}}return{comment:t,afterEmptyLine:n}}class d{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,r,n)=>{let o=c(e);n?this.warnings.push(new a.YAMLWarning(o,t,r)):this.errors.push(new a.YAMLParseError(o,t,r))},this.directives=new o.Directives({version:e.version||"1.2"}),this.options=e}decorate(e,t){let{comment:r,afterEmptyLine:n}=p(this.prelude);if(r){let o=e.contents;if(t)e.comment=e.comment?`${e.comment}
${r}`:r;else if(n||e.directives.docStart||!o)e.commentBefore=r;else if(s.isCollection(o)&&!o.flow&&o.items.length>0){let e=o.items[0];s.isPair(e)&&(e=e.key);let t=e.commentBefore;e.commentBefore=t?`${r}
${t}`:r}else{let e=o.commentBefore;o.commentBefore=e?`${r}
${e}`:r}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:p(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,r=-1){for(let t of e)yield*this.next(t);yield*this.end(t,r)}*next(e){switch(n.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(t,r,n)=>{let o=c(e);o[0]+=t,this.onError(o,"BAD_DIRECTIVE",r,n)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let t=l.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new a.YAMLParseError(c(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){this.errors.push(new a.YAMLParseError(c(e),"UNEXPECTED_TOKEN","Unexpected doc-end without preceding document"));break}this.doc.directives.docEnd=!0;let t=u.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){let e=this.doc.comment;this.doc.comment=e?`${e}
${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new a.YAMLParseError(c(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let e=Object.assign({_directives:this.directives},this.options),r=new i.Document(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,t,t],this.decorate(r,!1),yield r}}}t.Composer=d},9306:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(95917);function o(e){return{attributes:(0,n.Zs)(e.attributes),droppedAttributesCount:0}}},9431:(e,t)=>{"use strict";t.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t.default=r,e.exports=t.default},9551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;let n=r(22964),o=r(58592);function i(e,t,r){let{gen:i,compositeRule:a,data:s,opts:l}=e;if(void 0===r)return;let u=(0,n._)`${s}${(0,n.getProperty)(t)}`;if(a)return void(0,o.checkStrictMode)(e,`default is ignored for: ${u}`);let c=(0,n._)`${u} === undefined`;"empty"===l.useDefaults&&(c=(0,n._)`${c} || ${u} === null || ${u} === ""`),i.if(c,(0,n._)`${u} = ${(0,n.stringify)(r)}`)}t.assignDefaults=function(e,t){let{properties:r,items:n}=e.schema;if("object"===t&&r)for(let t in r)i(e,t,r[t].default);else"array"===t&&Array.isArray(n)&&n.forEach((t,r)=>i(e,r,t.default))}},9984:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var n=r(10026),o=r(82136),i=r(27852),a=r(34392),s=function(){function e(){}return e.prototype.inject=function(e,t,r){var s=n.$.getBaggage(e);if(!(!s||(0,o.Zf)(e))){var l=(0,a.getKeyPairs)(s).filter(function(e){return e.length<=i.KV}).slice(0,i.QC),u=(0,a.serializeKeyPairs)(l);u.length>0&&r.set(t,i.r_,u)}},e.prototype.extract=function(e,t,r){var o=r.get(t,i.r_),s=Array.isArray(o)?o.join(i.EC):o;if(!s)return e;var l={};return 0===s.length||(s.split(i.EC).forEach(function(e){var t=(0,a.parsePairKeyValue)(e);if(t){var r={value:t.value};t.metadata&&(r.metadata=t.metadata),l[t.key]=r}}),0===Object.entries(l).length)?e:n.$.setBaggage(e,n.$.createBaggage(l))},e.prototype.fields=function(){return[i.r_]},e}()},10355:e=>{"use strict";var t=e.exports=function(e,r,n){"function"==typeof r&&(n=r,r={});var o="function"==typeof(n=r.cb||n)?n:n.pre||function(){};!function e(r,n,o,i,a,s,l,u,c,p){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var d in n(i,a,s,l,u,c,p),i){var h=i[d];if(Array.isArray(h)){if(d in t.arrayKeywords)for(var m=0;m<h.length;m++)e(r,n,o,h[m],a+"/"+d+"/"+m,s,a,d,i,m)}else if(d in t.propsKeywords){if(h&&"object"==typeof h)for(var f in h)e(r,n,o,h[f],a+"/"+d+"/"+f.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,d,i,f)}else(d in t.keywords||r.allKeys&&!(d in t.skipKeywords))&&e(r,n,o,h,a+"/"+d,s,a,d,i)}o(i,a,s,l,u,c,p)}}(r,o,n.post||function(){},e,"",e)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},10659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964);t.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,n.str)`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>(0,n._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e,i="maxProperties"===t?n.operators.GT:n.operators.LT;e.fail$data((0,n._)`Object.keys(${r}).length ${i} ${o}`)}}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10908:(e,t,r)=>{"use strict";r.d(t,{UD:()=>u,ZI:()=>p,ZS:()=>l,lm:()=>d});var n=r(76895),o=r(93158),i=r(33076),a=r(82136),s=r(35749),l="traceparent",u="tracestate",c=RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function p(e){var t=c.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var d=function(){function e(){}return e.prototype.inject=function(e,t,r){var s=n.u.getSpanContext(e);if(!(!s||(0,a.Zf)(e))&&(0,o.YA)(s)){var c="00-"+s.traceId+"-"+s.spanId+"-0"+Number(s.traceFlags||i.X.NONE).toString(16);r.set(t,l,c),s.traceState&&r.set(t,u,s.traceState.serialize())}},e.prototype.extract=function(e,t,r){var o=r.get(t,l);if(!o)return e;var i=Array.isArray(o)?o[0]:o;if("string"!=typeof i)return e;var a=p(i);if(!a)return e;a.isRemote=!0;var c=r.get(t,u);if(c){var d=Array.isArray(c)?c.join(","):c;a.traceState=new s.n("string"==typeof d?d:void 0)}return n.u.setSpanContext(e,a)},e.prototype.fields=function(){return[l,u]},e}()},10931:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},11206:(e,t)=>{"use strict";t.stringifyNumber=function({format:e,minFractionDigits:t,tag:r,value:n}){if("bigint"==typeof n)return String(n);let o="number"==typeof n?n:Number(n);if(!isFinite(o))return isNaN(o)?".nan":o<0?"-.inf":".inf";let i=JSON.stringify(n);if(!e&&t&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(i)){let e=i.indexOf(".");e<0&&(e=i.length,i+=".");let r=t-(i.length-e-1);for(;r-- >0;)i+="0"}return i}},11337:(e,t,r)=>{"use strict";let n=r(3706),o=r(14239),{ANY:i}=o,a=r(42679),s=r(33877),l=[new o(">=0.0.0-0")],u=[new o(">=0.0.0")],c=(e,t,r)=>{let n,o,c,h,m,f,g;if(e===t)return!0;if(1===e.length&&e[0].semver===i)if(1===t.length&&t[0].semver===i)return!0;else e=r.includePrerelease?l:u;if(1===t.length&&t[0].semver===i)if(r.includePrerelease)return!0;else t=u;let y=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=p(n,t,r):"<"===t.operator||"<="===t.operator?o=d(o,t,r):y.add(t.semver);if(y.size>1)return null;if(n&&o&&((c=s(n.semver,o.semver,r))>0||0===c&&(">="!==n.operator||"<="!==o.operator)))return null;for(let e of y){if(n&&!a(e,String(n),r)||o&&!a(e,String(o),r))return null;for(let n of t)if(!a(e,String(n),r))return!1;return!0}let v=!!o&&!r.includePrerelease&&!!o.semver.prerelease.length&&o.semver,b=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(v&&1===v.prerelease.length&&"<"===o.operator&&0===v.prerelease[0]&&(v=!1),t)){if(g=g||">"===e.operator||">="===e.operator,f=f||"<"===e.operator||"<="===e.operator,n){if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if((h=p(n,e,r))===e&&h!==n)return!1}else if(">="===n.operator&&!a(n.semver,String(e),r))return!1}if(o){if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if((m=d(o,e,r))===e&&m!==o)return!1}else if("<="===o.operator&&!a(o.semver,String(e),r))return!1}if(!e.operator&&(o||n)&&0!==c)return!1}return(!n||!f||!!o||0===c)&&(!o||!g||!!n||0===c)&&!b&&!v&&!0},p=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},d=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let o=!1;e:for(let n of e.set){for(let e of t.set){let t=c(n,e,r);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},11346:(e,t,r)=>{"use strict";e=r.nmd(e);var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c=(e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),p={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(p,{ReflectionServer:()=>x,RunActionResponseSchema:()=>S}),e.exports=u(o({},"__esModule",{value:!0}),p);var d=c(r(7252)),h=c(r(79748)),m=c(r(89640)),f=c(r(33873)),g=c(r(47649)),y=r(88581),v=r(83455),b=r(95566),_=r(72448),E=r(40413);let S=g.object({result:g.unknown().optional(),error:g.unknown().optional(),telemetry:g.object({traceId:g.string().optional()}).optional()});class x{static RUNNING_SERVERS=[];registry;options;port=null;server=null;runtimeFilePath=null;constructor(e,t){this.registry=e,this.options={port:3100,bodyLimit:"30mb",configuredEnvs:["dev"],...t}}async findPort(){let e=this.options.port,t=await (0,m.default)({port:(0,m.makeRange)(e,e+100)});return t!==e&&b.logger.warn(`Port ${e} is already in use, using next available port ${t} instead.`),t}async start(){let e=(0,d.default)();e.use(d.default.json({limit:this.options.bodyLimit})),e.use((e,t,r)=>{t.header("x-genkit-version",v.GENKIT_VERSION),r()}),e.get("/api/__health",async(e,t)=>{await this.registry.listActions(),t.status(200).send("OK")}),e.get("/api/__quitquitquit",async(e,t)=>{b.logger.debug("Received quitquitquit"),t.status(200).send("OK"),await this.stop()}),e.get("/api/actions",async(e,t,r)=>{b.logger.debug("Fetching actions.");try{let e=await this.registry.listResolvableActions(),r={};Object.keys(e).forEach(t=>{let n=e[t];r[t]={key:t,name:n.name,description:n.description,metadata:n.metadata},(n.inputSchema||n.inputJsonSchema)&&(r[t].inputSchema=(0,_.toJsonSchema)({schema:n.inputSchema,jsonSchema:n.inputJsonSchema})),(n.outputSchema||n.outputJsonSchema)&&(r[t].outputSchema=(0,_.toJsonSchema)({schema:n.outputSchema,jsonSchema:n.outputJsonSchema}))}),t.send(r)}catch(n){let{message:e,stack:t}=n;r({message:e,stack:t})}}),e.post("/api/runAction",async(e,t,r)=>{let{key:n,input:o,context:i,telemetryLabels:a}=e.body,{stream:s}=e.query;b.logger.debug(`Running action \`${n}\` with stream=${s}...`);try{let e=await this.registry.lookupAction(n);if(!e)return void t.status(404).send(`action ${n} not found`);if("true"===s)try{let r=await e.run(o,{context:i,onChunk:e=>{t.write(JSON.stringify(e)+"\n")},telemetryLabels:a});await (0,E.flushTracing)(),t.write(JSON.stringify({result:r.result,telemetry:{traceId:r.telemetry.traceId}})),t.end()}catch(o){let{message:e,stack:r}=o,n={code:y.StatusCodes.INTERNAL,message:e,details:{stack:r}};o.traceId&&(n.details.traceId=o.traceId),t.write(JSON.stringify({error:n})),t.end()}else{let r=await e.run(o,{context:i,telemetryLabels:a});await (0,E.flushTracing)(),t.send({result:r.result,telemetry:{traceId:r.telemetry.traceId}})}}catch(o){let{message:e,stack:t,traceId:n}=o;r({message:e,stack:t,traceId:n})}}),e.get("/api/envs",async(e,t)=>{t.json(this.options.configuredEnvs)}),e.post("/api/notify",async(e,t)=>{let{telemetryServerUrl:r,reflectionApiSpecVersion:n}=e.body;process.env.GENKIT_TELEMETRY_SERVER||"string"!=typeof r||((0,E.setTelemetryServerUrl)(r),b.logger.debug(`Connected to telemetry server on ${r}`)),n!==v.GENKIT_REFLECTION_API_SPEC_VERSION&&(!n||n<v.GENKIT_REFLECTION_API_SPEC_VERSION?b.logger.warn("WARNING: Genkit CLI version may be outdated. Please update `genkit-cli` to the latest version."):b.logger.warn(`Genkit CLI is newer than runtime library. Some feature may not be supported. Consider upgrading your runtime library version (debug info: expected ${v.GENKIT_REFLECTION_API_SPEC_VERSION}, got ${n}).`)),t.status(200).send("OK")}),e.use((e,t,r,n)=>{b.logger.error(e.stack);let{message:o,stack:i}=e,a={code:y.StatusCodes.INTERNAL,message:o,details:{stack:i}};e.traceId&&(a.details.traceId=e.traceId),r.status(500).json(a)}),this.port=await this.findPort(),this.server=e.listen(this.port,async()=>{b.logger.debug(`Reflection server (${process.pid}) running on http://localhost:${this.port}`),x.RUNNING_SERVERS.push(this),await this.writeRuntimeFile()})}async stop(){if(this.server)return new Promise(async(e,t)=>{await this.cleanupRuntimeFile(),this.server.close(async r=>{r&&(b.logger.error(`Error shutting down reflection server on port ${this.port}: ${r}`),t(r));let n=x.RUNNING_SERVERS.indexOf(this);n>-1&&x.RUNNING_SERVERS.splice(n,1),b.logger.debug(`Reflection server on port ${this.port} has successfully shut down.`),this.port=null,this.server=null,e()})})}async writeRuntimeFile(){try{let e=await w(),t=f.default.join(e,".genkit","runtimes"),r=new Date,n=r.getTime(),o=r.toISOString(),i=`${process.pid}${null!==this.port?`-${this.port}`:""}`;this.runtimeFilePath=f.default.join(t,`${i}-${n}.json`);let a=JSON.stringify({id:process.env.GENKIT_RUNTIME_ID||i,pid:process.pid,reflectionServerUrl:`http://localhost:${this.port}`,timestamp:o,genkitVersion:`nodejs/${v.GENKIT_VERSION}`,reflectionApiSpecVersion:v.GENKIT_REFLECTION_API_SPEC_VERSION},null,2);await h.default.mkdir(t,{recursive:!0}),await h.default.writeFile(this.runtimeFilePath,a,"utf8"),b.logger.debug(`Runtime file written: ${this.runtimeFilePath}`)}catch(e){b.logger.error(`Error writing runtime file: ${e}`)}}async cleanupRuntimeFile(){if(this.runtimeFilePath)try{let e=await h.default.readFile(this.runtimeFilePath,"utf8");JSON.parse(e).pid===process.pid&&(await h.default.unlink(this.runtimeFilePath),b.logger.debug(`Runtime file cleaned up: ${this.runtimeFilePath}`))}catch(e){b.logger.error(`Error cleaning up runtime file: ${e}`)}}static async stopAll(){return Promise.all(x.RUNNING_SERVERS.map(e=>e.stop()))}}async function w(){let e=process.cwd();for(;e!==f.default.parse(e).root;){let t=f.default.join(e,"package.json");try{return await h.default.access(t),e}catch{e=f.default.dirname(e)}}throw Error("Could not find project root (package.json not found)")}"hot"in e&&(e.hot.accept(),e.hot.dispose(async()=>{b.logger.debug("Cleaning up reflection server(s) before module reload..."),await x.stopAll()}))},11423:(e,t,r)=>{"use strict";r.d(t,{Ft:()=>g,KX:()=>f,Pk:()=>m});var n=r(79551),o=r(81630),i=r(55591),a=r(74075),s=r(27910),l=r(86713),u=r(96526),c=r(28038),p=r(73213),d=r(36646),h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function m(e,t,r,c,m){var f,g,y=e.timeoutMillis,v=new n.URL(e.url),b=Number(process.versions.node.split(".")[0]),_=!1,E=setTimeout(function(){clearTimeout(f),_=!0,g.destroyed?m(new p.N("Request Timeout")):b>=14?g.destroy():g.abort()},y),S={hostname:v.hostname,port:v.port,path:v.pathname,method:"POST",headers:h({"Content-Type":r},e.headers),agent:e.agent},x="http:"===v.protocol?o.request:i.request,w=function(r,n){var o,i;void 0===r&&(r=d.J9),void 0===n&&(n=d.Tj),(g=x(S,function(e){var t="";e.on("data",function(e){return t+=e}),e.on("aborted",function(){_&&m(new p.N("Request Timeout"))}),e.on("end",function(){if(!1===_)if(e.statusCode&&e.statusCode<299)l.s.debug("statusCode: "+e.statusCode,t),c(),clearTimeout(E),clearTimeout(f);else if(e.statusCode&&(0,d.$q)(e.statusCode)&&r>0){var o=void 0;n=d.Q5*n,f=setTimeout(function(){w(r-1,n)},e.headers["retry-after"]?(0,d.u6)(e.headers["retry-after"]):Math.round(Math.random()*(d.Rr-n)+n))}else m(new p.N(e.statusMessage,e.statusCode,t)),clearTimeout(E),clearTimeout(f)})})).on("error",function(e){_?m(new p.N("Request Timeout",e.code)):m(e),clearTimeout(E),clearTimeout(f)}),g.on("abort",function(){_&&m(new p.N("Request Timeout")),clearTimeout(E),clearTimeout(f)}),e.compression===u.U.GZIP?(g.setHeader("Content-Encoding","gzip"),(o=t,(i=new s.Readable).push(o),i.push(null),i).on("error",m).pipe(a.createGzip()).on("error",m).pipe(g)):g.end(Buffer.from(t))};w()}function f(e){if(e.httpAgentOptions&&!1===e.keepAlive)return void l.s.warn("httpAgentOptions is used only when keepAlive is true");if(!1!==e.keepAlive&&e.url)try{var t=new n.URL(e.url);return new("http:"===t.protocol?o.Agent:i.Agent)(h({keepAlive:!0},e.httpAgentOptions))}catch(e){l.s.error("collector exporter failed to create http agent. err: "+e.message);return}}function g(e){return e||(((0,c._)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,c._)().OTEL_EXPORTER_OTLP_COMPRESSION)===u.U.GZIP?u.U.GZIP:u.U.NONE)}},11535:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{extractItems:()=>f,extractJson:()=>m,parsePartialJson:()=>h}),e.exports=u(o({},"__esModule",{value:!0}),c);var p=((e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(r(65799)),d=r(17143);function h(e){return p.default.parse(JSON.stringify((0,d.parse)(e,d.Allow.ALL)))}function m(e,t){let r,n,o,i=0,a=!1,s=!1;for(let t=0;t<e.length;t++){let l=e[t].replace(/\u00A0/g," ");if(s){s=!1;continue}if("\\"===l){s=!0;continue}if('"'===l){a=!a;continue}if(!a)if(r||"{"!==l&&"["!==l){if(l===r)i++;else if(l===n&&!--i)return p.default.parse(e.substring(o||0,t+1))}else r=l,n="{"===l?"}":"]",o=t,i++}if(void 0!==o&&i>0)try{return h(e.substring(o))}catch{if(t)throw Error(`Invalid JSON extracted from model output: ${e}`);return null}if(t)throw Error(`Invalid JSON extracted from model output: ${e}`);return null}function f(e,t=0){let r=[],n=t;if(0===t){let t=e.indexOf("[");if(-1===t)return{items:[],cursor:e.length};n=t+1}let o=-1,i=0,a=!1,s=!1;for(let t=n;t<e.length;t++){let l=e[t];if(s){s=!1;continue}if("\\"===l){s=!0;continue}if('"'===l){a=!a;continue}if(!a){if("{"===l)0===i&&(o=t),i++;else if("}"===l){if(0==--i&&-1!==o)try{let i=p.default.parse(e.substring(o,t+1));r.push(i),n=t+1,o=-1}catch{}}else if("]"===l&&0===i)break}}return{items:r,cursor:n}}},11765:(e,t,r)=>{"use strict";r.d(t,{S:()=>s});var n=r(86713),o=r(19312),i=r(1037),a=r(36646),s=function(){function e(e){void 0===e&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),"string"==typeof e.hostname&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new o.I(this._shutdown,this),this._concurrencyLimit="number"==typeof e.concurrencyLimit?e.concurrencyLimit:30,this.timeoutMillis=(0,a.rH)(e.timeoutMillis),this.onInit(e)}return e.prototype.export=function(e,t){return this._shutdownOnce.isCalled?void t({code:i.V.FAILED,error:Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?void t({code:i.V.FAILED,error:Error("Concurrent export limit reached")}):void this._export(e).then(function(){t({code:i.V.SUCCESS})}).catch(function(e){t({code:i.V.FAILED,error:e})})},e.prototype._export=function(e){var t=this;return new Promise(function(r,o){try{n.s.debug("items to be sent",e),t.send(e,r,o)}catch(e){o(e)}})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then(function(){})},e.prototype._shutdown=function(){return n.s.debug("shutdown started"),this.onShutdown(),this.forceFlush()},e}()},11955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNativeEnumDef=void 0,t.parseNativeEnumDef=function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}},12236:(e,t,r)=>{"use strict";var n=r(46076);t.resolveBlockScalar=function(e,t,r){let o=t.offset,i=function({offset:e,props:t},r,n){if("block-scalar-header"!==t[0].type)return n(t[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:o}=t[0],i=o[0],a=0,s="",l=-1;for(let t=1;t<o.length;++t){let r=o[t];if(s||"-"!==r&&"+"!==r){let n=Number(r);!a&&n?a=n:-1===l&&(l=e+t)}else s=r}-1!==l&&n(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${o}`);let u=!1,c="",p=o.length;for(let e=1;e<t.length;++e){let o=t[e];switch(o.type){case"space":u=!0;case"newline":p+=o.source.length;break;case"comment":r&&!u&&n(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),p+=o.source.length,c=o.source.substring(1);break;case"error":n(o,"UNEXPECTED_TOKEN",o.message),p+=o.source.length;break;default:{let e=`Unexpected token in block scalar header: ${o.type}`;n(o,"UNEXPECTED_TOKEN",e);let t=o.source;t&&"string"==typeof t&&(p+=t.length)}}}return{mode:i,indent:a,chomp:s,comment:c,length:p}}(t,e.options.strict,r);if(!i)return{value:"",type:null,comment:"",range:[o,o,o]};let a=">"===i.mode?n.Scalar.BLOCK_FOLDED:n.Scalar.BLOCK_LITERAL,s=t.source?function(e){let t=e.split(/\n( *)/),r=t[0],n=r.match(/^( *)/),o=[n?.[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let e=1;e<t.length;e+=2)o.push([t[e],t[e+1]]);return o}(t.source):[],l=s.length;for(let e=s.length-1;e>=0;--e){let t=s[e][1];if(""===t||"\r"===t)l=e;else break}if(0===l){let e="+"===i.chomp&&s.length>0?"\n".repeat(Math.max(1,s.length-1)):"",r=o+i.length;return t.source&&(r+=t.source.length),{value:e,type:a,comment:i.comment,range:[o,r,r]}}let u=t.indent+i.indent,c=t.offset+i.length,p=0;for(let t=0;t<l;++t){let[n,o]=s[t];if(""===o||"\r"===o)0===i.indent&&n.length>u&&(u=n.length);else{n.length<u&&r(c+n.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),0===i.indent&&(u=n.length),p=t,0!==u||e.atRoot||r(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=n.length+o.length+1}for(let e=s.length-1;e>=l;--e)s[e][0].length>u&&(l=e+1);let d="",h="",m=!1;for(let e=0;e<p;++e)d+=s[e][0].slice(u)+"\n";for(let e=p;e<l;++e){let[t,o]=s[e];c+=t.length+o.length+1;let l="\r"===o[o.length-1];if(l&&(o=o.slice(0,-1)),o&&t.length<u){let e=i.indent?"explicit indentation indicator":"first line",n=`Block scalar lines must not be less indented than their ${e}`;r(c-o.length-(l?2:1),"BAD_INDENT",n),t=""}a===n.Scalar.BLOCK_LITERAL?(d+=h+t.slice(u)+o,h="\n"):t.length>u||"	"===o[0]?(" "===h?h="\n":m||"\n"!==h||(h="\n\n"),d+=h+t.slice(u)+o,h="\n",m=!0):""===o?"\n"===h?d+="\n":h="\n":(d+=h+o,h=" ",m=!1)}switch(i.chomp){case"-":break;case"+":for(let e=l;e<s.length;++e)d+="\n"+s[e][0].slice(u);"\n"!==d[d.length-1]&&(d+="\n");break;default:d+="\n"}let f=o+i.length+t.source.length;return{value:d,type:a,comment:i.comment,range:[o,f,f]}}},12330:(e,t,r)=>{"use strict";var n=r(58459),o=r(63715),i=r(99122),a=r(52904),s=r(7562);class l extends a.NodeBase{constructor(e){super(i.ALIAS),this.source=e,Object.defineProperty(this,"tag",{set(){throw Error("Alias nodes cannot have tags")}})}resolve(e,t){let r,n;for(let a of(t?.aliasResolveCache?r=t.aliasResolveCache:(r=[],o.visit(e,{Node:(e,t)=>{(i.isAlias(t)||i.hasAnchor(t))&&r.push(t)}}),t&&(t.aliasResolveCache=r)),r)){if(a===this)break;a.anchor===this.source&&(n=a)}return n}toJSON(e,t){if(!t)return{source:this.source};let{anchors:r,doc:n,maxAliasCount:o}=t,a=this.resolve(n,t);if(!a)throw ReferenceError(`Unresolved alias (the anchor must be set before the alias): ${this.source}`);let l=r.get(a);if(l||(s.toJS(a,null,t),l=r.get(a)),!l||void 0===l.res)throw ReferenceError("This should not happen: Alias anchor was not resolved?");if(o>=0&&(l.count+=1,0===l.aliasCount&&(l.aliasCount=function e(t,r,n){if(i.isAlias(r)){let e=r.resolve(t),o=n&&e&&n.get(e);return o?o.count*o.aliasCount:0}if(i.isCollection(r)){let o=0;for(let i of r.items){let r=e(t,i,n);r>o&&(o=r)}return o}return i.isPair(r)?Math.max(e(t,r.key,n),e(t,r.value,n)):1}(n,a,r)),l.count*l.aliasCount>o))throw ReferenceError("Excessive alias count indicates a resource exhaustion attack");return l.res}toString(e,t,r){let o=`*${this.source}`;if(e){if(n.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source))throw Error(`Unresolved alias (the anchor must be set before the alias): ${this.source}`);if(e.implicitKey)return`${o} `}return o}}t.Alias=l},13725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPTraceExporter=void 0;let n=r(87535),o=r(75836),i=r(76854),a=r(14664),s={"User-Agent":`OTel-OTLP-Exporter-JavaScript/${a.VERSION}`};class l extends o.OTLPGRPCExporterNodeBase{constructor(e={}){super(e,Object.assign(Object.assign({},s),n.baggageUtils.parseKeyPairsIntoRecord((0,n.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),"TraceExportService","/opentelemetry.proto.collector.trace.v1.TraceService/Export",i.ProtobufTraceSerializer)}getDefaultUrl(e){return(0,o.validateAndNormalizeUrl)(this.getUrlFromConfig(e))}getUrlFromConfig(e){return"string"==typeof e.url?e.url:(0,n.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT||(0,n.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT||o.DEFAULT_COLLECTOR_URL}}t.OTLPTraceExporter=l},13838:(e,t,r)=>{"use strict";var n=r(46076),o=r(11206);let i={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:o.stringifyNumber};t.float={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){let t=new n.Scalar(parseFloat(e)),r=e.indexOf(".");return -1!==r&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-r-1),t},stringify:o.stringifyNumber},t.floatExp={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():o.stringifyNumber(e)}},t.floatNaN=i},13846:(e,t,r)=>{"use strict";r.d(t,{ai:()=>i});var n=r(97955),o=r(5757);let i=(0,n.genkit)({plugins:[(0,o.YF)()]})},14010:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(66112);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,r){var o=r.inverse,i=r.fn;if(!0===t)return i(this);if(!1===t||null==t)return o(this);if(n.isArray(t))if(t.length>0)return r.ids&&(r.ids=[r.name]),e.helpers.each(t,r);else return o(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return i(t,r)})},e.exports=t.default},14152:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(67884),o=r(22964),i=r(58592);t.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>(0,o.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,o._)`{missingProperty: ${e}}`},code(e){let{gen:t,schema:r,schemaCode:a,data:s,$data:l,it:u}=e,{opts:c}=u;if(!l&&0===r.length)return;let p=r.length>=c.loopRequired;if(u.allErrors?function(){if(p||l)e.block$data(o.nil,d);else for(let t of r)(0,n.checkReportMissingProp)(e,t)}():function(){let i=t.let("missing");if(p||l){let r=t.let("valid",!0);e.block$data(r,()=>{var l,u;return l=i,u=r,void(e.setParams({missingProperty:l}),t.forOf(l,a,()=>{t.assign(u,(0,n.propertyInData)(t,s,l,c.ownProperties)),t.if((0,o.not)(u),()=>{e.error(),t.break()})},o.nil))}),e.ok(r)}else t.if((0,n.checkMissingProp)(e,r,i)),(0,n.reportMissingProp)(e,i),t.else()}(),c.strictRequired){let t=e.parentSchema.properties,{definedProperties:n}=e.it;for(let e of r)if((null==t?void 0:t[e])===void 0&&!n.has(e)){let t=u.schemaEnv.baseId+u.errSchemaPath,r=`required property "${e}" is not defined at "${t}" (strictRequired)`;(0,i.checkStrictMode)(u,r,u.opts.strictRequired)}}function d(){t.forOf("prop",a,r=>{e.setParams({missingProperty:r}),t.if((0,n.noPropertyInData)(t,s,r,c.ownProperties),()=>e.error())})}}}},14239:(e,t,r)=>{"use strict";let n=Symbol("SemVer ANY");class o{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof o)if(!!t.loose===e.loose)return e;else e=e.value;u("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){let t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new p(e.value,t).test(this.value):""===e.operator?""===e.value||new p(this.value,t).test(e.semver):!((t=i(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}e.exports=o;let i=r(98300),{safeRe:a,t:s}=r(26515),l=r(84450),u=r(38267),c=r(64487),p=r(3706)},14386:(e,t)=>{"use strict";function r(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}t.indentComment=r,t.lineComment=(e,t,n)=>e.endsWith("\n")?r(n,t):n.includes("\n")?"\n"+r(n,t):(e.endsWith(" ")?"":" ")+n,t.stringifyComment=e=>e.replace(/^(?!$)(?: $)?/gm,"#")},14501:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GeminiEmbeddingConfigSchema:()=>h,SUPPORTED_MODELS:()=>g,TaskTypeSchema:()=>d,defineGoogleAIEmbedder:()=>y,textEmbedding004:()=>f,textEmbeddingGecko001:()=>m}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(72184),u=r(48334),c=r(82804),p=r(44192);let d=u.z.enum(["RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING"]),h=u.z.object({apiKey:u.z.string().optional(),taskType:d.optional(),title:u.z.string().optional(),version:u.z.string().optional(),outputDimensionality:u.z.number().min(1).max(768).optional()}),m=(0,c.embedderRef)({name:"googleai/embedding-001",configSchema:h,info:{dimensions:768,label:"Google Gen AI - Text Embedding Gecko (Legacy)",supports:{input:["text"]}}}),f=(0,c.embedderRef)({name:"googleai/text-embedding-004",configSchema:h,info:{dimensions:768,label:"Google Gen AI - Text Embedding 001",supports:{input:["text"]}}}),g={"embedding-001":m,"text-embedding-004":f};function y(e,t,r){let n;if(!1!==r.apiKey&&!(n=r?.apiKey||(0,p.getApiKeyFromEnvVar)()))throw Error("Please pass in the API key or set either GEMINI_API_KEY or GOOGLE_API_KEY environment variable.\nFor more details see https://genkit.dev/docs/plugins/google-genai");let o=g[t]??(0,c.embedderRef)({name:t,configSchema:h,info:{dimensions:768,label:`Google AI - ${t}`,supports:{input:["text","image","video"]}}}),i=o.name.startsWith("googleai/")?o.name.substring(9):o.name;return e.defineEmbedder({name:o.name,configSchema:h,info:o.info},async(e,t)=>{if(!1===r.apiKey&&!t?.apiKey)throw new u.GenkitError({status:"INVALID_ARGUMENT",message:"GoogleAI plugin was initialized with {apiKey: false} but no apiKey configuration was passed at call time."});let a=new l.GoogleGenerativeAI(t?.apiKey||n).getGenerativeModel({model:t?.version||o.config?.version||o.version||i});return{embeddings:await Promise.all(e.map(async e=>({embedding:(await a.embedContent({taskType:t?.taskType,title:t?.title,content:{role:"",parts:[{text:e.text}]},outputDimensionality:t?.outputDimensionality})).embedding.values})))}})}},14593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow},14646:(e,t,r)=>{"use strict";r.d(t,{Az:()=>h,II:()=>a,SP:()=>l,qd:()=>i,z3:()=>s});var n=r(18803),o=r(48549);function i(e){var t=BigInt(1e9);return BigInt(e[0])*t+BigInt(e[1])}function a(e){return{low:Number(BigInt.asUintN(32,e)),high:Number(BigInt.asUintN(32,e>>BigInt(32)))}}function s(e){return a(i(e))}function l(e){return i(e).toString()}var u="undefined"!=typeof BigInt?l:n.u5;function c(e){return e}function p(e){if(void 0!==e)return(0,o.Q)(e)}var d={encodeHrTime:s,encodeSpanContext:o.Q,encodeOptionalSpanContext:p};function h(e){if(void 0===e)return d;var t,r,n=null==(t=e.useLongBits)||t,i=null!=(r=e.useHex)&&r;return{encodeHrTime:n?s:u,encodeSpanContext:i?c:o.Q,encodeOptionalSpanContext:i?c:p}}},14659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(15207),o=r(92892),i=r(22964),a=new i.Name("fullFormats"),s=new i.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return u(e,t,n.fullFormats,a),e;let[r,i]="fast"===t.mode?[n.fastFormats,s]:[n.fullFormats,a];return u(e,t.formats||n.formatNames,r,i),t.keywords&&(0,o.default)(e),e};function u(e,t,r,n){var o,a;for(let o of(null!=(a=e.opts.code).formats||(a.formats=(0,i._)`require("ajv-formats/dist/formats").${n}`),t))e.addFormat(o,r[o])}l.get=(e,t="full")=>{let r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw Error(`Unknown format "${e}"`);return r},e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},14662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseObjectDef=void 0;let n=r(70350);t.parseObjectDef=function(e,t){let r="openAi"===t.target,o={type:"object",properties:{}},i=[],a=e.shape();for(let e in a){let s=a[e];if(void 0===s||void 0===s._def)continue;let l=function(e){try{return e.isOptional()}catch{return!0}}(s);l&&r&&("ZodOptional"===s._def.typeName&&(s=s._def.innerType),s.isNullable()||(s=s.nullable()),l=!1);let u=(0,n.parseDef)(s._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==u&&(o.properties[e]=u,l||i.push(e))}i.length&&(o.required=i);let s=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return(0,n.parseDef)(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==s&&(o.additionalProperties=s),o}},14664:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.52.1"},15108:(e,t,r)=>{"use strict";var n=r(89900),o=r(82984),i=r(20923),a=r(69844);t.composeDoc=function(e,t,{offset:r,start:s,value:l,end:u},c){let p=Object.assign({_directives:t},e),d=new n.Document(void 0,p),h={atKey:!1,atRoot:!0,directives:d.directives,options:d.options,schema:d.schema},m=a.resolveProps(s,{indicator:"doc-start",next:l??u?.[0],offset:r,onError:c,parentIndent:0,startOnNewline:!0});m.found&&(d.directives.docStart=!0,l&&("block-map"===l.type||"block-seq"===l.type)&&!m.hasNewline&&c(m.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),d.contents=l?o.composeNode(h,l,m,c):o.composeEmptyNode(h,m.end,s,null,m,c);let f=d.contents.range[2],g=i.resolveEnd(u,f,!1,c);return g.comment&&(d.comment=g.comment),d.range=[r,f,g.offset],d}},15207:(e,t)=>{"use strict";function r(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:r(i,a),time:r(l(!0),u),"date-time":r(d(!0),h),"iso-time":r(l(),c),"iso-date-time":r(d(),m),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return f.test(e)&&g.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(E.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return y.lastIndex=0,y.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=b&&e>=v}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:_},double:{type:"number",validate:_},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:r(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),"iso-time":r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,m),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);let n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(e){var t;let r=n.exec(e);if(!r)return!1;let i=+r[1],a=+r[2],s=+r[3];return a>=1&&a<=12&&s>=1&&s<=(2===a&&(t=i)%4==0&&(t%100!=0||t%400==0)?29:o[a])}function a(e,t){if(e&&t)return e>t?1:e<t?-1:0}let s=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(e){return function(t){let r=s.exec(t);if(!r)return!1;let n=+r[1],o=+r[2],i=+r[3],a=r[4],l="-"===r[5]?-1:1,u=+(r[6]||0),c=+(r[7]||0);if(u>23||c>59||e&&!a)return!1;if(n<=23&&o<=59&&i<60)return!0;let p=o-c*l,d=n-u*l-(p<0);return(23===d||-1===d)&&(59===p||-1===p)&&i<61}}function u(e,t){if(!(e&&t))return;let r=new Date("2020-01-01T"+e).valueOf(),n=new Date("2020-01-01T"+t).valueOf();if(r&&n)return r-n}function c(e,t){if(!(e&&t))return;let r=s.exec(e),n=s.exec(t);if(r&&n)return(e=r[1]+r[2]+r[3])>(t=n[1]+n[2]+n[3])?1:e<t?-1:0}let p=/t|\s/i;function d(e){let t=l(e);return function(e){let r=e.split(p);return 2===r.length&&i(r[0])&&t(r[1])}}function h(e,t){if(!(e&&t))return;let r=new Date(e).valueOf(),n=new Date(t).valueOf();if(r&&n)return r-n}function m(e,t){if(!(e&&t))return;let[r,n]=e.split(p),[o,i]=t.split(p),s=a(r,o);if(void 0!==s)return s||u(n,i)}let f=/\/|:/,g=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,v=-0x80000000,b=0x80000000-1;function _(){return!0}let E=/[^\\]\\Z/},15229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseOptionalDef=void 0;let n=r(70350),o=r(18271);t.parseOptionalDef=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return(0,n.parseDef)(e.innerType._def,t);let r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:(0,o.parseAnyDef)(t)},r]}:(0,o.parseAnyDef)(t)}},15624:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{EmbedderInfoSchema:()=>v,EmbeddingSchema:()=>p,defineEmbedder:()=>m,embed:()=>f,embedMany:()=>y,embedderActionMetadata:()=>_,embedderRef:()=>b}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(72448),c=r(40101);let p=l.z.object({embedding:l.z.array(l.z.number()),metadata:l.z.record(l.z.string(),l.z.unknown()).optional()}),d=l.z.object({input:l.z.array(c.DocumentDataSchema),options:l.z.any().optional()}),h=l.z.object({embeddings:l.z.array(p)});function m(e,t,r){var n;return(n=(0,l.defineAction)(e,{actionType:"embedder",name:t.name,inputSchema:t.configSchema?d.extend({options:t.configSchema.optional()}):d,outputSchema:h,metadata:{type:"embedder",info:t.info,embedder:{customOptions:t.configSchema?(0,u.toJsonSchema)({schema:t.configSchema}):void 0}}},e=>r(e.input.map(e=>new c.Document(e)),e.options))).__configSchema=t.configSchema,n}async function f(e,t){let r=await g(e,t);if(!r.embedderAction){let e;throw e="string"==typeof t.embedder?t.embedder:t.embedder?.__action?.name?t.embedder.__action.name:t.embedder.name,Error(`Unable to resolve embedder ${e}`)}return(await r.embedderAction({input:"string"==typeof t.content?[c.Document.fromText(t.content,t.metadata)]:[t.content],options:{version:r.version,...r.config,...t.options}})).embeddings}async function g(e,t){if("string"==typeof t.embedder)return{embedderAction:await e.lookupAction(`/embedder/${t.embedder}`)};if(Object.hasOwnProperty.call(t.embedder,"__action"))return{embedderAction:t.embedder};if(Object.hasOwnProperty.call(t.embedder,"name")){let r=t.embedder;return{embedderAction:await e.lookupAction(`/embedder/${t.embedder.name}`),config:{...r.config},version:r.version}}throw Error(`failed to resolve embedder ${t.embedder}`)}async function y(e,t){let r;if(!(r="string"==typeof t.embedder?await e.lookupAction(`/embedder/${t.embedder}`):Object.hasOwnProperty.call(t.embedder,"info")?await e.lookupAction(`/embedder/${t.embedder.name}`):t.embedder))throw Error("Unable to utilize the provided embedder");return(await r({input:t.content.map(e=>"string"==typeof e?c.Document.fromText(e,t.metadata):e),options:t.options})).embeddings}let v=l.z.object({label:l.z.string().optional(),supports:l.z.object({input:l.z.array(l.z.enum(["text","image","video"])).optional(),multilingual:l.z.boolean().optional()}).optional(),dimensions:l.z.number().optional()});function b(e){return{...e}}function _({name:e,info:t,configSchema:r}){return{actionType:"embedder",name:e,inputJsonSchema:(0,u.toJsonSchema)({schema:d}),outputJsonSchema:(0,u.toJsonSchema)({schema:h}),metadata:{embedder:{...t,customOptions:r?(0,u.toJsonSchema)({schema:r}):void 0}}}}},15686:(e,t,r)=>{"use strict";var n=r(99122),o=r(7562),i=r(36813),a=r(86104),s=r(24666);class l extends a.YAMLSeq{constructor(){super(),this.add=i.YAMLMap.prototype.add.bind(this),this.delete=i.YAMLMap.prototype.delete.bind(this),this.get=i.YAMLMap.prototype.get.bind(this),this.has=i.YAMLMap.prototype.has.bind(this),this.set=i.YAMLMap.prototype.set.bind(this),this.tag=l.tag}toJSON(e,t){if(!t)return super.toJSON(e);let r=new Map;for(let e of(t?.onCreate&&t.onCreate(r),this.items)){let i,a;if(n.isPair(e)?(i=o.toJS(e.key,"",t),a=o.toJS(e.value,i,t)):i=o.toJS(e,"",t),r.has(i))throw Error("Ordered maps must not include duplicate keys");r.set(i,a)}return r}static from(e,t,r){let n=s.createPairs(e,t,r),o=new this;return o.items=n.items,o}}l.tag="tag:yaml.org,2002:omap",t.YAMLOMap=l,t.omap={collection:"seq",identify:e=>e instanceof Map,nodeClass:l,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){let r=s.resolvePairs(e,t),o=[];for(let{key:e}of r.items)n.isScalar(e)&&(o.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):o.push(e.value));return Object.assign(new l,r)},createNode:(e,t,r)=>l.from(e,t,r)}},15806:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NOOP_LOGGER:()=>o.G,NOOP_LOGGER_PROVIDER:()=>a,NoopLogger:()=>o.P,NoopLoggerProvider:()=>i,SeverityNumber:()=>n,logs:()=>u}),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRACE=1]="TRACE",e[e.TRACE2=2]="TRACE2",e[e.TRACE3=3]="TRACE3",e[e.TRACE4=4]="TRACE4",e[e.DEBUG=5]="DEBUG",e[e.DEBUG2=6]="DEBUG2",e[e.DEBUG3=7]="DEBUG3",e[e.DEBUG4=8]="DEBUG4",e[e.INFO=9]="INFO",e[e.INFO2=10]="INFO2",e[e.INFO3=11]="INFO3",e[e.INFO4=12]="INFO4",e[e.WARN=13]="WARN",e[e.WARN2=14]="WARN2",e[e.WARN3=15]="WARN3",e[e.WARN4=16]="WARN4",e[e.ERROR=17]="ERROR",e[e.ERROR2=18]="ERROR2",e[e.ERROR3=19]="ERROR3",e[e.ERROR4=20]="ERROR4",e[e.FATAL=21]="FATAL",e[e.FATAL2=22]="FATAL2",e[e.FATAL3=23]="FATAL3",e[e.FATAL4=24]="FATAL4"}(n||(n={}));var n,o=r(94199),i=function(){function e(){}return e.prototype.getLogger=function(e,t,r){return new o.P},e}(),a=new i,s="object"==typeof globalThis?globalThis:global,l=Symbol.for("io.opentelemetry.js.api.logs"),u=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalLoggerProvider=function(e){return s[l]?this.getLoggerProvider():(s[l]=function(t){return 1===t?e:a},e)},e.prototype.getLoggerProvider=function(){var e,t;return null!=(t=null==(e=s[l])?void 0:e.call(s,1))?t:a},e.prototype.getLogger=function(e,t,r){return this.getLoggerProvider().getLogger(e,t,r)},e.prototype.disable=function(){delete s[l]},e})().getInstance()},16141:e=>{"use strict";e.exports=require("node:zlib")},16200:(e,t,r)=>{"use strict";r.d(t,{h:()=>h});var n,o,i=Function.prototype.toString,a=i.call(Object),s=(n=Object.getPrototypeOf,o=Object,function(e){return n(o(e))}),l=Object.prototype,u=l.hasOwnProperty,c=Symbol?Symbol.toStringTag:void 0,p=l.toString;function d(e){if(null==(t=e)||"object"!=typeof t||"[object Object]"!==(null==(r=e)?void 0===r?"[object Undefined]":"[object Null]":c&&c in Object(r)?function(e){var t=u.call(e,c),r=e[c],n=!1;try{e[c]=void 0,n=!0}catch(e){}var o=p.call(e);return n&&(t?e[c]=r:delete e[c]),o}(r):(n=r,p.call(n))))return!1;var t,r,n,o=s(e);if(null===o)return!0;var l=u.call(o,"constructor")&&o.constructor;return"function"==typeof l&&l instanceof l&&i.call(l)===a}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.shift(),n=new WeakMap;e.length>0;)r=function e(t,r,n,o){if(void 0===n&&(n=0),!(n>20)){if(n++,b(t)||b(r)||y(r))s=m(r);else if(g(t)){if(s=t.slice(),g(r))for(var i,a,s,l=0,u=r.length;l<u;l++)s.push(m(r[l]));else if(v(r))for(var c=Object.keys(r),l=0,u=c.length;l<u;l++){var p=c[l];s[p]=m(r[p])}}else if(v(t))if(v(r)){if(i=t,a=r,!(d(i)&&d(a)))return r;s=Object.assign({},t);for(var c=Object.keys(r),l=0,u=c.length;l<u;l++){var p=c[l],h=r[p];if(b(h))void 0===h?delete s[p]:s[p]=h;else{var _=s[p];if(f(t,p,o)||f(r,p,o))delete s[p];else{if(v(_)&&v(h)){var E=o.get(_)||[],S=o.get(h)||[];E.push({obj:t,key:p}),S.push({obj:r,key:p}),o.set(_,E),o.set(h,S)}s[p]=e(s[p],h,n,o)}}}}else s=r;return s}}(r,e.shift(),0,n);return r}function m(e){return g(e)?e.slice():e}function f(e,t,r){for(var n=r.get(e[t])||[],o=0,i=n.length;o<i;o++){var a=n[o];if(a.key===t&&a.obj===e)return!0}return!1}function g(e){return Array.isArray(e)}function y(e){return"function"==typeof e}function v(e){return!b(e)&&!g(e)&&!y(e)&&"object"==typeof e}function b(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}},16257:(e,t)=>{"use strict";class r{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,r=this.lineStarts.length;for(;t<r;){let n=t+r>>1;this.lineStarts[n]<e?t=n+1:r=n}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(0===t)return{line:0,col:e};let n=this.lineStarts[t-1];return{line:t,col:e-n+1}}}}t.LineCounter=r},16277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(58592);t.default={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:o}=e;if(!Array.isArray(r))throw Error("ajv implementation error");let i=t.name("valid");r.forEach((t,r)=>{if((0,n.alwaysValidSchema)(o,t))return;let a=e.subschema({keyword:"allOf",schemaProp:r},i);e.ok(i),e.mergeEvaluated(a)})}}},16283:(e,t,r)=>{"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){n.default(e)};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(38327))},16361:(e,t,r)=>{"use strict";var n=r(46076);let o={identify:e=>null==e,createNode:()=>new n.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new n.Scalar(null),stringify:({source:e},t)=>"string"==typeof e&&o.test.test(e)?e:t.options.nullStr};t.nullTag=o},16435:(e,t,r)=>{"use strict";let n=r(58417),o={};function i(e){return e.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function a(e){let t=["domains","aliases"],r={};return Object.keys(e).forEach(n=>{0>t.indexOf(n)&&(r[n]=e[n])}),r}Object.keys(n).forEach(e=>{let t=n[e];o[i(e)]=a(t),[].concat(t.aliases||[]).forEach(e=>{o[i(e)]=a(t)}),[].concat(t.domains||[]).forEach(e=>{o[i(e)]=a(t)})}),e.exports=function(e){return o[e=i(e.split("@").pop())]||!1}},16486:(e,t)=>{"use strict";function r(e){switch(e.type){case"block-scalar":{let t="";for(let n of e.props)t+=r(n);return t+e.source}case"block-map":case"block-seq":{let t="";for(let r of e.items)t+=n(r);return t}case"flow-collection":{let t=e.start.source;for(let r of e.items)t+=n(r);for(let r of e.end)t+=r.source;return t}case"document":{let t=n(e);if(e.end)for(let r of e.end)t+=r.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(let r of e.end)t+=r.source;return t}}}function n({start:e,key:t,sep:n,value:o}){let i="";for(let t of e)i+=t.source;if(t&&(i+=r(t)),n)for(let e of n)i+=e.source;return o&&(i+=r(o)),i}t.stringify=e=>"type"in e?r(e):n(e)},16540:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};async function a(e,t){let r=await fetch(`${e}/v1beta/models?pageSize=1000&key=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});return JSON.parse(await r.text()).models}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{listModels:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i)},16584:(e,t,r)=>{"use strict";var n=r(57837),o=r(99122),i=r(52904);function a(e,t,r){let o=r;for(let e=t.length-1;e>=0;--e){let r=t[e];if("number"==typeof r&&Number.isInteger(r)&&r>=0){let e=[];e[r]=o,o=e}else o=new Map([[r,o]])}return n.createNode(o,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}let s=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class l extends i.NodeBase{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(t=>o.isNode(t)||o.isPair(t)?t.clone(e):t),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(s(e))this.add(t);else{let[r,...n]=e,i=this.get(r,!0);if(o.isCollection(i))i.addIn(n,t);else if(void 0===i&&this.schema)this.set(r,a(this.schema,n,t));else throw Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}}deleteIn(e){let[t,...r]=e;if(0===r.length)return this.delete(t);let n=this.get(t,!0);if(o.isCollection(n))return n.deleteIn(r);throw Error(`Expected YAML collection at ${t}. Remaining path: ${r}`)}getIn(e,t){let[r,...n]=e,i=this.get(r,!0);return 0===n.length?!t&&o.isScalar(i)?i.value:i:o.isCollection(i)?i.getIn(n,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!o.isPair(t))return!1;let r=t.value;return null==r||e&&o.isScalar(r)&&null==r.value&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){let[t,...r]=e;if(0===r.length)return this.has(t);let n=this.get(t,!0);return!!o.isCollection(n)&&n.hasIn(r)}setIn(e,t){let[r,...n]=e;if(0===n.length)this.set(r,t);else{let e=this.get(r,!0);if(o.isCollection(e))e.setIn(n,t);else if(void 0===e&&this.schema)this.set(r,a(this.schema,n,t));else throw Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}}}t.Collection=l,t.collectionFromPath=a,t.isEmptyPath=s},16698:e=>{"use strict";e.exports=require("node:async_hooks")},16837:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(66112),o=void 0;function i(e,t,r){if(n.isArray(e)){for(var o=[],i=0,a=e.length;i<a;i++)o.push(t.wrap(e[i],r));return o}return"boolean"==typeof e||"number"==typeof e?e+"":e}function a(e){this.srcFile=e,this.source=[]}o||((o=function(e,t,r,n){this.src="",n&&this.add(n)}).prototype={add:function(e){n.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){n.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),a.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,r=this.source.length;t<r;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new o(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof o?e:(e=i(e,this,t),new o(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,r=[];Object.keys(e).forEach(function(n){var o=i(e[n],t);"undefined"!==o&&r.push([t.quotedString(n),":",o])});var n=this.generateList(r);return n.prepend("{"),n.add("}"),n},generateList:function(e){for(var t=this.empty(),r=0,n=e.length;r<n;r++)r&&t.add(","),t.add(i(e[r],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=a,e.exports=t.default},16911:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AlwaysOffSampler:()=>w,AlwaysOnSampler:()=>T,BasicTracerProvider:()=>et,BatchSpanProcessor:()=>ee,ConsoleSpanExporter:()=>en,ForceFlushState:()=>o,InMemorySpanExporter:()=>ea,NoopSpanProcessor:()=>Z,ParentBasedSampler:()=>N,RandomIdGenerator:()=>M,SamplingDecision:()=>n,SimpleSpanProcessor:()=>eu,Span:()=>E,TraceIdRatioBasedSampler:()=>P,Tracer:()=>F});var n,o,i=r(66061),a=r(76895),s=r(86713),l=r(61315),u=r(21974),c=r(56233),p=r(33076),d=r(82136),h=r(17139),m=r(89131),f=r(63380),g=r(18803),y=r(78955),v=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},_=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},E=function(){function e(e,t,r,n,o,i,a,s,l,u){void 0===a&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:m.s.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=n,this.parentSpanId=i,this.kind=o,this.links=a;var c=Date.now();this._performanceStartTime=f.u.now(),this._performanceOffset=c-(this._performanceStartTime+(0,g.uc)()),this._startTimeProvided=null!=s,this.startTime=this._getTime(null!=s?s:c),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,null!=u&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()||(0===e.length?s.s.warn("Invalid attribute key: "+e):(0,h.m)(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?this._droppedAttributesCount++:this.attributes[e]=this._truncateToSize(t):s.s.warn("Invalid attribute value set for key: "+e)),this},e.prototype.setAttributes=function(e){var t,r;try{for(var n=v(Object.entries(e)),o=n.next();!o.done;o=n.next()){var i=b(o.value,2),a=i[0],s=i[1];this.setAttribute(a,s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,r){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return s.s.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(0===this._droppedEventsCount&&s.s.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,g.Ir)(t)&&((0,g.Ir)(r)||(r=t),t=void 0);var n=(0,h.L)(t);return this.events.push({name:e,attributes:n,time:this._getTime(r),droppedAttributesCount:0}),this},e.prototype.addLink=function(e){return this.links.push(e),this},e.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,_([],b(e),!1)),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){if(this._isSpanEnded())return void s.s.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");this._ended=!0,this.endTime=this._getTime(e),this._duration=(0,g.W5)(this.startTime,this.endTime),this._duration[0]<0&&(s.s.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&s.s.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},e.prototype._getTime=function(e){if("number"==typeof e&&e<f.u.now())return(0,g._5)(e+this._performanceOffset);if("number"==typeof e)return(0,g.lg)(e);if(e instanceof Date)return(0,g.lg)(e.getTime());if((0,g.VL)(e))return e;if(this._startTimeProvided)return(0,g.lg)(Date.now());var t=f.u.now()-this._performanceStartTime;return(0,g.mw)(this.startTime,(0,g.lg)(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var r={};"string"==typeof e?r[y.aP6]=e:e&&(e.code?r[y.P4J]=e.code.toString():e.name&&(r[y.P4J]=e.name),e.message&&(r[y.aP6]=e.message),e.stack&&(r[y.ipG]=e.stack)),r[y.P4J]||r[y.aP6]?this.addEvent("exception",r,t):s.s.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&s.s.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,r=this._attributeValueLengthLimit;return r<=0?(s.s.warn("Attribute value limit must be positive, got "+r),e):"string"==typeof e?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(function(e){return"string"==typeof e?t._truncateToLimitUtil(e,r):e}):e},e}(),S=r(28038),x=r(90357);!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(n||(n={}));var w=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:n.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),T=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:n.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),A=r(93158),O=r(987),N=function(){function e(e){var t,r,n,o;this._root=e.root,this._root||((0,O.s)(Error("ParentBasedSampler must have a root sampler configured")),this._root=new T),this._remoteParentSampled=null!=(t=e.remoteParentSampled)?t:new T,this._remoteParentNotSampled=null!=(r=e.remoteParentNotSampled)?r:new w,this._localParentSampled=null!=(n=e.localParentSampled)?n:new T,this._localParentNotSampled=null!=(o=e.localParentNotSampled)?o:new w}return e.prototype.shouldSample=function(e,t,r,n,o,i){var s=a.u.getSpanContext(e);return s&&(0,A.YA)(s)?s.isRemote?s.traceFlags&p.X.SAMPLED?this._remoteParentSampled.shouldSample(e,t,r,n,o,i):this._remoteParentNotSampled.shouldSample(e,t,r,n,o,i):s.traceFlags&p.X.SAMPLED?this._localParentSampled.shouldSample(e,t,r,n,o,i):this._localParentNotSampled.shouldSample(e,t,r,n,o,i):this._root.shouldSample(e,t,r,n,o,i)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),P=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(0xffffffff*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,A.hX)(t)&&this._accumulate(t)<this._upperBound?n.RECORD_AND_SAMPLED:n.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,r=0;r<e.length/8;r++){var n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t},e}(),C=(0,S._)(),k=x.R.AlwaysOn;function I(){return{sampler:D(C),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,S._)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,S._)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,S._)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,S._)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,S._)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,S._)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,S._)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,S._)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function D(e){switch(void 0===e&&(e=(0,S._)()),e.OTEL_TRACES_SAMPLER){case x.R.AlwaysOn:return new T;case x.R.AlwaysOff:return new w;case x.R.ParentBasedAlwaysOn:return new N({root:new T});case x.R.ParentBasedAlwaysOff:return new N({root:new w});case x.R.TraceIdRatio:return new P(R(e));case x.R.ParentBasedTraceIdRatio:return new N({root:new P(R(e))});default:return s.s.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+k+'".'),new T}}function R(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return s.s.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(s.s.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):t<0||t>1?(s.s.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):t}var L=r(47751),M=function(){this.generateTraceId=U(16),this.generateSpanId=U(8)},j=Buffer.allocUnsafe(16);function U(e){return function(){for(var t=0;t<e/4;t++)j.writeUInt32BE(0x100000000*Math.random()>>>0,4*t);for(var t=0;t<e;t++)if(j[t]>0)break;else t===e-1&&(j[e-1]=1);return j.toString("hex",0,e)}}var F=function(){function e(e,t,r){this._tracerProvider=r;var n,o,i,a=(n={sampler:D()},(i=Object.assign({},o=I(),n,t)).generalLimits=Object.assign({},o.generalLimits,t.generalLimits||{}),i.spanLimits=Object.assign({},o.spanLimits,t.spanLimits||{}),i);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=t.idGenerator||new M,this.resource=r.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r=i._.active()),t.root&&(r=a.u.deleteSpan(r));var n,o,m,f,g,y,v=a.u.getSpan(r);if((0,d.Zf)(r)){s.s.debug("Instrumentation suppressed, returning Noop Span");var b=a.u.wrapSpanContext(l.dM);return b}var _=null==v?void 0:v.spanContext(),S=this._idGenerator.generateSpanId();_&&a.u.isSpanContextValid(_)?(f=_.traceId,g=_.traceState,y=_.spanId):f=this._idGenerator.generateTraceId();var x=null!=(n=t.kind)?n:u.v.INTERNAL,w=(null!=(o=t.links)?o:[]).map(function(e){return{context:e.context,attributes:(0,h.L)(e.attributes)}}),T=(0,h.L)(t.attributes),A=this._sampler.shouldSample(r,f,e,x,T,w);g=null!=(m=A.traceState)?m:g;var O={traceId:f,spanId:S,traceFlags:A.decision===c.i.RECORD_AND_SAMPLED?p.X.SAMPLED:p.X.NONE,traceState:g};if(A.decision===c.i.NOT_RECORD){s.s.debug("Recording is off, propagating context in a non-recording span");var b=a.u.wrapSpanContext(O);return b}var N=(0,h.L)(Object.assign(T,A.attributes));return new E(this,r,e,O,x,y,w,t.startTime,void 0,N)},e.prototype.startActiveSpan=function(e,t,r,n){if(!(arguments.length<2)){2==arguments.length?l=t:3==arguments.length?(o=t,l=r):(o=t,s=r,l=n);var o,s,l,u=null!=s?s:i._.active(),c=this.startSpan(e,o,u),p=a.u.setSpan(u,c);return i._.with(p,l,void 0,c)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),$=r(10026),B=r(16200),V=r(94134),z=r(10908),G=r(9984),H=r(86116),q=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},K=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,r=[];try{for(var n=q(this._spanProcessors),o=n.next();!o.done;o=n.next()){var i=o.value;r.push(i.forceFlush())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return new Promise(function(e){Promise.all(r).then(function(){e()}).catch(function(t){(0,O.s)(t||Error("MultiSpanProcessor: forceFlush failed")),e()})})},e.prototype.onStart=function(e,t){var r,n;try{for(var o=q(this._spanProcessors),i=o.next();!i.done;i=o.next())i.value.onStart(e,t)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.onEnd=function(e){var t,r;try{for(var n=q(this._spanProcessors),o=n.next();!o.done;o=n.next())o.value.onEnd(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,r=[];try{for(var n=q(this._spanProcessors),o=n.next();!o.done;o=n.next()){var i=o.value;r.push(i.shutdown())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return new Promise(function(e,t){Promise.all(r).then(function(){e()},t)})},e}(),Z=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),Y=r(19312),J=r(1037),W=r(80235),X=function(){function e(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var r=(0,S._)();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Y.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(s.s.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&p.X.SAMPLED)!=0&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){0===this._droppedSpansCount&&s.s.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(s.s.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise(function(t,r){for(var n=[],o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),i=0;i<o;i++)n.push(e._flushOneBatch());Promise.all(n).then(function(){t()}).catch(r)})},e.prototype._flushOneBatch=function(){var e=this;return(this._clearTimer(),0===this._finishedSpans.length)?Promise.resolve():new Promise(function(t,r){var n=setTimeout(function(){r(Error("Timeout"))},e._exportTimeoutMillis);i._.with((0,d.M1)(i._.active()),function(){e._finishedSpans.length<=e._maxExportBatchSize?(o=e._finishedSpans,e._finishedSpans=[]):o=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var o,i=function(){return e._exporter.export(o,function(e){var o;clearTimeout(n),e.code===J.V.SUCCESS?t():r(null!=(o=e.error)?o:Error("BatchSpanProcessor: span export failed"))})},a=null,s=0,l=o.length;s<l;s++){var u=o[s];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(null!=a||(a=[]),a.push(u.resource.waitForAsyncAttributes()))}null===a?i():Promise.all(a).then(i,function(e){(0,O.s)(e),r(e)})})})},e.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(t){e._isExporting=!1,(0,O.s)(t)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout(function(){return t()},this._scheduledDelayMillis),(0,W.K)(this._timer))}},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),Q=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.onShutdown=function(){},t}(X);!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(o||(o={}));var et=function(){function e(e){void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var t,r,n,o,i,a,s,l,u,c,p,d,h,m,f,g,y=(0,B.h)({},I(),(m=Object.assign({},(t=e).spanLimits),f=(0,S.w)(),m.attributeCountLimit=null!=(s=null!=(a=null!=(i=null!=(n=null==(r=t.spanLimits)?void 0:r.attributeCountLimit)?n:null==(o=t.generalLimits)?void 0:o.attributeCountLimit)?i:f.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)?a:f.OTEL_ATTRIBUTE_COUNT_LIMIT)?s:L.fv,m.attributeValueLengthLimit=null!=(h=null!=(d=null!=(p=null!=(u=null==(l=t.spanLimits)?void 0:l.attributeValueLengthLimit)?u:null==(c=t.generalLimits)?void 0:c.attributeValueLengthLimit)?p:f.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)?d:f.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)?h:L.aE,Object.assign({},t,{spanLimits:m})));this.resource=null!=(g=y.resource)?g:H.F.empty(),this.resource=H.F.default().merge(this.resource),this._config=Object.assign({},y,{resource:this.resource});var v=this._buildExporterFromEnv();if(void 0!==v){var b=new ee(v);this.activeSpanProcessor=b}else this.activeSpanProcessor=new Z}return e.prototype.getTracer=function(e,t,r){var n=e+"@"+(t||"")+":"+((null==r?void 0:r.schemaUrl)||"");return this._tracers.has(n)||this._tracers.set(n,new F({name:e,version:t,schemaUrl:null==r?void 0:r.schemaUrl},this._config,this)),this._tracers.get(n)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch(function(e){return s.s.error("Error while trying to shutdown current span processor",e)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new K(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),a.u.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&i._.setGlobalContextManager(e.contextManager),e.propagator&&$.$.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map(function(t){return new Promise(function(r){var n,i=setTimeout(function(){r(Error("Span processor did not completed within timeout period of "+e+" ms")),n=o.timeout},e);t.forceFlush().then(function(){clearTimeout(i),n!==o.timeout&&r(n=o.resolved)}).catch(function(e){clearTimeout(i),n=o.error,r(e)})})});return new Promise(function(e,r){Promise.all(t).then(function(t){var n=t.filter(function(e){return e!==o.resolved});n.length>0?r(n):e()}).catch(function(e){return r([e])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null==(t=this.constructor._registeredPropagators.get(e))?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null==(t=this.constructor._registeredExporters.get(e))?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set((0,S._)().OTEL_PROPAGATORS)),r=t.map(function(t){var r=e._getPropagator(t);return r||s.s.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),r}).reduce(function(e,t){return t&&e.push(t),e},[]);return 0===r.length?void 0:1===t.length?r[0]:new V.n({propagators:r})},e.prototype._buildExporterFromEnv=function(){var e=(0,S._)().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||s.s.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new z.lm}],["baggage",function(){return new G.t}]]),e._registeredExporters=new Map,e}(),er=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},en=function(){function e(){}return e.prototype.export=function(e,t){return this._sendSpans(e,t)},e.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype._exportInfo=function(e){var t;return{resource:{attributes:e.resource.attributes},traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:null==(t=e.spanContext().traceState)?void 0:t.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,g.w_)(e.startTime),duration:(0,g.w_)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},e.prototype._sendSpans=function(e,t){var r,n;try{for(var o=er(e),i=o.next();!i.done;i=o.next()){var a=i.value;console.dir(this._exportInfo(a),{depth:3})}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}if(t)return t({code:J.V.SUCCESS})},e}(),eo=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ei=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},ea=function(){function e(){this._finishedSpans=[],this._stopped=!1}return e.prototype.export=function(e,t){var r;if(this._stopped)return t({code:J.V.FAILED,error:Error("Exporter has been stopped")});(r=this._finishedSpans).push.apply(r,ei([],eo(e),!1)),setTimeout(function(){return t({code:J.V.SUCCESS})},0)},e.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.reset=function(){this._finishedSpans=[]},e.prototype.getFinishedSpans=function(){return this._finishedSpans},e}(),es=r(87535),el=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},eu=function(){function e(e){this._exporter=e,this._shutdownOnce=new Y.I(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.forceFlush=function(){var e,t,r,n;return e=this,t=void 0,r=void 0,n=function(){return el(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:if(e.sent(),!this._exporter.forceFlush)return[3,3];return[4,this._exporter.forceFlush()];case 2:e.sent(),e.label=3;case 3:return[2]}})},new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){var t,r,n=this;if(!this._shutdownOnce.isCalled&&(e.spanContext().traceFlags&p.X.SAMPLED)!=0){var o=function(){return es.internal._export(n._exporter,[e]).then(function(e){var t;e.code!==J.V.SUCCESS&&(0,O.s)(null!=(t=e.error)?t:Error("SimpleSpanProcessor: span export failed (status "+e+")"))}).catch(function(e){(0,O.s)(e)})};if(e.resource.asyncAttributesPending){var i=null==(r=(t=e.resource).waitForAsyncAttributes)?void 0:r.call(t).then(function(){return null!=i&&n._unresolvedExports.delete(i),o()},function(e){return(0,O.s)(e)});null!=i&&this._unresolvedExports.add(i)}else o()}},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}()},17064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(67884),o=r(22964),i=r(58592),a=r(58592);t.default={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:s,parentSchema:l,it:u}=e,{opts:c}=u,p=(0,n.allSchemaProperties)(r),d=p.filter(e=>(0,i.alwaysValidSchema)(u,r[e]));if(0===p.length||d.length===p.length&&(!u.opts.unevaluated||!0===u.props))return;let h=c.strictSchema&&!c.allowMatchingProperties&&l.properties,m=t.name("valid");!0===u.props||u.props instanceof o.Name||(u.props=(0,a.evaluatedPropsToName)(t,u.props));let{props:f}=u;for(let e of p)h&&function(e){for(let t in h)new RegExp(e).test(t)&&(0,i.checkStrictMode)(u,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}(e),u.allErrors?g(e):(t.var(m,!0),g(e),t.if(m));function g(r){t.forIn("key",s,i=>{t.if((0,o._)`${(0,n.usePattern)(e,r)}.test(${i})`,()=>{let n=d.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:i,dataPropType:a.Type.Str},m),u.opts.unevaluated&&!0!==f?t.assign((0,o._)`${f}[${i}]`,!0):n||u.allErrors||t.if((0,o.not)(m),()=>t.break())})})}}}},17139:(e,t,r)=>{"use strict";r.d(t,{L:()=>a,m:()=>l,oU:()=>s});var n=r(86713),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function a(e){var t,r,a={};if("object"!=typeof e||null==e)return a;try{for(var u=o(Object.entries(e)),c=u.next();!c.done;c=u.next()){var p=i(c.value,2),d=p[0],h=p[1];if(!s(d)){n.s.warn("Invalid attribute key: "+d);continue}if(!l(h)){n.s.warn("Invalid attribute value set for key: "+d);continue}Array.isArray(h)?a[d]=h.slice():a[d]=h}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return a}function s(e){return"string"==typeof e&&e.length>0}function l(e){return null==e||(Array.isArray(e)?function(e){try{for(var t,r,n,i=o(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(null!=s){if(!n){if(u(s)){n=typeof s;continue}return!1}if(typeof s!==n)return!1}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!0}(e):u(e))}function u(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}},17143:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;let i=r(14593);Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return i.Allow}}),o(r(14593),t);class a extends Error{}t.PartialJSON=a;class s extends Error{}function l(e,t=i.Allow.ALL){if("string"!=typeof e)throw TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw Error(`${e} is empty`);return u(e.trim(),t)}t.MalformedJSON=s,t.parseJSON=l;let u=(e,t)=>{let r=e.length,n=0,o=e=>{throw new a(`${e} at position ${n}`)},l=e=>{throw new s(`${e} at position ${n}`)},u=()=>(m(),n>=r&&o("Unexpected end of input"),'"'===e[n])?c():"{"===e[n]?p():"["===e[n]?d():"null"===e.substring(n,n+4)||i.Allow.NULL&t&&r-n<4&&"null".startsWith(e.substring(n))?(n+=4,null):"true"===e.substring(n,n+4)||i.Allow.BOOL&t&&r-n<4&&"true".startsWith(e.substring(n))?(n+=4,!0):"false"===e.substring(n,n+5)||i.Allow.BOOL&t&&r-n<5&&"false".startsWith(e.substring(n))?(n+=5,!1):"Infinity"===e.substring(n,n+8)||i.Allow.INFINITY&t&&r-n<8&&"Infinity".startsWith(e.substring(n))?(n+=8,1/0):"-Infinity"===e.substring(n,n+9)||i.Allow._INFINITY&t&&1<r-n&&r-n<9&&"-Infinity".startsWith(e.substring(n))?(n+=9,-1/0):"NaN"===e.substring(n,n+3)||i.Allow.NAN&t&&r-n<3&&"NaN".startsWith(e.substring(n))?(n+=3,NaN):h(),c=()=>{let a=n,s=!1;for(n++;n<r&&('"'!==e[n]||s&&"\\"===e[n-1]);)s="\\"===e[n]&&!s,n++;if('"'==e.charAt(n))try{return JSON.parse(e.substring(a,++n-Number(s)))}catch(e){l(String(e))}else if(i.Allow.STR&t)try{return JSON.parse(e.substring(a,n-Number(s))+'"')}catch(t){return JSON.parse(e.substring(a,e.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},p=()=>{n++,m();let a={};try{for(;"}"!==e[n];){if(m(),n>=r&&i.Allow.OBJ&t)return a;let o=c();m(),n++;try{let e=u();a[o]=e}catch(e){if(i.Allow.OBJ&t)return a;throw e}m(),","===e[n]&&n++}}catch(e){if(i.Allow.OBJ&t)return a;o("Expected '}' at end of object")}return n++,a},d=()=>{n++;let r=[];try{for(;"]"!==e[n];)r.push(u()),m(),","===e[n]&&n++}catch(e){if(i.Allow.ARR&t)return r;o("Expected ']' at end of array")}return n++,r},h=()=>{if(0===n){"-"===e&&l("Not sure what '-' is");try{return JSON.parse(e)}catch(r){if(i.Allow.NUM&t)try{return JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}l(String(r))}}let a=n;for("-"===e[n]&&n++;e[n]&&-1===",]}".indexOf(e[n]);)n++;n!=r||i.Allow.NUM&t||o("Unterminated number literal");try{return JSON.parse(e.substring(a,n))}catch(t){"-"===e.substring(a,n)&&o("Not sure what '-' is");try{return JSON.parse(e.substring(a,e.lastIndexOf("e")))}catch(e){l(String(e))}}},m=()=>{for(;n<r&&" \n\r	".includes(e[n]);)n++};return u()};t.parse=l},17694:(e,t,r)=>{"use strict";r.r(t),r.d(t,{InstrumentationBase:()=>k,InstrumentationNodeModuleDefinition:()=>D,InstrumentationNodeModuleFile:()=>R,isWrapped:()=>N,registerInstrumentations:()=>a,safeExecuteInTheMiddle:()=>A,safeExecuteInTheMiddleAsync:()=>O});var n=r(76895),o=r(84783),i=r(15806);function a(e){for(var t,r,a=e.tracerProvider||n.u.getTracerProvider(),s=e.meterProvider||o.q.getMeterProvider(),l=e.loggerProvider||i.logs.getLoggerProvider(),u=null!=(r=null==(t=e.instrumentations)?void 0:t.flat())?r:[],c=0,p=u.length;c<p;c++){var d=u[c];a&&d.setTracerProvider(a),s&&d.setMeterProvider(s),l&&d.setLoggerProvider&&d.setLoggerProvider(l),d.getConfig().enabled||d.enable()}return function(){u.forEach(function(e){return e.disable()})}}var s=r(33873),l=r(28354),u=r(28584),c=r(78879),p=r(86713),d=function(){return(d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=function(){function e(e,t,r){this.instrumentationName=e,this.instrumentationVersion=t,this._wrap=c.wrap,this._unwrap=c.unwrap,this._massWrap=c.massWrap,this._massUnwrap=c.massUnwrap,this._config=d({enabled:!0},r),this._diag=p.s.createComponentLogger({namespace:e}),this._tracer=n.u.getTracer(e,t),this._meter=o.q.getMeter(e,t),this._logger=i.logs.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(e.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),e.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),e.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},e.prototype.getModuleDefinitions=function(){var e,t=null!=(e=this.init())?e:[];return Array.isArray(t)?t:[t]},e.prototype._updateMetricInstruments=function(){},e.prototype.getConfig=function(){return this._config},e.prototype.setConfig=function(e){this._config=d({},e)},e.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(e.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),e.prototype._runSpanCustomizationHook=function(e,t,r,n){if(e)try{e(r,n)}catch(e){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},e)}},e}();let m=require("require-in-the-middle");var f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},g=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},y=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},v=function(){this.hooks=[],this.children=new Map},b=function(){function e(){this._trie=new v,this._counter=0}return e.prototype.insert=function(e){var t,r,n=this._trie;try{for(var o=f(e.moduleName.split("/")),i=o.next();!i.done;i=o.next()){var a=i.value,s=n.children.get(a);s||(s=new v,n.children.set(a,s)),n=s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}n.hooks.push({hook:e,insertedId:this._counter++})},e.prototype.search=function(e,t){var r,n,o=void 0===t?{}:t,i=o.maintainInsertionOrder,a=o.fullOnly,s=this._trie,l=[],u=!0;try{for(var c=f(e.split("/")),p=c.next();!p.done;p=c.next()){var d=p.value,h=s.children.get(d);if(!h){u=!1;break}a||l.push.apply(l,y([],g(h.hooks),!1)),s=h}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return(a&&u&&l.push.apply(l,y([],g(s.hooks),!1)),0===l.length)?[]:1===l.length?[l[0].hook]:(i&&l.sort(function(e,t){return e.insertedId-t.insertedId}),l.map(function(e){return e.hook}))},e}(),_=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},E=["afterEach","after","beforeEach","before","describe","it"].every(function(e){return"function"==typeof global[e]}),S=function(){function e(){this._moduleNameTrie=new b,this._initialize()}return e.prototype._initialize=function(){var e=this;new m.Hook(null,{internals:!0},function(t,r,n){var o,i,a,l=(o=r,"/"!==s.sep?o.split(s.sep).join("/"):o),u=e._moduleNameTrie.search(l,{maintainInsertionOrder:!0,fullOnly:void 0===n});try{for(var c=_(u),p=c.next();!p.done;p=c.next())t=(0,p.value.onRequire)(t,r,n)}catch(e){i={error:e}}finally{try{p&&!p.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return t})},e.prototype.register=function(e,t){var r={moduleName:e,onRequire:t};return this._moduleNameTrie.insert(r),r},e.getInstance=function(){var t;return E?new e:this._instance=null!=(t=this._instance)?t:new e},e}();let x=require("import-in-the-middle");var w=r(29021),T=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};function A(e,t,r){var n,o;try{o=e()}catch(e){n=e}finally{if(t(n,o),n&&!r)throw n;return o}}function O(e,t,r){var n,o,i,a;return n=this,o=void 0,i=void 0,a=function(){var n,o;return T(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),[4,e()];case 1:return o=i.sent(),[3,4];case 2:return n=i.sent(),[3,4];case 3:if(t(n,o),n&&!r)throw n;return[2,o];case 4:return[2]}})},new(i||(i=Promise))(function(e,t){function r(e){try{l(a.next(e))}catch(e){t(e)}}function s(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(r,s)}l((a=a.apply(n,o||[])).next())})}function N(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}var P=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),C=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},k=function(e){function t(t,r,n){var o=e.call(this,t,r,n)||this;o._hooks=[],o._requireInTheMiddleSingleton=S.getInstance(),o._enabled=!1,o._wrap=function(e,t,r){if(N(e[t])&&o._unwrap(e,t),!l.types.isProxy(e))return(0,c.wrap)(e,t,r);var n=(0,c.wrap)(Object.assign({},e),t,r);return Object.defineProperty(e,t,{value:n})},o._unwrap=function(e,t){return l.types.isProxy(e)?Object.defineProperty(e,t,{value:e[t]}):(0,c.unwrap)(e,t)},o._massWrap=function(e,t,r){return e?(Array.isArray(e)||(e=[e]),t&&Array.isArray(t))?void e.forEach(function(e){t.forEach(function(t){o._wrap(e,t,r)})}):void p.s.error("must provide one or more functions to wrap on modules"):void p.s.error("must provide one or more modules to patch")},o._massUnwrap=function(e,t){return e?(Array.isArray(e)||(e=[e]),t&&Array.isArray(t))?void e.forEach(function(e){t.forEach(function(t){o._unwrap(e,t)})}):void p.s.error("must provide one or more functions to wrap on modules"):void p.s.error("must provide one or more modules to patch")};var i=o.init();return i&&!Array.isArray(i)&&(i=[i]),o._modules=i||[],0===o._modules.length&&p.s.debug("No modules instrumentation has been defined for "+("'"+o.instrumentationName+"@")+o.instrumentationVersion+"', nothing will be patched"),o._config.enabled&&o.enable(),o}return P(t,e),t.prototype._warnOnPreloadedModules=function(){var e=this;this._modules.forEach(function(t){var n=t.name;try{var o=r(44725).resolve(n);r.c[o]&&e._diag.warn("Module "+n+" has been loaded before "+e.instrumentationName+" so it might not work, please initialize it before requiring "+n)}catch(e){}})},t.prototype._extractPackageVersion=function(e){try{var t=(0,w.readFileSync)(s.join(e,"package.json"),{encoding:"utf8"}),r=JSON.parse(t).version;return"string"==typeof r?r:void 0}catch(t){p.s.warn("Failed extracting version",e)}},t.prototype._onRequire=function(e,t,r,n){var o,i=this;if(!n)return"function"==typeof e.patch&&(e.moduleExports=t,this._enabled)?(this._diag.debug("Applying instrumentation patch for nodejs core module on require hook",{module:e.name}),e.patch(t)):t;var a=this._extractPackageVersion(n);if(e.moduleVersion=a,e.name===r)return I(e.supportedVersions,a,e.includePrerelease)&&"function"==typeof e.patch&&(e.moduleExports=t,this._enabled)?(this._diag.debug("Applying instrumentation patch for module on require hook",{module:e.name,version:e.moduleVersion,baseDir:n}),e.patch(t,e.moduleVersion)):t;var l=null!=(o=e.files)?o:[],u=s.normalize(r);return l.filter(function(e){return e.name===u}).filter(function(t){return I(t.supportedVersions,a,e.includePrerelease)}).reduce(function(t,r){return(r.moduleExports=t,i._enabled)?(i._diag.debug("Applying instrumentation patch for nodejs module file on require hook",{module:e.name,version:e.moduleVersion,fileName:r.name,baseDir:n}),r.patch(t,e.moduleVersion)):t},t)},t.prototype.enable=function(){var e,t,r,n,o,i,a=this;if(!this._enabled){if(this._enabled=!0,this._hooks.length>0){try{for(var l=C(this._modules),u=l.next();!u.done;u=l.next()){var c=u.value;"function"==typeof c.patch&&c.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:c.name,version:c.moduleVersion}),c.patch(c.moduleExports,c.moduleVersion));try{for(var p=(r=void 0,C(c.files)),d=p.next();!d.done;d=p.next()){var h=d.value;h.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:c.name,version:c.moduleVersion,fileName:h.name}),h.patch(h.moduleExports,c.moduleVersion))}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}return}this._warnOnPreloadedModules();var f=function(e){var t=function(t,r,n){return a._onRequire(e,t,r,n)},r=s.isAbsolute(e.name)?new m.Hook([e.name],{internals:!0},t):g._requireInTheMiddleSingleton.register(e.name,t);g._hooks.push(r);var n=new x.Hook([e.name],{internals:!1},function(t,r,n){return a._onRequire(e,t,r,n)});g._hooks.push(n)},g=this;try{for(var y=C(this._modules),v=y.next();!v.done;v=y.next()){var b=v.value;f(b)}}catch(e){o={error:e}}finally{try{v&&!v.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}}},t.prototype.disable=function(){var e,t,r,n;if(this._enabled){this._enabled=!1;try{for(var o=C(this._modules),i=o.next();!i.done;i=o.next()){var a=i.value;"function"==typeof a.unpatch&&a.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:a.name,version:a.moduleVersion}),a.unpatch(a.moduleExports,a.moduleVersion));try{for(var s=(r=void 0,C(a.files)),l=s.next();!l.done;l=s.next()){var u=l.value;u.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:a.name,version:a.moduleVersion,fileName:u.name}),u.unpatch(u.moduleExports,a.moduleVersion))}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}},t.prototype.isEnabled=function(){return this._enabled},t}(h);function I(e,t,r){return void 0===t?e.includes("*"):e.some(function(e){return(0,u.satisfies)(t,e,{includePrerelease:r})})}var D=function(e,t,r,n,o){this.name=e,this.supportedVersions=t,this.patch=r,this.unpatch=n,this.files=o||[]},R=function(e,t,r,n){this.supportedVersions=t,this.patch=r,this.unpatch=n,this.name=(0,s.normalize)(e)}},17704:(e,t,r)=>{"use strict";let n=r(91292),o=r(7180),i=r(18199);class a{constructor(e,t){this.mailer=e,this.data={},this.message=null,t=t||{};let r=e.options||{},n=e._defaults||{};Object.keys(t).forEach(e=>{this.data[e]=t[e]}),this.data.headers=this.data.headers||{},Object.keys(n).forEach(e=>{e in this.data?"headers"===e&&Object.keys(n.headers).forEach(e=>{e in this.data.headers||(this.data.headers[e]=n.headers[e])}):this.data[e]=n[e]}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach(e=>{e in r&&(this.data[e]=r[e])})}resolveContent(...e){return n.resolveContent(...e)}resolveAll(e){let t=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach((e,r)=>{t.push([this.data.alternatives,r])}),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach((e,r)=>{!e.filename&&(e.filename=(e.path||e.href||"").split("/").pop().split("?").shift()||"attachment-"+(r+1),0>e.filename.indexOf(".")&&(e.filename+="."+i.detectExtension(e.contentType))),e.contentType||(e.contentType=i.detectMimeType(e.filename||e.path||e.href||"bin")),t.push([this.data.attachments,r])});let r=new o;["from","to","cc","bcc","sender","replyTo"].forEach(e=>{let t;this.message?t=[].concat(r._parseAddresses(this.message.getHeader("replyTo"===e?"reply-to":e))||[]):this.data[e]&&(t=[].concat(r._parseAddresses(this.data[e])||[])),t&&t.length?this.data[e]=t:e in this.data&&(this.data[e]=null)}),["from","sender"].forEach(e=>{this.data[e]&&(this.data[e]=this.data[e].shift())});let a=0,s=()=>{if(a>=t.length)return e(null,this.data);let r=t[a++];if(!r[0]||!r[0][r[1]])return s();n.resolveContent(...r,(t,n)=>{if(t)return e(t);let o={content:n};r[0][r[1]]&&"object"==typeof r[0][r[1]]&&!Buffer.isBuffer(r[0][r[1]])&&Object.keys(r[0][r[1]]).forEach(e=>{e in o||["content","path","href","raw"].includes(e)||(o[e]=r[0][r[1]][e])}),r[0][r[1]]=o,s()})};setImmediate(()=>s())}normalize(e){let t=this.data.envelope||this.message.getEnvelope(),r=this.message.messageId();this.resolveAll((n,o)=>n?e(n):(o.envelope=t,o.messageId=r,["html","text","watchHtml","amp"].forEach(e=>{o[e]&&o[e].content&&("string"==typeof o[e].content?o[e]=o[e].content:Buffer.isBuffer(o[e].content)&&(o[e]=o[e].content.toString()))}),o.icalEvent&&Buffer.isBuffer(o.icalEvent.content)&&(o.icalEvent.content=o.icalEvent.content.toString("base64"),o.icalEvent.encoding="base64"),o.alternatives&&o.alternatives.length&&o.alternatives.forEach(e=>{e&&e.content&&Buffer.isBuffer(e.content)&&(e.content=e.content.toString("base64"),e.encoding="base64")}),o.attachments&&o.attachments.length&&o.attachments.forEach(e=>{e&&e.content&&Buffer.isBuffer(e.content)&&(e.content=e.content.toString("base64"),e.encoding="base64")}),o.normalizedHeaders={},Object.keys(o.headers||{}).forEach(e=>{let t=[].concat(o.headers[e]||[]).shift();(t=t&&t.value||t)&&(["references","in-reply-to","message-id","content-id"].includes(e)&&(t=this.message._encodeHeaderValue(e,t)),o.normalizedHeaders[e]=t)}),o.list&&"object"==typeof o.list&&this._getListHeaders(o.list).forEach(e=>{o.normalizedHeaders[e.key]=e.value.map(e=>e&&e.value||e).join(", ")}),o.references&&(o.normalizedHeaders.references=this.message._encodeHeaderValue("references",o.references)),o.inReplyTo&&(o.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",o.inReplyTo)),e(null,o)))}setMailerHeader(){this.message&&this.data.xMailer&&this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(this.message&&this.data.priority)switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low")}}setListHeaders(){this.message&&this.data.list&&"object"==typeof this.data.list&&this.data.list&&"object"==typeof this.data.list&&this._getListHeaders(this.data.list).forEach(e=>{e.value.forEach(t=>{this.message.addHeader(e.key,t)})})}_getListHeaders(e){return Object.keys(e).map(t=>({key:"list-"+t.toLowerCase().trim(),value:[].concat(e[t]||[]).map(e=>({prepared:!0,foldLines:!0,value:[].concat(e||[]).map(e=>{if("string"==typeof e&&(e={url:e}),e&&e.url){if("id"===t.toLowerCase().trim()){let t=e.comment||"";return t=i.isPlainText(t)?'"'+t+'"':i.encodeWord(t),(e.comment?t+" ":"")+this._formatListUrl(e.url).replace(/^<[^:]+\/{,2}/,"")}let r=e.comment||"";return i.isPlainText(r)||(r=i.encodeWord(r)),this._formatListUrl(e.url)+(e.comment?" ("+r+")":"")}return""}).filter(e=>e).join(", ")}))}))}_formatListUrl(e){return(e=e.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(e))?"<"+e+">":/^[^@]+@[^@]+$/.test(e)?"<mailto:"+e+">":"<http://"+e+">"}}e.exports=a},17950:(e,t,r)=>{"use strict";let n=r(33877);e.exports=(e,t)=>n(e,t,!0)},18199:(e,t,r)=>{"use strict";let n=r(89066),o=r(63356),i=r(50143);e.exports={isPlainText:(e,t)=>!("string"!=typeof e||(t?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(e)),hasLongerLines:(e,t)=>e.length>131072||RegExp("^.{"+(t+1)+",}","m").test(e),encodeWord(e,t,r){let i;t=(t||"Q").toString().toUpperCase().trim().charAt(0);let a="UTF-8";if((r=r||0)&&r>7+a.length&&(r-=7+a.length),"Q"===t?i=o.encode(e).replace(/[^a-z0-9!*+\-/=]/gi,e=>{let t=e.charCodeAt(0).toString(16).toUpperCase();return" "===e?"_":"="+(1===t.length?"0"+t:t)}):"B"===t&&(i="string"==typeof e?e:n.encode(e),r=r?Math.max(3,(r-r%4)/4*3):0),r&&("B"!==t?i:n.encode(e)).length>r)if("Q"===t)i=this.splitMimeEncodedString(i,r).join("?= =?"+a+"?"+t+"?");else{let e=[],o="";for(let t=0,a=i.length;t<a;t++){let s=i.charAt(t);/[\ud83c\ud83d\ud83e]/.test(s)&&t<a-1&&(s+=i.charAt(++t)),Buffer.byteLength(o+s)<=r||0===t?o+=s:(e.push(n.encode(o)),o=s)}o&&e.push(n.encode(o)),i=e.length>1?e.join("?= =?"+a+"?"+t+"?"):e.join("")}else"B"===t&&(i=n.encode(e));return"=?"+a+"?"+t+"?"+i+("?="===i.substr(-2)?"":"?=")},encodeWords(e,t,r,n){r=r||0;let o=e.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!o)return e;if(n)return this.encodeWord(e,t,r);let i=e.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!i)return e;let a=o.index+(o[0].match(/[^\s]/)||{index:0}).index,s=i.index+(i[1]||"").length;return(a?e.substr(0,a):"")+this.encodeWord(e.substring(a,s),t||"Q",r)+(s<e.length?e.substr(s):"")},buildHeaderValue(e){let t=[];return Object.keys(e.params||{}).forEach(r=>{let n=e.params[r];!this.isPlainText(n,!0)||n.length>=75?this.buildHeaderParam(r,n,50).forEach(e=>{/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(e.value)&&"*"!==e.key.substr(-1)?t.push(e.key+"="+JSON.stringify(e.value)):t.push(e.key+"="+e.value)}):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(n)?t.push(r+"="+JSON.stringify(n)):t.push(r+"="+n)}),e.value+(t.length?"; "+t.join("; "):"")},buildHeaderParam(e,t,r){let n,o,i,a,s,l,u=[],c="string"==typeof t?t:(t||"").toString(),p=0;if(r=r||50,this.isPlainText(t,!0)){if(c.length<=r)return[{key:e,value:c}];(c=c.replace(RegExp(".{"+r+"}","g"),e=>(u.push({line:e}),"")))&&u.push({line:c})}else{if(/[\uD800-\uDBFF]/.test(c)){for(s=0,n=[],l=c.length;s<l;s++)(i=(o=c.charAt(s)).charCodeAt(0))>=55296&&i<=56319&&s<l-1?(o+=c.charAt(s+1),n.push(o),s++):n.push(o);c=n}a="utf-8''";let e=!0;for(s=0,p=0,l=c.length;s<l;s++){if(o=c[s],e)o=this.safeEncodeURIComponent(o);else if((o=" "===o?o:this.safeEncodeURIComponent(o))!==c[s])if((this.safeEncodeURIComponent(a)+o).length>=r)u.push({line:a,encoded:e}),a="",p=s-1;else{e=!0,s=p,a="";continue}(a+o).length>=r?(u.push({line:a,encoded:e}),a=o=" "===c[s]?" ":this.safeEncodeURIComponent(c[s]),o===c[s]?(e=!1,p=s-1):e=!0):a+=o}a&&u.push({line:a,encoded:e})}return u.map((t,r)=>({key:e+"*"+r+(t.encoded?"*":""),value:t.line}))},parseHeaderValue(e){let t,r={value:!1,params:{}},n=!1,o="",i="value",a=!1,s=!1;for(let l=0,u=e.length;l<u;l++)if(t=e.charAt(l),"key"===i){if("="===t){n=o.trim().toLowerCase(),i="value",o="";continue}o+=t}else{if(s)o+=t;else if("\\"===t){s=!0;continue}else a&&t===a?a=!1:a||'"'!==t?a||";"!==t?o+=t:(!1===n?r.value=o.trim():r.params[n]=o.trim(),i="key",o=""):a=t;s=!1}return"value"===i?!1===n?r.value=o.trim():r.params[n]=o.trim():o.trim()&&(r.params[o.trim().toLowerCase()]=""),Object.keys(r.params).forEach(e=>{let t,n,o,i;(o=e.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(t=e.substr(0,o.index),n=Number(o[2]||o[3])||0,r.params[t]&&"object"==typeof r.params[t]||(r.params[t]={charset:!1,values:[]}),i=r.params[e],0===n&&"*"===o[0].substr(-1)&&(o=i.match(/^([^']*)'[^']*'(.*)$/))&&(r.params[t].charset=o[1]||"iso-8859-1",i=o[2]),r.params[t].values[n]=i,delete r.params[e])}),Object.keys(r.params).forEach(e=>{let t;r.params[e]&&Array.isArray(r.params[e].values)&&(t=r.params[e].values.map(e=>e||"").join(""),r.params[e].charset?r.params[e]="=?"+r.params[e].charset+"?Q?"+t.replace(/[=?_\s]/g,e=>{let t=e.charCodeAt(0).toString(16);return" "===e?"_":"%"+(t.length<2?"0":"")+t}).replace(/%/g,"=")+"?=":r.params[e]=t)}),r},detectExtension:e=>i.detectExtension(e),detectMimeType:e=>i.detectMimeType(e),foldLines(e,t,r){e=(e||"").toString(),t=t||76;let n=0,o=e.length,i="",a,s;for(;n<o;){if((a=e.substr(n,t)).length<t){i+=a;break}if(s=a.match(/^[^\n\r]*(\r?\n|\r)/)){i+=a=s[0],n+=a.length;continue}(s=a.match(/(\s+)[^\s]*$/))&&s[0].length-(r?(s[1]||"").length:0)<a.length?a=a.substr(0,a.length-(s[0].length-(r?(s[1]||"").length:0))):(s=e.substr(n+a.length).match(/^[^\s]+(\s*)/))&&(a+=s[0].substr(0,s[0].length-(r?0:(s[1]||"").length))),i+=a,(n+=a.length)<o&&(i+="\r\n")}return i},splitMimeEncodedString:(e,t)=>{let r,n,o,i,a=[];for(t=Math.max(t||0,12);e.length;){for((n=(r=e.substr(0,t)).match(/[=][0-9A-F]?$/i))&&(r=r.substr(0,n.index)),i=!1;!i;)i=!0,(n=e.substr(r.length).match(/^[=]([0-9A-F]{2})/i))&&(o=parseInt(n[1],16))<194&&o>127&&(r=r.substr(0,r.length-3),i=!1);r.length&&a.push(r),e=e.substr(r.length)}return a},encodeURICharComponent:e=>{let t="",r=e.charCodeAt(0).toString(16).toUpperCase();if(r.length%2&&(r="0"+r),r.length>2)for(let e=0,n=r.length/2;e<n;e++)t+="%"+r.substr(e,2);else t+="%"+r;return t},safeEncodeURIComponent(e){e=(e||"").toString();try{e=encodeURIComponent(e)}catch(t){return e.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return e.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,e=>this.encodeURICharComponent(e))}}},18271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAnyDef=void 0;let n=r(57277);t.parseAnyDef=function(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?(0,n.getRelativePath)(t,e.currentPath):t.join("/")}}},18478:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{textFormatter:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a={name:"text",config:{contentType:"text/plain"},handler:()=>({parseChunk:e=>e.text,parseMessage:e=>e.text})}},18676:(e,t,r)=>{"use strict";r.d(t,{q:()=>a});var n,o=r(40620),i=r(92518),a=((n={})[i.$L]="opentelemetry",n[i.lb]="node",n[i.Pl]=i.wE,n[i.y$]=o.x,n)},18758:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{Genkit:()=>E,__disableReflectionApi:()=>T,genkit:()=>S}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(57298),u=r(15624),c=r(90911),p=r(58457),d=r(58799),h=r(35236),m=r(8404),f=r(71622),g=r(83455),y=r(51255),v=r(97535),b=r(73287),_=r(95552);class E{options;registry;reflectionServer=null;flows=[];get apiStability(){return this.registry.apiStability}constructor(e){this.options=e||{},this.registry=new b.Registry,this.options.context&&(this.registry.context=this.options.context),this.configure(),(0,g.isDevEnv)()&&!w&&(this.reflectionServer=new g.ReflectionServer(this.registry,{configuredEnvs:["dev"]}),this.reflectionServer.start().catch(e=>v.logger.error))}defineFlow(e,t){let r=(0,g.defineFlow)(this.registry,e,t);return this.flows.push(r),r}defineTool(e,t){return(0,l.defineTool)(this.registry,e,t)}dynamicTool(e,t){return(0,f.dynamicTool)(e,t).attach(this.registry)}defineSchema(e,t){return(0,g.defineSchema)(this.registry,e,t)}defineJsonSchema(e,t){return(0,g.defineJsonSchema)(this.registry,e,t)}defineModel(e,t){return(0,d.defineModel)(this.registry,e,t)}defineBackgroundModel(e){return(0,d.defineBackgroundModel)(this.registry,e)}prompt(e,t){return this.wrapExecutablePromptPromise(`${e}${t?.variant?`.${t?.variant}`:""}`,(0,l.prompt)(this.registry,e,{...t,dir:this.options.promptDir??"./prompts"}))}wrapExecutablePromptPromise(e,t){let r=async(e,r)=>(await t)(e,r);return r.ref={name:e},r.render=async(e,r)=>(await t).render(e,r),r.stream=(r,n)=>{let o=new y.Channel,i=(0,_.runInNewSpan)(this.registry,{metadata:{name:e,input:r},labels:{[_.SPAN_TYPE_ATTR]:"dotprompt"}},()=>(0,l.generate)(this.registry,t.then(e=>e.render(r,{...n,onChunk:e=>o.send(e)}))));return i.then(()=>o.close(),e=>o.error(e)),{response:i,stream:o}},r.asTool=async()=>(await t).asTool(),r}definePrompt(e,t){if(t){if(e.messages)throw new g.GenkitError({status:"INVALID_ARGUMENT",message:"Cannot specify template/function argument and `options.messages` at the same time"});return"string"==typeof t?(0,l.definePrompt)(this.registry,{...e,messages:t}):(0,l.definePrompt)(this.registry,{...e,messages:async e=>(await t(e)).messages})}return(0,l.definePrompt)(this.registry,e)}defineRetriever(e,t){return(0,m.defineRetriever)(this.registry,e,t)}defineSimpleRetriever(e,t){return(0,m.defineSimpleRetriever)(this.registry,e,t)}defineIndexer(e,t){return(0,m.defineIndexer)(this.registry,e,t)}defineEvaluator(e,t){return(0,c.defineEvaluator)(this.registry,e,t)}defineEmbedder(e,t){return(0,u.defineEmbedder)(this.registry,e,t)}defineHelper(e,t){(0,l.defineHelper)(this.registry,e,t)}definePartial(e,t){(0,l.definePartial)(this.registry,e,t)}defineReranker(e,t){return(0,h.defineReranker)(this.registry,e,t)}embed(e){return(0,l.embed)(this.registry,e)}embedMany(e){return(0,u.embedMany)(this.registry,e)}evaluate(e){return(0,l.evaluate)(this.registry,e)}rerank(e){return(0,l.rerank)(this.registry,e)}index(e){return(0,m.index)(this.registry,e)}retrieve(e){return(0,l.retrieve)(this.registry,e)}async generate(e){let t;return t=e instanceof Promise?await e:"string"==typeof e||Array.isArray(e)?{prompt:e}:e,(0,l.generate)(this.registry,t)}generateStream(e){return("string"==typeof e||Array.isArray(e))&&(e={prompt:e}),(0,l.generateStream)(this.registry,e)}checkOperation(e){return(0,l.checkOperation)(this.registry,e)}run(e,t,r){return r?(0,g.run)(e,t,r,this.registry):(0,g.run)(e,t,this.registry)}currentContext(){return(0,g.getContext)(this)}configure(){let e=this.registry;(0,d.defineGenerateAction)(e),(0,p.configureFormats)(e);let t=[...this.options.plugins??[]];this.options.model&&this.registry.registerValue("defaultModel","defaultModel",this.options.model),null!==this.options.promptDir&&(0,l.loadPromptFolder)(this.registry,this.options.promptDir??"./prompts",""),t.forEach(t=>{let r=t(this);v.logger.debug(`Registering plugin ${r.name}...`),e.registerPluginProvider(r.name,{name:r.name,async initializer(){v.logger.debug(`Initializing plugin ${r.name}:`),await r.initializer()},async resolver(e,t){r.resolver&&await r.resolver(e,t)},listActions:async()=>r.listActions?await r.listActions():[]})})}async stopServers(){await this.reflectionServer?.stop(),this.reflectionServer=null}}function S(e){return new E(e)}let x=async()=>{v.logger.info("Shutting down all Genkit servers..."),await g.ReflectionServer.stopAll(),process.exit(0)};process.on("SIGTERM",x),process.on("SIGINT",x);let w=!1;function T(){w=!0}},18803:(e,t,r)=>{"use strict";r.d(t,{Ir:()=>m,JU:()=>p,KJ:()=>s,VL:()=>h,W5:()=>l,_5:()=>a,lg:()=>o,mw:()=>f,tq:()=>u,u5:()=>c,uc:()=>i,w_:()=>d});var n=r(63380);function o(e){return[Math.trunc(e/1e3),Math.round(e%1e3*1e6)]}function i(){var e=n.u.timeOrigin;if("number"!=typeof e){var t=n.u;e=t.timing&&t.timing.fetchStart}return e}function a(e){return f(o(i()),o("number"==typeof e?e:n.u.now()))}function s(e){if(h(e))return e;if("number"==typeof e)if(e<i())return a(e);else return o(e);if(e instanceof Date)return o(e.getTime());throw TypeError("Invalid input type")}function l(e,t){var r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=1e9),[r,n]}function u(e){var t=""+"0".repeat(9)+e[1]+"Z",r=t.substr(t.length-9-1);return new Date(1e3*e[0]).toISOString().replace("000Z",r)}function c(e){return 1e9*e[0]+e[1]}function p(e){return 1e3*e[0]+e[1]/1e6}function d(e){return 1e6*e[0]+e[1]/1e3}function h(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function m(e){return h(e)||"number"==typeof e||e instanceof Date}function f(e,t){var r=[e[0]+t[0],e[1]+t[1]];return r[1]>=1e9&&(r[1]-=1e9,r[0]+=1),r}},18868:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});var n=r(58504),o=r(86713),i=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};function a(){var e,t,r,a;return e=this,t=void 0,r=void 0,a=function(){var e,t,r;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,n.q)('ioreg -rd1 -c "IOPlatformExpertDevice"')];case 1:if(!(e=i.sent().stdout.split("\n").find(function(e){return e.includes("IOPlatformUUID")})))return[2,""];if(2===(t=e.split('" = "')).length)return[2,t[1].slice(0,-1)];return[3,3];case 2:return r=i.sent(),o.s.debug("error reading machine id: "+r),[3,3];case 3:return[2,""]}})},new(r||(r=Promise))(function(n,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((a=a.apply(e,t||[])).next())})}},19166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(21326);class o extends Error{constructor(e,t,r,o){super(o||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,n.resolveUrl)(e,t,r),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(e,this.missingRef))}}t.default=o},19312:(e,t,r)=>{"use strict";r.d(t,{I:()=>a});var n=function(){function e(){var e=this;this._promise=new Promise(function(t,r){e._resolve=t,e._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),o=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new n}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,i([this._that],o(r),!1))).then(function(e){return t._deferred.resolve(e)},function(e){return t._deferred.reject(e)})}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}()},19490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GrpcExporterTransport=t.createEmptyMetadata=t.createSslCredentials=t.createInsecureCredentials=void 0,t.createInsecureCredentials=function(){let{credentials:e}=r(71777);return e.createInsecure()},t.createSslCredentials=function(e,t,n){let{credentials:o}=r(71777);return o.createSsl(e,t,n)},t.createEmptyMetadata=function(){let{Metadata:e}=r(71777);return new e};class n{constructor(e){this._parameters=e}shutdown(){var e;null==(e=this._client)||e.close()}send(e){let t=Buffer.from(e);if(null==this._client){let{createServiceClientConstructor:e}=r(63879);try{this._metadata=this._parameters.metadata()}catch(e){return Promise.resolve({status:"failure",error:e})}let t=e(this._parameters.grpcPath,this._parameters.grpcName);try{var n;this._client=new t(this._parameters.address,this._parameters.credentials(),{"grpc.default_compression_algorithm":(n=this._parameters.compression,2*("gzip"===n))})}catch(e){return Promise.resolve({status:"failure",error:e})}}return new Promise(e=>{let r=Date.now()+this._parameters.timeoutMillis;if(null==this._metadata)return e({error:Error("metadata was null"),status:"failure"});this._client.export(t,this._metadata,{deadline:r},(t,r)=>{t?e({status:"failure",error:t}):e({data:r,status:"success"})})})}}t.GrpcExporterTransport=n},19515:(e,t,r)=>{"use strict";var n=r(46076);function o({value:e,source:t},r){let n=e?i:a;return t&&n.test.test(t)?t:e?r.options.trueStr:r.options.falseStr}let i={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new n.Scalar(!0),stringify:o},a={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new n.Scalar(!1),stringify:o};t.falseTag=a,t.trueTag=i},19623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePipelineDef=void 0;let n=r(70350);t.parsePipelineDef=(e,t)=>{if("input"===t.pipeStrategy)return(0,n.parseDef)(e.in._def,t);if("output"===t.pipeStrategy)return(0,n.parseDef)(e.out._def,t);let r=(0,n.parseDef)(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),o=(0,n.parseDef)(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,o].filter(e=>void 0!==e)}}},19771:e=>{"use strict";e.exports=require("process")},20068:(e,t,r)=>{"use strict";let n=r(49074),o=r(94735).EventEmitter,i=r(91645),a=r(34631),s=r(21820),l=r(55511),u=r(43519),c=r(27910).PassThrough,p=r(91292);class d extends o{constructor(e){super(e),this.id=l.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=e||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:!i.isIP(this.host)&&this.host,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,void 0===this.options.secure&&465===this.port&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=p.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach(e=>{let t=(e||"").toString().trim().toUpperCase();t&&this.customAuth.set(t,this.options.customAuth[e])}),this.version=n.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=e=>this._onData(e),this._onSocketError=e=>this._onError(e,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(e){if("function"==typeof e){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),e()});let t=this._isDestroyedMessage("connect");if(t)return e(this._formatError(t,"ECONNECTION",!1,"CONN"))}let t={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||3e4};this.options.localAddress&&(t.localAddress=this.options.localAddress);let r=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||12e4),this._socket.on("error",this._onSocketError)};if(this.options.connection){this._socket=this.options.connection,r(),this.secureConnection&&!this.alreadySecured?setImmediate(()=>this._upgradeConnection(e=>{if(e)return void this._onError(Error("Error initiating TLS - "+(e.message||e)),"ETLS",!1,"CONN");this._onConnect()})):setImmediate(()=>this._onConnect());return}return this.options.socket?(this._socket=this.options.socket,p.resolveHostname(t,(e,n)=>{if(e)return setImmediate(()=>this._onError(e,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:n.host,cached:!!n.cached},"Resolved %s as %s [cache %s]",t.host,n.host,n.cached?"hit":"miss"),Object.keys(n).forEach(e=>{"_"!==e.charAt(0)&&n[e]&&(t[e]=n[e])});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(e){return setImmediate(()=>this._onError(e,"ECONNECTION",!1,"CONN"))}})):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach(e=>{t[e]=this.options.tls[e]}),this.servername&&!t.servername&&(t.servername=this.servername),p.resolveHostname(t,(e,n)=>{if(e)return setImmediate(()=>this._onError(e,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:n.host,cached:!!n.cached},"Resolved %s as %s [cache %s]",t.host,n.host,n.cached?"hit":"miss"),Object.keys(n).forEach(e=>{"_"!==e.charAt(0)&&n[e]&&(t[e]=n[e])});try{this._socket=a.connect(t,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(e){return setImmediate(()=>this._onError(e,"ECONNECTION",!1,"CONN"))}})):p.resolveHostname(t,(e,n)=>{if(e)return setImmediate(()=>this._onError(e,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:n.host,cached:!!n.cached},"Resolved %s as %s [cache %s]",t.host,n.host,n.cached?"hit":"miss"),Object.keys(n).forEach(e=>{"_"!==e.charAt(0)&&n[e]&&(t[e]=n[e])});try{this._socket=i.connect(t,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(e){return setImmediate(()=>this._onError(e,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let e="end";"init"===this.stage&&(e="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',e);let t=this._socket&&this._socket.socket||this._socket;if(t&&!t.destroyed)try{t[e]()}catch(e){}this._destroy()}login(e,t){let r=this._isDestroyedMessage("login");if(r)return t(this._formatError(r,"ECONNECTION",!1,"API"));if(this._auth=e||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,this._authMethod||!this._auth.oauth2||this._auth.credentials?this._authMethod&&("XOAUTH2"!==this._authMethod||this._auth.oauth2)||(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()):this._authMethod="XOAUTH2","XOAUTH2"!==this._authMethod&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass))if(!(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod)))return t(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));else this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options};if(this.customAuth.has(this._authMethod)){let e,r=this.customAuth.get(this._authMethod),n=!1,o=()=>{n||(n=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,t(null,!0))},i=r=>{n||(n=!0,t(this._formatError(r,"EAUTH",e,"AUTH "+this._authMethod)))},a=r({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(t,r)=>{let n;return r||(n=new Promise((e,t)=>{r=p.callbackPromise(e,t)})),this._responseActions.push(n=>{e=n;let o=n.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),i={command:t,response:n};o?(i.status=Number(o[1])||0,o[2]&&(i.code=o[2]),i.text=n.substr(o[0].length)):(i.text=n,i.status=0),r(null,i)}),setImmediate(()=>this._sendCommand(t)),n},resolve:o,reject:i});a&&"function"==typeof a.catch&&a.then(o).catch(i);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,t);return;case"LOGIN":this._responseActions.push(e=>{this._actionAUTH_LOGIN_USER(e,t)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push(e=>{this._actionAUTHComplete(e,t)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push(e=>{this._actionAUTH_CRAM_MD5(e,t)}),this._sendCommand("AUTH CRAM-MD5");return}return t(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(e,t,r){if(!t)return r(this._formatError("Empty message","EMESSAGE",!1,"API"));let n=this._isDestroyedMessage("send message");if(n)return r(this._formatError(n,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&e.size>this._maxAllowedSize)return setImmediate(()=>{r(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let o=!1,i=function(){o||(o=!0,r(...arguments))};"function"==typeof t.on&&t.on("error",e=>i(this._formatError(e,"ESTREAM",!1,"API")));let a=Date.now();this._setEnvelope(e,(e,r)=>{if(e){let r=new c;return"function"==typeof t.pipe?t.pipe(r):(r.write(t),r.end()),i(e)}let n=Date.now(),o=this._createSendStream((e,t)=>e?i(e):(r.envelopeTime=n-a,r.messageTime=Date.now()-n,r.messageSize=o.outByteCount,r.response=t,i(null,r)));"function"==typeof t.pipe?t.pipe(o):(o.write(t),o.end())})}reset(e){this._sendCommand("RSET"),this._responseActions.push(t=>"2"!==t.charAt(0)?e(this._formatError("Could not reset session state. response="+t,"EPROTOCOL",t,"RSET")):(this._envelope=!1,e(null,!0)))}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed)return void this.close();this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||6e5),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||3e4),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(e){let t;if(this._destroyed||!e||!e.length)return;let r=(e||"").toString("binary"),n=(this._remainder+r).split(/\r?\n/);this._remainder=n.pop();for(let e=0,r=n.length;e<r;e++){if(this._responseQueue.length&&(t=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(t.split("\n").pop()))){this._responseQueue[this._responseQueue.length-1]+="\n"+n[e];continue}this._responseQueue.push(n[e])}this._responseQueue.length&&(t=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(t.split("\n").pop()))||this._processResponse()}_onError(e,t,r,n){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._destroyed||(e=this._formatError(e,t,r,n),this.logger.error(r,e.message),this.emit("error",e),this.close())}_formatError(e,t,r,n){let o;o=/Error\]$/i.test(Object.prototype.toString.call(e))?e:Error(e),t&&"Error"!==t&&(o.code=t),r&&(o.response=r,o.message+=": "+r);let i="string"==typeof r&&Number((r.match(/^\d+/)||[])[0])||!1;return i&&(o.responseCode=i),n&&(o.command=n),o}_onClose(){let e=!1;return(this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=e=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)?this._onError(Error("Connection closed unexpectedly"),"ETLS",e,"CONN"):![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed||/^[45]\d{2}\b/.test(e)?this._onError(Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN"):void this._destroy()}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(e){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let t=this._socket,r={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach(e=>{r[e]=this.options.tls[e]}),this.servername&&!r.servername&&(r.servername=this.servername),this.upgrading=!0;try{this._socket=a.connect(r,()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),t.removeListener("close",this._onSocketClose),t.removeListener("end",this._onSocketEnd),e(null,!0)))}catch(t){return e(t)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||6e5),this._socket.on("timeout",this._onSocketTimeout),t.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let e=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(e.split("\n").pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},e.replace(/\r?\n$/,"")),e.trim()||setImmediate(()=>this._processResponse());let t=this._responseActions.shift();if("function"!=typeof t)return this._onError(Error("Unexpected Response"),"EPROTOCOL",e,"CONN");t.call(this,e),setImmediate(()=>this._processResponse())}_sendCommand(e,t){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(t||e||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(e+"\r\n","utf-8"))}}_setEnvelope(e,t){let r=[],n=!1;if(this._envelope=e||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map(e=>(e&&e.address||e||"").toString().trim()),!this._envelope.to.length)return t(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return t(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(n=!0);for(let e=0,r=this._envelope.to.length;e<r;e++){if(!this._envelope.to[e]||/[\r\n<>]/.test(this._envelope.to[e]))return t(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[e]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[e])&&(n=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(e){return t(this._formatError("Invalid DSN "+e.message,"EENVELOPE",!1,"API"))}this._responseActions.push(e=>{this._actionMAIL(e,t)}),n&&this._supportedExtensions.includes("SMTPUTF8")&&(r.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(r.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&r.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&r.push("RET="+p.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&r.push("ENVID="+p.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(r.length?" "+r.join(" "):""))}_setDsnEnvelope(e){let t=(e.ret||e.return||"").toString().toUpperCase()||null;if(t)switch(t){case"HDRS":case"HEADERS":t="HDRS";break;case"FULL":case"BODY":t="FULL"}if(t&&!["FULL","HDRS"].includes(t))throw Error("ret: "+JSON.stringify(t));let r=(e.envid||e.id||"").toString()||null,n=e.notify||null;if(n){"string"==typeof n&&(n=n.split(","));let e=["NEVER","SUCCESS","FAILURE","DELAY"];if((n=n.map(e=>e.trim().toUpperCase())).filter(t=>!e.includes(t)).length||n.length>1&&n.includes("NEVER"))throw Error("notify: "+JSON.stringify(n.join(",")));n=n.join(",")}let o=(e.recipient||e.orcpt||"").toString()||null;return o&&0>o.indexOf(";")&&(o="rfc822;"+o),{ret:t,envid:r,notify:n,orcpt:o}}_getDsnRcptToArgs(){let e=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&e.push("NOTIFY="+p.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&e.push("ORCPT="+p.encodeXText(this._envelope.dsn.orcpt))),e.length?" "+e.join(" "):""}_createSendStream(e){let t,r=new u;return this.options.lmtp?this._envelope.accepted.forEach((t,r)=>{let n=r===this._envelope.accepted.length-1;this._responseActions.push(r=>{this._actionLMTPStream(t,n,r,e)})}):this._responseActions.push(t=>{this._actionSMTPStream(t,e)}),r.pipe(this._socket,{end:!1}),this.options.debug&&((t=new c).on("readable",()=>{let e;for(;e=t.read();)this.logger.debug({tnx:"message"},e.toString("binary").replace(/\r?\n$/,""))}),r.pipe(t)),r.once("end",()=>{this.logger.info({tnx:"message",inByteCount:r.inByteCount,outByteCount:r.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",r.outByteCount,r.inByteCount)}),r}_actionGreeting(e){if(clearTimeout(this._greetingTimeout),"220"!==e.substr(0,3))return void this._onError(Error("Invalid greeting. response="+e),"EPROTOCOL",e,"CONN");this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name))}_actionLHLO(e){if("2"!==e.charAt(0))return void this._onError(Error("Invalid LHLO. response="+e),"EPROTOCOL",e,"LHLO");this._actionEHLO(e)}_actionEHLO(e){let t;if("421"===e.substr(0,3))return void this._onError(Error("Server terminates connection. response="+e),"ECONNECTION",e,"EHLO");if("2"!==e.charAt(0))return this.options.requireTLS?void this._onError(Error("EHLO failed but HELO does not support required STARTTLS. response="+e),"ECONNECTION",e,"EHLO"):(this._responseActions.push(this._actionHELO),void this._sendCommand("HELO "+this.name));if(this._ehloLines=e.split(/\r?\n/).map(e=>e.replace(/^\d+[ -]/,"").trim()).filter(e=>e).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(e)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}/[ -]SMTPUTF8\b/im.test(e)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(e)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(e)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(e)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(e)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(e)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(e)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(e)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(e)&&this._supportedAuth.push("XOAUTH2"),(t=e.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(t[1])||0),this.emit("connect")}_actionHELO(e){if("2"!==e.charAt(0))return void this._onError(Error("Invalid HELO. response="+e),"EPROTOCOL",e,"HELO");this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(e){if("2"!==e.charAt(0))return this.options.opportunisticTLS?(this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect")):void this._onError(Error("Error upgrading connection with STARTTLS"),"ETLS",e,"STARTTLS");this._upgradeConnection((e,t)=>{if(e)return void this._onError(Error("Error initiating TLS - "+(e.message||e)),"ETLS",!1,"STARTTLS");this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),t?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect")})}_actionAUTH_LOGIN_USER(e,t){if(!/^334[ -]/.test(e))return void t(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",e,"AUTH LOGIN"));this._responseActions.push(e=>{this._actionAUTH_LOGIN_PASS(e,t)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(e,t){let r=e.match(/^334\s+(.+)$/),n="";if(!r)return t(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",e,"AUTH CRAM-MD5"));n=r[1];let o=Buffer.from(n,"base64").toString("ascii"),i=l.createHmac("md5",this._auth.credentials.pass);i.update(o);let a=this._auth.credentials.user+" "+i.digest("hex");this._responseActions.push(e=>{this._actionAUTH_CRAM_MD5_PASS(e,t)}),this._sendCommand(Buffer.from(a).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(e,t){if(!e.match(/^235\s+/))return t(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",e,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,t(null,!0)}_actionAUTH_LOGIN_PASS(e,t){if(!/^334[ -]/.test(e))return t(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",e,"AUTH LOGIN"));this._responseActions.push(e=>{this._actionAUTHComplete(e,t)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(e,t,r){if(r||"function"!=typeof t||(r=t,t=!1),"334"===e.substr(0,3)){this._responseActions.push(e=>{t||"XOAUTH2"!==this._authMethod?this._actionAUTHComplete(e,!0,r):setImmediate(()=>this._handleXOauth2Token(!0,r))}),this._sendCommand("");return}if("2"!==e.charAt(0))return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),r(this._formatError("Invalid login","EAUTH",e,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,r(null,!0)}_actionMAIL(e,t){let r,n;if(2!==Number(e.charAt(0)))return r=this._usingSmtpUtf8&&/^550 /.test(e)&&/[\x80-\uFFFF]/.test(this._envelope.from)?"Internationalized mailbox name not allowed":"Mail command failed",t(this._formatError(r,"EENVELOPE",e,"MAIL FROM"));if(!this._envelope.rcptQueue.length)return t(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"));if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)n=this._envelope.rcptQueue.shift(),this._recipientQueue.push(n),this._responseActions.push(e=>{this._actionRCPT(e,t)}),this._sendCommand("RCPT TO:<"+n+">"+this._getDsnRcptToArgs());else n=this._envelope.rcptQueue.shift(),this._recipientQueue.push(n),this._responseActions.push(e=>{this._actionRCPT(e,t)}),this._sendCommand("RCPT TO:<"+n+">"+this._getDsnRcptToArgs())}_actionRCPT(e,t){let r,n,o=this._recipientQueue.shift();if(2!==Number(e.charAt(0))?(r=this._usingSmtpUtf8&&/^553 /.test(e)&&/[\x80-\uFFFF]/.test(o)?"Internationalized mailbox name not allowed":"Recipient command failed",this._envelope.rejected.push(o),(n=this._formatError(r,"EENVELOPE",e,"RCPT TO")).recipient=o,this._envelope.rejectedErrors.push(n)):this._envelope.accepted.push(o),this._envelope.rcptQueue.length||this._recipientQueue.length)this._envelope.rcptQueue.length&&(o=this._envelope.rcptQueue.shift(),this._recipientQueue.push(o),this._responseActions.push(e=>{this._actionRCPT(e,t)}),this._sendCommand("RCPT TO:<"+o+">"+this._getDsnRcptToArgs()));else{if(!(this._envelope.rejected.length<this._envelope.to.length))return(n=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",e,"RCPT TO")).rejected=this._envelope.rejected,n.rejectedErrors=this._envelope.rejectedErrors,t(n);this._responseActions.push(e=>{this._actionDATA(e,t)}),this._sendCommand("DATA")}}_actionDATA(e,t){if(!/^[23]/.test(e))return t(this._formatError("Data command failed","EENVELOPE",e,"DATA"));let r={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(r.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(r.rejectedErrors=this._envelope.rejectedErrors),t(null,r)}_actionSMTPStream(e,t){return 2!==Number(e.charAt(0))?t(this._formatError("Message failed","EMESSAGE",e,"DATA")):t(null,e)}_actionLMTPStream(e,t,r,n){let o;if(2!==Number(r.charAt(0))){(o=this._formatError("Message failed for recipient "+e,"EMESSAGE",r,"DATA")).recipient=e,this._envelope.rejected.push(e),this._envelope.rejectedErrors.push(o);for(let t=0,r=this._envelope.accepted.length;t<r;t++)this._envelope.accepted[t]===e&&this._envelope.accepted.splice(t,1)}if(t)return n(null,r)}_handleXOauth2Token(e,t){this._auth.oauth2.getToken(e,(r,n)=>{if(r)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),t(this._formatError(r,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push(r=>{this._actionAUTHComplete(r,e,t)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(n),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(e){if(this._destroyed)return"Cannot "+e+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+e+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+e+" - smtp connection socket is already half-closed."}}_getHostname(){let e;try{e=s.hostname()||""}catch(t){e="localhost"}return(!e||0>e.indexOf("."))&&(e="[127.0.0.1]"),e.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(e="["+e+"]"),e}}e.exports=d},20923:(e,t)=>{"use strict";t.resolveEnd=function(e,t,r,n){let o="";if(e){let i=!1,a="";for(let s of e){let{source:e,type:l}=s;switch(l){case"space":i=!0;break;case"comment":{r&&!i&&n(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let t=e.substring(1)||" ";o?o+=a+t:o=t,a="";break}case"newline":o&&(a+=e),i=!0;break;default:n(s,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}t+=e.length}}return{comment:o,offset:t}}},20938:(e,t,r)=>{"use strict";let n=r(3706);e.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},21326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;let n=r(58592),o=r(60834),i=r(10355),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!function e(t){for(let r in t){if(s.has(r))return!0;let n=t[r];if(Array.isArray(n)&&n.some(e)||"object"==typeof n&&e(n))return!0}return!1}(e):!!t&&function e(t){let r=0;for(let o in t)if("$ref"===o||(r++,!a.has(o)&&("object"==typeof t[o]&&(0,n.eachItem)(t[o],t=>r+=e(t)),r===1/0)))return 1/0;return r}(e)<=t)};let s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e,t="",r){!1!==r&&(t=p(t));let n=e.parse(t);return u(e,n)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=l,t._getFullPath=u;let c=/#\/?$/;function p(e){return e?e.replace(c,""):""}t.normalizeId=p,t.resolveUrl=function(e,t,r){return r=p(r),e.resolve(t,r)};let d=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};let{schemaId:r,uriResolver:n}=this.opts,a=p(e[r]||t),s={"":a},u=l(n,a,!1),c={},h=new Set;return i(e,{allKeys:!0},(e,t,n,o)=>{if(void 0===o)return;let i=u+t,a=s[o];function l(t){let r=this.opts.uriResolver.resolve;if(t=p(a?r(a,t):t),h.has(t))throw f(t);h.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?m(e,n.schema,t):t!==p(i)&&("#"===t[0]?(m(e,c[t],t),c[t]=e):this.refs[t]=i),t}function g(e){if("string"==typeof e){if(!d.test(e))throw Error(`invalid anchor "${e}"`);l.call(this,`#${e}`)}}"string"==typeof e[r]&&(a=l.call(this,e[r])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),s[t]=a}),c;function m(e,t,r){if(void 0!==t&&!o(e,t))throw f(r)}function f(e){return Error(`reference "${e}" resolves to more than one schema`)}}},21754:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCatchDef=void 0;let n=r(70350);t.parseCatchDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},21820:e=>{"use strict";e.exports=require("os")},21932:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{cacheConfigDetailsSchema:()=>c,cacheConfigSchema:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(48334);let u=l.z.union([l.z.boolean(),l.z.object({ttlSeconds:l.z.number().optional()}).passthrough()]),c=l.z.object({cacheConfig:u,endOfCachedContents:l.z.number()})},21940:(e,t,r)=>{"use strict";let n=r(27910).Stream,o=r(38099),i=r(55511),a=r(91292);class s extends n{constructor(e,t){if(super(),this.options=e||{},e&&e.serviceClient){if(!e.privateKey||!e.user)return void setImmediate(()=>this.emit("error",Error('Options "privateKey" and "user" are required for service account!')));let t=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=t||300}if(this.logger=a.getLogger({logger:t},{component:this.options.component||"OAuth2"}),this.provisionCallback="function"==typeof this.options.provisionCallback&&this.options.provisionCallback,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let e=Math.max(Number(this.options.timeout)||0,0);this.expires=e&&Date.now()+1e3*e||0}}getToken(e,t){if(!e&&this.accessToken&&(!this.expires||this.expires>Date.now()))return t(null,this.accessToken);let r=(...e)=>{e[0]?this.logger.error({err:e[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),t(...e)};this.provisionCallback?this.provisionCallback(this.options.user,!!e,(e,t,n)=>{!e&&t&&(this.accessToken=t,this.expires=n||0),r(e,t)}):this.generateToken(r)}updateToken(e,t){this.accessToken=e,t=Math.max(Number(t)||0,0),this.expires=t&&Date.now()+1e3*t||0,this.emit("token",{user:this.options.user,accessToken:e||"",expires:this.expires})}generateToken(e){let t,r;if(this.options.serviceClient){let n,o=Math.floor(Date.now()/1e3),i={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:o,exp:o+this.options.serviceRequestTimeout};try{n=this.jwtSignRS256(i)}catch(t){return e(Error("Can't generate token. Check your auth options"))}t={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:n},r={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i}}else{if(!this.options.refreshToken)return e(Error("Can't create new access token for user"));t={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},r={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach(e=>{t[e]=this.options.customParams[e],r[e]=this.options.customParams[e]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(r)),this.postRequest(this.options.accessUrl,t,this.options,(t,r)=>{let n;if(t)return e(t);try{n=JSON.parse(r.toString())}catch(t){return e(t)}if(!n||"object"!=typeof n)return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(r||"").toString()),e(Error("Invalid authentication response"));let o={};if(Object.keys(n).forEach(e=>{"access_token"!==e?o[e]=n[e]:o[e]=(n[e]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(o)),n.error){let t=n.error;return n.error_description&&(t+=": "+n.error_description),n.error_uri&&(t+=" ("+n.error_uri+")"),e(Error(t))}return n.access_token?(this.updateToken(n.access_token,n.expires_in),e(null,this.accessToken)):e(Error("No access token"))})}buildXOAuth2Token(e){let t=["user="+(this.options.user||""),"auth=Bearer "+(e||this.accessToken),"",""];return Buffer.from(t.join("\x01"),"utf-8").toString("base64")}postRequest(e,t,r,n){let i=!1,a=[],s=0,l=o(e,{method:"post",headers:r.customHeaders,body:t,allowErrorResponse:!0});l.on("readable",()=>{let e;for(;null!==(e=l.read());)a.push(e),s+=e.length}),l.once("error",e=>{if(!i)return i=!0,n(e)}),l.once("end",()=>{if(!i)return i=!0,n(null,Buffer.concat(a,s))})}toBase64URL(e){return"string"==typeof e&&(e=Buffer.from(e)),e.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(e){e=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(e)].map(e=>this.toBase64URL(e)).join(".");let t=i.createSign("RSA-SHA256").update(e).sign(this.options.privateKey);return e+"."+this.toBase64URL(t)}}e.exports=s},22275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(58592),i=r(67884),a=r(99848);t.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,n.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,n._)`{limit: ${e}}`},code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,(0,o.alwaysValidSchema)(n,t)||(s?(0,a.validateAdditionalItems)(e,s):e.ok((0,i.validateArray)(e)))}}},22447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncHooksContextManager=void 0;let n=r(18617),o=r(84297),i=r(57481);class a extends i.AbstractAsyncHooksContextManager{constructor(){super(),this._contexts=new Map,this._stack=[],this._asyncHook=o.createHook({init:this._init.bind(this),before:this._before.bind(this),after:this._after.bind(this),destroy:this._destroy.bind(this),promiseResolve:this._destroy.bind(this)})}active(){var e;return null!=(e=this._stack[this._stack.length-1])?e:n.ROOT_CONTEXT}with(e,t,r,...n){this._enterContext(e);try{return t.call(r,...n)}finally{this._exitContext()}}enable(){return this._asyncHook.enable(),this}disable(){return this._asyncHook.disable(),this._contexts.clear(),this._stack=[],this}_init(e,t){if("TIMERWRAP"===t)return;let r=this._stack[this._stack.length-1];void 0!==r&&this._contexts.set(e,r)}_destroy(e){this._contexts.delete(e)}_before(e){let t=this._contexts.get(e);void 0!==t&&this._enterContext(t)}_after(){this._exitContext()}_enterContext(e){this._stack.push(e)}_exitContext(){this._stack.pop()}}t.AsyncHooksContextManager=a},22451:(e,t,r)=>{"use strict";var n=r(99122),o=r(71e3),i=r(55085),a=r(39985),s=r(28293);let l=(e,t)=>e.key<t.key?-1:+(e.key>t.key);class u{constructor({compat:e,customTags:t,merge:r,resolveKnownTags:u,schema:c,sortMapEntries:p,toStringDefaults:d}){this.compat=Array.isArray(e)?s.getTags(e,"compat"):e?s.getTags(null,e):null,this.name="string"==typeof c&&c||"core",this.knownTags=u?s.coreKnownTags:{},this.tags=s.getTags(t,this.name,r),this.toStringOptions=d??null,Object.defineProperty(this,n.MAP,{value:o.map}),Object.defineProperty(this,n.SCALAR,{value:a.string}),Object.defineProperty(this,n.SEQ,{value:i.seq}),this.sortMapEntries="function"==typeof p?p:!0===p?l:null}clone(){let e=Object.create(u.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}t.Schema=u},22827:(e,t,r)=>{"use strict";var n=r(99122),o=r(29240),i=r(36813);class a extends i.YAMLMap{constructor(e){super(e),this.tag=a.tag}add(e){let t;t=n.isPair(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new o.Pair(e.key,null):new o.Pair(e,null),i.findPair(this.items,t.key)||this.items.push(t)}get(e,t){let r=i.findPair(this.items,e);return!t&&n.isPair(r)?n.isScalar(r.key)?r.key.value:r.key:r}set(e,t){if("boolean"!=typeof t)throw Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);let r=i.findPair(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new o.Pair(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,r);throw Error("Set items must all have null values")}static from(e,t,r){let{replacer:n}=r,i=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof n&&(e=n.call(t,e,e)),i.items.push(o.createPair(e,null,r));return i}}a.tag="tag:yaml.org,2002:set",t.YAMLSet=a,t.set={collection:"map",identify:e=>e instanceof Set,nodeClass:a,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,r)=>a.from(e,t,r),resolve(e,t){if(n.isMap(e))if(e.hasAllNullValues(!0))return Object.assign(new a,e);else t("Set items must all have null values");else t("Expected a mapping for this tag");return e}}},22855:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{InstrumentationLibrarySchema:()=>g,LinkSchema:()=>f,PathMetadataSchema:()=>u,SpanContextSchema:()=>m,SpanDataSchema:()=>y,SpanMetadataSchema:()=>p,SpanStatusSchema:()=>d,TimeEventSchema:()=>h,TraceDataSchema:()=>v,TraceMetadataSchema:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(47649);let u=l.z.object({path:l.z.string(),status:l.z.string(),error:l.z.string().optional(),latency:l.z.number()}),c=l.z.object({featureName:l.z.string().optional(),paths:l.z.set(u).optional(),timestamp:l.z.number()}),p=l.z.object({name:l.z.string(),state:l.z.enum(["success","error"]).optional(),input:l.z.any().optional(),output:l.z.any().optional(),isRoot:l.z.boolean().optional(),metadata:l.z.record(l.z.string(),l.z.string()).optional(),path:l.z.string().optional(),isFailureSource:l.z.boolean().optional()}),d=l.z.object({code:l.z.number(),message:l.z.string().optional()}),h=l.z.object({time:l.z.number(),annotation:l.z.object({attributes:l.z.record(l.z.string(),l.z.any()),description:l.z.string()})}),m=l.z.object({traceId:l.z.string(),spanId:l.z.string(),isRemote:l.z.boolean().optional(),traceFlags:l.z.number()}),f=l.z.object({context:m.optional(),attributes:l.z.record(l.z.string(),l.z.any()).optional(),droppedAttributesCount:l.z.number().optional()}),g=l.z.object({name:l.z.string().readonly(),version:l.z.string().optional().readonly(),schemaUrl:l.z.string().optional().readonly()}),y=l.z.object({spanId:l.z.string(),traceId:l.z.string(),parentSpanId:l.z.string().optional(),startTime:l.z.number(),endTime:l.z.number(),attributes:l.z.record(l.z.string(),l.z.any()),displayName:l.z.string(),links:l.z.array(f).optional(),instrumentationLibrary:g,spanKind:l.z.string(),sameProcessAsParentSpan:l.z.object({value:l.z.boolean()}).optional(),status:d.optional(),timeEvents:l.z.object({timeEvent:l.z.array(h)}).optional(),truncated:l.z.boolean().optional()}),v=l.z.object({traceId:l.z.string(),displayName:l.z.string().optional(),startTime:l.z.number().optional().describe("trace start time in milliseconds since the epoch"),endTime:l.z.number().optional().describe("end time in milliseconds since the epoch"),spans:l.z.record(l.z.string(),y)})},22893:(e,t,r)=>{"use strict";let n=r(43528);e.exports=(e,t,r)=>n(e,t,"<",r)},22964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;let n=r(34955),o=r(33812);var i=r(34955);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}});var a=r(33812);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),t.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class s{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends s{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){let r=e?o.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=I(this.rhs,e,t)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class u extends s{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof n.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=I(this.rhs,e,t),this}get names(){return k(this.lhs instanceof n.Name?{}:{...this.lhs.names},this.rhs)}}class c extends u{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class p extends s{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class d extends s{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){let t=this.label?` ${this.label}`:"";return`break${t};`+e}}class h extends s{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class m extends s{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=I(this.code,e,t),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class f extends s{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){let{nodes:e}=this,t=e.length;for(;t--;){let r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){let{nodes:r}=this,n=r.length;for(;n--;){let o=r[n];o.optimizeNames(e,t)||(function(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}(e,o.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>C(e,t.names),{})}}class g extends f{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends f{}class v extends g{}v.kind="else";class b extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){let e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof b?t:t.nodes:this.nodes.length?this:new b(D(e),t instanceof b?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null==(r=this.else)?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=I(this.condition,e,t),this}get names(){let e=super.names;return k(e,this.condition),this.else&&C(e,this.else.names),e}}b.kind="if";class _ extends g{}_.kind="for";class E extends _{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=I(this.iteration,e,t),this}get names(){return C(super.names,this.iteration.names)}}class S extends _{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){let t=e.es5?o.varKinds.var:this.varKind,{name:r,from:n,to:i}=this;return`for(${t} ${r}=${n}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){let e=k(super.names,this.from);return k(e,this.to)}}class x extends _{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=I(this.iterable,e,t),this}get names(){return C(super.names,this.iterable.names)}}class w extends g{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){let t=this.async?"async ":"";return`${t}function ${this.name}(${this.args})`+super.render(e)}}w.kind="func";class T extends f{render(e){return"return "+super.render(e)}}T.kind="return";class A extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null==(e=this.catch)||e.optimizeNodes(),null==(t=this.finally)||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null==(r=this.catch)||r.optimizeNames(e,t),null==(n=this.finally)||n.optimizeNames(e,t),this}get names(){let e=super.names;return this.catch&&C(e,this.catch.names),this.finally&&C(e,this.finally.names),e}}class O extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}O.kind="catch";class N extends g{render(e){return"finally"+super.render(e)}}N.kind="finally";class P{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new o.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){let r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){let o=this._scope.toName(t);return void 0!==r&&n&&(this._constants[o.str]=r),this._leafNode(new l(e,o,r)),o}const(e,t,r){return this._def(o.varKinds.const,e,t,r)}let(e,t,r){return this._def(o.varKinds.let,e,t,r)}var(e,t,r){return this._def(o.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new u(e,t,r))}add(e,r){return this._leafNode(new c(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==n.nil&&this._leafNode(new m(e)),this}object(...e){let t=["{"];for(let[r,o]of e)t.length>1&&t.push(","),t.push(r),(r!==o||this.opts.es5)&&(t.push(":"),(0,n.addCodeArg)(t,o));return t.push("}"),new n._Code(t)}if(e,t,r){if(this._blockNode(new b(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new b(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(b,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new E(e),t)}forRange(e,t,r,n,i=this.opts.es5?o.varKinds.var:o.varKinds.let){let a=this._scope.toName(e);return this._for(new S(i,a,t,r),()=>n(a))}forOf(e,t,r,i=o.varKinds.const){let a=this._scope.toName(e);if(this.opts.es5){let e=t instanceof n.Name?t:this.var("_arr",t);return this.forRange("_i",0,(0,n._)`${e}.length`,t=>{this.var(a,(0,n._)`${e}[${t}]`),r(a)})}return this._for(new x("of",i,a,t),()=>r(a))}forIn(e,t,r,i=this.opts.es5?o.varKinds.var:o.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,n._)`Object.keys(${t})`,r);let a=this._scope.toName(e);return this._for(new x("in",i,a,t),()=>r(a))}endFor(){return this._endBlockNode(_)}label(e){return this._leafNode(new p(e))}break(e){return this._leafNode(new d(e))}return(e){let t=new T;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(e,t,r){if(!t&&!r)throw Error('CodeGen: "try" without "catch" and "finally"');let n=new A;if(this._blockNode(n),this.code(e),t){let e=this.name("e");this._currNode=n.catch=new O(e),t(e)}return r&&(this._currNode=n.finally=new N,this.code(r)),this._endBlockNode(O,N)}throw(e){return this._leafNode(new h(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){let t=this._blockStarts.pop();if(void 0===t)throw Error("CodeGen: not in self-balancing block");let r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=n.nil,r,o){return this._blockNode(new w(e,t,r)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){let r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){let t=this._currNode;if(!(t instanceof b))throw Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let t=this._nodes;t[t.length-1]=e}}function C(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function k(e,t){return t instanceof n._CodeOrName?C(e,t.names):e}function I(e,t,r){var o;if(e instanceof n.Name)return i(e);if(!((o=e)instanceof n._Code&&o._items.some(e=>e instanceof n.Name&&1===t[e.str]&&void 0!==r[e.str])))return e;return new n._Code(e._items.reduce((e,t)=>(t instanceof n.Name&&(t=i(t)),t instanceof n._Code?e.push(...t._items):e.push(t),e),[]));function i(e){let n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function D(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,n._)`!${j(e)}`}t.CodeGen=P,t.not=D;let R=M(t.operators.AND);t.and=function(...e){return e.reduce(R)};let L=M(t.operators.OR);function M(e){return(t,r)=>t===n.nil?r:r===n.nil?t:(0,n._)`${j(t)} ${e} ${j(r)}`}function j(e){return e instanceof n.Name?e:(0,n._)`(${e})`}t.or=function(...e){return e.reduce(L)}},23226:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Resource:()=>o.F,browserDetector:()=>c,browserDetectorSync:()=>u,defaultServiceName:()=>i.m,detectResources:()=>k,detectResourcesSync:()=>I,envDetector:()=>f,envDetectorSync:()=>m,hostDetector:()=>_,hostDetectorSync:()=>b,osDetector:()=>S,osDetectorSync:()=>E,processDetector:()=>A,processDetectorSync:()=>T,serviceInstanceIdDetectorSync:()=>N});var n,o=r(86116),i=r(64328),a=r(92518),s=r(86713),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=new(function(){function e(){}return e.prototype.detect=function(e){if("undefined"==typeof navigator||(null==(n=null==(r=global.process)?void 0:r.versions)?void 0:n.node)!==void 0||(null==(i=global.Bun)?void 0:i.version)!==void 0)return o.F.empty();var t,r,n,i,s=((t={})[a.lb]="browser",t[a.C3]="Web Browser",t[a.cV]=navigator.userAgent,t);return this._getResourceAttributes(s,e)},e.prototype._getResourceAttributes=function(e,t){return""===e[a.cV]?(s.s.debug("BrowserDetector failed: Unable to find required browser resources. "),o.F.empty()):new o.F(l({},e))},e}()),c=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(u.detect(e))},e}()),p=r(28038),d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},m=new(function(){function e(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return e.prototype.detect=function(e){var t={},r=(0,p._)(),n=r.OTEL_RESOURCE_ATTRIBUTES,i=r.OTEL_SERVICE_NAME;if(n)try{var l=this._parseResourceAttributes(n);Object.assign(t,l)}catch(e){s.s.debug("EnvDetector failed: "+e.message)}return i&&(t[a.AV]=i),new o.F(t)},e.prototype._parseResourceAttributes=function(e){if(!e)return{};var t,r,n={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var i=d(o),a=i.next();!a.done;a=i.next()){var s=a.value.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2===s.length){var l=h(s,2),u=l[0],c=l[1];if(u=u.trim(),c=c.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(u))throw Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(c))throw Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);n[u]=decodeURIComponent(c)}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},e.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},e.prototype._isBaggageOctetString=function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<33||44===r||59===r||92===r||r>126)return!1}return!0},e.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},e}()),f=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(m.detect(e))},e}()),g=r(21820),y=function(e){switch(e){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return e}},v=function(e){switch(e){case"sunos":return"solaris";case"win32":return"windows";default:return e}};switch(r(19771).platform){case"darwin":n=r(18868).D;break;case"linux":n=r(74200).D;break;case"freebsd":n=r(23967).D;break;case"win32":n=r(4048).D;break;default:n=r(39597).D}var b=new(function(){function e(){}return e.prototype.detect=function(e){var t,r=((t={})[a.RK]=(0,g.hostname)(),t[a.yT]=y((0,g.arch)()),t);return new o.F(r,this._getAsyncAttributes())},e.prototype._getAsyncAttributes=function(){return n().then(function(e){var t={};return e&&(t[a.zs]=e),t})},e}()),_=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(b.detect(e))},e}()),E=new(function(){function e(){}return e.prototype.detect=function(e){var t,r=((t={})[a.ko]=v((0,g.platform)()),t[a.AC]=(0,g.release)(),t);return new o.F(r)},e}()),S=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(E.detect(e))},e}()),x=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},w=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},T=new(function(){function e(){}return e.prototype.detect=function(e){var t,r=((t={})[a.ky]=process.pid,t[a.fP]=process.title,t[a.xQ]=process.execPath,t[a.U2]=w(w([process.argv[0]],x(process.execArgv),!1),x(process.argv.slice(1)),!1),t[a.cV]=process.versions.node,t[a.lb]="nodejs",t[a.C3]="Node.js",t);process.argv.length>1&&(r[a.Cn]=process.argv[1]);try{var n=g.userInfo();r[a.Yb]=n.username}catch(e){s.s.debug("error obtaining process owner: "+e)}return new o.F(r)},e}()),A=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(T.detect(e))},e}()),O=r(55511),N=new(function(){function e(){}return e.prototype.detect=function(e){var t,r=((t={})[a.PL]=(0,O.randomUUID)(),t);return new o.F(r)},e}()),P=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},C=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},k=function(e){return void 0===e&&(e={}),P(void 0,void 0,void 0,function(){var t;return C(this,function(r){switch(r.label){case 0:return[4,Promise.all((e.detectors||[]).map(function(t){return P(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.detect(e)];case 1:return r=i.sent(),s.s.debug(t.constructor.name+" found resource.",r),[2,r];case 2:return n=i.sent(),s.s.debug(t.constructor.name+" failed: "+n.message),[2,o.F.empty()];case 3:return[2]}})})}))];case 1:return D(t=r.sent()),[2,t.reduce(function(e,t){return e.merge(t)},o.F.empty())]}})})},I=function(e){void 0===e&&(e={});var t,r=(null!=(t=e.detectors)?t:[]).map(function(t){try{var r,n=t.detect(e);return(r=null!==n&&"object"==typeof n&&"function"==typeof n.then?new o.F({},P(void 0,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),[2,e.attributes]}})})):n).waitForAsyncAttributes?r.waitForAsyncAttributes().then(function(){return s.s.debug(t.constructor.name+" found resource.",r)}):s.s.debug(t.constructor.name+" found resource.",r),r}catch(e){return s.s.error(t.constructor.name+" failed: "+e.message),o.F.empty()}}),n=r.reduce(function(e,t){return e.merge(t)},o.F.empty());return n.waitForAsyncAttributes&&n.waitForAsyncAttributes().then(function(){D(r)}),n},D=function(e){e.forEach(function(e){if(Object.keys(e.attributes).length>0){var t=JSON.stringify(e.attributes,null,4);s.s.verbose(t)}})}},23301:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{BaseDataPointSchema:()=>l.BaseDataPointSchema,Chat:()=>u.Chat,Document:()=>l.Document,DocumentDataSchema:()=>l.DocumentDataSchema,GENKIT_CLIENT_HEADER:()=>d.GENKIT_CLIENT_HEADER,GENKIT_VERSION:()=>d.GENKIT_VERSION,GenerateResponse:()=>l.GenerateResponse,GenerateResponseChunk:()=>l.GenerateResponseChunk,GenerationBlockedError:()=>l.GenerationBlockedError,GenerationCommonConfigSchema:()=>l.GenerationCommonConfigSchema,GenerationResponseError:()=>l.GenerationResponseError,GenkitError:()=>d.GenkitError,LlmResponseSchema:()=>l.LlmResponseSchema,LlmStatsSchema:()=>l.LlmStatsSchema,Message:()=>l.Message,MessageSchema:()=>l.MessageSchema,ModelRequestSchema:()=>l.ModelRequestSchema,ModelResponseSchema:()=>l.ModelResponseSchema,OperationSchema:()=>d.OperationSchema,PartSchema:()=>l.PartSchema,ReflectionServer:()=>d.ReflectionServer,RoleSchema:()=>l.RoleSchema,Session:()=>c.Session,StatusCodes:()=>d.StatusCodes,StatusSchema:()=>d.StatusSchema,ToolCallSchema:()=>l.ToolCallSchema,ToolInterruptError:()=>l.ToolInterruptError,ToolSchema:()=>l.ToolSchema,UserFacingError:()=>d.UserFacingError,defineJsonSchema:()=>d.defineJsonSchema,defineSchema:()=>d.defineSchema,dynamicResource:()=>l.dynamicResource,dynamicTool:()=>p.dynamicTool,embedderActionMetadata:()=>l.embedderActionMetadata,embedderRef:()=>l.embedderRef,evaluatorRef:()=>l.evaluatorRef,getCurrentEnv:()=>d.getCurrentEnv,getStreamingCallback:()=>d.getStreamingCallback,indexerRef:()=>l.indexerRef,isDevEnv:()=>d.isDevEnv,modelActionMetadata:()=>l.modelActionMetadata,modelRef:()=>l.modelRef,rerankerRef:()=>l.rerankerRef,retrieverRef:()=>l.retrieverRef,runWithStreamingCallback:()=>d.runWithStreamingCallback,z:()=>d.z}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(57298),u=r(59510),c=r(93814),p=r(71622),d=r(83455)},23592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseArrayDef=void 0;let n=r(47649),o=r(88524),i=r(70350);t.parseArrayDef=function(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==n.ZodFirstPartyTypeKind.ZodAny&&(r.items=(0,i.parseDef)(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(0,o.setResponseValueAndErrors)(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&(0,o.setResponseValueAndErrors)(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&((0,o.setResponseValueAndErrors)(r,"minItems",e.exactLength.value,e.exactLength.message,t),(0,o.setResponseValueAndErrors)(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}},23967:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var n=r(29021),o=r(58504),i=r(86713),a=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};function s(){var e,t,r,s;return e=this,t=void 0,r=void 0,s=function(){var e,t,r;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.promises.readFile("/etc/hostid",{encoding:"utf8"})];case 1:return[2,e.sent().trim()];case 2:return t=e.sent(),i.s.debug("error reading machine id: "+t),[3,3];case 3:return e.trys.push([3,5,,6]),[4,(0,o.q)("kenv -q smbios.system.uuid")];case 4:return[2,e.sent().stdout.trim()];case 5:return r=e.sent(),i.s.debug("error reading machine id: "+r),[3,6];case 6:return[2,""]}})},new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})}},24102:(e,t,r)=>{"use strict";var n=r(97770);function o(e){switch(e){case void 0:case" ":case"\n":case"\r":case"	":return!0;default:return!1}}let i=new Set("0123456789ABCDEFabcdef"),a=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),s=new Set(",[]{}"),l=new Set(" ,[]{}\n\r	"),u=e=>!e||l.has(e);class c{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if("string"!=typeof e)throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let r=this.next??"stream";for(;r&&(t||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"	"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let r=0;for(;" "===t;)t=this.buffer[++r+e];if("\r"===t){let t=this.buffer[r+e+1];if("\n"===t||!t&&!this.atEnd)return e+r+1}return"\n"!==t&&!(r>=this.indentNext)&&(t||this.atEnd)?-1:e+r}if("-"===t||"."===t){let t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&o(this.buffer[e+3]))return -1}return e}getLine(){let e=this.lineEndPos;return(("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e)?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if(e[0]===n.BOM&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length,r=e.indexOf("#");for(;-1!==r;){let n=e[r-1];if(" "===n||"	"===n){t=r-1;break}r=e.indexOf("#",r+1)}for(;;){let r=e[t-1];if(" "===r||"	"===r)t-=1;else break}let n=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-n),this.pushNewline(),"stream"}if(this.atLineEnd()){let t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield n.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let e=this.peek(3);if(("---"===e||"..."===e)&&o(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"---"===e?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!o(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&o(t)){let e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(u),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=yield*this.parseBlockScalarHeader(),t+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,r=-1;do(e=yield*this.pushNewline())>0?(t=yield*this.pushSpaces(!1),this.indentValue=r=t):t=0,t+=yield*this.pushSpaces(!0);while(e+t>0);let i=this.getLine();if(null===i)return this.setNext("flow");if((-1!==r&&r<this.indentNext&&"#"!==i[0]||0===r&&(i.startsWith("---")||i.startsWith("..."))&&o(i[3]))&&(r!==this.indentNext-1||1!==this.flowLevel||"]"!==i[0]&&"}"!==i[0]))return this.flowLevel=0,yield n.FLOW_END,yield*this.parseLineStart();let a=0;for(;","===i[a];)a+=yield*this.pushCount(1),a+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i[a+=yield*this.pushIndicators()]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-a),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(u),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let e=this.charAt(1);if(this.flowKey||o(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}let r=this.buffer.substring(0,t),n=r.indexOf("\n",this.pos);if(-1!==n){for(;-1!==n;){let e=this.continueScalar(n+1);if(-1===e)break;n=r.indexOf("\n",e)}-1!==n&&(t=n-("\r"===r[n-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil(e=>o(e)||"#"===e)}*parseBlockScalar(){let e,t=this.pos-1,r=0;t:for(let n=this.pos;e=this.buffer[n];++n)switch(e){case" ":r+=1;break;case"\n":t=n,r=0;break;case"\r":{let e=this.buffer[n+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break t}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=r:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{let e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let o=t+1;for(e=this.buffer[o];" "===e;)e=this.buffer[++o];if("	"===e){for(;"	"===e||" "===e||"\r"===e||"\n"===e;)e=this.buffer[++o];t=o-1}else if(!this.blockScalarKeep)for(;;){let e=t-1,n=this.buffer[e];"\r"===n&&(n=this.buffer[--e]);let o=e;for(;" "===n;)n=this.buffer[--e];if("\n"===n&&e>=this.pos&&e+1+r>o)t=e;else break}return yield n.SCALAR,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e,t=this.flowLevel>0,r=this.pos-1,i=this.pos-1;for(;e=this.buffer[++i];)if(":"===e){let e=this.buffer[i+1];if(o(e)||t&&s.has(e))break;r=i}else if(o(e)){let n=this.buffer[i+1];if("\r"===e&&("\n"===n?(i+=1,e="\n",n=this.buffer[i+1]):r=i),"#"===n||t&&s.has(n))break;if("\n"===e){let e=this.continueScalar(i+1);if(-1===e)break;i=Math.max(i,e-2)}}else{if(t&&s.has(e))break;r=i}return e||this.atEnd?(yield n.SCALAR,yield*this.pushToIndex(r+1,!0),t?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){let r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(u))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let e=this.flowLevel>0,t=this.charAt(1);if(o(t)||e&&s.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!o(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(a.has(t))t=this.buffer[++e];else if("%"===t&&i.has(this.buffer[e+1])&&i.has(this.buffer[e+2]))t=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,r=this.pos-1;do t=this.buffer[++r];while(" "===t||e&&"	"===t);let n=r-this.pos;return n>0&&(yield this.buffer.substr(this.pos,n),this.pos=r),n}*pushUntil(e){let t=this.pos,r=this.buffer[t];for(;!e(r);)r=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}t.Lexer=c},24192:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringDef=t.zodPatterns=void 0;let o=r(88524);function i(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)a.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}t.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===n&&(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/},t.parseStringDef=function(e,r){let n={type:"string"};if(e.checks)for(let a of e.checks)switch(a.kind){case"min":(0,o.setResponseValueAndErrors)(n,"minLength","number"==typeof n.minLength?Math.max(n.minLength,a.value):a.value,a.message,r);break;case"max":(0,o.setResponseValueAndErrors)(n,"maxLength","number"==typeof n.maxLength?Math.min(n.maxLength,a.value):a.value,a.message,r);break;case"email":switch(r.emailStrategy){case"format:email":s(n,"email",a.message,r);break;case"format:idn-email":s(n,"idn-email",a.message,r);break;case"pattern:zod":l(n,t.zodPatterns.email,a.message,r)}break;case"url":s(n,"uri",a.message,r);break;case"uuid":s(n,"uuid",a.message,r);break;case"regex":l(n,a.regex,a.message,r);break;case"cuid":l(n,t.zodPatterns.cuid,a.message,r);break;case"cuid2":l(n,t.zodPatterns.cuid2,a.message,r);break;case"startsWith":l(n,RegExp(`^${i(a.value,r)}`),a.message,r);break;case"endsWith":l(n,RegExp(`${i(a.value,r)}$`),a.message,r);break;case"datetime":s(n,"date-time",a.message,r);break;case"date":s(n,"date",a.message,r);break;case"time":s(n,"time",a.message,r);break;case"duration":s(n,"duration",a.message,r);break;case"length":(0,o.setResponseValueAndErrors)(n,"minLength","number"==typeof n.minLength?Math.max(n.minLength,a.value):a.value,a.message,r),(0,o.setResponseValueAndErrors)(n,"maxLength","number"==typeof n.maxLength?Math.min(n.maxLength,a.value):a.value,a.message,r);break;case"includes":l(n,RegExp(i(a.value,r)),a.message,r);break;case"ip":"v6"!==a.version&&s(n,"ipv4",a.message,r),"v4"!==a.version&&s(n,"ipv6",a.message,r);break;case"base64url":l(n,t.zodPatterns.base64url,a.message,r);break;case"jwt":l(n,t.zodPatterns.jwt,a.message,r);break;case"cidr":"v6"!==a.version&&l(n,t.zodPatterns.ipv4Cidr,a.message,r),"v4"!==a.version&&l(n,t.zodPatterns.ipv6Cidr,a.message,r);break;case"emoji":l(n,t.zodPatterns.emoji(),a.message,r);break;case"ulid":l(n,t.zodPatterns.ulid,a.message,r);break;case"base64":switch(r.base64Strategy){case"format:binary":s(n,"binary",a.message,r);break;case"contentEncoding:base64":(0,o.setResponseValueAndErrors)(n,"contentEncoding","base64",a.message,r);break;case"pattern:zod":l(n,t.zodPatterns.base64,a.message,r)}break;case"nanoid":l(n,t.zodPatterns.nanoid,a.message,r)}return n};let a=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function s(e,t,r,n){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):(0,o.setResponseValueAndErrors)(e,"format",t,r,n)}function l(e,t,r,n){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:u(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):(0,o.setResponseValueAndErrors)(e,"pattern",u(t,n),r,n)}function u(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,o="",i=!1,a=!1,s=!1;for(let e=0;e<n.length;e++){if(i){o+=n[e],i=!1;continue}if(r.i){if(a){if(n[e].match(/[a-z]/)){s?(o+=n[e],o+=`${n[e-2]}-${n[e]}`.toUpperCase(),s=!1):"-"===n[e+1]&&n[e+2]?.match(/[a-z]/)?(o+=n[e],s=!0):o+=`${n[e]}${n[e].toUpperCase()}`;continue}}else if(n[e].match(/[a-z]/)){o+=`[${n[e]}${n[e].toUpperCase()}]`;continue}}if(r.m){if("^"===n[e]){o+=`(^|(?<=[\r
]))`;continue}else if("$"===n[e]){o+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===n[e]){o+=a?`${n[e]}\r
`:`[${n[e]}\r
]`;continue}o+=n[e],"\\"===n[e]?i=!0:a&&"]"===n[e]?a=!1:a||"["!==n[e]||(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}},24303:(e,t,r)=>{"use strict";let n=r(64487),o=r(3706);e.exports=(e,t,r)=>{let i=null,a=null,s=null;try{s=new o(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!i||1===a.compare(e))&&(a=new n(i=e,r))}),i}},24666:(e,t,r)=>{"use strict";var n=r(99122),o=r(29240),i=r(46076),a=r(86104);function s(e,t){if(n.isSeq(e))for(let r=0;r<e.items.length;++r){let a=e.items[r];if(!n.isPair(a)){if(n.isMap(a)){a.items.length>1&&t("Each pair must have its own sequence indicator");let e=a.items[0]||new o.Pair(new i.Scalar(null));if(a.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${a.commentBefore}
${e.key.commentBefore}`:a.commentBefore),a.comment){let t=e.value??e.key;t.comment=t.comment?`${a.comment}
${t.comment}`:a.comment}a=e}e.items[r]=n.isPair(a)?a:new o.Pair(a)}}else t("Expected a sequence for this tag");return e}function l(e,t,r){let{replacer:n}=r,i=new a.YAMLSeq(e);i.tag="tag:yaml.org,2002:pairs";let s=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let a,l;if("function"==typeof n&&(e=n.call(t,String(s++),e)),Array.isArray(e))if(2===e.length)a=e[0],l=e[1];else throw TypeError(`Expected [key, value] tuple: ${e}`);else if(e&&e instanceof Object){let t=Object.keys(e);if(1===t.length)l=e[a=t[0]];else throw TypeError(`Expected tuple with one key, not ${t.length} keys`)}else a=e;i.items.push(o.createPair(a,l,r))}return i}t.createPairs=l,t.pairs={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:s,createNode:l},t.resolvePairs=s},24800:(e,t,r)=>{"use strict";let n=r(64487);e.exports=(e,t,r)=>{let o=new n(e,r),i=new n(t,r);return o.compare(i)||o.compareBuild(i)}},24912:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{arrayFormatter:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(11535);let c={name:"array",config:{contentType:"application/json",constrained:!0},handler:e=>{let t;if(e&&"array"!==e.type)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:"Must supply an 'array' schema type when using the 'items' parser format."});return e&&(t=`Output should be a JSON array conforming to the following schema:
    
\`\`\`
${JSON.stringify(e)}
\`\`\`
    `),{parseChunk:e=>{let t=e.previousChunks?.length?(0,u.extractItems)(e.previousText).cursor:0,{items:r}=(0,u.extractItems)(e.accumulatedText,t);return r},parseMessage:e=>{let{items:t}=(0,u.extractItems)(e.text,0);return t},instructions:t}}}},25745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeTracerProvider=void 0;let n=r(57189),o=r(95908),i=r(16911),a=r(28584),s=r(90201);class l extends i.BasicTracerProvider{constructor(e={}){super(e)}register(e={}){void 0===e.contextManager&&(e.contextManager=new(a.gte(process.version,"14.8.0")?n.AsyncLocalStorageContextManager:n.AsyncHooksContextManager),e.contextManager.enable()),super.register(e)}}t.NodeTracerProvider=l,l._registeredPropagators=new Map([...i.BasicTracerProvider._registeredPropagators,["b3",()=>new o.B3Propagator({injectEncoding:o.B3InjectEncoding.SINGLE_HEADER})],["b3multi",()=>new o.B3Propagator({injectEncoding:o.B3InjectEncoding.MULTI_HEADER})],["jaeger",()=>new s.JaegerPropagator]])},25821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(89901);n.code='require("ajv/dist/runtime/uri").default',t.default=n},26515:(e,t,r)=>{"use strict";let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:i}=r(32397),a=r(38267),s=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],p=t.t={},d=0,h="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[h,o]],f=e=>{for(let[t,r]of m)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},g=(e,t,r)=>{let n=f(t),o=d++;a(e,o,t),p[e]=o,u[o]=t,c[o]=n,s[o]=new RegExp(t,r?"g":void 0),l[o]=new RegExp(n,r?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),g("MAINVERSION",`(${u[p.NUMERICIDENTIFIER]})\\.(${u[p.NUMERICIDENTIFIER]})\\.(${u[p.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${u[p.NUMERICIDENTIFIERLOOSE]})\\.(${u[p.NUMERICIDENTIFIERLOOSE]})\\.(${u[p.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${u[p.NONNUMERICIDENTIFIER]}|${u[p.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${u[p.NONNUMERICIDENTIFIER]}|${u[p.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${u[p.PRERELEASEIDENTIFIER]}(?:\\.${u[p.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${u[p.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[p.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${h}+`),g("BUILD",`(?:\\+(${u[p.BUILDIDENTIFIER]}(?:\\.${u[p.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${u[p.MAINVERSION]}${u[p.PRERELEASE]}?${u[p.BUILD]}?`),g("FULL",`^${u[p.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${u[p.MAINVERSIONLOOSE]}${u[p.PRERELEASELOOSE]}?${u[p.BUILD]}?`),g("LOOSE",`^${u[p.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${u[p.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${u[p.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${u[p.XRANGEIDENTIFIER]})(?:\\.(${u[p.XRANGEIDENTIFIER]})(?:\\.(${u[p.XRANGEIDENTIFIER]})(?:${u[p.PRERELEASE]})?${u[p.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${u[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[p.XRANGEIDENTIFIERLOOSE]})(?:${u[p.PRERELEASELOOSE]})?${u[p.BUILD]}?)?)?`),g("XRANGE",`^${u[p.GTLT]}\\s*${u[p.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${u[p.GTLT]}\\s*${u[p.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${u[p.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",u[p.COERCEPLAIN]+`(?:${u[p.PRERELEASE]})?`+`(?:${u[p.BUILD]})?`+"(?:$|[^\\d])"),g("COERCERTL",u[p.COERCE],!0),g("COERCERTLFULL",u[p.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${u[p.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${u[p.LONETILDE]}${u[p.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${u[p.LONETILDE]}${u[p.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${u[p.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${u[p.LONECARET]}${u[p.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${u[p.LONECARET]}${u[p.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${u[p.GTLT]}\\s*(${u[p.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${u[p.GTLT]}\\s*(${u[p.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${u[p.GTLT]}\\s*(${u[p.LOOSEPLAIN]}|${u[p.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${u[p.XRANGEPLAIN]})\\s+-\\s+(${u[p.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${u[p.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[p.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},26846:(e,t,r)=>{"use strict";var n=r(46076),o=r(71e3),i=r(55085);function a(e){return"bigint"==typeof e||Number.isInteger(e)}let s=({value:e})=>JSON.stringify(e),l=[{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:s},{identify:e=>null==e,createNode:()=>new n.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:s},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>"true"===e,stringify:s},{identify:a,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:r})=>r?BigInt(e):parseInt(e,10),stringify:({value:e})=>a(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:s}];t.schema=[o.map,i.seq].concat(l,{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)})},27040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnumDef=void 0,t.parseEnumDef=function(e){return{type:"string",enum:Array.from(e.values)}}},27290:(e,t,r)=>{"use strict";let n=r(33877);e.exports=(e,t,r)=>0!==n(e,t,r)},27633:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GenkitError:()=>u,UnstableApiError:()=>c,UserFacingError:()=>d,assertUnstable:()=>p,getCallableJSON:()=>m,getErrorMessage:()=>f,getErrorStack:()=>g,getHttpStatus:()=>h}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(96856);class u extends Error{source;status;detail;code;originalMessage;constructor({status:e,message:t,detail:r,source:n}){super(`${n?`${n}: `:""}${e}: ${t}`),this.originalMessage=t,this.code=(0,l.httpStatusCode)(e),this.status=e,this.detail=r,this.name="GenkitError"}toJSON(){return{...void 0===this.detail?{}:{details:this.detail},status:this.status,message:this.originalMessage}}}class c extends u{constructor(e,t){super({status:"FAILED_PRECONDITION",message:`${t?t+" ":""}This API requires '${e}' stability level.

To use this feature, initialize Genkit using \`import {genkit} from "genkit/${e}"\`.`}),this.name="UnstableApiError"}}function p(e,t,r){if("beta"===t&&"stable"===e.apiStability)throw new c(t,r)}class d extends u{constructor(e,t,r){super({status:e,detail:r,message:t}),super.name="UserFacingError"}}function h(e){return e instanceof u?e.code:500}function m(e){return e instanceof u?e.toJSON():{message:"Internal Error",status:"INTERNAL"}}function f(e){return e instanceof Error?e.message:`${e}`}function g(e){if(e instanceof Error)return e.stack}},27736:(e,t)=>{"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},27852:(e,t,r)=>{"use strict";r.d(t,{EC:()=>i,KV:()=>l,QC:()=>s,hN:()=>o,kI:()=>u,r_:()=>a,un:()=>n});var n="=",o=";",i=",",a="baggage",s=180,l=4096,u=8192},27910:e=>{"use strict";e.exports=require("stream")},28038:(e,t,r)=>{"use strict";r.d(t,{_:()=>o,w:()=>i});var n=r(47751);function o(){var e=(0,n.Nq)(process.env);return Object.assign({},n.Uz,e)}function i(){return(0,n.Nq)(process.env)}},28293:(e,t,r)=>{"use strict";var n=r(71e3),o=r(16361),i=r(55085),a=r(39985),s=r(33590),l=r(13838),u=r(76317),c=r(64533),p=r(26846),d=r(75738),h=r(36407),m=r(15686),f=r(24666),g=r(288),y=r(22827),v=r(79843);let b=new Map([["core",c.schema],["failsafe",[n.map,i.seq,a.string]],["json",p.schema],["yaml11",g.schema],["yaml-1.1",g.schema]]),_={binary:d.binary,bool:s.boolTag,float:l.float,floatExp:l.floatExp,floatNaN:l.floatNaN,floatTime:v.floatTime,int:u.int,intHex:u.intHex,intOct:u.intOct,intTime:v.intTime,map:n.map,merge:h.merge,null:o.nullTag,omap:m.omap,pairs:f.pairs,seq:i.seq,set:y.set,timestamp:v.timestamp};t.coreKnownTags={"tag:yaml.org,2002:binary":d.binary,"tag:yaml.org,2002:merge":h.merge,"tag:yaml.org,2002:omap":m.omap,"tag:yaml.org,2002:pairs":f.pairs,"tag:yaml.org,2002:set":y.set,"tag:yaml.org,2002:timestamp":v.timestamp},t.getTags=function(e,t,r){let n=b.get(t);if(n&&!e)return r&&!n.includes(h.merge)?n.concat(h.merge):n.slice();let o=n;if(!o)if(Array.isArray(e))o=[];else{let e=Array.from(b.keys()).filter(e=>"yaml11"!==e).map(e=>JSON.stringify(e)).join(", ");throw Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}if(Array.isArray(e))for(let t of e)o=o.concat(t);else"function"==typeof e&&(o=e(o.slice()));return r&&(o=o.concat(h.merge)),o.reduce((e,t)=>{let r="string"==typeof t?_[t]:t;if(!r){let e=JSON.stringify(t),r=Object.keys(_).map(e=>JSON.stringify(e)).join(", ");throw Error(`Unknown custom tag ${e}; use one of ${r}`)}return e.includes(r)||e.push(r),e},[])}},28354:e=>{"use strict";e.exports=require("util")},28584:(e,t,r)=>{"use strict";let n=r(26515),o=r(32397),i=r(64487),a=r(78668),s=r(58361),l=r(35444),u=r(73051),c=r(90726),p=r(93419),d=r(42467),h=r(40999),m=r(78172),f=r(7110),g=r(33877),y=r(86605),v=r(17950),b=r(24800),_=r(31904),E=r(8536),S=r(42699),x=r(40720),w=r(73438),T=r(27290),A=r(44156),O=r(82682),N=r(84450),P=r(44449),C=r(14239),k=r(3706),I=r(42679),D=r(20938),R=r(43441),L=r(24303),M=r(36686),j=r(31385),U=r(43528),F=r(43900),$=r(22893),B=r(71505);e.exports={parse:s,valid:l,clean:u,inc:c,diff:p,major:d,minor:h,patch:m,prerelease:f,compare:g,rcompare:y,compareLoose:v,compareBuild:b,sort:_,rsort:E,gt:S,lt:x,eq:w,neq:T,gte:A,lte:O,cmp:N,coerce:P,Comparator:C,Range:k,satisfies:I,toComparators:D,maxSatisfying:R,minSatisfying:L,minVersion:M,validRange:j,outside:U,gtr:F,ltr:$,intersects:B,simplifyRange:r(77860),subset:r(11337),SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},28824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;let n=r(42495);t.ZodIssueCode=n.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class o extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let o of e.issues)if("invalid_union"===o.code)o.unionErrors.map(n);else if("invalid_return_type"===o.code)n(o.returnTypeError);else if("invalid_arguments"===o.code)n(o.argumentsError);else if(0===o.path.length)r._errors.push(t(o));else{let e=r,n=0;for(;n<o.path.length;){let r=o.path[n];n===o.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(o))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof o))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=o,o.create=e=>new o(e)},28901:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,r){return e?r.lookupProperty(e,t):e})},e.exports=t.default},29021:e=>{"use strict";e.exports=require("fs")},29240:(e,t,r)=>{"use strict";var n=r(57837),o=r(73471),i=r(49617),a=r(99122);class s{constructor(e,t=null){Object.defineProperty(this,a.NODE_TYPE,{value:a.PAIR}),this.key=e,this.value=t}clone(e){let{key:t,value:r}=this;return a.isNode(t)&&(t=t.clone(e)),a.isNode(r)&&(r=r.clone(e)),new s(t,r)}toJSON(e,t){let r=t?.mapAsMap?new Map:{};return i.addPairToJSMap(t,r,this)}toString(e,t,r){return e?.doc?o.stringifyPair(this,e,t,r):JSON.stringify(this)}}t.Pair=s,t.createPair=function(e,t,r){return new s(n.createNode(e,void 0,r),n.createNode(t,void 0,r))}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29781:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetDef=void 0;let n=r(88524),o=r(70350);t.parseSetDef=function(e,t){let r={type:"array",uniqueItems:!0,items:(0,o.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(0,n.setResponseValueAndErrors)(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&(0,n.setResponseValueAndErrors)(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}},29986:(e,t,r)=>{"use strict";var n=r(19771);t.debug=function(e,...t){"debug"===e&&console.log(...t)},t.warn=function(e,t){("debug"===e||"warn"===e)&&("function"==typeof n.emitWarning?n.emitWarning(t):console.warn(t))}},30477:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(r||(t.errorUtil=r={}))},31179:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{defineFlow:()=>d,run:()=>m}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(16698),u=r(88581),c=r(8436),p=r(40413);function d(e,t,r){var n,o,i;return n=e,o="string"==typeof t?{name:t}:t,i=r,(0,u.defineAction)(n,{actionType:"flow",name:o.name,inputSchema:o.inputSchema,outputSchema:o.outputSchema,streamSchema:o.streamSchema,metadata:o.metadata},async(e,{sendChunk:t,context:r,trace:o,abortSignal:a,streamingRequested:s})=>await h.run(n,()=>(t.sendChunk=t,t.context=r,t.trace=o,t.abortSignal=a,t.streamingRequested=s,i(e,t))))}let h=new l.AsyncLocalStorage;function m(e,t,r,n){let o,i,a;if("function"==typeof t?o=t:i=t,"function"==typeof r?o=r:(r instanceof c.Registry||r?.registry)&&(a=r?.registry?r?.registry:r),n&&(a=n.registry?n.registry:n),a||(a=h.getStore()),!a)throw Error("Unable to resolve registry. Consider explicitly passing Genkit instance.");if(!o)throw Error("unable to resolve run function");return(0,p.runInNewSpan)(a,{metadata:{name:e},labels:{[p.SPAN_TYPE_ATTR]:"flowStep"}},async e=>{e.input=i;let t=3==arguments.length?await o(i):await o();return e.output=JSON.stringify(t),t})}},31183:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{jsonFormatter:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(11535);let u={name:"json",config:{format:"json",contentType:"application/json",constrained:!0,defaultInstructions:!1},handler:e=>{let t;return e&&(t=`Output should be in JSON format and conform to the following schema:

\`\`\`
${JSON.stringify(e)}
\`\`\`
`),{parseChunk:e=>(0,l.extractJson)(e.accumulatedText),parseMessage:e=>(0,l.extractJson)(e.text),instructions:t}}}},31385:(e,t,r)=>{"use strict";let n=r(3706);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},31392:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},31440:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{ResourceInputSchema:()=>m,ResourceOutputSchema:()=>f,defineResource:()=>g,dynamicResource:()=>b,findMatchingResource:()=>y,isDynamicResourceAction:()=>v}),e.exports=u(o({},"__esModule",{value:!0}),c);var p=r(83455),d=((e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(r(73156)),h=r(93283);let m=p.z.object({uri:p.z.string()}),f=p.z.object({content:p.z.array(h.PartSchema)});function g(e,t,r){let n=b(t,r).attach(e);return delete n.__action.metadata?.dynamic,n.matches=_(t.uri,t.template),e.registerAction("resource",n),n}async function y(e,t){for(let r of Object.keys(await e.listResolvableActions()))if(r.startsWith("/resource/")){let n=await e.lookupAction(r);if(n.matches(t))return n}}function v(e){return((0,p.isDetachedAction)(e)||(0,p.isAction)(e))&&e.__action.metadata?.type==="resource"&&!!e.__action.metadata?.dynamic}function b(e,t){let r=e.uri??e.template;if(!r)throw new p.GenkitError({status:"INVALID_ARGUMENT",message:"must specify either url or template options"});let n=_(e.uri,e.template),o=(0,p.detachedAction)({actionType:"resource",name:e.name??r,description:e.description,inputSchema:m,outputSchema:f,metadata:{resource:{uri:e.uri,template:e.template},...e.metadata,type:"resource",dynamic:!0}},async(o,i)=>{if(!n(o))throw new p.GenkitError({status:"INVALID_ARGUMENT",message:`input ${o} did not match template ${r}`});let a=await t(o,i);return a.content.map(t=>(t.metadata||(t.metadata={}),t.metadata?.resource?!t.metadata.resource.parent&&(t.metadata.resource.parent={uri:o.uri},e.template&&(t.metadata.resource.parent.template=e.template)):(t.metadata.resource={uri:o.uri},e.template&&(t.metadata.resource.template=e.template)),t)),a});return o.matches=n,{__action:{...o.__action,metadata:{...o.__action.metadata,type:"resource"}},attach(e){let t=o.attach(e);return t.matches=n,t},matches:n}}function _(e,t){if(e)return t=>t.uri===e;if(t){let e=(0,d.default)(t);return t=>void 0!==e.fromUri(t.uri)}throw new p.GenkitError({status:"INVALID_ARGUMENT",message:"must specify either url or template options"})}},31534:(e,t,r)=>{"use strict";let n=r(27910).Transform,o=r(55511);class i extends n{constructor(e){super(),e=e||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=o.createHash(e.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=e.debug,this._debugBody=!!e.debug&&[]}updateHash(e){let t,r="",n="file";for(let t=e.length-1;t>=0;t--){let o=e[t];if("file"===n&&(10===o||13===o));else if("file"===n&&(9===o||32===o))n="line";else if("line"===n&&(9===o||32===o));else if(("file"===n||"line"===n)&&(n="body",t===e.length-1))break;if(0===t){if("file"===n&&(!this.remainder||/[\r\n]$/.test(this.remainder))||"line"===n&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=e.toString("binary");return}else if("line"===n||"file"===n){r=e.toString("binary"),e=!1;break}}if("body"===n){r=e.slice(t+1).toString("binary"),e=e.slice(0,t+1);break}}let o=!!this.remainder;if(e&&!o){for(let t=0,r=e.length;t<r;t++)if(t&&10===e[t]&&13!==e[t-1]){o=!0;break}else if(t&&13===e[t]&&32===e[t-1]){o=!0;break}else if(t&&32===e[t]&&32===e[t-1]){o=!0;break}else if(9===e[t]){o=!0;break}}o?(t=this.remainder+(e?e.toString("binary"):""),this.remainder=r,t=t.replace(/\r?\n/g,"\n").replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,"\r\n"),e=Buffer.from(t,"binary")):r&&(this.remainder=r),this.debug&&this._debugBody.push(e),this.bodyHash.update(e)}_transform(e,t,r){if(!e||!e.length)return r();"string"==typeof e&&(e=Buffer.from(e,t)),this.updateHash(e),this.byteLength+=e.length,this.push(e),r()}_flush(e){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from("\r\n")),this.byteLength||this.push(Buffer.from("\r\n")),this.emit("hash",this.bodyHash.digest("base64"),!!this.debug&&Buffer.concat(this._debugBody)),e()}}e.exports=i},31842:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(66112),o=function(e){return e&&e.__esModule?e:{default:e}}(r(58668));t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new o.default("Must pass iterator to #each");var r,i=t.fn,a=t.inverse,s=0,l="",u=void 0,c=void 0;function p(t,r,o){u&&(u.key=t,u.index=r,u.first=0===r,u.last=!!o,c&&(u.contextPath=c+t)),l+=i(e[t],{data:u,blockParams:n.blockParams([e[t],t],[c+t,null])})}if(t.data&&t.ids&&(c=n.appendContextPath(t.data.contextPath,t.ids[0])+"."),n.isFunction(e)&&(e=e.call(this)),t.data&&(u=n.createFrame(t.data)),e&&"object"==typeof e)if(n.isArray(e))for(var d=e.length;s<d;s++)s in e&&p(s,s,s===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var h=[],m=e[Symbol.iterator](),f=m.next();!f.done;f=m.next())h.push(f.value);e=h;for(var d=e.length;s<d;s++)p(s,s,s===e.length-1)}else r=void 0,Object.keys(e).forEach(function(e){void 0!==r&&p(r,s-1),r=e,s++}),void 0!==r&&p(r,s-1,!0);return 0===s&&(l=a(this)),l})},e.exports=t.default},31904:(e,t,r)=>{"use strict";let n=r(24800);e.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},32165:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(31392),o=r(45324);t.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,o.default]},32397:e=>{"use strict";e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},32467:e=>{"use strict";e.exports=require("node:http2")},32769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBrandedDef=void 0;let n=r(70350);t.parseBrandedDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},32877:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GenerateResponseChunk:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(11535);class c{index;role;content;custom;previousChunks;parser;constructor(e,t){this.content=e.content||[],this.custom=e.custom,this.previousChunks=t.previousChunks?[...t.previousChunks]:void 0,this.index=t.index,this.role=t.role,this.parser=t.parser}get text(){return this.content.map(e=>e.text||"").join("")}get reasoning(){return this.content.map(e=>e.reasoning||"").join("")}get accumulatedText(){return this.previousText+this.text}get previousText(){if(!this.previousChunks)throw new l.GenkitError({status:"FAILED_PRECONDITION",message:"Cannot compose accumulated text without previous chunks."});return this.previousChunks?.map(e=>e.content.map(e=>e.text||"").join("")).join("")}get media(){return this.content.find(e=>e.media)?.media||null}get data(){return this.content.find(e=>e.data)?.data}get toolRequests(){return this.content.filter(e=>!!e.toolRequest)}get output(){return this.parser?this.parser(this):this.data||(0,u.extractJson)(this.accumulatedText)}toJSON(){let e={role:this.role,index:this.index,content:this.content};return this.custom&&(e.custom=this.custom),e}}},33292:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(67884).validateUnion,error:{message:"must match a schema in anyOf"}}},33590:(e,t,r)=>{"use strict";var n=r(46076);let o={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new n.Scalar("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},r)=>e&&o.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?r.options.trueStr:r.options.falseStr};t.boolTag=o},33812:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;let o=r(34955);class i extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(n||(t.UsedValueState=n={})),t.varKinds={const:new o.Name("const"),let:new o.Name("let"),var:new o.Name("var")};class a{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof o.Name?e:this.name(e)}name(e){return new o.Name(this._newName(e))}_newName(e){let t=this._names[e]||this._nameGroup(e);return`${e}${t.index++}`}_nameGroup(e){var t,r;if((null==(r=null==(t=this._parent)?void 0:t._prefixes)?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=a;class s extends o.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=(0,o._)`.${new o.Name(t)}[${r}]`}}t.ValueScopeName=s;let l=(0,o._)`\n`;class u extends a{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:o.nil}}get(){return this._scope}name(e){return new s(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw Error("CodeGen: ref must be passed in value");let n=this.toName(e),{prefix:o}=n,i=null!=(r=t.key)?r:t.ref,a=this._values[o];if(a){let e=a.get(i);if(e)return e}else a=this._values[o]=new Map;a.set(i,n);let s=this._scope[o]||(this._scope[o]=[]),l=s.length;return s[l]=t.ref,n.setValue(t,{property:o,itemIndex:l}),n}getValue(e,t){let r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw Error(`CodeGen: name "${t}" has no value`);return(0,o._)`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(e,r,a={},s){let l=o.nil;for(let u in e){let c=e[u];if(!c)continue;let p=a[u]=a[u]||new Map;c.forEach(e=>{if(p.has(e))return;p.set(e,n.Started);let a=r(e);if(a){let r=this.opts.es5?t.varKinds.var:t.varKinds.const;l=(0,o._)`${l}${r} ${e} = ${a};${this.opts._n}`}else if(a=null==s?void 0:s(e))l=(0,o._)`${l}${a}${this.opts._n}`;else throw new i(e);p.set(e,n.Completed)})}return l}}t.ValueScope=u},33873:e=>{"use strict";e.exports=require("path")},33877:(e,t,r)=>{"use strict";let n=r(64487);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},34e3:(e,t,r)=>{"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var r=Object.create(null);return r.__proto__=!1,{properties:{whitelist:n.createNewLookupObject(r,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:n.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,r){return"function"==typeof e?a(t.methods,r):a(t.properties,r)},t.resetLoggedProperties=function(){Object.keys(i).forEach(function(e){delete i[e]})};var n=r(44415),o=function(e){return e&&e.__esModule?e:{default:e}}(r(58093)),i=Object.create(null);function a(e,t){var r;return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(!0!==i[r=t]&&(i[r]=!0,o.default.log("error",'Handlebars: Access has been denied to resolve the property "'+r+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details')),!1)}},34041:(e,t,r)=>{"use strict";let n=r(27910).Transform;class o extends n{constructor(e){super(e),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(e){let t=this.lastBytes.length,r=Math.min(e.length,t);for(let e=0,n=t-r;e<n;e++)this.lastBytes[e]=this.lastBytes[e+r];for(let n=1;n<=r;n++)this.lastBytes[t-n]=e[e.length-n]}checkHeaders(e){if(this.headersParsed)return!0;let t=this.lastBytes.length,r=0;this.curLinePos=0;for(let n=0,o=this.lastBytes.length+e.length;n<o;n++){let o;if(10===(n<t?this.lastBytes[n]:e[n-t])&&n){let o=n-1<t?this.lastBytes[n-1]:e[n-1-t],i=n>1&&(n-2<t?this.lastBytes[n-2]:e[n-2-t]);if(10===o||13===o&&10===i){this.headersParsed=!0,r=n-t+1,this.headerBytes+=r;break}}}if(this.headersParsed){if(this.headerChunks.push(e.slice(0,r)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),e.length-1>r){let t=e.slice(r);this.bodySize+=t.length,setImmediate(()=>this.push(t))}return!1}return this.headerBytes+=e.length,this.headerChunks.push(e),this.updateLastBytes(e),!1}_transform(e,t,r){let n;if(!e||!e.length)return r();"string"==typeof e&&(e=Buffer.from(e,t));try{n=this.checkHeaders(e)}catch(e){return r(e)}n&&(this.bodySize+=e.length,this.push(e)),setImmediate(r)}_flush(e){if(this.headerChunks){let e=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=e.length,this.push(e),this.headerChunks=null}e()}parseHeaders(){let e=(this.rawHeaders||"").toString().split(/\r?\n/);for(let t=e.length-1;t>0;t--)/^\s/.test(e[t])&&(e[t-1]+="\n"+e[t],e.splice(t,1));return e.filter(e=>e.trim()).map(e=>({key:e.substr(0,e.indexOf(":")).trim().toLowerCase(),line:e}))}}e.exports=o},34392:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getKeyPairs:()=>s,parseKeyPairsIntoRecord:()=>u,parsePairKeyValue:()=>l,serializeKeyPairs:()=>a});var n=r(4495),o=r(27852),i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function a(e){return e.reduce(function(e,t){var r=""+e+(""!==e?o.EC:"")+t;return r.length>o.kI?e:r},"")}function s(e){return e.getAllEntries().map(function(e){var t=i(e,2),r=t[0],n=t[1],a=encodeURIComponent(r)+"="+encodeURIComponent(n.value);return void 0!==n.metadata&&(a+=o.hN+n.metadata.toString()),a})}function l(e){var t,r=e.split(o.hN);if(!(r.length<=0)){var i=r.shift();if(i){var a=i.indexOf(o.un);if(!(a<=0)){var s=decodeURIComponent(i.substring(0,a).trim()),l=decodeURIComponent(i.substring(a+1).trim());return r.length>0&&(t=(0,n.B)(r.join(o.hN))),{key:s,value:l,metadata:t}}}}}function u(e){return"string"!=typeof e||0===e.length?{}:e.split(o.EC).map(function(e){return l(e)}).filter(function(e){return void 0!==e&&e.value.length>0}).reduce(function(e,t){return e[t.key]=t.value,e},{})}},34589:e=>{"use strict";e.exports=require("node:assert")},34631:e=>{"use strict";e.exports=require("tls")},34955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class o extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return""===e||'""'===e}get str(){var e;return null!=(e=this._str)?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!=(e=this._names)?e:this._names=this._items.reduce((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function i(e,...t){let r=[e[0]],n=0;for(;n<t.length;)l(r,t[n]),r.push(e[++n]);return new o(r)}t._Code=o,t.nil=new o(""),t._=i;let a=new o("+");function s(e,...t){let r=[u(e[0])],i=0;for(;i<t.length;)r.push(a),l(r,t[i]),r.push(a,u(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===a){var r,o;let i=(r=e[t-1],'""'===(o=e[t+1])?r:'""'===r?o:"string"==typeof r?o instanceof n||'"'!==r[r.length-1]?void 0:"string"!=typeof o?`${r.slice(0,-1)}${o}"`:'"'===o[0]?r.slice(0,-1)+o.slice(1):void 0:"string"!=typeof o||'"'!==o[0]||r instanceof n?void 0:`"${r}${o.slice(1)}`);if(void 0!==i){e.splice(t-1,3,i);continue}e[t++]="+"}t++}}(r),new o(r)}function l(e,t){var r;t instanceof o?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:u(Array.isArray(r)?r.join(","):r))}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=s,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:s`${e}${t}`},t.stringify=function(e){return new o(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new o(`.${e}`):i`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new o(`${e}`);throw Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new o(e.toString())}},35089:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var o=1;null!=r.hash.level?o=r.hash.level:r.data&&null!=r.data.level&&(o=r.data.level),t[0]=o,e.log.apply(e,t)})},e.exports=t.default},35134:(e,t,r)=>{"use strict";var n=r(9269),o=r(89900),i=r(75853),a=r(29986),s=r(99122),l=r(16257),u=r(38477);function c(e){let t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new l.LineCounter||null,prettyErrors:t}}function p(e,t={}){let{lineCounter:r,prettyErrors:o}=c(t),a=new u.Parser(r?.addNewLine),s=new n.Composer(t),l=null;for(let t of s.compose(a.parse(e),!0,e.length))if(l){if("silent"!==l.options.logLevel){l.errors.push(new i.YAMLParseError(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else l=t;return o&&r&&(l.errors.forEach(i.prettifyError(e,r)),l.warnings.forEach(i.prettifyError(e,r))),l}t.parse=function(e,t,r){let n;"function"==typeof t?n=t:void 0===r&&t&&"object"==typeof t&&(r=t);let o=p(e,r);if(!o)return null;if(o.warnings.forEach(e=>a.warn(o.options.logLevel,e)),o.errors.length>0)if("silent"!==o.options.logLevel)throw o.errors[0];else o.errors=[];return o.toJS(Object.assign({reviver:n},r))},t.parseAllDocuments=function(e,t={}){let{lineCounter:r,prettyErrors:o}=c(t),a=new u.Parser(r?.addNewLine),s=new n.Composer(t),l=Array.from(s.compose(a.parse(e)));if(o&&r)for(let t of l)t.errors.forEach(i.prettifyError(e,r)),t.warnings.forEach(i.prettifyError(e,r));return l.length>0?l:Object.assign([],{empty:!0},s.streamInfo())},t.parseDocument=p,t.stringify=function(e,t,r){let n=null;if("function"==typeof t||Array.isArray(t)?n=t:void 0===r&&t&&(r=t),"string"==typeof r&&(r=r.length),"number"==typeof r){let e=Math.round(r);r=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){let{keepUndefined:e}=r??t??{};if(!e)return}return s.isDocument(e)&&!n?e.toString(r):new o.Document(e,n,r).toString(r)}},35236:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{CommonRerankerOptionsSchema:()=>_,RankedDocument:()=>m,RankedDocumentDataSchema:()=>h,RankedDocumentMetadataSchema:()=>d,RerankerInfoSchema:()=>y,defineReranker:()=>v,rerank:()=>b,rerankerRef:()=>E}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(72448),c=r(40101),p=r(8404);let d=l.z.object({score:l.z.number()}).passthrough(),h=l.z.object({content:l.z.array(c.PartSchema),metadata:d});class m extends p.Document{content;metadata;constructor(e){super(e),this.content=e.content,this.metadata=e.metadata}score(){return this.metadata.score}}let f=l.z.object({query:p.DocumentDataSchema,documents:l.z.array(p.DocumentDataSchema),options:l.z.any().optional()}),g=l.z.object({documents:l.z.array(h)}),y=l.z.object({label:l.z.string().optional(),supports:l.z.object({media:l.z.boolean().optional()}).optional()});function v(e,t,r){var n;return(n=(0,l.defineAction)(e,{actionType:"reranker",name:t.name,inputSchema:t.configSchema?f.extend({options:t.configSchema.optional()}):f,outputSchema:g,metadata:{type:"reranker",info:t.info,reranker:{customOptions:t.configSchema?(0,u.toJsonSchema)({schema:t.configSchema}):void 0}}},e=>r(new p.Document(e.query),e.documents.map(e=>new p.Document(e)),e.options))).__configSchema=t.configSchema,n}async function b(e,t){let r;if(!(r="string"==typeof t.reranker?await e.lookupAction(`/reranker/${t.reranker}`):Object.hasOwnProperty.call(t.reranker,"info")?await e.lookupAction(`/reranker/${t.reranker.name}`):t.reranker))throw Error("Unable to resolve the reranker");return(await r({query:"string"==typeof t.query?p.Document.fromText(t.query):t.query,documents:t.documents,options:t.options})).documents.map(e=>new m(e))}let _=l.z.object({k:l.z.number().describe("Number of documents to rerank").optional()});function E(e){return{...e}}},35444:(e,t,r)=>{"use strict";let n=r(58361);e.exports=(e,t)=>{let r=n(e,t);return r?r.version:null}},35749:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});var n="[_0-9a-z-*/]",o=RegExp("^(?:[a-z]"+n+"{0,255}|"+("[a-z0-9]"+n+"{0,240}@[a-z]")+n+"{0,13})$"),i=/^[ -~]{0,255}[!-~]$/,a=/,|=/,s=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,r){return t.push(r+"="+e.get(r)),t},[]).join(",")},e.prototype._parse=function(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce(function(e,t){var r=t.trim(),n=r.indexOf("=");if(-1!==n){var s=r.slice(0,n),l=r.slice(n+1,t.length);o.test(s)&&i.test(l)&&!a.test(l)&&e.set(s,l)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}()},35774:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GENERIC_GEMINI_MODEL:()=>V,GeminiConfigSchema:()=>v,GeminiGemmaConfigSchema:()=>b,GeminiTtsConfigSchema:()=>_,SUPPORTED_GEMINI_MODELS:()=>B,aggregateResponses:()=>W,cleanSchema:()=>Y,defineGoogleAIModel:()=>J,fromGeminiCandidate:()=>Z,gemini:()=>z,gemini10Pro:()=>E,gemini15Flash:()=>x,gemini15Flash8b:()=>w,gemini15Pro:()=>S,gemini20Flash:()=>T,gemini20FlashExp:()=>A,gemini20FlashLite:()=>O,gemini20ProExp0205:()=>N,gemini25Flash:()=>L,gemini25FlashPreview0417:()=>P,gemini25FlashPreviewTts:()=>C,gemini25Pro:()=>R,gemini25ProExp0325:()=>k,gemini25ProPreview0325:()=>I,gemini25ProPreviewTts:()=>D,gemma312bit:()=>M,gemma31bit:()=>j,gemma327bit:()=>U,gemma34bit:()=>F,gemma3ne4bit:()=>$,toGeminiMessage:()=>q,toGeminiSystemInstruction:()=>K,toGeminiTool:()=>G}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(72184),u=r(48334),c=r(95563),p=r(78824),d=r(95552),h=r(44192),m=r(79805),f=r(8008);let g=u.z.object({category:u.z.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:u.z.enum(["BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE"])}),y=u.z.object({prebuiltVoiceConfig:u.z.object({voiceName:u.z.union([u.z.enum(["Zephyr","Puck","Charon","Kore","Fenrir","Leda","Orus","Aoede","Callirrhoe","Autonoe","Enceladus","Iapetus","Umbriel","Algieba","Despina","Erinome","Algenib","Rasalgethi","Laomedeia","Achernar","Alnilam","Schedar","Gacrux","Pulcherrima","Achird","Zubenelgenubi","Vindemiatrix","Sadachbia","Sadaltager","Sulafat"]),u.z.string()]).describe("Name of the preset voice to use").optional()}).describe("Configuration for the prebuilt speaker to use").passthrough().optional()}).describe("Configuration for the voice to use").passthrough(),v=c.GenerationCommonConfigSchema.extend({temperature:u.z.number().min(0).max(2).describe(c.GenerationCommonConfigDescriptions.temperature+" The default value is 1.0.").optional(),topP:u.z.number().min(0).max(1).describe(c.GenerationCommonConfigDescriptions.topP+" The default value is 0.95.").optional(),apiKey:u.z.string().describe("Overrides the plugin-configured API key, if specified.").optional(),safetySettings:u.z.array(g).describe("Adjust how likely you are to see responses that could be harmful. Content is blocked based on the probability that it is harmful.").optional(),codeExecution:u.z.union([u.z.boolean(),u.z.object({}).strict()]).describe("Enables the model to generate and run code.").optional(),contextCache:u.z.boolean().describe("Context caching allows you to save and reuse precomputed input tokens that you wish to use repeatedly.").optional(),functionCallingConfig:u.z.object({mode:u.z.enum(["MODE_UNSPECIFIED","AUTO","ANY","NONE"]).optional(),allowedFunctionNames:u.z.array(u.z.string()).optional()}).describe("Controls how the model uses the provided tools (function declarations). With AUTO (Default) mode, the model decides whether to generate a natural language response or suggest a function call based on the prompt and context. With ANY, the model is constrained to always predict a function call and guarantee function schema adherence. With NONE, the model is prohibited from making function calls.").optional(),responseModalities:u.z.array(u.z.enum(["TEXT","IMAGE","AUDIO"])).describe("The modalities to be used in response. Only supported for 'gemini-2.0-flash-exp' model at present.").optional(),googleSearchRetrieval:u.z.union([u.z.boolean(),u.z.object({}).passthrough()]).describe("Retrieve public web data for grounding, powered by Google Search.").optional()}).passthrough(),b=v.extend({temperature:u.z.number().min(0).max(1).describe(c.GenerationCommonConfigDescriptions.temperature+" The default value is 1.0.").optional()}).passthrough(),_=v.extend({speechConfig:u.z.object({voiceConfig:y.optional(),multiSpeakerVoiceConfig:u.z.object({speakerVoiceConfigs:u.z.array(u.z.object({speaker:u.z.string().describe("Name of the speaker to use"),voiceConfig:y}).describe("Configuration for a single speaker in a multi speaker setup").passthrough()).describe("Configuration for all the enabled speaker voices")}).describe("Configuration for multi-speaker setup").passthrough().optional()}).describe("Speech generation config").passthrough().optional()}).passthrough(),E=(0,c.modelRef)({name:"googleai/gemini-1.0-pro",info:{label:"Google AI - Gemini Pro",versions:["gemini-pro","gemini-1.0-pro-latest","gemini-1.0-pro-001"],supports:{multiturn:!0,media:!1,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),S=(0,c.modelRef)({name:"googleai/gemini-1.5-pro",info:{label:"Google AI - Gemini 1.5 Pro",supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"},versions:["gemini-1.5-pro-latest","gemini-1.5-pro-001","gemini-1.5-pro-002"]},configSchema:v}),x=(0,c.modelRef)({name:"googleai/gemini-1.5-flash",info:{label:"Google AI - Gemini 1.5 Flash",supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools",contextCache:!0},versions:["gemini-1.5-flash-latest","gemini-1.5-flash-001","gemini-1.5-flash-002"]},configSchema:v}),w=(0,c.modelRef)({name:"googleai/gemini-1.5-flash-8b",info:{label:"Google AI - Gemini 1.5 Flash",supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"},versions:["gemini-1.5-flash-8b-latest","gemini-1.5-flash-8b-001"]},configSchema:v}),T=(0,c.modelRef)({name:"googleai/gemini-2.0-flash",info:{label:"Google AI - Gemini 2.0 Flash",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),A=(0,c.modelRef)({name:"googleai/gemini-2.0-flash-exp",info:{label:"Google AI - Gemini 2.0 Flash (Experimental)",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),O=(0,c.modelRef)({name:"googleai/gemini-2.0-flash-lite",info:{label:"Google AI - Gemini 2.0 Flash Lite",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),N=(0,c.modelRef)({name:"googleai/gemini-2.0-pro-exp-02-05",info:{label:"Google AI - Gemini 2.0 Pro Exp 02-05",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),P=(0,c.modelRef)({name:"googleai/gemini-2.5-flash-preview-04-17",info:{label:"Google AI - Gemini 2.5 Flash Preview 04-17",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),C=(0,c.modelRef)({name:"googleai/gemini-2.5-flash-preview-tts",info:{label:"Google AI - Gemini 2.5 Flash Preview TTS",versions:[],supports:{multiturn:!1,media:!1,tools:!1,toolChoice:!1,systemRole:!1,constrained:"no-tools"}},configSchema:_}),k=(0,c.modelRef)({name:"googleai/gemini-2.5-pro-exp-03-25",info:{label:"Google AI - Gemini 2.5 Pro Exp 03-25",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),I=(0,c.modelRef)({name:"googleai/gemini-2.5-pro-preview-03-25",info:{label:"Google AI - Gemini 2.5 Pro Preview 03-25",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),D=(0,c.modelRef)({name:"googleai/gemini-2.5-pro-preview-tts",info:{label:"Google AI - Gemini 2.5 Pro Preview TTS",versions:[],supports:{multiturn:!1,media:!1,tools:!1,toolChoice:!1,systemRole:!1,constrained:"no-tools"}},configSchema:_}),R=(0,c.modelRef)({name:"googleai/gemini-2.5-pro",info:{label:"Google AI - Gemini 2.5 Pro",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),L=(0,c.modelRef)({name:"googleai/gemini-2.5-flash",info:{label:"Google AI - Gemini 2.5 Flash",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:v}),M=(0,c.modelRef)({name:"googleai/gemma-3-12b-it",info:{label:"Google AI - Gemma 3 12B",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:b}),j=(0,c.modelRef)({name:"googleai/gemma-3-1b-it",info:{label:"Google AI - Gemma 3 1B",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:b}),U=(0,c.modelRef)({name:"googleai/gemma-3-27b-it",info:{label:"Google AI - Gemma 3 27B",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:b}),F=(0,c.modelRef)({name:"googleai/gemma-3-4b-it",info:{label:"Google AI - Gemma 3 4B",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:b}),$=(0,c.modelRef)({name:"googleai/gemma-3n-e4b-it",info:{label:"Google AI - Gemma 3n E4B",versions:[],supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}},configSchema:b}),B={"gemini-1.5-pro":S,"gemini-1.5-flash":x,"gemini-1.5-flash-8b":w,"gemini-2.0-pro-exp-02-05":N,"gemini-2.0-flash":T,"gemini-2.0-flash-lite":O,"gemini-2.0-flash-exp":A,"gemini-2.5-pro-exp-03-25":k,"gemini-2.5-pro-preview-03-25":I,"gemini-2.5-pro-preview-tts":D,"gemini-2.5-flash-preview-04-17":P,"gemini-2.5-flash-preview-tts":C,"gemini-2.5-flash":L,"gemini-2.5-pro":R,"gemma-3-12b-it":M,"gemma-3-1b-it":j,"gemma-3-27b-it":U,"gemma-3-4b-it":F,"gemma-3n-e4b-it":$},V=(0,c.modelRef)({name:"googleai/gemini",configSchema:v,info:{label:"Google Gemini",supports:{multiturn:!0,media:!0,tools:!0,toolChoice:!0,systemRole:!0,constrained:"no-tools"}}});function z(e,t={}){let r=function(e,t={}){let r=Object.keys(B).filter(t=>e.startsWith(t)).reduce((e,t)=>t.length>e.length?t:e,"");return r?B[r].withConfig({...t,version:e}):V.withConfig({...t,version:e})}(e);return(0,c.modelRef)({name:`googleai/${e}`,config:t,configSchema:v,info:{...r.info,label:r.name.endsWith(e)?r.info?.label:`Google AI - ${e}`}})}function G(e){return{name:e.name.replace(/\//g,"__"),description:e.description,parameters:function e(t){let r;if(!t||!t.type)return;let n={};if(t.description&&(n.description=t.description),t.enum&&(n.type=l.SchemaType.STRING,n.enum=t.enum),t.nullable&&(n.nullable=t.nullable),Array.isArray(t.type)){let e=t.type;e.includes("null")&&(n.nullable=!0),r=e.find(e=>"null"!==e)}else r=t.type;if("object"===r){let r={};return Object.keys(t.properties??{}).forEach(n=>{r[n]=e(t.properties[n])}),{...n,type:l.SchemaType.OBJECT,properties:r,required:t.required}}{if("array"===r)return{...n,type:l.SchemaType.ARRAY,items:e(t.items)};let o=l.SchemaType[r.toUpperCase()];if(!o)throw new u.GenkitError({status:"INVALID_ARGUMENT",message:`Unsupported property type ${r.toUpperCase()}`});return{...n,type:o}}}(e.inputSchema)}}function H(e){if(void 0!==e.text)return{text:e.text||" "};if(e.media){if(e.media.url.startsWith("data:")){let t=e.media.url,r=t.substring(t.indexOf(",")+1);return{inlineData:{mimeType:e.media.contentType||t.substring(t.indexOf(":")+1,t.indexOf(";")),data:r}}}if(!e.media.contentType)throw Error("Must supply a `contentType` when sending File URIs to Gemini.");return{fileData:{mimeType:e.media.contentType,fileUri:e.media.url}}}if(e.toolRequest){if(!e?.toolRequest?.input)throw Error("Invalid ToolRequestPart: input was missing.");return{functionCall:{name:e.toolRequest.name,args:e.toolRequest.input}}}if(e.toolResponse){if(!e?.toolResponse?.output)throw Error("Invalid ToolResponsePart: output was missing.");return{functionResponse:{name:e.toolResponse.name,response:{name:e.toolResponse.name,content:e.toolResponse.output}}}}if(e.custom){if(!e.custom)throw Error("Invalid GeminiPart: missing custom");if(e.custom.codeExecutionResult)return{codeExecutionResult:e.custom.codeExecutionResult};if(e.custom.executableCode)return{executableCode:e.custom.executableCode};throw Error("Unsupported Custom Part type")}if("string"==typeof e.reasoning){let t={thought:!0};return e.metadata?.thoughtSignature&&(t.thoughtSignature=e.metadata.thoughtSignature),e.reasoning?.length&&(t.text=e.reasoning),t}throw Error("Unsupported Part type"+JSON.stringify(e))}function q(e,t){let r=e.content;return"tool"===e.role&&(r=[...e.content].sort((e,t)=>{let r=e.toolResponse?.ref,n=t.toolResponse?.ref;return r||n?r?n?Number.parseInt(r,10)-Number.parseInt(n,10):-1:1:0})),{role:function(e,t){switch(e){case"user":default:return"user";case"model":return"model";case"system":if(t?.info?.supports?.systemRole)throw Error("system role is only supported for a single message in the first position");throw Error("system role is not supported");case"tool":return"function"}}(e.role,t),parts:r.map(H)}}function K(e){return{role:"user",parts:e.content.map(H)}}function Z(e,t=!1){let r=e.content?.parts||[];return{index:e.index||0,message:{role:"model",content:r.map((e,t)=>(function(e,t,r){if("thought"in e)return{reasoning:e.text||"",metadata:{thoughtSignature:e.thoughtSignature}};if("string"==typeof e.text)return{text:e.text};if(e.inlineData){if(!e.inlineData||!e.inlineData.hasOwnProperty("mimeType")||!e.inlineData.hasOwnProperty("data"))throw Error("Invalid InlineDataPart: missing required properties");let{mimeType:t,data:r}=e.inlineData;return{media:{url:`data:${t};base64,${r}`,contentType:t}}}if(e.functionCall){if(!e.functionCall)throw Error("Invalid FunctionCallPart");return{toolRequest:{name:e.functionCall.name,input:e.functionCall.args,ref:r}}}if(e.functionResponse){if(!e.functionResponse)throw Error("Invalid FunctionResponsePart.");return{toolResponse:{name:e.functionResponse.name.replace(/__/g,"/"),output:e.functionResponse.response}}}if(e.executableCode){if(!e.executableCode)throw Error("Invalid GeminiPart: missing executableCode");return{custom:{executableCode:{language:e.executableCode.language,code:e.executableCode.code}}}}if(e.codeExecutionResult){if(!e.codeExecutionResult)throw Error("Invalid GeminiPart: missing codeExecutionResult");return{custom:{codeExecutionResult:{outcome:e.codeExecutionResult.outcome,output:e.codeExecutionResult.output}}}}throw Error("Unsupported GeminiPart type: "+JSON.stringify(e))})(e,0,t.toString()))},finishReason:function(e){if(!e)return"unknown";switch(e){case"STOP":return"stop";case"MAX_TOKENS":return"length";case"SAFETY":case"RECITATION":return"blocked";default:return"unknown"}}(e.finishReason),finishMessage:e.finishMessage,custom:{safetyRatings:e.safetyRatings,citationMetadata:e.citationMetadata}}}function Y(e){let t=structuredClone(e);for(let e in t){if("$schema"===e||"additionalProperties"===e){delete t[e];continue}"object"==typeof t[e]&&(t[e]=Y(t[e])),"type"===e&&Array.isArray(t[e])&&(t[e]=t[e].find(e=>"null"!==e))}return t}function J({ai:e,name:t,apiKey:r,apiVersion:n,baseUrl:o,info:i,defaultConfig:a,debugTraces:s}){let g;if(!1!==r&&!(g=r||(0,h.getApiKeyFromEnvVar)()))throw new u.GenkitError({status:"FAILED_PRECONDITION",message:"Please pass in the API key or set the GEMINI_API_KEY or GOOGLE_API_KEY environment variable.\nFor more details see https://genkit.dev/docs/plugins/google-genai"});let y=t.startsWith("googleai/")?t.substring(9):t,b=B[y]??(0,c.modelRef)({name:`googleai/${y}`,info:{label:`Google AI - ${y}`,supports:{multiturn:!0,media:!0,tools:!0,systemRole:!0,output:["text","json"]},...i},configSchema:v}),_=[];return b.info?.supports?.media&&_.push((0,p.downloadRequestMedia)({maxBytes:0xa00000,filter:e=>{try{let t=new URL(e.media.url);if(["generativelanguage.googleapis.com","www.youtube.com","youtube.com","youtu.be"].includes(t.hostname))return!1}catch{}return!0}})),e.defineModel({apiVersion:"v2",name:b.name,...b.info,configSchema:b.configSchema,use:_},async(t,{streamingRequested:r,sendChunk:i,abortSignal:p})=>{let h,v,_,E={apiClient:u.GENKIT_CLIENT_HEADER};n&&(E.apiVersion=n),n&&(E.baseUrl=o);let S={...a,...t.config},x=[...t.messages];if(0===x.length)throw Error("No messages provided.");if(b.info?.supports?.systemRole){let e=x.find(e=>"system"===e.role);e&&(x.splice(x.indexOf(e),1),_=K(e))}let w=[];t.tools?.length&&w.push({functionDeclarations:t.tools.map(G)});let{apiKey:T,safetySettings:A,codeExecution:O,version:N,functionCallingConfig:P,googleSearchRetrieval:C,tools:k,...I}=S;O&&w.push({codeExecution:!0===t.config.codeExecution?{}:t.config.codeExecution}),k&&w.push(...k),C&&w.push({googleSearch:!0===C?{}:C}),P?h={functionCallingConfig:{allowedFunctionNames:P.allowedFunctionNames,mode:function(e){if(void 0!==e)switch(e){case"MODE_UNSPECIFIED":return l.FunctionCallingMode.MODE_UNSPECIFIED;case"ANY":return l.FunctionCallingMode.ANY;case"AUTO":return l.FunctionCallingMode.AUTO;case"NONE":return l.FunctionCallingMode.NONE;default:throw Error(`unsupported function calling mode: ${e}`)}}(P.mode)}}:t.toolChoice&&(h={functionCallingConfig:{mode:function(e){if(void 0!==e)switch(e){case"required":return l.FunctionCallingMode.ANY;case"auto":return l.FunctionCallingMode.AUTO;case"none":return l.FunctionCallingMode.NONE;default:throw Error(`unsupported function calling mode: ${e}`)}}(t.toolChoice)}});let D=t.output?.format==="json"||t.output?.contentType==="application/json"&&0===w.length,R={...I,candidateCount:t.candidates||void 0,responseMimeType:D?"application/json":void 0};t.output?.constrained&&D&&(R.responseSchema=Y(t.output.schema));let L=q(x[x.length-1],b),M=e=>Z(e,D),j={systemInstruction:_,generationConfig:R,tools:w.length?w:void 0,toolConfig:h,history:x.slice(0,-1).map(e=>q(e,b)),safetySettings:A},U=N||b.version||y,F=(0,f.extractCacheConfig)(t),{chatRequest:$,cache:B}=await (0,m.handleCacheIfNeeded)(g,t,j,U,F);if(!T&&!g)throw new u.GenkitError({status:"INVALID_ARGUMENT",message:"GoogleAI plugin was initialized with {apiKey: false} but no apiKey configuration was passed at call time."});let V=new l.GoogleGenerativeAI(T||g);v=B?V.getGenerativeModelFromCachedContent(B,{model:U},E):V.getGenerativeModel({model:U},E);let z=async()=>{let e;if(r){let t=await v.startChat($).sendMessageStream(L.parts,{...E,signal:p}),r=[];for await(let e of t.stream)r.push(e),e.candidates?.forEach(e=>{let t=M(e);i({index:t.index,content:t.message.content})});e=W(r)}else e=(await v.startChat($).sendMessage(L.parts,{...E,signal:p})).response;let n=e.candidates||[];if(e.candidates?.undefined&&n.push(e.candidates.undefined),!n.length)throw new u.GenkitError({status:"FAILED_PRECONDITION",message:"No valid candidates returned."});let o=n.map(M)||[];return{candidates:o,custom:e,usage:{...(0,c.getBasicUsageStats)(t.messages,o),inputTokens:e.usageMetadata?.promptTokenCount,outputTokens:e.usageMetadata?.candidatesTokenCount,totalTokens:e.usageMetadata?.totalTokenCount,cachedContentTokens:e.usageMetadata?.cachedContentTokenCount}}};return s?await (0,d.runInNewSpan)(e.registry,{metadata:{name:r?"sendMessageStream":"sendMessage"}},async e=>{e.input={sdk:"@google/generative-ai",cache:B,model:v.model,chatOptions:$,parts:L.parts,options:E};let t=await z();return e.output=t.custom,t}):await z()})}function W(e){let t=e[e.length-1],r={promptFeedback:t?.promptFeedback};for(let t of e){if(t.candidates){let e=0;for(let n of t.candidates)if(r.candidates||(r.candidates=[]),r.candidates[e]||(r.candidates[e]={index:e}),r.candidates[e].citationMetadata=n.citationMetadata,r.candidates[e].groundingMetadata=n.groundingMetadata,r.candidates[e].finishReason=n.finishReason,r.candidates[e].finishMessage=n.finishMessage,r.candidates[e].safetyRatings=n.safetyRatings,n.content&&n.content.parts)for(let t of(r.candidates[e].content||(r.candidates[e].content={role:n.content.role||"user",parts:[]}),n.content.parts)){let n={};t.text&&(n.text=t.text),t.functionCall&&(n.functionCall=t.functionCall),t.executableCode&&(n.executableCode=t.executableCode),t.codeExecutionResult&&(n.codeExecutionResult=t.codeExecutionResult),0===Object.keys(n).length&&(n.text=""),r.candidates[e].content.parts.push(n)}e++}t.usageMetadata&&(r.usageMetadata=t.usageMetadata)}return r}},36407:(e,t,r)=>{"use strict";var n=r(99122),o=r(46076);let i={identify:e=>"<<"===e||"symbol"==typeof e&&"<<"===e.description,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new o.Scalar(Symbol("<<")),{addToJSMap:a}),stringify:()=>"<<"};function a(e,t,r){if(r=e&&n.isAlias(r)?r.resolve(e.doc):r,n.isSeq(r))for(let n of r.items)s(e,t,n);else if(Array.isArray(r))for(let n of r)s(e,t,n);else s(e,t,r)}function s(e,t,r){let o=e&&n.isAlias(r)?r.resolve(e.doc):r;if(!n.isMap(o))throw Error("Merge sources must be maps or map aliases");for(let[r,n]of o.toJSON(null,e,Map))t instanceof Map?t.has(r)||t.set(r,n):t instanceof Set?t.add(r):Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}t.addMergeToJSMap=a,t.isMergeKey=(e,t)=>(i.identify(t)||n.isScalar(t)&&(!t.type||t.type===o.Scalar.PLAIN)&&i.identify(t.value))&&e?.doc.schema.tags.some(e=>e.tag===i.tag&&e.default),t.merge=i},36440:(e,t,r)=>{"use strict";Object.create;var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=(Object.getPrototypeOf,Object.prototype.hasOwnProperty),s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{checkOp:()=>c,predictModel:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(48334);function u(e,t,n){return async(o,i)=>{var a;let s=(await r.e(487).then(r.bind(r,10487))).default,u=await s((a={model:e,apiVersion:"v1beta",apiKey:t,method:n},`https://generativelanguage.googleapis.com/${a.apiVersion}/models/${a.model}:${a.method}?key=${a.apiKey}`),{method:"POST",body:JSON.stringify({instances:o,parameters:i}),headers:{"Content-Type":"application/json","X-Goog-Api-Client":l.GENKIT_CLIENT_HEADER}});if(!u.ok)throw Error(`Error from Gemini AI predict: HTTP ${u.status}: ${await u.text()}`);return await u.json()}}async function c(e,t){var n;let o=(await r.e(487).then(r.bind(r,10487))).default,i=await o((n={apiVersion:"v1beta",operation:e,apiKey:t},`https://generativelanguage.googleapis.com/${n.apiVersion}/${n.operation}?key=${n.apiKey}`),{method:"GET",headers:{"Content-Type":"application/json","X-Goog-Api-Client":l.GENKIT_CLIENT_HEADER}});if(!i.ok)throw Error(`Error from operation API: HTTP ${i.status}: ${await i.text()}`);return await i.json()}},36646:(e,t,r)=>{"use strict";r.d(t,{$q:()=>f,Ir:()=>p,J9:()=>a,Q5:()=>u,QG:()=>c,Rr:()=>l,Tj:()=>s,rH:()=>h,u3:()=>d,u6:()=>g,xl:()=>m});var n=r(86713),o=r(28038),i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=5,s=1e3,l=5e3,u=1.5;function c(e){void 0===e&&(e={});var t={};return Object.entries(e).forEach(function(e){var r=i(e,2),o=r[0],a=r[1];void 0!==a?t[o]=String(a):n.s.warn('Header "'+o+'" has invalid value ('+a+") and will be ignored")}),t}function p(e,t){return e.endsWith("/")||(e+="/"),e+t}function d(e){try{var t=new URL(e);return""===t.pathname&&(t.pathname=t.pathname+"/"),t.toString()}catch(t){return n.s.warn("Could not parse export URL: '"+e+"'"),e}}function h(e){var t,r;return"number"!=typeof e?(r=Number(null!=(t=(0,o._)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)?t:(0,o._)().OTEL_EXPORTER_OTLP_TIMEOUT))<=0?m(r,1e4):r:e<=0?m(e,1e4):e}function m(e,t){return n.s.warn("Timeout must be greater than 0",e),t}function f(e){return[429,502,503,504].includes(e)}function g(e){if(null==e)return -1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?1e3*t:-1;var r=new Date(e).getTime()-Date.now();return r>=0?r:0}},36686:(e,t,r)=>{"use strict";let n=r(64487),o=r(3706),i=r(42699);e.exports=(e,t)=>{e=new o(e,t);let r=new n("0.0.0");if(e.test(r)||(r=new n("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let o=e.set[t],a=null;o.forEach(e=>{let t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!a||i(t,a))&&(a=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),a&&(!r||i(r,a))&&(r=a)}return r&&e.test(r)?r:null}},36813:(e,t,r)=>{"use strict";var n=r(49951),o=r(49617),i=r(16584),a=r(99122),s=r(29240),l=r(46076);function u(e,t){let r=a.isScalar(t)?t.value:t;for(let n of e)if(a.isPair(n)&&(n.key===t||n.key===r||a.isScalar(n.key)&&n.key.value===r))return n}class c extends i.Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(a.MAP,e),this.items=[]}static from(e,t,r){let{keepUndefined:n,replacer:o}=r,i=new this(e),a=(e,a)=>{if("function"==typeof o)a=o.call(t,e,a);else if(Array.isArray(o)&&!o.includes(e))return;(void 0!==a||n)&&i.items.push(s.createPair(e,a,r))};if(t instanceof Map)for(let[e,r]of t)a(e,r);else if(t&&"object"==typeof t)for(let e of Object.keys(t))a(e,t[e]);return"function"==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i}add(e,t){let r;r=a.isPair(e)?e:e&&"object"==typeof e&&"key"in e?new s.Pair(e.key,e.value):new s.Pair(e,e?.value);let n=u(this.items,r.key),o=this.schema?.sortMapEntries;if(n){if(!t)throw Error(`Key ${r.key} already set`);a.isScalar(n.value)&&l.isScalarValue(r.value)?n.value.value=r.value:n.value=r.value}else if(o){let e=this.items.findIndex(e=>0>o(r,e));-1===e?this.items.push(r):this.items.splice(e,0,r)}else this.items.push(r)}delete(e){let t=u(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){let r=u(this.items,e),n=r?.value;return(!t&&a.isScalar(n)?n.value:n)??void 0}has(e){return!!u(this.items,e)}set(e,t){this.add(new s.Pair(e,t),!0)}toJSON(e,t,r){let n=r?new r:t?.mapAsMap?new Map:{};for(let e of(t?.onCreate&&t.onCreate(n),this.items))o.addPairToJSMap(t,n,e);return n}toString(e,t,r){if(!e)return JSON.stringify(this);for(let e of this.items)if(!a.isPair(e))throw Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),n.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:t})}}t.YAMLMap=c,t.findPair=u},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;let n=r(22964),o=r(58592),i=r(45346);function a(e,t){let r=e.const("err",t);e.if((0,n._)`${i.default.vErrors} === null`,()=>e.assign(i.default.vErrors,(0,n._)`[${r}]`),(0,n._)`${i.default.vErrors}.push(${r})`),e.code((0,n._)`${i.default.errors}++`)}function s(e,t){let{gen:r,validateName:o,schemaEnv:i}=e;i.$async?r.throw((0,n._)`new ${e.ValidationError}(${t})`):(r.assign((0,n._)`${o}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>(0,n.str)`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,n.str)`"${e}" keyword must be ${t} ($data)`:(0,n.str)`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,o,i){let{it:l}=e,{gen:c,compositeRule:p,allErrors:d}=l,h=u(e,r,o);(null!=i?i:p||d)?a(c,h):s(l,(0,n._)`[${h}]`)},t.reportExtraError=function(e,r=t.keywordError,n){let{it:o}=e,{gen:l,compositeRule:c,allErrors:p}=o;a(l,u(e,r,n)),c||p||s(o,i.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(i.default.errors,t),e.if((0,n._)`${i.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,n._)`${i.default.vErrors}.length`,t),()=>e.assign(i.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:o,errsCount:a,it:s}){if(void 0===a)throw Error("ajv implementation error");let l=e.name("err");e.forRange("i",a,i.default.errors,a=>{e.const(l,(0,n._)`${i.default.vErrors}[${a}]`),e.if((0,n._)`${l}.instancePath === undefined`,()=>e.assign((0,n._)`${l}.instancePath`,(0,n.strConcat)(i.default.instancePath,s.errorPath))),e.assign((0,n._)`${l}.schemaPath`,(0,n.str)`${s.errSchemaPath}/${t}`),s.opts.verbose&&(e.assign((0,n._)`${l}.schema`,r),e.assign((0,n._)`${l}.data`,o))})};let l={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function u(e,t,r){let{createErrors:a}=e.it;return!1===a?(0,n._)`{}`:function(e,t,r={}){let{gen:a,it:s}=e,u=[function({errorPath:e},{instancePath:t}){let r=t?(0,n.str)`${e}${(0,o.getErrorPath)(t,o.Type.Str)}`:e;return[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,r)]}(s,r),function({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:i}){let a=i?t:(0,n.str)`${t}/${e}`;return r&&(a=(0,n.str)`${a}${(0,o.getErrorPath)(r,o.Type.Str)}`),[l.schemaPath,a]}(e,r)];return function(e,{params:t,message:r},o){let{keyword:a,data:s,schemaValue:u,it:c}=e,{opts:p,propertyName:d,topSchemaRef:h,schemaPath:m}=c;o.push([l.keyword,a],[l.params,"function"==typeof t?t(e):t||(0,n._)`{}`]),p.messages&&o.push([l.message,"function"==typeof r?r(e):r]),p.verbose&&o.push([l.schema,u],[l.parentSchema,(0,n._)`${h}${m}`],[i.default.data,s]),d&&o.push([l.propertyName,d])}(e,t,u),a.object(...u)}(e,t,r)}},37540:e=>{"use strict";e.exports=require("node:console")},37830:e=>{"use strict";e.exports=require("node:stream/web")},38099:(e,t,r)=>{"use strict";let n=r(81630),o=r(55591),i=r(79551),a=r(74075),s=r(27910).PassThrough,l=r(53752),u=r(49074),c=r(91645);e.exports=function(e,t){return function e(t,r){let p,d,h;(r=r||{}).fetchRes=r.fetchRes||new s,r.cookies=r.cookies||new l,r.redirects=r.redirects||0,r.maxRedirects=isNaN(r.maxRedirects)?5:r.maxRedirects,r.cookie&&([].concat(r.cookie||[]).forEach(e=>{r.cookies.set(e,t)}),r.cookie=!1);let m=r.fetchRes,f=i.parse(t),g=(r.method||"").toString().trim().toUpperCase()||"GET",y=!1,v="https:"===f.protocol?o:n,b={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+u.version};if(Object.keys(r.headers||{}).forEach(e=>{b[e.toLowerCase().trim()]=r.headers[e]}),r.userAgent&&(b["user-agent"]=r.userAgent),f.auth&&(b.Authorization="Basic "+Buffer.from(f.auth).toString("base64")),(p=r.cookies.get(t))&&(b.cookie=p),r.body){if(!1!==r.contentType&&(b["Content-Type"]=r.contentType||"application/x-www-form-urlencoded"),"function"==typeof r.body.pipe)b["Transfer-Encoding"]="chunked",(d=r.body).on("error",e=>{y||(y=!0,e.type="FETCH",e.sourceUrl=t,m.emit("error",e))});else{if(r.body instanceof Buffer)d=r.body;else if("object"==typeof r.body)try{d=Buffer.from(Object.keys(r.body).map(e=>{let t=r.body[e].toString().trim();return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"))}catch(e){if(y)return;y=!0,e.type="FETCH",e.sourceUrl=t,m.emit("error",e);return}else d=Buffer.from(r.body.toString().trim());b["Content-Type"]=r.contentType||"application/x-www-form-urlencoded",b["Content-Length"]=d.length}g=(r.method||"").toString().trim().toUpperCase()||"POST"}let _={method:g,host:f.hostname,path:f.path,port:f.port?f.port:"https:"===f.protocol?443:80,headers:b,rejectUnauthorized:!1,agent:!1};r.tls&&Object.keys(r.tls).forEach(e=>{_[e]=r.tls[e]}),"https:"!==f.protocol||!f.hostname||f.hostname===_.host||c.isIP(f.hostname)||_.servername||(_.servername=f.hostname);try{h=v.request(_)}catch(e){return y=!0,setImmediate(()=>{e.type="FETCH",e.sourceUrl=t,m.emit("error",e)}),m}return r.timeout&&h.setTimeout(r.timeout,()=>{if(y)return;y=!0,h.abort();let e=Error("Request Timeout");e.type="FETCH",e.sourceUrl=t,m.emit("error",e)}),h.on("error",e=>{y||(y=!0,e.type="FETCH",e.sourceUrl=t,m.emit("error",e))}),h.on("response",n=>{let o;if(!y){switch(n.headers["content-encoding"]){case"gzip":case"deflate":o=a.createUnzip()}if(n.headers["set-cookie"]&&[].concat(n.headers["set-cookie"]||[]).forEach(e=>{r.cookies.set(e,t)}),[301,302,303,307,308].includes(n.statusCode)&&n.headers.location){if(r.redirects++,r.redirects>r.maxRedirects){y=!0;let e=Error("Maximum redirect count exceeded");e.type="FETCH",e.sourceUrl=t,m.emit("error",e),h.abort();return}return r.method="GET",r.body=!1,e(i.resolve(t,n.headers.location),r)}if(m.statusCode=n.statusCode,m.headers=n.headers,n.statusCode>=300&&!r.allowErrorResponse){y=!0;let e=Error("Invalid status code "+n.statusCode);e.type="FETCH",e.sourceUrl=t,m.emit("error",e),h.abort();return}n.on("error",e=>{y||(y=!0,e.type="FETCH",e.sourceUrl=t,m.emit("error",e),h.abort())}),o?(n.pipe(o).pipe(m),o.on("error",e=>{y||(y=!0,e.type="FETCH",e.sourceUrl=t,m.emit("error",e),h.abort())})):n.pipe(m)}}),setImmediate(()=>{if(d)try{if("function"==typeof d.pipe)return d.pipe(h);h.write(d)}catch(e){y=!0,e.type="FETCH",e.sourceUrl=t,m.emit("error",e);return}h.end()}),m}(e,t)},e.exports.Cookies=l},38267:e=>{"use strict";e.exports="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}},38327:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(66112);t.default=function(e){e.registerDecorator("inline",function(e,t,r,o){var i=e;return t.partials||(t.partials={},i=function(o,i){var a=r.partials;r.partials=n.extend({},a,t.partials);var s=e(o,i);return r.partials=a,s}),t.partials[o.args[0]]=o.fn,i})},e.exports=t.default},38477:(e,t,r)=>{"use strict";var n=r(19771),o=r(97770),i=r(24102);function a(e,t){for(let r=0;r<e.length;++r)if(e[r].type===t)return!0;return!1}function s(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return -1}function l(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function u(e){switch(e.type){case"document":return e.start;case"block-map":{let t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function c(e){if(0===e.length)return[];let t=e.length;t:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;e[++t]?.type==="space";);return e.splice(t,e.length)}function p(e){if("flow-seq-start"===e.start.type)for(let t of e.items)!t.sep||t.value||a(t.start,"explicit-key-ind")||a(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,l(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class d{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new i.Lexer,this.onNewLine=e}*parse(e,t=!1){for(let r of(this.onNewLine&&0===this.offset&&this.onNewLine(0),this.lexer.lex(e,t)))yield*this.next(r);t||(yield*this.end())}*next(e){if(this.source=e,n.env.LOG_TOKENS&&console.log("|",o.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let t=o.tokenType(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if("doc-end"===this.type&&(!e||"doc-end"!==e.type)){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{let e=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in e?e.indent:0:"flow-collection"===t.type&&"document"===e.type&&(t.indent=0),"flow-collection"===t.type&&p(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{let r=e.items[e.items.length-1];if(r.value){e.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}if(r.sep)r.value=t;else{Object.assign(r,{key:t,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{let r=e.items[e.items.length-1];r.value?e.items.push({start:[],value:t}):r.value=t;break}case"flow-collection":{let r=e.items[e.items.length-1];!r||r.value?e.items.push({start:[],key:t,sep:[]}):r.sep?r.value=t:Object.assign(r,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if(("document"===e.type||"block-map"===e.type||"block-seq"===e.type)&&("block-map"===t.type||"block-seq"===t.type)){let r=t.items[t.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&-1===s(r.start)&&(0===t.indent||r.start.every(e=>"comment"!==e.type||e.indent<t.indent))&&("document"===e.type?e.end=r.start:e.items.push({start:r.start}),t.items.splice(-1,1))}}else yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};"doc-start"===this.type&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":-1!==s(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return;case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){let t,r=c(u(this.peek(2)));e.end?((t=e.end).push(this.sourceToken),delete e.end):t=[this.sourceToken];let n={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:t}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=n}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){let t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){let r="end"in t.value?t.value.end:void 0,n=Array.isArray(r)?r[r.length-1]:void 0;n?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){let r=e.items[e.items.length-2],n=r?.value?.end;if(Array.isArray(n)){Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let r=!this.onKeyLine&&this.indent===e.indent,n=r&&(t.sep||t.explicitKey)&&"seq-item-ind"!==this.type,o=[];if(n&&t.sep&&!t.value){let r=[];for(let n=0;n<t.sep.length;++n){let o=t.sep[n];switch(o.type){case"newline":r.push(n);break;case"space":break;case"comment":o.indent>e.indent&&(r.length=0);break;default:r.length=0}}r.length>=2&&(o=t.sep.splice(r[1]))}switch(this.type){case"anchor":case"tag":n||t.value?(o.push(this.sourceToken),e.items.push({start:o}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":t.sep||t.explicitKey?n||t.value?(o.push(this.sourceToken),e.items.push({start:o,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(t.start.push(this.sourceToken),t.explicitKey=!0),this.onKeyLine=!0;return;case"map-value-ind":if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(a(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(l(t.key)&&!a(t.sep,"newline")){let e=c(t.start),r=t.key,n=t.sep;n.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:r,sep:n}]})}else o.length>0?t.sep=t.sep.concat(o,this.sourceToken):t.sep.push(this.sourceToken);else if(a(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{let e=c(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||n?e.items.push({start:o,key:null,sep:[this.sourceToken]}):a(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let r=this.flowScalar(this.type);n||t.value?(e.items.push({start:o,key:r,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(r):(Object.assign(t,{key:r,sep:[]}),this.onKeyLine=!0);return}default:{let n=this.startBlockValue(e);if(n){if("block-seq"===n.type){if(!t.explicitKey&&t.sep&&!a(t.sep,"newline"))return void(yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source}))}else r&&e.items.push({start:o});this.stack.push(n);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){let t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){let r="end"in t.value?t.value.end:void 0,n=Array.isArray(r)?r[r.length-1]:void 0;n?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){let r=e.items[e.items.length-2],n=r?.value?.end;if(Array.isArray(n)){Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;t.value||a(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>e.indent){let t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){let t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do yield*this.pop(),e=this.peek(1);while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let r=this.flowScalar(this.type);!t||t.value?e.items.push({start:[],key:r,sep:[]}):t.sep?this.stack.push(r):Object.assign(t,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{let t=this.peek(2);if("block-map"!==t.type||("map-value-ind"!==this.type||t.indent!==e.indent)&&("newline"!==this.type||t.items[t.items.length-1].sep))if("map-value-ind"===this.type&&"flow-collection"!==t.type){let r=c(u(t));p(e);let n=e.end.splice(1,e.end.length);n.push(this.sourceToken);let o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e);else yield*this.pop(),yield*this.step()}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let t=c(u(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let t=c(u(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&!(this.indent<=t)&&e.every(e=>"newline"===e.type||"space"===e.type)}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}t.Parser=d},38558:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>m,serverHooks:()=>y,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{GET:()=>h});var o=r(96559),i=r(48088),a=r(37719),s=r(32190),l=r(41362),u=r(65608),c=r(47806),p=r(8010),d=r(34717);async function h(e){let t=(e.headers.get("authorization")||"").split("Bearer ").at(1);if(!process.env.CRON_SECRET||t!==process.env.CRON_SECRET)return s.NextResponse.json({error:"Unauthorized"},{status:401});if(!process.env.DAILY_REPORT_RECIPIENT_EMAIL)return console.error("CRON JOB FAILED: Missing DAILY_REPORT_RECIPIENT_EMAIL environment variable."),s.NextResponse.json({error:"Recipient email not configured."},{status:500});try{console.log("CRON: Fetching campaigns...");let e=await (0,l.ME)();if(!e||0===e.length)return console.log("CRON: No campaigns found in the last 24 hours. No report will be sent."),s.NextResponse.json({message:"No campaigns to report."});console.log(`CRON: Found ${e.length} campaigns. Fetching stats...`);let t=e.map(e=>(0,l.mk)(e.campaign_uid)),r=(await Promise.allSettled(t)).filter(e=>"fulfilled"===e.status&&e.value).map(e=>e.value);console.log("CRON: Generating daily report data...");let n=function(e,t){let r=t.filter(e=>null!=e);if(!e||!r||0===e.length||0===r.length)return[];let n=new Map(e.map(e=>[e.campaign_uid,e])),o=[];for(let e of r){let t=n.get(e.campaign_uid);if(t&&"number"==typeof e.delivery_success_count&&e.delivery_success_count>0){let r=e.processed_count??0,n=e.delivery_success_count,i=e.unique_opens_count??0,a=e.unique_clicks_count??0,s=r>0?n/r*100:100,l=n>0?i/n*100:0,u=i>0?a/i*100:0,c=t.send_at||t.date_added;o.push({campaignUid:t.campaign_uid,date:function(e){if(!e||""===e.trim()||e.startsWith("0000-00-00"))return"N/A";try{let t=new Date(e);if(isNaN(t.getTime())){let t=new Date(e.replace(" ","T"));if(isNaN(t.getTime()))return"N/A";return t.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}return t.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}catch(t){return console.error(`Could not parse date: ${e}`,t),"N/A"}}(c),campaignName:t.name,fromName:t.from_name,subject:t.subject,totalSent:r,opens:i,clicks:a,unsubscribes:e.unsubscribes_count??0,bounces:e.bounces_count??0,deliveryRate:parseFloat(s.toFixed(2)),openRate:parseFloat(l.toFixed(2)),clickRate:parseFloat(u.toFixed(2))})}}return o.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}(e,r),o=new Date,i=new Date(o.getFullYear(),o.getMonth(),o.getDate()),a=new Date(o.getFullYear(),o.getMonth(),o.getDate()-1),h=[],m=[];for(let e of n){let t=e.date.split("/");if(3!==t.length)continue;let r=new Date(Number(t[2]),Number(t[0])-1,Number(t[1]));!isNaN(r.getTime())&&(r.getTime()>=i.getTime()?h.push(e):r.getTime()>=a.getTime()&&m.push(e))}if(0===h.length&&0===m.length)return console.log("CRON: No campaigns sent today or yesterday. No report will be sent."),s.NextResponse.json({message:"No recent campaigns to report."});console.log("CRON: Generating AI email summary...");let f=await (0,u.g)({todayReports:h,yesterdayReports:m});console.log(`CRON: Sending report to ${process.env.DAILY_REPORT_RECIPIENT_EMAIL}...`),await (0,c.Z)({to:process.env.DAILY_REPORT_RECIPIENT_EMAIL,subject:f.subject,body:f.body}),console.log("CRON: Daily report sent successfully!");try{let e=(0,d.H9)(p.db,"jobStatus","dailyEmailReport");await (0,d.BN)(e,{lastSuccess:new Date().toISOString(),status:"success"},{merge:!0}),console.log("CRON: Successfully logged job status to Firestore.")}catch(e){console.error("CRON: Could not log job status to Firestore after sending email.",e)}return s.NextResponse.json({success:!0,message:"Daily report sent successfully."})}catch(e){try{let t=(0,d.H9)(p.db,"jobStatus","dailyEmailReport");await (0,d.BN)(t,{lastFailure:new Date().toISOString(),status:"failure",error:e.message},{merge:!0})}catch(e){console.error("CRON: Could not log job FAILURE status to Firestore.",e)}return console.error("CRON JOB FAILED:",e),s.NextResponse.json({error:e.message},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/cron/send-daily-report/route",pathname:"/api/cron/send-daily-report",filename:"route",bundlePath:"app/api/cron/send-daily-report/route"},resolvedPagePath:"/home/user/studio/src/app/api/cron/send-daily-report/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:f,workUnitAsyncStorage:g,serverHooks:y}=m;function v(){return(0,a.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:g})}},38786:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(r(61292)),i=n(r(9431)),a=r(75890),s=r(80714),l=n(r(70080)),u=n(r(581)),c=n(r(91325)),p=o.default.create;function d(){var e=p();return e.compile=function(t,r){return s.compile(t,r,e)},e.precompile=function(t,r){return s.precompile(t,r,e)},e.AST=i.default,e.Compiler=s.Compiler,e.JavaScriptCompiler=l.default,e.Parser=a.parser,e.parse=a.parse,e.parseWithoutProcessing=a.parseWithoutProcessing,e}var h=d();h.create=d,c.default(h),h.Visitor=u.default,h.default=h,t.default=h,e.exports=t.default},39449:(e,t,r)=>{"use strict";let n=r(27910).Transform;class o extends n{constructor(e){super(e),this.options=e||{},this.lastByte=!1}_transform(e,t,r){let n,o=0;for(let t=0,r=e.length;t<r;t++)10===e[t]&&(t&&13!==e[t-1]||!t&&13!==this.lastByte)&&(t>o&&(n=e.slice(o,t),this.push(n)),this.push(Buffer.from("\r\n")),o=t+1);o&&o<e.length?(n=e.slice(o),this.push(n)):o||this.push(e),this.lastByte=e[e.length-1],r()}}e.exports=o},39597:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});var n=r(86713),o=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};function i(){var e,t,r,i;return e=this,t=void 0,r=void 0,i=function(){return o(this,function(e){return n.s.debug("could not read machine-id: unsupported platform"),[2,""]})},new(r||(r=Promise))(function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})}},39767:(e,t,r)=>{"use strict";function n(){this.padding=0}t.__esModule=!0,t.print=function(e){return new n().accept(e)},t.PrintVisitor=n,n.prototype=new(function(e){return e&&e.__esModule?e:{default:e}}(r(581))).default,n.prototype.pad=function(e){for(var t="",r=0,n=this.padding;r<n;r++)t+="  ";return t+(e+"\n")},n.prototype.Program=function(e){var t="",r=e.body,n=void 0,o=void 0;if(e.blockParams){var i="BLOCK PARAMS: [";for(n=0,o=e.blockParams.length;n<o;n++)i+=" "+e.blockParams[n];i+=" ]",t+=this.pad(i)}for(n=0,o=r.length;n<o;n++)t+=this.accept(r[n]);return this.padding--,t},n.prototype.MustacheStatement=function(e){return this.pad("{{ "+this.SubExpression(e)+" }}")},n.prototype.Decorator=function(e){return this.pad("{{ DIRECTIVE "+this.SubExpression(e)+" }}")},n.prototype.BlockStatement=n.prototype.DecoratorBlock=function(e){var t="";return t+=this.pad(("DecoratorBlock"===e.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,t+=this.pad(this.SubExpression(e)),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},n.prototype.PartialStatement=function(e){var t="PARTIAL:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),this.pad("{{> "+t+" }}")},n.prototype.PartialBlockStatement=function(e){var t="PARTIAL BLOCK:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),t+=" "+this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--,this.pad("{{> "+t+" }}")},n.prototype.ContentStatement=function(e){return this.pad("CONTENT[ '"+e.value+"' ]")},n.prototype.CommentStatement=function(e){return this.pad("{{! '"+e.value+"' }}")},n.prototype.SubExpression=function(e){for(var t=e.params,r=[],n=void 0,o=0,i=t.length;o<i;o++)r.push(this.accept(t[o]));return t="["+r.join(", ")+"]",n=e.hash?" "+this.accept(e.hash):"",this.accept(e.path)+" "+t+n},n.prototype.PathExpression=function(e){var t=e.parts.join("/");return(e.data?"@":"")+"PATH:"+t},n.prototype.StringLiteral=function(e){return'"'+e.value+'"'},n.prototype.NumberLiteral=function(e){return"NUMBER{"+e.value+"}"},n.prototype.BooleanLiteral=function(e){return"BOOLEAN{"+e.value+"}"},n.prototype.UndefinedLiteral=function(){return"UNDEFINED"},n.prototype.NullLiteral=function(){return"NULL"},n.prototype.Hash=function(e){for(var t=e.pairs,r=[],n=0,o=t.length;n<o;n++)r.push(this.accept(t[n]));return"HASH{"+r.join(", ")+"}"},n.prototype.HashPair=function(e){return e.key+"="+this.accept(e.value)}},39770:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2784),t),o(r(68078),t),o(r(88524),t),o(r(57277),t),o(r(70350),t),o(r(56264),t),o(r(18271),t),o(r(23592),t),o(r(52618),t),o(r(54437),t),o(r(32769),t),o(r(21754),t),o(r(92041),t),o(r(7604),t),o(r(1791),t),o(r(27040),t),o(r(95652),t),o(r(66766),t),o(r(6711),t),o(r(11955),t),o(r(50807),t),o(r(1664),t),o(r(94188),t),o(r(6028),t),o(r(14662),t),o(r(15229),t),o(r(19623),t),o(r(78624),t),o(r(7631),t),o(r(50236),t),o(r(29781),t),o(r(24192),t),o(r(4983),t),o(r(3769),t),o(r(89470),t),o(r(63379),t),o(r(3139),t),o(r(7895),t),t.default=r(7895).zodToJsonSchema},39985:(e,t,r)=>{"use strict";var n=r(70230);t.string={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,r,o)=>(t=Object.assign({actualString:!0},t),n.stringifyString(e,t,r,o))}},40101:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{CustomPartSchema:()=>b,DataPartSchema:()=>v,Document:()=>w,DocumentDataSchema:()=>S,MediaPartSchema:()=>h,MediaSchema:()=>d,PartSchema:()=>E,ReasoningPartSchema:()=>p,ResourcePartSchema:()=>_,TextPartSchema:()=>c,ToolRequestPartSchema:()=>f,ToolRequestSchema:()=>m,ToolResponsePartSchema:()=>y,ToolResponseSchema:()=>g,checkUniqueDocuments:()=>T}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455);let u=l.z.object({text:l.z.never().optional(),media:l.z.never().optional(),toolRequest:l.z.never().optional(),toolResponse:l.z.never().optional(),data:l.z.unknown().optional(),metadata:l.z.record(l.z.unknown()).optional(),custom:l.z.record(l.z.unknown()).optional(),reasoning:l.z.never().optional(),resource:l.z.never().optional()}),c=u.extend({text:l.z.string()}),p=u.extend({reasoning:l.z.string()}),d=l.z.object({contentType:l.z.string().optional(),url:l.z.string()}),h=u.extend({media:d}),m=l.z.object({ref:l.z.string().optional(),name:l.z.string(),input:l.z.unknown().optional()}),f=u.extend({toolRequest:m}),g=l.z.object({ref:l.z.string().optional(),name:l.z.string(),output:l.z.unknown().optional()}),y=u.extend({toolResponse:g}),v=u.extend({data:l.z.unknown()}),b=u.extend({custom:l.z.record(l.z.any())}),_=u.extend({resource:l.z.object({uri:l.z.string()})}),E=l.z.union([c,h]),S=l.z.object({content:l.z.array(E),metadata:l.z.record(l.z.string(),l.z.any()).optional()});function x(e){return void 0===e?e:JSON.parse(JSON.stringify(e))}class w{content;metadata;constructor(e){this.content=x(e.content),this.metadata=x(e.metadata)}static fromText(e,t){return new w({content:[{text:e}],metadata:t})}static fromMedia(e,t,r){return new w({content:[{media:{contentType:t,url:e}}],metadata:r})}static fromData(e,t,r){return"text"===t?this.fromText(e,r):this.fromMedia(e,t,r)}get text(){return this.content.map(e=>e.text||"").join("")}get media(){return this.content.filter(e=>e.media&&!e.text).map(e=>e.media)}get data(){return this.text?this.text:this.media?this.media[0].url:""}get dataType(){return this.text?"text":this.media&&this.media[0].contentType?this.media[0].contentType:void 0}toJSON(){return{content:x(this.content),metadata:x(this.metadata)}}getEmbeddingDocuments(e){let t=[];for(let r of e){let e=this.toJSON();r.metadata&&(e.metadata||(e.metadata={}),e.metadata.embedMetadata=r.metadata),t.push(new w(e))}return T(t),t}}function T(e){let t=new Set;for(let r of e){let e=JSON.stringify(r);if(t.has(e))return console.warn("Warning: embedding documents are not unique. Are you missing embed metadata?"),!1;t.add(e)}return!0}},40413:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e},l=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),u={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(u,{cleanUpTracing:()=>E,enableTelemetry:()=>_,ensureBasicTelemetryInstrumentation:()=>v,flushTracing:()=>S}),e.exports=s(n({},"__esModule",{value:!0}),u);var c=r(68737),p=r(16911),d=r(95566),h=r(45425),m=r(79882);l(u,r(45425),e.exports),l(u,r(90704),e.exports),l(u,r(6750),e.exports),l(u,r(22855),e.exports);let f=null,g=null,y="__GENKIT_TELEMETRY_INSTRUMENTED";async function v(){if(await b(),global[y])return await global[y];await _({})}async function b(){if(!global[y]&&"true"===process.env.ENABLE_FIREBASE_MONITORING)try{(await r(Object(function(){var e=Error("Cannot find module '@genkit-ai/firebase'");throw e.code="MODULE_NOT_FOUND",e}()))).enableFirebaseTelemetry()}catch(e){d.logger.warn("It looks like you're trying to enable firebase monitoring, but haven't installed the firebase plugin. Please run `npm i --save @genkit-ai/firebase` and redeploy.")}}async function _(e){process.env.GENKIT_TELEMETRY_SERVER&&(0,h.setTelemetryServerUrl)(process.env.GENKIT_TELEMETRY_SERVER),global[y]=e instanceof Promise?e:Promise.resolve(),g=(e=e instanceof Promise?await e:e)||{};let t=[function(){let e=new h.TraceServerExporter;return(0,m.isDevEnv)()?new p.SimpleSpanProcessor(e):new p.BatchSpanProcessor(e)}()];if(g.traceExporter)throw Error("Please specify spanProcessors instead.");g.spanProcessors&&t.push(...g.spanProcessors),g.spanProcessor&&(t.push(g.spanProcessor),delete g.spanProcessor),g.spanProcessors=t,(f=new c.NodeSDK(g)).start(),process.on("SIGTERM",async()=>await E())}async function E(){f&&(await (g?.metricReader?g.metricReader.forceFlush():Promise.resolve()),await f.shutdown(),d.logger.debug("OpenTelemetry SDK shut down."),f=null)}async function S(){g?.spanProcessors&&await Promise.all(g.spanProcessors.map(e=>e.forceFlush()))}},40620:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var n="1.25.1"},40720:(e,t,r)=>{"use strict";let n=r(33877);e.exports=(e,t,r)=>0>n(e,t,r)},40999:(e,t,r)=>{"use strict";let n=r(64487);e.exports=(e,t)=>new n(e,t).minor},41204:e=>{"use strict";e.exports=require("string_decoder")},41362:(e,t,r)=>{"use strict";r.d(t,{$T:()=>p,HW:()=>c,ME:()=>l,Mr:()=>d,iC:()=>h,mk:()=>u,qb:()=>a,tm:()=>s});var n=r(67218);r(79130);var o=r(17478);let i=process.env.EPMAILPRO_PUBLIC_KEY;async function a(e,t,r={},n=null){if(!i)throw Error("Missing EPMAILPRO_PUBLIC_KEY. Check your .env file and App Hosting backend configuration.");let o=t.startsWith("/")?t.substring(1):t,s=`https://app.epmailpro.com/api/${o}`,l={"X-MW-PUBLIC-KEY":i},u={method:e,headers:l,cache:"no-store"};if("GET"===e){let e=new URLSearchParams(Object.entries(r).map(([e,t])=>[e,String(t)]));e.toString()&&(s+=`?${e.toString()}`)}else n&&(l["Content-Type"]="application/json",u.body=JSON.stringify(n));let c={url:s,headers:{...l},body:u.body||null};try{let e=await fetch(s,u),t=await e.text();if(!e.ok){let r=`API request failed with status ${e.status}.`;try{let e=JSON.parse(t),n=e.error||(e.data?e.data.error:JSON.stringify(e));r+=` Details: ${n}`}catch(e){r+=` Response body: ${t}`}let n=Error(r);throw n.statusCode=e.status,n.requestInfo=c,n}if(!t)return{data:null,requestInfo:c};try{let e=JSON.parse(t);if(e.status&&"success"!==e.status){let t=Error(`API returned a failure status: ${JSON.stringify(e.error||e)}`);throw t.requestInfo=c,t}return{data:e.data?.records||e.data?.record||e.data||e,requestInfo:c}}catch(r){if("[]"===t)return{data:[],requestInfo:c};let e=Error(`Invalid JSON response from API. Raw text: ${t}`);throw e.requestInfo=c,e}}catch(e){throw e.requestInfo||(e.requestInfo=c),e}}async function s(e){try{let{data:t}=await a("GET",`campaigns/${e}`);if(!t)return null;return t}catch(t){return console.error(`Could not fetch details for campaign ${e}. Reason:`,t),null}}async function l(){let{data:e}=await a("GET","campaigns",{page:"1",per_page:"50"}),t=(Array.isArray(e)?e:e?.records)||[];if(0===t.length)return[];let r=t.map(e=>s(e.campaign_uid));return(await Promise.allSettled(r)).filter(e=>"fulfilled"===e.status&&null!==e.value).map(e=>e.value).filter(e=>{if(!e||!e.name)return!1;let t=e.name.toLowerCase();return!t.includes("farm")&&!t.includes("test")})}async function u(e){try{let{data:t}=await a("GET",`campaigns/${e}/stats`);if(!t||Array.isArray(t)&&0===t.length)return null;return{...t,campaign_uid:e}}catch(t){return console.error(`Could not fetch or process stats for campaign ${e}. Reason:`,t),null}}async function c(e){let{data:t}=await a("GET",`lists/${e}/subscribers`,{page:"1",per_page:"10000",status:"unsubscribed"});return(Array.isArray(t)?t:t?.records)||[]}async function p(e,t){try{let{data:r}=await a("GET",`lists/${e}/subscribers`,{EMAIL:t});if(!r||Array.isArray(r)&&0===r.length)return null;return(Array.isArray(r)?r:r.records)[0]||null}catch(e){if(404===e.statusCode)return null;return console.error(`Could not fetch details for subscriber ${t}. Reason:`,e),null}}async function d(){let{data:e}=await a("GET","lists");return((Array.isArray(e)?e:e?.records)||[]).filter(e=>{if(!e||!e.general?.name)return!1;let t=e.general.name.toLowerCase();return!t.includes("farm")&&!t.includes("test")})}async function h(e){let t,r="rg591800s2a2c",n=`suppression-lists/${r}/emails`;try{let o=await a("POST",n,{},{email:e});t={listUid:r,status:"success",data:o.data}}catch(e){t={listUid:r,status:"failed",error:e.message}}return{message:`Attempted to add '${e}' to suppression list ${r}.`,success:"success"===t.status,result:t}}(0,o.D)([a,s,l,u,c,p,d,h]),(0,n.A)(a,"7852ec3e7ddc063b967db2f7fa0623d0218c23a252",null),(0,n.A)(s,"402d30a181f7d9d554d07daf8513ef4b075d357756",null),(0,n.A)(l,"0067fe022ae68bb788d0078518de7518dd262db809",null),(0,n.A)(u,"401debd37c56a1149e44bf2d2bcd5ed06b8e3ca457",null),(0,n.A)(c,"4061fbe8a50e3fd214674a2e1bfed3286bb3b0afb4",null),(0,n.A)(p,"606f0c2220a7ea490bc89fc1a2d9eb7648a15a3281",null),(0,n.A)(d,"00807426360c2866649fea2b69a90e07a1eab79d6d",null),(0,n.A)(h,"40ee5602e76ad4c4ecc1742a645ea73634620569cb",null)},41479:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty;e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),{})},41692:e=>{"use strict";e.exports=require("node:tls")},41741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(58592);t.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,n.checkStrictMode)(r,`"${e}" without "if" is ignored`)}}},41748:(e,t,r)=>{"use strict";let n=r(27910).Transform;class o extends n{constructor(e){super(e),this.options=e||{}}_transform(e,t,r){let n,o=0;for(let t=0,r=e.length;t<r;t++)13===e[t]&&(n=e.slice(o,t),o=t+1,this.push(n));o&&o<e.length?(n=e.slice(o),this.push(n)):o||this.push(e),r()}}e.exports=o},41782:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(59850),t),o(r(54560),t),o(r(77587),t),o(r(42495),t),o(r(81448),t),o(r(28824),t)},41792:e=>{"use strict";e.exports=require("node:querystring")},41984:(e,t)=>{"use strict";let r="block",n="quoted";function o(e,t,r){let n=t,o=t+1,i=e[o];for(;" "===i||"	"===i;)if(t<o+r)i=e[++t];else{do i=e[++t];while(i&&"\n"!==i);n=t,i=e[o=t+1]}return n}t.FOLD_BLOCK=r,t.FOLD_FLOW="flow",t.FOLD_QUOTED=n,t.foldFlowLines=function(e,t,i="flow",{indentAtStart:a,lineWidth:s=80,minContentWidth:l=20,onFold:u,onOverflow:c}={}){let p,d,h;if(!s||s<0)return e;s<l&&(l=0);let m=Math.max(1+l,1+s-t.length);if(e.length<=m)return e;let f=[],g={},y=s-t.length;"number"==typeof a&&(a>s-Math.max(2,l)?f.push(0):y=s-a);let v=!1,b=-1,_=-1,E=-1;for(i===r&&-1!==(b=o(e,b,t.length))&&(y=b+m);h=e[b+=1];){if(i===n&&"\\"===h){switch(_=b,e[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}E=b}if("\n"===h)i===r&&(b=o(e,b,t.length)),y=b+t.length+m,p=void 0;else{if(" "===h&&d&&" "!==d&&"\n"!==d&&"	"!==d){let t=e[b+1];t&&" "!==t&&"\n"!==t&&"	"!==t&&(p=b)}if(b>=y)if(p)f.push(p),y=p+m,p=void 0;else if(i===n){for(;" "===d||"	"===d;)d=h,h=e[b+=1],v=!0;let t=b>E+1?b-2:_-1;if(g[t])return e;f.push(t),g[t]=!0,y=t+m,p=void 0}else v=!0}d=h}if(v&&c&&c(),0===f.length)return e;u&&u();let S=e.slice(0,f[0]);for(let r=0;r<f.length;++r){let o=f[r],a=f[r+1]||e.length;0===o?S=`
${t}${e.slice(0,a)}`:(i===n&&g[o]&&(S+=`${e[o]}\\`),S+=`
${t}${e.slice(o+1,a)}`)}return S}},42049:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;let r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},42467:(e,t,r)=>{"use strict";let n=r(64487);e.exports=(e,t)=>new n(e,t).major},42495:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(r||(t.util=r={})),(n||(t.objectUtil=n={})).mergeShapes=(e,t)=>({...e,...t}),t.ZodParsedType=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":if(Array.isArray(e))return t.ZodParsedType.array;if(null===e)return t.ZodParsedType.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return t.ZodParsedType.promise;if("undefined"!=typeof Map&&e instanceof Map)return t.ZodParsedType.map;if("undefined"!=typeof Set&&e instanceof Set)return t.ZodParsedType.set;if("undefined"!=typeof Date&&e instanceof Date)return t.ZodParsedType.date;return t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},42679:(e,t,r)=>{"use strict";let n=r(3706);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},42699:(e,t,r)=>{"use strict";let n=r(33877);e.exports=(e,t,r)=>n(e,t,r)>0},42856:(e,t,r)=>{"use strict";var n=r(99122),o=r(46076),i=r(36813),a=r(86104),s=r(61080),l=r(45165),u=r(59601);function c(e,t,r,n,o,i){let a="block-map"===r.type?s.resolveBlockMap(e,t,r,n,i):"block-seq"===r.type?l.resolveBlockSeq(e,t,r,n,i):u.resolveFlowCollection(e,t,r,n,i),c=a.constructor;return"!"===o||o===c.tagName?a.tag=c.tagName:o&&(a.tag=o),a}t.composeCollection=function(e,t,r,s,l){let u=s.tag,p=u?t.directives.tagName(u.source,e=>l(u,"TAG_RESOLVE_FAILED",e)):null;if("block-seq"===r.type){let{anchor:e,newlineAfterProp:t}=s,r=e&&u?e.offset>u.offset?e:u:e??u;r&&(!t||t.offset<r.offset)&&l(r,"MISSING_CHAR","Missing newline after block sequence props")}let d="block-map"===r.type?"map":"block-seq"===r.type?"seq":"{"===r.start.source?"map":"seq";if(!u||!p||"!"===p||p===i.YAMLMap.tagName&&"map"===d||p===a.YAMLSeq.tagName&&"seq"===d)return c(e,t,r,l,p);let h=t.schema.tags.find(e=>e.tag===p&&e.collection===d);if(!h){let n=t.schema.knownTags[p];if(!n||n.collection!==d)return n?l(u,"BAD_COLLECTION_TYPE",`${n.tag} used for ${d} collection, but expects ${n.collection??"scalar"}`,!0):l(u,"TAG_RESOLVE_FAILED",`Unresolved tag: ${p}`,!0),c(e,t,r,l,p);t.schema.tags.push(Object.assign({},n,{default:!1})),h=n}let m=c(e,t,r,l,p,h),f=h.resolve?.(m,e=>l(u,"TAG_RESOLVE_FAILED",e),t.options)??m,g=n.isNode(f)?f:new o.Scalar(f);return g.range=m.range,g.tag=p,h?.format&&(g.format=h.format),g}},42894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(58592);t.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>(0,n._)`{passingSchemas: ${e.passing}}`},code(e){let{gen:t,schema:r,parentSchema:i,it:a}=e;if(!Array.isArray(r))throw Error("ajv implementation error");if(a.opts.discriminator&&i.discriminator)return;let s=t.let("valid",!1),l=t.let("passing",null),u=t.name("_valid");e.setParams({passing:l}),t.block(function(){r.forEach((r,i)=>{let c;(0,o.alwaysValidSchema)(a,r)?t.var(u,!0):c=e.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},u),i>0&&t.if((0,n._)`${u} && ${s}`).assign(s,!1).assign(l,(0,n._)`[${l}, ${i}]`).else(),t.if(u,()=>{t.assign(s,!0),t.assign(l,i),c&&e.mergeEvaluated(c,n.Name)})})}),e.result(s,()=>e.reset(),()=>e.error(!0))}}},43301:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0067fe022ae68bb788d0078518de7518dd262db809":()=>n.ME,"00807426360c2866649fea2b69a90e07a1eab79d6d":()=>n.Mr,"401debd37c56a1149e44bf2d2bcd5ed06b8e3ca457":()=>n.mk,"402d30a181f7d9d554d07daf8513ef4b075d357756":()=>n.tm,"4061fbe8a50e3fd214674a2e1bfed3286bb3b0afb4":()=>n.HW,"40a09f6683541529d19201f3335dabed8153ddf56b":()=>i.Z,"40e144796725503669357c2bdbfed923acc81b4602":()=>o.g,"40ee5602e76ad4c4ecc1742a645ea73634620569cb":()=>n.iC,"606f0c2220a7ea490bc89fc1a2d9eb7648a15a3281":()=>n.$T,"7852ec3e7ddc063b967db2f7fa0623d0218c23a252":()=>n.qb});var n=r(41362),o=r(65608),i=r(47806)},43310:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AWSECSLAUNCHTYPEVALUES_EC2:()=>o.Jn,AWSECSLAUNCHTYPEVALUES_FARGATE:()=>o.Fz,AwsEcsLaunchtypeValues:()=>o.AS,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:()=>o.WE,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:()=>o.op,CLOUDPLATFORMVALUES_AWS_EC2:()=>o.WC,CLOUDPLATFORMVALUES_AWS_ECS:()=>o.p7,CLOUDPLATFORMVALUES_AWS_EKS:()=>o.Vx,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:()=>o.Vf,CLOUDPLATFORMVALUES_AWS_LAMBDA:()=>o.JO,CLOUDPLATFORMVALUES_AZURE_AKS:()=>o.Vm,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:()=>o.L6,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:()=>o.oH,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:()=>o.$R,CLOUDPLATFORMVALUES_AZURE_VM:()=>o.zF,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:()=>o.$T,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:()=>o.a1,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:()=>o.qB,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:()=>o.Tg,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:()=>o.qN,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:()=>o.Eh,CLOUDPROVIDERVALUES_AWS:()=>o.Xm,CLOUDPROVIDERVALUES_AZURE:()=>o.BY,CLOUDPROVIDERVALUES_GCP:()=>o.ov,CloudPlatformValues:()=>o.ns,CloudProviderValues:()=>o.jV,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:()=>n.Bh9,DBCASSANDRACONSISTENCYLEVELVALUES_ANY:()=>n.Eo2,DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:()=>n.$8v,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:()=>n.slN,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:()=>n.VMk,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:()=>n.g9x,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:()=>n.G49,DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:()=>n.vhy,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:()=>n.OSW,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:()=>n.O2W,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:()=>n.WJJ,DBSYSTEMVALUES_ADABAS:()=>n.nWK,DBSYSTEMVALUES_CACHE:()=>n.V02,DBSYSTEMVALUES_CASSANDRA:()=>n.Rk0,DBSYSTEMVALUES_CLOUDSCAPE:()=>n.CQB,DBSYSTEMVALUES_COCKROACHDB:()=>n.y__,DBSYSTEMVALUES_COLDFUSION:()=>n.TKU,DBSYSTEMVALUES_COSMOSDB:()=>n.zmF,DBSYSTEMVALUES_COUCHBASE:()=>n.oBD,DBSYSTEMVALUES_COUCHDB:()=>n.hV,DBSYSTEMVALUES_DB2:()=>n.xhJ,DBSYSTEMVALUES_DERBY:()=>n.XTF,DBSYSTEMVALUES_DYNAMODB:()=>n.poY,DBSYSTEMVALUES_EDB:()=>n.ynC,DBSYSTEMVALUES_ELASTICSEARCH:()=>n.Ylk,DBSYSTEMVALUES_FILEMAKER:()=>n.Xdf,DBSYSTEMVALUES_FIREBIRD:()=>n.IOi,DBSYSTEMVALUES_FIRSTSQL:()=>n.$wW,DBSYSTEMVALUES_GEODE:()=>n.N4Y,DBSYSTEMVALUES_H2:()=>n.JZz,DBSYSTEMVALUES_HANADB:()=>n.Dzx,DBSYSTEMVALUES_HBASE:()=>n.Spc,DBSYSTEMVALUES_HIVE:()=>n.nwz,DBSYSTEMVALUES_HSQLDB:()=>n.pfp,DBSYSTEMVALUES_INFORMIX:()=>n.L5D,DBSYSTEMVALUES_INGRES:()=>n.L2R,DBSYSTEMVALUES_INSTANTDB:()=>n.K2_,DBSYSTEMVALUES_INTERBASE:()=>n.y6V,DBSYSTEMVALUES_MARIADB:()=>n.ngE,DBSYSTEMVALUES_MAXDB:()=>n.XER,DBSYSTEMVALUES_MEMCACHED:()=>n.Oe4,DBSYSTEMVALUES_MONGODB:()=>n.X36,DBSYSTEMVALUES_MSSQL:()=>n.Vp5,DBSYSTEMVALUES_MYSQL:()=>n.bfK,DBSYSTEMVALUES_NEO4J:()=>n.BJ_,DBSYSTEMVALUES_NETEZZA:()=>n.irN,DBSYSTEMVALUES_ORACLE:()=>n.PU4,DBSYSTEMVALUES_OTHER_SQL:()=>n.Wb_,DBSYSTEMVALUES_PERVASIVE:()=>n.mc2,DBSYSTEMVALUES_POINTBASE:()=>n.Y$v,DBSYSTEMVALUES_POSTGRESQL:()=>n.jCw,DBSYSTEMVALUES_PROGRESS:()=>n.KjL,DBSYSTEMVALUES_REDIS:()=>n.W_f,DBSYSTEMVALUES_REDSHIFT:()=>n.MpS,DBSYSTEMVALUES_SQLITE:()=>n.vl2,DBSYSTEMVALUES_SYBASE:()=>n.K0$,DBSYSTEMVALUES_TERADATA:()=>n.Xuz,DBSYSTEMVALUES_VERTICA:()=>n.lcm,DbCassandraConsistencyLevelValues:()=>n.Nxd,DbSystemValues:()=>n.Q5s,FAASDOCUMENTOPERATIONVALUES_DELETE:()=>n.mlL,FAASDOCUMENTOPERATIONVALUES_EDIT:()=>n.VEl,FAASDOCUMENTOPERATIONVALUES_INSERT:()=>n.oF4,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:()=>n.y3W,FAASINVOKEDPROVIDERVALUES_AWS:()=>n.Tl5,FAASINVOKEDPROVIDERVALUES_AZURE:()=>n.d3j,FAASINVOKEDPROVIDERVALUES_GCP:()=>n.kOl,FAASTRIGGERVALUES_DATASOURCE:()=>n.uZf,FAASTRIGGERVALUES_HTTP:()=>n.v8K,FAASTRIGGERVALUES_OTHER:()=>n.ToY,FAASTRIGGERVALUES_PUBSUB:()=>n.CK9,FAASTRIGGERVALUES_TIMER:()=>n.IxL,FaasDocumentOperationValues:()=>n.Ijl,FaasInvokedProviderValues:()=>n.zI8,FaasTriggerValues:()=>n.iPC,HOSTARCHVALUES_AMD64:()=>o.so,HOSTARCHVALUES_ARM32:()=>o.hi,HOSTARCHVALUES_ARM64:()=>o.UQ,HOSTARCHVALUES_IA64:()=>o.av,HOSTARCHVALUES_PPC32:()=>o.OZ,HOSTARCHVALUES_PPC64:()=>o.DL,HOSTARCHVALUES_X86:()=>o.ig,HTTPFLAVORVALUES_HTTP_1_0:()=>n.dbJ,HTTPFLAVORVALUES_HTTP_1_1:()=>n.kPW,HTTPFLAVORVALUES_HTTP_2_0:()=>n.gGD,HTTPFLAVORVALUES_QUIC:()=>n.iFX,HTTPFLAVORVALUES_SPDY:()=>n.QhH,HostArchValues:()=>o.Cg,HttpFlavorValues:()=>n.dNH,MESSAGETYPEVALUES_RECEIVED:()=>n.sr7,MESSAGETYPEVALUES_SENT:()=>n.bZN,MESSAGINGDESTINATIONKINDVALUES_QUEUE:()=>n.npt,MESSAGINGDESTINATIONKINDVALUES_TOPIC:()=>n.HXm,MESSAGINGOPERATIONVALUES_PROCESS:()=>n.AVC,MESSAGINGOPERATIONVALUES_RECEIVE:()=>n.mO,MessageTypeValues:()=>n.Ywq,MessagingDestinationKindValues:()=>n.b7t,MessagingOperationValues:()=>n.Qgf,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:()=>n.i9b,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:()=>n.mN_,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:()=>n.Q_6,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:()=>n.EPu,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:()=>n.uzh,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:()=>n.Bez,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:()=>n.uwh,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:()=>n.Rpt,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:()=>n.AdO,NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:()=>n.hu9,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:()=>n.x0j,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:()=>n.hze,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:()=>n.kgK,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:()=>n.rBh,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:()=>n.IMI,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:()=>n.wYf,NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:()=>n.bWQ,NETHOSTCONNECTIONSUBTYPEVALUES_NR:()=>n.JPM,NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:()=>n.ddb,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:()=>n._28,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:()=>n.yIV,NETHOSTCONNECTIONTYPEVALUES_CELL:()=>n.j7z,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:()=>n.D3U,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:()=>n.Vur,NETHOSTCONNECTIONTYPEVALUES_WIFI:()=>n.CGC,NETHOSTCONNECTIONTYPEVALUES_WIRED:()=>n.c1V,NETTRANSPORTVALUES_INPROC:()=>n.JjG,NETTRANSPORTVALUES_IP:()=>n.fN3,NETTRANSPORTVALUES_IP_TCP:()=>n.x85,NETTRANSPORTVALUES_IP_UDP:()=>n.ZUK,NETTRANSPORTVALUES_OTHER:()=>n.EUV,NETTRANSPORTVALUES_PIPE:()=>n.cjY,NETTRANSPORTVALUES_UNIX:()=>n.GR7,NetHostConnectionSubtypeValues:()=>n.cAF,NetHostConnectionTypeValues:()=>n.KSs,NetTransportValues:()=>n.z4S,OSTYPEVALUES_AIX:()=>o.cJ,OSTYPEVALUES_DARWIN:()=>o.JW,OSTYPEVALUES_DRAGONFLYBSD:()=>o.tD,OSTYPEVALUES_FREEBSD:()=>o.xG,OSTYPEVALUES_HPUX:()=>o.BT,OSTYPEVALUES_LINUX:()=>o.Yh,OSTYPEVALUES_NETBSD:()=>o.sS,OSTYPEVALUES_OPENBSD:()=>o.h7,OSTYPEVALUES_SOLARIS:()=>o.l9,OSTYPEVALUES_WINDOWS:()=>o.xR,OSTYPEVALUES_Z_OS:()=>o.Pi,OsTypeValues:()=>o.h0,RPCGRPCSTATUSCODEVALUES_ABORTED:()=>n.$5b,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:()=>n.TiO,RPCGRPCSTATUSCODEVALUES_CANCELLED:()=>n.Ryq,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:()=>n.ueJ,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:()=>n.wAY,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:()=>n._pX,RPCGRPCSTATUSCODEVALUES_INTERNAL:()=>n.dXK,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:()=>n.njt,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:()=>n.ay9,RPCGRPCSTATUSCODEVALUES_OK:()=>n.wJ,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:()=>n.GY$,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:()=>n.nXs,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:()=>n.KNN,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:()=>n._Q_,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:()=>n.gFG,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:()=>n.p1q,RPCGRPCSTATUSCODEVALUES_UNKNOWN:()=>n.ch2,RpcGrpcStatusCodeValues:()=>n.f3T,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:()=>n.wpU,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:()=>n.fhG,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:()=>n.tGA,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:()=>n.byW,SEMATTRS_AWS_DYNAMODB_COUNT:()=>n.F7w,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:()=>n.Wif,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:()=>n.TVZ,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:()=>n.Ouu,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:()=>n.gUJ,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:()=>n.Wx7,SEMATTRS_AWS_DYNAMODB_LIMIT:()=>n.La$,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:()=>n.ti,SEMATTRS_AWS_DYNAMODB_PROJECTION:()=>n.frU,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:()=>n.a4d,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:()=>n.p30,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:()=>n.sxk,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:()=>n.r0m,SEMATTRS_AWS_DYNAMODB_SEGMENT:()=>n.F0K,SEMATTRS_AWS_DYNAMODB_SELECT:()=>n.u4L,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:()=>n.mGg,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:()=>n.Ta3,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:()=>n.DBy,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:()=>n.TCh,SEMATTRS_CODE_FILEPATH:()=>n.cvh,SEMATTRS_CODE_FUNCTION:()=>n.jrL,SEMATTRS_CODE_LINENO:()=>n.usz,SEMATTRS_CODE_NAMESPACE:()=>n.klU,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:()=>n.Qt9,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:()=>n.DNX,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:()=>n.xq_,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:()=>n._iR,SEMATTRS_DB_CASSANDRA_KEYSPACE:()=>n.Unu,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:()=>n.Itx,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:()=>n.NlD,SEMATTRS_DB_CASSANDRA_TABLE:()=>n.zri,SEMATTRS_DB_CONNECTION_STRING:()=>n.cd9,SEMATTRS_DB_HBASE_NAMESPACE:()=>n.bd4,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:()=>n.qGX,SEMATTRS_DB_MONGODB_COLLECTION:()=>n.NlA,SEMATTRS_DB_MSSQL_INSTANCE_NAME:()=>n.Eh5,SEMATTRS_DB_NAME:()=>n.Rt6,SEMATTRS_DB_OPERATION:()=>n.l60,SEMATTRS_DB_REDIS_DATABASE_INDEX:()=>n.wy2,SEMATTRS_DB_SQL_TABLE:()=>n.pHC,SEMATTRS_DB_STATEMENT:()=>n.FoJ,SEMATTRS_DB_SYSTEM:()=>n.V0Q,SEMATTRS_DB_USER:()=>n.N9D,SEMATTRS_ENDUSER_ID:()=>n.RHQ,SEMATTRS_ENDUSER_ROLE:()=>n.cSi,SEMATTRS_ENDUSER_SCOPE:()=>n.MWE,SEMATTRS_EXCEPTION_ESCAPED:()=>n.GKr,SEMATTRS_EXCEPTION_MESSAGE:()=>n.aP6,SEMATTRS_EXCEPTION_STACKTRACE:()=>n.ipG,SEMATTRS_EXCEPTION_TYPE:()=>n.P4J,SEMATTRS_FAAS_COLDSTART:()=>n.TRX,SEMATTRS_FAAS_CRON:()=>n.HVV,SEMATTRS_FAAS_DOCUMENT_COLLECTION:()=>n.LxM,SEMATTRS_FAAS_DOCUMENT_NAME:()=>n.aTe,SEMATTRS_FAAS_DOCUMENT_OPERATION:()=>n.abe,SEMATTRS_FAAS_DOCUMENT_TIME:()=>n.aKn,SEMATTRS_FAAS_EXECUTION:()=>n.dsp,SEMATTRS_FAAS_INVOKED_NAME:()=>n.PIi,SEMATTRS_FAAS_INVOKED_PROVIDER:()=>n.XNY,SEMATTRS_FAAS_INVOKED_REGION:()=>n.imY,SEMATTRS_FAAS_TIME:()=>n.cFk,SEMATTRS_FAAS_TRIGGER:()=>n.bes,SEMATTRS_HTTP_CLIENT_IP:()=>n.nS0,SEMATTRS_HTTP_FLAVOR:()=>n.o8O,SEMATTRS_HTTP_HOST:()=>n.Qv9,SEMATTRS_HTTP_METHOD:()=>n.vof,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:()=>n.OdI,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:()=>n.Plv,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:()=>n.crS,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:()=>n.XyR,SEMATTRS_HTTP_ROUTE:()=>n.tto,SEMATTRS_HTTP_SCHEME:()=>n.zPu,SEMATTRS_HTTP_SERVER_NAME:()=>n.H35,SEMATTRS_HTTP_STATUS_CODE:()=>n.W_O,SEMATTRS_HTTP_TARGET:()=>n.fub,SEMATTRS_HTTP_URL:()=>n.vSt,SEMATTRS_HTTP_USER_AGENT:()=>n.Nz$,SEMATTRS_MESSAGE_COMPRESSED_SIZE:()=>n.U5o,SEMATTRS_MESSAGE_ID:()=>n.Gsd,SEMATTRS_MESSAGE_TYPE:()=>n.$58,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:()=>n.LfK,SEMATTRS_MESSAGING_CONSUMER_ID:()=>n.w54,SEMATTRS_MESSAGING_CONVERSATION_ID:()=>n.nN_,SEMATTRS_MESSAGING_DESTINATION:()=>n.Yjy,SEMATTRS_MESSAGING_DESTINATION_KIND:()=>n.lDI,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:()=>n.cZl,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:()=>n.rsL,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:()=>n.yRs,SEMATTRS_MESSAGING_KAFKA_PARTITION:()=>n.tNm,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:()=>n.E__,SEMATTRS_MESSAGING_MESSAGE_ID:()=>n.XH7,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:()=>n.CdG,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:()=>n._Zr,SEMATTRS_MESSAGING_OPERATION:()=>n.zpg,SEMATTRS_MESSAGING_PROTOCOL:()=>n._af,SEMATTRS_MESSAGING_PROTOCOL_VERSION:()=>n.DA0,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:()=>n.Zl1,SEMATTRS_MESSAGING_SYSTEM:()=>n.zBy,SEMATTRS_MESSAGING_TEMP_DESTINATION:()=>n.JK9,SEMATTRS_MESSAGING_URL:()=>n.t8j,SEMATTRS_NET_HOST_CARRIER_ICC:()=>n.wgx,SEMATTRS_NET_HOST_CARRIER_MCC:()=>n.cA3,SEMATTRS_NET_HOST_CARRIER_MNC:()=>n.hXS,SEMATTRS_NET_HOST_CARRIER_NAME:()=>n.ynP,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:()=>n.Ltc,SEMATTRS_NET_HOST_CONNECTION_TYPE:()=>n.PfM,SEMATTRS_NET_HOST_IP:()=>n.j$y,SEMATTRS_NET_HOST_NAME:()=>n.h70,SEMATTRS_NET_HOST_PORT:()=>n.Puv,SEMATTRS_NET_PEER_IP:()=>n.RvY,SEMATTRS_NET_PEER_NAME:()=>n.nvt,SEMATTRS_NET_PEER_PORT:()=>n.ZUg,SEMATTRS_NET_TRANSPORT:()=>n.Ac3,SEMATTRS_PEER_SERVICE:()=>n.RyT,SEMATTRS_RPC_GRPC_STATUS_CODE:()=>n.C2y,SEMATTRS_RPC_JSONRPC_ERROR_CODE:()=>n.Zwr,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:()=>n.z_u,SEMATTRS_RPC_JSONRPC_REQUEST_ID:()=>n.yew,SEMATTRS_RPC_JSONRPC_VERSION:()=>n.ZSz,SEMATTRS_RPC_METHOD:()=>n.Y3v,SEMATTRS_RPC_SERVICE:()=>n.GOV,SEMATTRS_RPC_SYSTEM:()=>n.sLO,SEMATTRS_THREAD_ID:()=>n.lpz,SEMATTRS_THREAD_NAME:()=>n.taz,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:()=>o.VH,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:()=>o.SV,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:()=>o.SA,SEMRESATTRS_AWS_ECS_TASK_ARN:()=>o.yB,SEMRESATTRS_AWS_ECS_TASK_FAMILY:()=>o.Zf,SEMRESATTRS_AWS_ECS_TASK_REVISION:()=>o.MK,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:()=>o.v0,SEMRESATTRS_AWS_LOG_GROUP_ARNS:()=>o.an,SEMRESATTRS_AWS_LOG_GROUP_NAMES:()=>o.qF,SEMRESATTRS_AWS_LOG_STREAM_ARNS:()=>o.ZZ,SEMRESATTRS_AWS_LOG_STREAM_NAMES:()=>o.Dn,SEMRESATTRS_CLOUD_ACCOUNT_ID:()=>o.E3,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:()=>o.xC,SEMRESATTRS_CLOUD_PLATFORM:()=>o.Iq,SEMRESATTRS_CLOUD_PROVIDER:()=>o.mA,SEMRESATTRS_CLOUD_REGION:()=>o.Nw,SEMRESATTRS_CONTAINER_ID:()=>o.ux,SEMRESATTRS_CONTAINER_IMAGE_NAME:()=>o.uB,SEMRESATTRS_CONTAINER_IMAGE_TAG:()=>o.RB,SEMRESATTRS_CONTAINER_NAME:()=>o.aA,SEMRESATTRS_CONTAINER_RUNTIME:()=>o.PZ,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:()=>o.I2,SEMRESATTRS_DEVICE_ID:()=>o.tn,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:()=>o.BF,SEMRESATTRS_DEVICE_MODEL_NAME:()=>o.Bt,SEMRESATTRS_FAAS_ID:()=>o.Mm,SEMRESATTRS_FAAS_INSTANCE:()=>o.uu,SEMRESATTRS_FAAS_MAX_MEMORY:()=>o.PO,SEMRESATTRS_FAAS_NAME:()=>o.Uf,SEMRESATTRS_FAAS_VERSION:()=>o.lO,SEMRESATTRS_HOST_ARCH:()=>o.yT,SEMRESATTRS_HOST_ID:()=>o.zs,SEMRESATTRS_HOST_IMAGE_ID:()=>o.HP,SEMRESATTRS_HOST_IMAGE_NAME:()=>o.be,SEMRESATTRS_HOST_IMAGE_VERSION:()=>o.g9,SEMRESATTRS_HOST_NAME:()=>o.RK,SEMRESATTRS_HOST_TYPE:()=>o.kE,SEMRESATTRS_K8S_CLUSTER_NAME:()=>o.IG,SEMRESATTRS_K8S_CONTAINER_NAME:()=>o.Pb,SEMRESATTRS_K8S_CRONJOB_NAME:()=>o.Vy,SEMRESATTRS_K8S_CRONJOB_UID:()=>o.gT,SEMRESATTRS_K8S_DAEMONSET_NAME:()=>o.Su,SEMRESATTRS_K8S_DAEMONSET_UID:()=>o.rK,SEMRESATTRS_K8S_DEPLOYMENT_NAME:()=>o.do,SEMRESATTRS_K8S_DEPLOYMENT_UID:()=>o.k7,SEMRESATTRS_K8S_JOB_NAME:()=>o.z3,SEMRESATTRS_K8S_JOB_UID:()=>o.mc,SEMRESATTRS_K8S_NAMESPACE_NAME:()=>o.Tl,SEMRESATTRS_K8S_NODE_NAME:()=>o.Ky,SEMRESATTRS_K8S_NODE_UID:()=>o.pV,SEMRESATTRS_K8S_POD_NAME:()=>o.TH,SEMRESATTRS_K8S_POD_UID:()=>o.gJ,SEMRESATTRS_K8S_REPLICASET_NAME:()=>o.kv,SEMRESATTRS_K8S_REPLICASET_UID:()=>o.PU,SEMRESATTRS_K8S_STATEFULSET_NAME:()=>o.kn,SEMRESATTRS_K8S_STATEFULSET_UID:()=>o.f8,SEMRESATTRS_OS_DESCRIPTION:()=>o.ik,SEMRESATTRS_OS_NAME:()=>o.hQ,SEMRESATTRS_OS_TYPE:()=>o.ko,SEMRESATTRS_OS_VERSION:()=>o.AC,SEMRESATTRS_PROCESS_COMMAND:()=>o.Cn,SEMRESATTRS_PROCESS_COMMAND_ARGS:()=>o.U2,SEMRESATTRS_PROCESS_COMMAND_LINE:()=>o.x2,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:()=>o.fP,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:()=>o.xQ,SEMRESATTRS_PROCESS_OWNER:()=>o.Yb,SEMRESATTRS_PROCESS_PID:()=>o.ky,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:()=>o.C3,SEMRESATTRS_PROCESS_RUNTIME_NAME:()=>o.lb,SEMRESATTRS_PROCESS_RUNTIME_VERSION:()=>o.cV,SEMRESATTRS_SERVICE_INSTANCE_ID:()=>o.PL,SEMRESATTRS_SERVICE_NAME:()=>o.AV,SEMRESATTRS_SERVICE_NAMESPACE:()=>o.ar,SEMRESATTRS_SERVICE_VERSION:()=>o.xs,SEMRESATTRS_TELEMETRY_AUTO_VERSION:()=>o.nA,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:()=>o.Pl,SEMRESATTRS_TELEMETRY_SDK_NAME:()=>o.$L,SEMRESATTRS_TELEMETRY_SDK_VERSION:()=>o.y$,SEMRESATTRS_WEBENGINE_DESCRIPTION:()=>o.U1,SEMRESATTRS_WEBENGINE_NAME:()=>o.HF,SEMRESATTRS_WEBENGINE_VERSION:()=>o.WN,SemanticAttributes:()=>n.IXq,SemanticResourceAttributes:()=>o._2,TELEMETRYSDKLANGUAGEVALUES_CPP:()=>o.S5,TELEMETRYSDKLANGUAGEVALUES_DOTNET:()=>o.XE,TELEMETRYSDKLANGUAGEVALUES_ERLANG:()=>o.o2,TELEMETRYSDKLANGUAGEVALUES_GO:()=>o.HE,TELEMETRYSDKLANGUAGEVALUES_JAVA:()=>o.du,TELEMETRYSDKLANGUAGEVALUES_NODEJS:()=>o.wE,TELEMETRYSDKLANGUAGEVALUES_PHP:()=>o.tP,TELEMETRYSDKLANGUAGEVALUES_PYTHON:()=>o.$c,TELEMETRYSDKLANGUAGEVALUES_RUBY:()=>o.jN,TELEMETRYSDKLANGUAGEVALUES_WEBJS:()=>o.uh,TelemetrySdkLanguageValues:()=>o.wP});var n=r(78955),o=r(92518)},43356:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(13725),t)},43441:(e,t,r)=>{"use strict";let n=r(64487),o=r(3706);e.exports=(e,t,r)=>{let i=null,a=null,s=null;try{s=new o(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!i||-1===a.compare(e))&&(a=new n(i=e,r))}),i}},43464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964);t.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,n.str)`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>(0,n._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e,i="maxItems"===t?n.operators.GT:n.operators.LT;e.fail$data((0,n._)`${r}.length ${i} ${o}`)}}},43500:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(){var e,t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,o,i,a){var s=i.length-1;switch(o){case 1:return i[s-1];case 2:this.$=n.prepareProgram(i[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=i[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(i[s]),strip:n.stripFlags(i[s],i[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:i[s],value:i[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(i[s-2],i[s-1],i[s],this._$);break;case 12:this.$={path:i[s-3],params:i[s-2],hash:i[s-1]};break;case 13:this.$=n.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!1,this._$);break;case 14:this.$=n.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!0,this._$);break;case 15:this.$={open:i[s-5],path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:n.stripFlags(i[s-5],i[s])};break;case 16:case 17:this.$={path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:n.stripFlags(i[s-5],i[s])};break;case 18:this.$={strip:n.stripFlags(i[s-1],i[s-1]),program:i[s]};break;case 19:var l=n.prepareBlock(i[s-2],i[s-1],i[s],i[s],!1,this._$),u=n.prepareProgram([l],i[s-1].loc);u.chained=!0,this.$={strip:i[s-2].strip,program:u,chain:!0};break;case 21:this.$={path:i[s-1],strip:n.stripFlags(i[s-2],i[s])};break;case 22:case 23:this.$=n.prepareMustache(i[s-3],i[s-2],i[s-1],i[s-4],n.stripFlags(i[s-4],i[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:i[s-3],params:i[s-2],hash:i[s-1],indent:"",strip:n.stripFlags(i[s-4],i[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(i[s-2],i[s-1],i[s],this._$);break;case 26:this.$={path:i[s-3],params:i[s-2],hash:i[s-1],strip:n.stripFlags(i[s-4],i[s])};break;case 29:this.$={type:"SubExpression",path:i[s-3],params:i[s-2],hash:i[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:i[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(i[s-2]),value:i[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(i[s-1]);break;case 35:this.$={type:"StringLiteral",value:i[s],original:i[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(i[s]),original:Number(i[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===i[s],original:"true"===i[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 42:this.$=n.preparePath(!0,i[s],this._$);break;case 43:this.$=n.preparePath(!1,i[s],this._$);break;case 44:i[s-2].push({part:n.id(i[s]),original:i[s],separator:i[s-1]}),this.$=i[s-2];break;case 45:this.$=[{part:n.id(i[s]),original:i[s]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:i[s-1].push(i[s]);break;case 98:case 100:this.$=[i[s]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw Error(e)},parse:function(e){var t=this,r=[0],n=[null],o=[],i=this.table,a="",s=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;o.push(c);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,h,m,f,g,y,v,b,_,E={};;){if(m=r[r.length-1],this.defaultActions[m]?f=this.defaultActions[m]:(null==d&&(d=function(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}()),f=i[m]&&i[m][d]),void 0===f||!f.length||!f[0]){var S="";if(!u){for(y in _=[],i[m])this.terminals_[y]&&y>2&&_.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:c,expected:_})}}if(f[0]instanceof Array&&f.length>1)throw Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(f[0]){case 1:r.push(d),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(f[1]),d=null,h?(d=h,h=null):(l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(v=this.productions_[f[1]][1],E.$=n[n.length-v],E._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},p&&(E._$.range=[o[o.length-(v||1)].range[0],o[o.length-1].range[1]]),void 0!==(g=this.performAction.call(E,a,l,s,this.yy,f[1],n,o)))return g;v&&(r=r.slice(0,-1*v*2),n=n.slice(0,-1*v),o=o.slice(0,-1*v)),r.push(this.productions_[f[1]][0]),n.push(E.$),o.push(E._$),b=i[r[r.length-2]][r[r.length-1]],r.push(b);break;case 3:return!0}}return!0}};function r(){this.yy={}}return(e={EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw Error(e)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,r,n,o,i=this._currentRules(),a=0;a<i.length&&(!(r=this._input.match(this.rules[i[a]]))||t&&!(r[0].length>t[0].length)||(t=r,n=a,this.options.flex));a++);return t?((o=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e)?e:void 0:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}}).options={},e.performAction=function(e,t,r,n){function o(e,r){return t.yytext=t.yytext.substring(e,t.yyleng-r+e)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:if(this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1])return 15;return o(5,9),"END_RAW_BLOCK";case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},t.lexer=e,r.prototype=t,t.Parser=r,new r}(),e.exports=t.default},43519:(e,t,r)=>{"use strict";let n=r(27910).Transform;class o extends n{constructor(e){super(e),this.options=e||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(e,t,r){let n,o=[],i=0,a,s,l=0;if(!e||!e.length)return r();for("string"==typeof e&&(e=Buffer.from(e)),this.inByteCount+=e.length,a=0,s=e.length;a<s;a++)46===e[a]?(!a||10!==e[a-1])&&(a||this.lastByte&&10!==this.lastByte)||(n=e.slice(l,a+1),o.push(n),o.push(Buffer.from(".")),i+=n.length+1,l=a+1):10===e[a]&&(a&&13!==e[a-1]||!a&&13!==this.lastByte)&&(a>l?(n=e.slice(l,a),o.push(n),i+=n.length+2):i+=2,o.push(Buffer.from("\r\n")),l=a+1);i?(l<e.length&&(n=e.slice(l),o.push(n),i+=n.length),this.outByteCount+=i,this.push(Buffer.concat(o,i))):(this.outByteCount+=e.length,this.push(e)),this.lastByte=e[e.length-1],r()}_flush(e){let t;t=10===this.lastByte?Buffer.from(".\r\n"):13===this.lastByte?Buffer.from("\n.\r\n"):Buffer.from("\r\n.\r\n"),this.outByteCount+=t.length,this.push(t),e()}}e.exports=o},43528:(e,t,r)=>{"use strict";let n=r(64487),o=r(14239),{ANY:i}=o,a=r(3706),s=r(42679),l=r(42699),u=r(40720),c=r(82682),p=r(44156);e.exports=(e,t,r,d)=>{let h,m,f,g,y;switch(e=new n(e,d),t=new a(t,d),r){case">":h=l,m=c,f=u,g=">",y=">=";break;case"<":h=u,m=p,f=l,g="<",y="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,d))return!1;for(let r=0;r<t.set.length;++r){let n=t.set[r],a=null,s=null;if(n.forEach(e=>{e.semver===i&&(e=new o(">=0.0.0")),a=a||e,s=s||e,h(e.semver,a.semver,d)?a=e:f(e.semver,s.semver,d)&&(s=e)}),a.operator===g||a.operator===y||(!s.operator||s.operator===g)&&m(e,s.semver)||s.operator===y&&f(e,s.semver))return!1}return!0}},43639:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{LlmResponseSchema:()=>h,LlmStatsSchema:()=>c,ToolCallSchema:()=>d,ToolSchema:()=>p,toToolWireFormat:()=>m}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(72448);let c=l.z.object({latencyMs:l.z.number().optional(),inputTokenCount:l.z.number().optional(),outputTokenCount:l.z.number().optional()}),p=l.z.object({name:l.z.string(),description:l.z.string().optional(),schema:l.z.any()}),d=l.z.object({toolName:l.z.string(),arguments:l.z.any()}),h=l.z.object({completion:l.z.string(),toolCalls:l.z.array(d).optional(),stats:c});function m(e){if(e)return e.map(e=>({name:e.__action.name,description:e.__action.description,schema:{input:(0,u.toJsonSchema)({schema:e.__action.inputSchema,jsonSchema:e.__action.inputJsonSchema}),output:(0,u.toJsonSchema)({schema:e.__action.outputSchema,jsonSchema:e.__action.outputJsonSchema})}}))}},43900:(e,t,r)=>{"use strict";let n=r(43528);e.exports=(e,t,r)=>n(e,t,">",r)},44007:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(66112),o=function(e){return e&&e.__esModule?e:{default:e}}(r(58668));t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");n.isFunction(e)&&(e=e.call(this));var r=t.fn;if(n.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&((i=n.createFrame(t.data)).contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:i,blockParams:n.blockParams([e],[i&&i.contextPath])})})},e.exports=t.default},44156:(e,t,r)=>{"use strict";let n=r(33877);e.exports=(e,t,r)=>n(e,t,r)>=0},44192:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{getApiKeyFromEnvVar:()=>d}),e.exports=u(o({},"__esModule",{value:!0}),c);var p=((e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(r(19771));function d(){return p.default.env.GEMINI_API_KEY||p.default.env.GOOGLE_API_KEY||p.default.env.GOOGLE_GENAI_API_KEY}},44415:(e,t,r)=>{"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.extend.apply(void 0,[Object.create(null)].concat(t))};var n=r(66112)},44449:(e,t,r)=>{"use strict";let n=r(64487),o=r(58361),{safeRe:i,t:a}=r(26515);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n,o=t.includePrerelease?i[a.COERCERTLFULL]:i[a.COERCERTL];for(;(n=o.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),o.lastIndex=n.index+n[1].length+n[2].length;o.lastIndex=-1}else r=e.match(t.includePrerelease?i[a.COERCEFULL]:i[a.COERCE]);if(null===r)return null;let s=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",p=t.includePrerelease&&r[6]?`+${r[6]}`:"";return o(`${s}.${l}.${u}${c}${p}`,t)}},44708:e=>{"use strict";e.exports=require("node:https")},44725:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=44725,e.exports=t},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45165:(e,t,r)=>{"use strict";var n=r(86104),o=r(69844),i=r(6962);t.resolveBlockSeq=function({composeNode:e,composeEmptyNode:t},r,a,s,l){let u=new(l?.nodeClass??n.YAMLSeq)(r.schema);r.atRoot&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let c=a.offset,p=null;for(let{start:n,value:l}of a.items){let d=o.resolveProps(n,{indicator:"seq-item-ind",next:l,offset:c,onError:s,parentIndent:a.indent,startOnNewline:!0});if(!d.found)if(d.anchor||d.tag||l)l&&"block-seq"===l.type?s(d.end,"BAD_INDENT","All sequence items must start at the same column"):s(c,"MISSING_CHAR","Sequence item without - indicator");else{p=d.end,d.comment&&(u.comment=d.comment);continue}let h=l?e(r,l,d,s):t(r,d.end,n,null,d,s);r.schema.compat&&i.flowIndentCheck(a.indent,l,s),c=h.range[2],u.items.push(h)}return u.range=[a.offset,c,p??c],u}},45324:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;let n=r(19166),o=r(67884),i=r(22964),a=r(45346),s=r(53194),l=r(58592);function u(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,i._)`${r.scopeValue("wrapper",{ref:t})}.validate`}function c(e,t,r,n){let{gen:s,it:u}=e,{allErrors:c,schemaEnv:p,opts:d}=u,h=d.passContext?a.default.this:i.nil;function m(e){let t=(0,i._)`${e}.errors`;s.assign(a.default.vErrors,(0,i._)`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`),s.assign(a.default.errors,(0,i._)`${a.default.vErrors}.length`)}function f(e){var t;if(!u.opts.unevaluated)return;let n=null==(t=null==r?void 0:r.validate)?void 0:t.evaluated;if(!0!==u.props)if(n&&!n.dynamicProps)void 0!==n.props&&(u.props=l.mergeEvaluated.props(s,n.props,u.props));else{let t=s.var("props",(0,i._)`${e}.evaluated.props`);u.props=l.mergeEvaluated.props(s,t,u.props,i.Name)}if(!0!==u.items)if(n&&!n.dynamicItems)void 0!==n.items&&(u.items=l.mergeEvaluated.items(s,n.items,u.items));else{let t=s.var("items",(0,i._)`${e}.evaluated.items`);u.items=l.mergeEvaluated.items(s,t,u.items,i.Name)}}n?function(){if(!p.$async)throw Error("async schema referenced by sync schema");let r=s.let("valid");s.try(()=>{s.code((0,i._)`await ${(0,o.callValidateCode)(e,t,h)}`),f(t),c||s.assign(r,!0)},e=>{s.if((0,i._)`!(${e} instanceof ${u.ValidationError})`,()=>s.throw(e)),m(e),c||s.assign(r,!1)}),e.ok(r)}():e.result((0,o.callValidateCode)(e,t,h),()=>f(t),()=>m(t))}t.getValidate=u,t.callRef=c,t.default={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:o}=e,{baseId:a,schemaEnv:l,validateName:p,opts:d,self:h}=o,{root:m}=l;if(("#"===r||"#/"===r)&&a===m.baseId){if(l===m)return c(e,p,l,l.$async);let r=t.scopeValue("root",{ref:m});return c(e,(0,i._)`${r}.validate`,m,m.$async)}let f=s.resolveRef.call(h,m,a,r);if(void 0===f)throw new n.default(o.opts.uriResolver,a,r);return f instanceof s.SchemaEnv?function(t){let r=u(e,t);c(e,r,t,t.$async)}(f):function(n){let o=t.scopeValue("schema",!0===d.code.source?{ref:n,code:(0,i.stringify)(n)}:{ref:n}),a=t.name("valid"),s=e.subschema({schema:n,dataTypes:[],schemaPath:i.nil,topSchemaRef:o,errSchemaPath:r},a);e.mergeEvaluated(s),e.ok(a)}(f)}}},45346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964);t.default={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")}},45425:(e,t,r)=>{"use strict";let n;var o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(l,{TraceServerExporter:()=>m,setTelemetryServerUrl:()=>h,telemetryServerUrl:()=>n}),e.exports=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))s.call(e,l)||l===r||o(e,l,{get:()=>t[l],enumerable:!(n=i(t,l))||n.enumerable});return e})(o({},"__esModule",{value:!0}),l);var u=r(18617),c=r(87535),p=r(95566),d=r(79882);function h(e){n=e}class m{export(e,t){this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),this.forceFlush()}_exportInfo(e){let t={spanId:e.spanContext().spanId,traceId:e.spanContext().traceId,startTime:f(e.startTime),endTime:f(e.endTime),attributes:{...e.attributes},displayName:e.name,links:e.links,spanKind:u.SpanKind[e.kind],parentSpanId:e.parentSpanId,sameProcessAsParentSpan:{value:!e.spanContext().isRemote},status:e.status,timeEvents:{timeEvent:e.events.map(e=>({time:f(e.time),annotation:{attributes:e.attributes??{},description:e.name}}))}};return void 0!==e.instrumentationLibrary&&(t.instrumentationLibrary={name:e.instrumentationLibrary.name},void 0!==e.instrumentationLibrary.schemaUrl&&(t.instrumentationLibrary.schemaUrl=e.instrumentationLibrary.schemaUrl),void 0!==e.instrumentationLibrary.version&&(t.instrumentationLibrary.version=e.instrumentationLibrary.version)),(0,d.deleteUndefinedProps)(t),t}forceFlush(){return Promise.resolve()}async _sendSpans(e,t){let r={};for(let t of e)r[t.spanContext().traceId]||(r[t.spanContext().traceId]=[]),r[t.spanContext().traceId].push(t);let n=!1;for(let e of Object.keys(r)){try{await this.save(e,r[e])}catch(t){n=!0,p.logger.error(`Failed to save trace ${e}`,t)}if(t)return t({code:n?c.ExportResultCode.FAILED:c.ExportResultCode.SUCCESS})}}async save(e,t){if(!n)return void p.logger.debug(`Telemetry server is not configured, trace ${e} not saved!`);let r={traceId:e,spans:{}};for(let e of t){let t=this._exportInfo(e);r.spans[t.spanId]=t,t.parentSpanId||(r.displayName=t.displayName,r.startTime=t.startTime,r.endTime=t.endTime)}await fetch(`${n}/api/traces`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})}}function f(e){return(0,c.hrTimeToMilliseconds)(e)}},45430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;let n=r(22964),o=r(58592),i=r(67884);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>(0,n.str)`must have ${1===t?"property":"properties"} ${r} when property ${e} is present`,params:({params:{property:e,depsCount:t,deps:r,missingProperty:o}})=>(0,n._)`{property: ${e},
    missingProperty: ${o},
    depsCount: ${t},
    deps: ${r}}`};let a={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){let[t,r]=function({schema:e}){let t={},r={};for(let n in e)"__proto__"!==n&&((Array.isArray(e[n])?t:r)[n]=e[n]);return[t,r]}(e);s(e,t),l(e,r)}};function s(e,t=e.schema){let{gen:r,data:o,it:a}=e;if(0===Object.keys(t).length)return;let l=r.let("missing");for(let s in t){let u=t[s];if(0===u.length)continue;let c=(0,i.propertyInData)(r,o,s,a.opts.ownProperties);e.setParams({property:s,depsCount:u.length,deps:u.join(", ")}),a.allErrors?r.if(c,()=>{for(let t of u)(0,i.checkReportMissingProp)(e,t)}):(r.if((0,n._)`${c} && (${(0,i.checkMissingProp)(e,u,l)})`),(0,i.reportMissingProp)(e,l),r.else())}}function l(e,t=e.schema){let{gen:r,data:n,keyword:a,it:s}=e,u=r.name("valid");for(let l in t)(0,o.alwaysValidSchema)(s,t[l])||(r.if((0,i.propertyInData)(r,n,l,s.opts.ownProperties),()=>{let t=e.subschema({keyword:a,schemaProp:l},u);e.mergeValidEvaluated(t,u)},()=>r.var(u,!0)),e.ok(u))}t.validatePropertyDeps=s,t.validateSchemaDeps=l,t.default=a},45659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(99848),o=r(94751),i=r(96275),a=r(22275),s=r(97970),l=r(45430),u=r(90852),c=r(50851),p=r(80958),d=r(17064),h=r(61834),m=r(33292),f=r(42894),g=r(16277),y=r(88712),v=r(41741);t.default=function(e=!1){let t=[h.default,m.default,f.default,g.default,y.default,v.default,u.default,c.default,l.default,p.default,d.default];return e?t.push(o.default,a.default):t.push(n.default,i.default),t.push(s.default),t}},45768:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BatchLogRecordProcessor:()=>B,ConsoleLogRecordExporter:()=>P,InMemoryLogRecordExporter:()=>M,LogRecord:()=>f,LoggerProvider:()=>A,NoopLogRecordProcessor:()=>w,SimpleLogRecordProcessor:()=>D});var n=r(86713),o=r(94199),i=r(86116),a=r(16200),s=r(19312),l=r(66061),u=r(76895),c=r(93158),p=r(18803),d=r(17139),h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},m=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},f=function(){function e(e,t,r){this.attributes={},this.totalAttributesCount=0,this._isReadonly=!1;var n=r.timestamp,o=r.observedTimestamp,i=r.severityNumber,a=r.severityText,s=r.body,l=r.attributes,d=r.context,h=Date.now();if(this.hrTime=(0,p.KJ)(null!=n?n:h),this.hrTimeObserved=(0,p.KJ)(null!=o?o:h),d){var m=u.u.getSpanContext(d);m&&c.YA(m)&&(this.spanContext=m)}this.severityNumber=i,this.severityText=a,this.body=s,this.resource=e.resource,this.instrumentationScope=t,this._logRecordLimits=e.logRecordLimits,this.setAttributes(void 0===l?{}:l)}return Object.defineProperty(e.prototype,"severityText",{get:function(){return this._severityText},set:function(e){this._isLogRecordReadonly()||(this._severityText=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"severityNumber",{get:function(){return this._severityNumber},set:function(e){this._isLogRecordReadonly()||(this._severityNumber=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},set:function(e){this._isLogRecordReadonly()||(this._body=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this.totalAttributesCount-Object.keys(this.attributes).length},enumerable:!1,configurable:!0}),e.prototype.setAttribute=function(e,t){return this._isLogRecordReadonly()||null===t||(0===e.length?n.s.warn("Invalid attribute key: "+e):(0,d.m)(t)||"object"==typeof t&&!Array.isArray(t)&&Object.keys(t).length>0?(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e))?1===this.droppedAttributesCount&&n.s.warn("Dropping extra attributes."):(0,d.m)(t)?this.attributes[e]=this._truncateToSize(t):this.attributes[e]=t:n.s.warn("Invalid attribute value set for key: "+e)),this},e.prototype.setAttributes=function(e){var t,r;try{for(var n=h(Object.entries(e)),o=n.next();!o.done;o=n.next()){var i=m(o.value,2),a=i[0],s=i[1];this.setAttribute(a,s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},e.prototype.setBody=function(e){return this.body=e,this},e.prototype.setSeverityNumber=function(e){return this.severityNumber=e,this},e.prototype.setSeverityText=function(e){return this.severityText=e,this},e.prototype._makeReadonly=function(){this._isReadonly=!0},e.prototype._truncateToSize=function(e){var t=this,r=this._logRecordLimits.attributeValueLengthLimit;return r<=0?(n.s.warn("Attribute value limit must be positive, got "+r),e):"string"==typeof e?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(function(e){return"string"==typeof e?t._truncateToLimitUtil(e,r):e}):e},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substring(0,t)},e.prototype._isLogRecordReadonly=function(){return this._isReadonly&&n.s.warn("Can not execute the operation on emitted log record"),this._isReadonly},e}(),g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=function(){function e(e,t){this.instrumentationScope=e,this._sharedState=t}return e.prototype.emit=function(e){var t=e.context||l._.active(),r=new f(this._sharedState,this.instrumentationScope,g({context:t},e));this._sharedState.activeProcessor.onEmit(r,t),r._makeReadonly()},e}(),v=r(28038),b=r(47751),_=r(49457),E=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},S=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},x=function(){function e(e,t){this.processors=e,this.forceFlushTimeoutMillis=t}return e.prototype.forceFlush=function(){return E(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return e=this.forceFlushTimeoutMillis,[4,Promise.all(this.processors.map(function(t){return(0,_.o)(t.forceFlush(),e)}))];case 1:return t.sent(),[2]}})})},e.prototype.onEmit=function(e,t){this.processors.forEach(function(r){return r.onEmit(e,t)})},e.prototype.shutdown=function(){return E(this,void 0,void 0,function(){return S(this,function(e){switch(e.label){case 0:return[4,Promise.all(this.processors.map(function(e){return e.shutdown()}))];case 1:return e.sent(),[2]}})})},e}(),w=function(){function e(){}return e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onEmit=function(e,t){},e.prototype.shutdown=function(){return Promise.resolve()},e}(),T=function(e,t,r){this.resource=e,this.forceFlushTimeoutMillis=t,this.logRecordLimits=r,this.loggers=new Map,this.registeredLogRecordProcessors=[],this.activeProcessor=new w},A=function(){function e(e){void 0===e&&(e={});var t,r,n,o,l,u,c,p,d,h=(0,a.h)({},{forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:(0,v._)().OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,v._)().OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT},includeTraceContext:!0},e),m=i.F.default().merge(null!=(d=h.resource)?d:i.F.empty());this._sharedState=new T(m,h.forceFlushTimeoutMillis,(t=h.logRecordLimits,p=(0,v.w)(),{attributeCountLimit:null!=(o=null!=(n=null!=(r=t.attributeCountLimit)?r:p.OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT)?n:p.OTEL_ATTRIBUTE_COUNT_LIMIT)?o:b.fv,attributeValueLengthLimit:null!=(c=null!=(u=null!=(l=t.attributeValueLengthLimit)?l:p.OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT)?u:p.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)?c:b.aE})),this._shutdownOnce=new s.I(this._shutdown,this)}return e.prototype.getLogger=function(e,t,r){if(this._shutdownOnce.isCalled)return n.s.warn("A shutdown LoggerProvider cannot provide a Logger"),o.G;e||n.s.warn("Logger requested without instrumentation scope name.");var i=e||"unknown",a=i+"@"+(t||"")+":"+((null==r?void 0:r.schemaUrl)||"");return this._sharedState.loggers.has(a)||this._sharedState.loggers.set(a,new y({name:i,version:t,schemaUrl:null==r?void 0:r.schemaUrl},this._sharedState)),this._sharedState.loggers.get(a)},e.prototype.addLogRecordProcessor=function(e){0===this._sharedState.registeredLogRecordProcessors.length&&this._sharedState.activeProcessor.shutdown().catch(function(e){return n.s.error("Error while trying to shutdown current log record processor",e)}),this._sharedState.registeredLogRecordProcessors.push(e),this._sharedState.activeProcessor=new x(this._sharedState.registeredLogRecordProcessors,this._sharedState.forceFlushTimeoutMillis)},e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?(n.s.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()},e.prototype.shutdown=function(){return this._shutdownOnce.isCalled?(n.s.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._sharedState.activeProcessor.shutdown()},e}(),O=r(1037),N=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},P=function(){function e(){}return e.prototype.export=function(e,t){this._sendLogRecords(e,t)},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype._exportInfo=function(e){var t,r,n;return{resource:{attributes:e.resource.attributes},timestamp:(0,p.w_)(e.hrTime),traceId:null==(t=e.spanContext)?void 0:t.traceId,spanId:null==(r=e.spanContext)?void 0:r.spanId,traceFlags:null==(n=e.spanContext)?void 0:n.traceFlags,severityText:e.severityText,severityNumber:e.severityNumber,body:e.body,attributes:e.attributes}},e.prototype._sendLogRecords=function(e,t){var r,n;try{for(var o=N(e),i=o.next();!i.done;i=o.next()){var a=i.value;console.dir(this._exportInfo(a),{depth:3})}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}null==t||t({code:O.V.SUCCESS})},e}(),C=r(87535),k=r(987),I=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},D=function(){function e(e){this._exporter=e,this._shutdownOnce=new s.I(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.onEmit=function(e){var t,r,n=this;if(!this._shutdownOnce.isCalled){var o=function(){return C.internal._export(n._exporter,[e]).then(function(e){var t;e.code!==O.V.SUCCESS&&(0,k.s)(null!=(t=e.error)?t:Error("SimpleLogRecordProcessor: log record export failed (status "+e+")"))}).catch(k.s)};if(e.resource.asyncAttributesPending){var i=null==(r=(t=e.resource).waitForAsyncAttributes)?void 0:r.call(t).then(function(){return n._unresolvedExports.delete(i),o()},k.s);null!=i&&this._unresolvedExports.add(i)}else o()}},e.prototype.forceFlush=function(){var e,t,r,n;return e=this,t=void 0,r=void 0,n=function(){return I(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),[2]}})},new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}(),R=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},L=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},M=function(){function e(){this._finishedLogRecords=[],this._stopped=!1}return e.prototype.export=function(e,t){var r;if(this._stopped)return t({code:O.V.FAILED,error:Error("Exporter has been stopped")});(r=this._finishedLogRecords).push.apply(r,L([],R(e),!1)),t({code:O.V.SUCCESS})},e.prototype.shutdown=function(){return this._stopped=!0,this.reset(),Promise.resolve()},e.prototype.getFinishedLogRecords=function(){return this._finishedLogRecords},e.prototype.reset=function(){this._finishedLogRecords=[]},e}(),j=r(80235),U=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},F=function(){function e(e,t){this._exporter=e,this._finishedLogRecords=[];var r,o,i,a,l=(0,v._)();this._maxExportBatchSize=null!=(r=null==t?void 0:t.maxExportBatchSize)?r:l.OTEL_BLRP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=null!=(o=null==t?void 0:t.maxQueueSize)?o:l.OTEL_BLRP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=null!=(i=null==t?void 0:t.scheduledDelayMillis)?i:l.OTEL_BLRP_SCHEDULE_DELAY,this._exportTimeoutMillis=null!=(a=null==t?void 0:t.exportTimeoutMillis)?a:l.OTEL_BLRP_EXPORT_TIMEOUT,this._shutdownOnce=new s.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(n.s.warn("BatchLogRecordProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.onEmit=function(e){this._shutdownOnce.isCalled||this._addToBuffer(e)},e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e,t,r,n;return e=this,t=void 0,r=void 0,n=function(){return U(this,function(e){switch(e.label){case 0:return this.onShutdown(),[4,this._flushAll()];case 1:return e.sent(),[4,this._exporter.shutdown()];case 2:return e.sent(),[2]}})},new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},e.prototype._addToBuffer=function(e){this._finishedLogRecords.length>=this._maxQueueSize||(this._finishedLogRecords.push(e),this._maybeStartTimer())},e.prototype._flushAll=function(){var e=this;return new Promise(function(t,r){for(var n=[],o=Math.ceil(e._finishedLogRecords.length/e._maxExportBatchSize),i=0;i<o;i++)n.push(e._flushOneBatch());Promise.all(n).then(function(){t()}).catch(r)})},e.prototype._flushOneBatch=function(){var e=this;return(this._clearTimer(),0===this._finishedLogRecords.length)?Promise.resolve():new Promise(function(t,r){(0,_.o)(e._export(e._finishedLogRecords.splice(0,e._maxExportBatchSize)),e._exportTimeoutMillis).then(function(){return t()}).catch(r)})},e.prototype._maybeStartTimer=function(){var e=this;void 0===this._timer&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedLogRecords.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(e){(0,k.s)(e)})},this._scheduledDelayMillis),(0,j.K)(this._timer))},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e.prototype._export=function(e){var t=this,r=function(){return C.internal._export(t._exporter,e).then(function(e){var t;e.code!==O.V.SUCCESS&&(0,k.s)(null!=(t=e.error)?t:Error("BatchLogRecordProcessor: log record export failed (status "+e+")"))}).catch(k.s)},n=e.map(function(e){return e.resource}).filter(function(e){return e.asyncAttributesPending});return 0===n.length?r():Promise.all(n.map(function(e){var t;return null==(t=e.waitForAsyncAttributes)?void 0:t.call(e)})).then(r,k.s)},e}(),$=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t.prototype.onShutdown=function(){},t}(F)},46076:(e,t,r)=>{"use strict";var n=r(99122),o=r(52904),i=r(7562);class a extends o.NodeBase{constructor(e){super(n.SCALAR),this.value=e}toJSON(e,t){return t?.keep?this.value:i.toJS(this.value,e,t)}toString(){return String(this.value)}}a.BLOCK_FOLDED="BLOCK_FOLDED",a.BLOCK_LITERAL="BLOCK_LITERAL",a.PLAIN="PLAIN",a.QUOTE_DOUBLE="QUOTE_DOUBLE",a.QUOTE_SINGLE="QUOTE_SINGLE",t.Scalar=a,t.isScalarValue=e=>!e||"function"!=typeof e&&"object"!=typeof e},46364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964);t.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>(0,n.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,n._)`{multipleOf: ${e}}`},code(e){let{gen:t,data:r,schemaCode:o,it:i}=e,a=i.opts.multipleOfPrecision,s=t.let("res"),l=a?(0,n._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${a}`:(0,n._)`${s} !== parseInt(${s})`;e.fail$data((0,n._)`(${o} === 0 || (${s} = ${r}/${o}, ${l}))`)}}},46821:(e,t,r)=>{"use strict";let n,o;r.r(t),r.d(t,{MAX:()=>i,NIL:()=>a,parse:()=>u,stringify:()=>d,v1:()=>_,v1ToV6:()=>E,v3:()=>x,v4:()=>T,v5:()=>A,v6:()=>O,v6ToV1:()=>N,v7:()=>I,validate:()=>l,version:()=>D});let i="ffffffff-ffff-ffff-ffff-ffffffffffff",a="00000000-0000-0000-0000-000000000000",s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,l=function(e){return"string"==typeof e&&s.test(e)},u=function(e){let t;if(!l(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/0x10000000000&255,r[11]=t/0x100000000&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r},c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function p(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}let d=function(e,t=0){let r=p(e,t);if(!l(r))throw TypeError("Stringified UUID is invalid");return r};var h=r(77598),m=r.n(h);let f=new Uint8Array(256),g=f.length;function y(){return g>f.length-16&&(m().randomFillSync(f),g=0),f.slice(g,g+=16)}let v=0,b=0,_=function(e,t,r){let i=t&&r||0,a=t||Array(16),s=(e=e||{}).node,l=e.clockseq;if(e._v6||(s||(s=n),null==l&&(l=o)),null==s||null==l){let t=e.random||(e.rng||y)();null==s&&(s=[t[0],t[1],t[2],t[3],t[4],t[5]],n||e._v6||(s[0]|=1,n=s)),null==l&&(l=(t[6]<<8|t[7])&16383,void 0!==o||e._v6||(o=l))}let u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:b+1,d=u-v+(c-b)/1e4;if(d<0&&void 0===e.clockseq&&(l=l+1&16383),(d<0||u>v)&&void 0===e.nsecs&&(c=0),c>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");v=u,b=c,o=l;let h=((0xfffffff&(u+=122192928e5))*1e4+c)%0x100000000;a[i++]=h>>>24&255,a[i++]=h>>>16&255,a[i++]=h>>>8&255,a[i++]=255&h;let m=u/0x100000000*1e4&0xfffffff;a[i++]=m>>>8&255,a[i++]=255&m,a[i++]=m>>>24&15|16,a[i++]=m>>>16&255,a[i++]=l>>>8|128,a[i++]=255&l;for(let e=0;e<6;++e)a[i+e]=s[e];return t||p(a)};function E(e){let t=function(e,t=!1){return Uint8Array.of((15&e[6])<<4|e[7]>>4&15,(15&e[7])<<4|(240&e[4])>>4,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,(15&e[1])<<4|(240&e[2])>>4,96|15&e[2],e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof e?u(e):e);return"string"==typeof e?p(t):t}function S(e,t,r){function n(e,n,o,i){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=u(n)),(null==(a=n)?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=s[e];return o}return p(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}let x=S("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),m().createHash("md5").update(e).digest()}),w={randomUUID:m().randomUUID},T=function(e,t,r){if(w.randomUUID&&!t&&!e)return w.randomUUID();let n=(e=e||{}).random||(e.rng||y)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return p(n)},A=S("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),m().createHash("sha1").update(e).digest()});function O(e={},t,r=0){let n=_({...e,_v6:!0},new Uint8Array(16));if(n=E(n),t){for(let e=0;e<16;e++)t[r+e]=n[e];return t}return p(n)}function N(e){var t;let r=(t="string"==typeof e?u(e):e,Uint8Array.of((15&t[3])<<4|t[4]>>4&15,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|15&t[6],t[7],(15&t[1])<<4|(240&t[2])>>4,(15&t[2])<<4|(240&t[3])>>4,16|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?p(r):r}let P=null,C=null,k=0,I=function(e,t,r){e=e||{};let n=t&&r||0,o=t||new Uint8Array(16),i=e.random||(e.rng||y)(),a=void 0!==e.msecs?e.msecs:Date.now(),s=void 0!==e.seq?e.seq:null,l=C,u=P;return a>k&&void 0===e.msecs&&(k=a,null!==s&&(l=null,u=null)),null!==s&&(s>0x7fffffff&&(s=0x7fffffff),l=s>>>19&4095,u=524287&s),(null===l||null===u)&&(l=(l=127&i[6])<<8|i[7],u=(u=(u=63&i[8])<<8|i[9])<<5|i[10]>>>3),a+1e4>k&&null===s?++u>524287&&(u=0,++l>4095&&(l=0,k++)):k=a,C=l,P=u,o[n++]=k/0x10000000000&255,o[n++]=k/0x100000000&255,o[n++]=k/0x1000000&255,o[n++]=k/65536&255,o[n++]=k/256&255,o[n++]=255&k,o[n++]=l>>>4&15|112,o[n++]=255&l,o[n++]=u>>>13&63|128,o[n++]=u>>>5&255,o[n++]=u<<3&255|7&i[10],o[n++]=i[11],o[n++]=i[12],o[n++]=i[13],o[n++]=i[14],o[n++]=i[15],t||p(o)},D=function(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},46945:(e,t,r)=>{"use strict";let n=r(94735),o=r(91292),i=r(50143),a=r(48359),s=r(91570),l=r(7575),u=r(28354),c=r(79551),p=r(49074),d=r(17704),h=r(91645),m=r(37366),f=r(55511);class g extends n{constructor(e,t,r){super(),this.options=t||{},this._defaults=r||{},this._defaultPlugins={compile:[(...e)=>this._convertDataImages(...e)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=!!this.options.dkim&&new s(this.options.dkim),this.transporter=e,this.transporter.mailer=this,this.logger=o.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),"function"==typeof this.transporter.on&&(this.transporter.on("log",e=>{this.logger.debug({tnx:"transport"},"%s: %s",e.type,e.message)}),this.transporter.on("error",e=>{this.logger.error({err:e,tnx:"transport"},"Transport Error: %s",e.message),this.emit("error",e)}),this.transporter.on("idle",(...e)=>{this.emit("idle",...e)})),["close","isIdle","verify"].forEach(e=>{this[e]=(...t)=>"function"==typeof this.transporter[e]?("verify"===e&&"function"==typeof this.getSocket&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[e](...t)):(this.logger.warn({tnx:"transport",methodName:e},"Non existing method %s called for transport",e),!1)}),this.options.proxy&&"string"==typeof this.options.proxy&&this.setupProxy(this.options.proxy)}use(e,t){return e=(e||"").toString(),this._userPlugins.hasOwnProperty(e)?this._userPlugins[e].push(t):this._userPlugins[e]=[t],this}sendMail(e,t=null){let r;t||(r=new Promise((e,r)=>{t=o.callbackPromise(e,r)})),"function"==typeof this.getSocket&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let n=new d(this,e);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",n,e=>{if(e)return this.logger.error({err:e,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",e.message),t(e);n.message=new a(n.data).compile(),n.setMailerHeader(),n.setPriorityHeaders(),n.setListHeaders(),this._processPlugins("stream",n,e=>{if(e)return this.logger.error({err:e,tnx:"plugin",action:"stream"},"PluginStream Error: %s",e.message),t(e);(n.data.dkim||this.dkim)&&n.message.processFunc(e=>{let t=n.data.dkim?new s(n.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:n.message.messageId(),dkimDomains:t.keys.map(e=>e.keySelector+"."+e.domainName).join(", ")},"Signing outgoing message with %s keys",t.keys.length),t.sign(e,n.data._dkim)}),this.transporter.send(n,(...e)=>{e[0]&&this.logger.error({err:e[0],tnx:"transport",action:"send"},"Send Error: %s",e[0].message),t(...e)})})}),r}getVersionString(){return u.format("%s (%s; +%s; %s/%s)",p.name,p.version,p.homepage,this.transporter.name,this.transporter.version)}_processPlugins(e,t,r){if(e=(e||"").toString(),!this._userPlugins.hasOwnProperty(e))return r();let n=this._userPlugins[e]||[],o=this._defaultPlugins[e]||[];if(n.length&&this.logger.debug({tnx:"transaction",pluginCount:n.length,step:e},"Using %s plugins for %s",n.length,e),n.length+o.length===0)return r();let i=0,a="default",s=()=>{let e="default"===a?o:n;if(i>=e.length)if("default"!==a||!n.length)return r();else a="user",i=0,e=n;(0,e[i++])(t,e=>{if(e)return r(e);s()})};s()}setupProxy(e){let t=c.parse(e);this.getSocket=(e,r)=>{let n=t.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+n))return this.meta.get("proxy_handler_"+n)(t,e,r);switch(n){case"http":case"https":l(t.href,e.port,e.host,(e,t)=>e?r(e):r(null,{connection:t}));return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return r(Error("Socks module not loaded"));let n=n=>{let o=!!this.meta.get("proxy_socks_module").SocksClient,i=o?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),a=Number(t.protocol.replace(/\D/g,""))||5,s={proxy:{ipaddress:n,port:Number(t.port),type:a},[o?"destination":"target"]:{host:e.host,port:e.port},command:"connect"};if(t.auth){let e=decodeURIComponent(t.auth.split(":").shift()),r=decodeURIComponent(t.auth.split(":").pop());o?(s.proxy.userId=e,s.proxy.password=r):4===a?s.userid=e:s.authentication={username:e,password:r}}i.createConnection(s,(e,t)=>e?r(e):r(null,{connection:t.socket||t}))};if(h.isIP(t.hostname))return n(t.hostname);return m.resolve(t.hostname,(e,t)=>{if(e)return r(e);n(Array.isArray(t)?t[0]:t)})}}r(Error("Unknown proxy configuration"))}}_convertDataImages(e,t){if(!this.options.attachDataUrls&&!e.data.attachDataUrls||!e.data.html)return t();e.resolveContent(e.data,"html",(r,n)=>{if(r)return t(r);let o=0;n=(n||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,(t,r,n,a)=>{let s=f.randomBytes(10).toString("hex")+"@localhost";return e.data.attachments||(e.data.attachments=[]),Array.isArray(e.data.attachments)||(e.data.attachments=[].concat(e.data.attachments||[])),e.data.attachments.push({path:n,cid:s,filename:"image-"+ ++o+"."+i.detectExtension(a)}),r+"cid:"+s}),e.data.html=n,t()})}set(e,t){return this.meta.set(e,t)}get(e){return this.meta.get(e)}}e.exports=g},47032:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(66112),o=function(e){return e&&e.__esModule?e:{default:e}}(r(58668));t.default=function(e){e.registerHelper("if",function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return(n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e))?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},e.exports=t.default},47358:(e,t,r)=>{"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(58668));t.default=function(e){e.registerHelper("helperMissing",function(){if(1!=arguments.length)throw new n.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},47643:(e,t,r)=>{"use strict";function n(e){for(var t={},r=e.length,n=0;n<r;n++){var o=e[n];o&&(t[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return t}r.d(t,{O:()=>n})},47649:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;let s=i(r(41782));t.z=s,a(r(41782),t),t.default=s},47751:(e,t,r)=>{"use strict";r.d(t,{Nq:()=>m,Uz:()=>d,V:()=>p,aE:()=>l,fv:()=>u,h9:()=>c});var n=r(36290),o=r(90357),i=["OTEL_SDK_DISABLED"],a=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"],s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"],l=1/0,u=128,c=128,p=128,d={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:n.u.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:l,OTEL_ATTRIBUTE_COUNT_LIMIT:u,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:l,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:u,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:l,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:u,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:c,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:p,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:o.R.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"},h={ALL:n.u.ALL,VERBOSE:n.u.VERBOSE,DEBUG:n.u.DEBUG,INFO:n.u.INFO,WARN:n.u.WARN,ERROR:n.u.ERROR,NONE:n.u.NONE};function m(e){var t={};for(var r in d)if("OTEL_LOG_LEVEL"===r)!function(e,t,r){var n=r[e];if("string"==typeof n){var o=h[n.toUpperCase()];null!=o&&(t[e]=o)}}(r,t,e);else if(i.indexOf(r)>-1){if(void 0!==e[r]){var n=String(e[r]);t[r]="true"===n.toLowerCase()}}else if(a.indexOf(r)>-1)!function(e,t,r,n,o){if(void 0===n&&(n=-1/0),void 0===o&&(o=1/0),void 0!==r[e]){var i=Number(r[e]);isNaN(i)||(i<n?t[e]=n:i>o?t[e]=o:t[e]=i)}}(r,t,e);else if(s.indexOf(r)>-1)!function(e,t,r,n){void 0===n&&(n=",");var o=r[e];"string"==typeof o&&(t[e]=o.split(n).map(function(e){return e.trim()}))}(r,t,e);else{var o=e[r];null!=o&&(t[r]=String(o))}return t}},47806:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67218);r(79130);var o=r(13846),i=r(54898),a=r(70762),s=r(49526),l=r(17478);async function u(e){let{to:t,subject:r,body:n}=e;if(!process.env.SMTP_HOST||!process.env.SMTP_PORT||!process.env.SMTP_USER||!process.env.SMTP_PASSWORD||!process.env.FROM_EMAIL)throw Error("Missing required SMTP environment variables.");let o=s.createTransport({host:process.env.SMTP_HOST,port:Number(process.env.SMTP_PORT),secure:465===Number(process.env.SMTP_PORT),auth:{user:process.env.SMTP_USER,pass:process.env.SMTP_PASSWORD}}),i={from:process.env.FROM_EMAIL,to:t,subject:r,text:n,html:`<pre>${n}</pre>`};try{return await o.sendMail(i),console.log(`Email sent to: ${t}`),{success:!0}}catch(e){throw console.error("Nodemailer error:",e),Error(`Failed to send email: ${e.message}`)}}o.ai.defineTool({name:"sendEmailTool",description:"Sends an email to a specified recipient using nodemailer.",inputSchema:i.Gs,outputSchema:a.z.object({success:a.z.boolean()})},u);let c=o.ai.defineFlow({name:"sendEmailFlow",inputSchema:i.Gs,outputSchema:i.h1},async e=>(await u(e),{message:`The report has been successfully sent to ${e.to}.`}));async function p(e){return c(e)}(0,l.D)([p]),(0,n.A)(p,"40a09f6683541529d19201f3335dabed8153ddf56b",null)},48178:e=>{"use strict";let t=/^xn--/,r=/[^\0-\x7F]/,n=/[\x2E\u3002\uFF0E\uFF61]/g,o={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},i=Math.floor,a=String.fromCharCode;function s(e){throw RangeError(o[e])}function l(e,t){let r=e.split("@"),o="";return r.length>1&&(o=r[0]+"@",e=r[1]),o+(function(e,t){let r=[],n=e.length;for(;n--;)r[n]=t(e[n]);return r})((e=e.replace(n,".")).split("."),t).join(".")}function u(e){let t=[],r=0,n=e.length;for(;r<n;){let o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){let n=e.charCodeAt(r++);(64512&n)==56320?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--)}else t.push(o)}return t}let c=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},p=function(e,t,r){let n=0;for(e=r?i(e/700):e>>1,e+=i(e/t);e>455;n+=36)e=i(e/35);return i(n+36*e/(e+38))},d=function(e){let t=[],r=e.length,n=0,o=128,a=72,l=e.lastIndexOf("-");l<0&&(l=0);for(let r=0;r<l;++r)e.charCodeAt(r)>=128&&s("not-basic"),t.push(e.charCodeAt(r));for(let c=l>0?l+1:0;c<r;){let l=n;for(let t=1,o=36;;o+=36){var u;c>=r&&s("invalid-input");let l=(u=e.charCodeAt(c++))>=48&&u<58?26+(u-48):u>=65&&u<91?u-65:u>=97&&u<123?u-97:36;l>=36&&s("invalid-input"),l>i((0x7fffffff-n)/t)&&s("overflow"),n+=l*t;let p=o<=a?1:o>=a+26?26:o-a;if(l<p)break;let d=36-p;t>i(0x7fffffff/d)&&s("overflow"),t*=d}let d=t.length+1;a=p(n-l,d,0==l),i(n/d)>0x7fffffff-o&&s("overflow"),o+=i(n/d),n%=d,t.splice(n++,0,o)}return String.fromCodePoint(...t)},h=function(e){let t=[],r=(e=u(e)).length,n=128,o=0,l=72;for(let r of e)r<128&&t.push(a(r));let d=t.length,h=d;for(d&&t.push("-");h<r;){let r=0x7fffffff;for(let t of e)t>=n&&t<r&&(r=t);let u=h+1;for(let m of(r-n>i((0x7fffffff-o)/u)&&s("overflow"),o+=(r-n)*u,n=r,e))if(m<n&&++o>0x7fffffff&&s("overflow"),m===n){let e=o;for(let r=36;;r+=36){let n=r<=l?1:r>=l+26?26:r-l;if(e<n)break;let o=e-n,s=36-n;t.push(a(c(n+o%s,0))),e=i(o/s)}t.push(a(c(e,0))),l=p(o,u,h===d),o=0,++h}++o,++n}return t.join("")};e.exports={version:"2.3.1",ucs2:{decode:u,encode:e=>String.fromCodePoint(...e)},decode:d,encode:h,toASCII:function(e){return l(e,function(e){return r.test(e)?"xn--"+h(e):e})},toUnicode:function(e){return l(e,function(e){return t.test(e)?d(e.slice(4).toLowerCase()):e})}}},48334:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e},l={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(l,{Genkit:()=>u.Genkit,genkit:()=>u.genkit}),e.exports=s(n({},"__esModule",{value:!0}),l),((e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")))(l,r(23301),e.exports);var u=r(18758)},48359:(e,t,r)=>{"use strict";let n=r(7180),o=r(18199),i=r(91292).parseDataURI;class a{constructor(e){this.mail=e||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter(e=>/^text\/html\b/i.test(e.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&1===this._attachments.attached.length,this.mail.raw?this.message=new n("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach(e=>{let t=e.replace(/-(\w)/g,(e,t)=>t.toUpperCase());this.mail[t]&&this.message.setHeader(e,this.mail[t])}),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(e){let t,r,n=[].concat(this.mail.attachments||[]).map((e,t)=>{let r,n=/^message\//i.test(e.contentType);/^data:/i.test(e.path||e.href)&&(e=this._processDataUrl(e));let i=e.contentType||o.detectMimeType(e.filename||e.path||e.href||"bin"),a=/^image\//i.test(i);return r={contentType:i,contentDisposition:e.contentDisposition||(n||a&&e.cid?"inline":"attachment"),contentTransferEncoding:"contentTransferEncoding"in e?e.contentTransferEncoding:"base64"},e.filename?r.filename=e.filename:!n&&!1!==e.filename&&(r.filename=(e.path||e.href||"").split("/").pop().split("?").shift()||"attachment-"+(t+1),0>r.filename.indexOf(".")&&(r.filename+="."+o.detectExtension(r.contentType))),/^https?:\/\//i.test(e.path)&&(e.href=e.path,e.path=void 0),e.cid&&(r.cid=e.cid),e.raw?r.raw=e.raw:e.path?r.content={path:e.path}:e.href?r.content={href:e.href,httpHeaders:e.httpHeaders}:r.content=e.content||"",e.encoding&&(r.encoding=e.encoding),e.headers&&(r.headers=e.headers),r});return(this.mail.icalEvent&&(t="object"==typeof this.mail.icalEvent&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?this.mail.icalEvent:{content:this.mail.icalEvent},r={},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.contentType="application/ics",r.headers||(r.headers={}),r.filename=r.filename||"invite.ics",r.headers["Content-Disposition"]="attachment",r.headers["Content-Transfer-Encoding"]="base64"),e)?{attached:n.filter(e=>!e.cid).concat(r||[]),related:n.filter(e=>!!e.cid)}:{attached:n.concat(r||[]),related:[]}}getAlternatives(){let e=[],t,r,n,i,a,s;return this.mail.text&&((t="object"==typeof this.mail.text&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?this.mail.text:{content:this.mail.text}).contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&((n="object"==typeof this.mail.watchHtml&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?this.mail.watchHtml:{content:this.mail.watchHtml}).contentType="text/watch-html; charset=utf-8"),this.mail.amp&&((i="object"==typeof this.mail.amp&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?this.mail.amp:{content:this.mail.amp}).contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(a="object"==typeof this.mail.icalEvent&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?this.mail.icalEvent:{content:this.mail.icalEvent},s={},Object.keys(a).forEach(e=>{s[e]=a[e]}),s.content&&"object"==typeof s.content&&(s.content._resolve=!0),s.filename=!1,s.contentType="text/calendar; charset=utf-8; method="+(s.method||"PUBLISH").toString().trim().toUpperCase(),s.headers||(s.headers={})),this.mail.html&&((r="object"==typeof this.mail.html&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?this.mail.html:{content:this.mail.html}).contentType="text/html; charset=utf-8"),[].concat(t||[]).concat(n||[]).concat(i||[]).concat(r||[]).concat(s||[]).concat(this.mail.alternatives||[]).forEach(t=>{let r;/^data:/i.test(t.path||t.href)&&(t=this._processDataUrl(t)),r={contentType:t.contentType||o.detectMimeType(t.filename||t.path||t.href||"txt"),contentTransferEncoding:t.contentTransferEncoding},t.filename&&(r.filename=t.filename),/^https?:\/\//i.test(t.path)&&(t.href=t.path,t.path=void 0),t.raw?r.raw=t.raw:t.path?r.content={path:t.path}:t.href?r.content={href:t.href}:r.content=t.content||"",t.encoding&&(r.encoding=t.encoding),t.headers&&(r.headers=t.headers),e.push(r)}),e}_createMixed(e){let t;return t=e?e.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new n("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(t):this._useRelated&&this._createRelated(t),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach(e=>{this._useRelated&&e===this._htmlNode||this._createContentNode(t,e)}),t}_createAlternative(e){let t;return t=e?e.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new n("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach(e=>{this._useRelated&&this._htmlNode===e?this._createRelated(t):this._createContentNode(t,e)}),t}_createRelated(e){let t;return t=e?e.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new n('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(t,this._htmlNode),this._attachments.related.forEach(e=>this._createContentNode(t,e)),t}_createContentNode(e,t){let r;(t=t||{}).content=t.content||"";let o=(t.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return r=e?e.createChild(t.contentType,{filename:t.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new n(t.contentType,{filename:t.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),t.headers&&r.addHeader(t.headers),t.cid&&r.setHeader("Content-Id","<"+t.cid.replace(/[<>]/g,"")+">"),t.contentTransferEncoding?r.setHeader("Content-Transfer-Encoding",t.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(t.contentType)&&r.setHeader("Content-Transfer-Encoding",this.mail.encoding),(!/^text\//i.test(t.contentType)||t.contentDisposition)&&r.setHeader("Content-Disposition",t.contentDisposition||(t.cid&&/^image\//i.test(t.contentType)?"inline":"attachment")),"string"!=typeof t.content||["utf8","usascii","ascii"].includes(o)||(t.content=Buffer.from(t.content,o)),t.raw?r.setRaw(t.raw):r.setContent(t.content),r}_processDataUrl(e){let t;return(e.path||e.href).match(/^data:/)&&(t=i(e.path||e.href)),t&&(e.content=t.data,e.contentType=e.contentType||t.contentType,"path"in e&&(e.path=!1),"href"in e&&(e.href=!1)),e}}e.exports=a},48549:(e,t,r)=>{"use strict";function n(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function o(e){for(var t=new Uint8Array(e.length/2),r=0,o=0;o<e.length;o+=2){var i=n(e.charCodeAt(o)),a=n(e.charCodeAt(o+1));t[r++]=i<<4|a}return t}r.d(t,{Q:()=>o})},48811:(e,t,r)=>{"use strict";r.d(t,{o:()=>o});var n=r(86713);function o(){return function(e){var t;n.s.error("string"==typeof(t=e)?t:JSON.stringify(function(e){for(var t={},r=e;null!==r;)Object.getOwnPropertyNames(r).forEach(function(e){if(!t[e]){var n=r[e];n&&(t[e]=String(n))}}),r=Object.getPrototypeOf(r);return t}(t)))}}},49074:e=>{"use strict";e.exports=JSON.parse('{"name":"nodemailer","version":"6.10.1","description":"Easy as cake e-mail sending from your Node.js applications","main":"lib/nodemailer.js","scripts":{"test":"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","lint":"eslint .","update":"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},"repository":{"type":"git","url":"https://github.com/nodemailer/nodemailer.git"},"keywords":["Nodemailer"],"author":"Andris Reinman","license":"MIT-0","bugs":{"url":"https://github.com/nodemailer/nodemailer/issues"},"homepage":"https://nodemailer.com/","devDependencies":{"@aws-sdk/client-ses":"3.731.1","bunyan":"1.8.15","c8":"10.1.3","eslint":"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0","libbase64":"1.3.0","libmime":"5.3.6","libqp":"2.1.1","nodemailer-ntlm-auth":"1.0.4","proxy":"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.6"},"engines":{"node":">=6.0.0"}}')},49457:(e,t,r)=>{"use strict";r.d(t,{M:()=>o,o:()=>i});var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(Error);function i(e,t){var r;return Promise.race([e,new Promise(function(e,n){r=setTimeout(function(){n(new o("Operation timed out."))},t)})]).then(function(e){return clearTimeout(r),e},function(e){throw clearTimeout(r),e})}},49526:(e,t,r)=>{"use strict";let n=r(46945),o=r(91292),i=r(8346),a=r(84681),s=r(79524),l=r(77821),u=r(89767),c=r(97002),p=r(38099),d=r(49074),h=(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),m=(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),f=(process.env.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,g=["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase()),y=!1;e.exports.createTransport=function(e,t){let r,p;return("object"==typeof e&&"function"!=typeof e.send||"string"==typeof e&&/^(smtps?|direct):/i.test(e))&&(e=(p=(r="string"==typeof e?e:e.url)?o.parseConnectionUrl(r):e).pool?new i(p):p.sendmail?new s(p):p.streamTransport?new l(p):p.jsonTransport?new u(p):p.SES?new c(p):new a(p)),new n(e,p,t)},e.exports.createTestAccount=function(e,t){let r;if(t||"function"!=typeof e||(t=e,e=!1),t||(r=new Promise((e,r)=>{t=o.callbackPromise(e,r)})),g&&y)return setImmediate(()=>t(null,y)),r;e=e||h;let n=[],i=0,a={},s={requestor:d.name,version:d.version};f&&(a.Authorization="Bearer "+f);let l=p(e+"/user",{contentType:"application/json",method:"POST",headers:a,body:Buffer.from(JSON.stringify(s))});return l.on("readable",()=>{let e;for(;null!==(e=l.read());)n.push(e),i+=e.length}),l.once("error",e=>t(e)),l.once("end",()=>{let e,r,o=Buffer.concat(n,i);try{e=JSON.parse(o.toString())}catch(e){r=e}return r?t(r):"success"!==e.status||e.error?t(Error(e.error||"Request failed")):void(delete e.status,t(null,y=e))}),r},e.exports.getTestMessageUrl=function(e){if(!e||!e.response)return!1;let t=new Map;return e.response.replace(/\[([^\]]+)\]$/,(e,r)=>{r.replace(/\b([A-Z0-9]+)=([^\s]+)/g,(e,r,n)=>{t.set(r,n)})}),!!(t.has("STATUS")&&t.has("MSGID"))&&(y.web||m)+"/message/"+t.get("MSGID")}},49617:(e,t,r)=>{"use strict";var n=r(29986),o=r(36407),i=r(96363),a=r(99122),s=r(7562);t.addPairToJSMap=function(e,t,{key:r,value:l}){if(a.isNode(r)&&r.addToJSMap)r.addToJSMap(e,t,l);else if(o.isMergeKey(e,r))o.addMergeToJSMap(e,t,l);else{let o=s.toJS(r,"",e);if(t instanceof Map)t.set(o,s.toJS(l,o,e));else if(t instanceof Set)t.add(o);else{let u=function(e,t,r){if(null===t)return"";if("object"!=typeof t)return String(t);if(a.isNode(e)&&r?.doc){let t=i.createStringifyContext(r.doc,{});for(let e of(t.anchors=new Set,r.anchors.keys()))t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;let o=e.toString(t);if(!r.mapKeyWarned){let e=JSON.stringify(o);e.length>40&&(e=e.substring(0,36)+'..."'),n.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return o}return JSON.stringify(t)}(r,o,e),c=s.toJS(l,u,e);u in t?Object.defineProperty(t,u,{value:c,writable:!0,enumerable:!0,configurable:!0}):t[u]=c}}return t}},49951:(e,t,r)=>{"use strict";var n=r(99122),o=r(96363),i=r(14386);function a({indent:e,options:{commentString:t}},r,n,o){if(n&&o&&(n=n.replace(/^\n+/,"")),n){let o=i.indentComment(t(n),e);r.push(o.trimStart())}}t.stringifyCollection=function(e,t,r){return(t.inFlow??e.flow?function({items:e},t,{flowChars:r,itemIndent:s}){let{indent:l,indentStep:u,flowCollectionPadding:c,options:{commentString:p}}=t,d=Object.assign({},t,{indent:s+=u,inFlow:!0,type:null}),h=!1,m=0,f=[];for(let r=0;r<e.length;++r){let l=e[r],u=null;if(n.isNode(l))l.spaceBefore&&f.push(""),a(t,f,l.commentBefore,!1),l.comment&&(u=l.comment);else if(n.isPair(l)){let e=n.isNode(l.key)?l.key:null;e&&(e.spaceBefore&&f.push(""),a(t,f,e.commentBefore,!1),e.comment&&(h=!0));let r=n.isNode(l.value)?l.value:null;r?(r.comment&&(u=r.comment),r.commentBefore&&(h=!0)):null==l.value&&e?.comment&&(u=e.comment)}u&&(h=!0);let c=o.stringify(l,d,()=>u=null);r<e.length-1&&(c+=","),u&&(c+=i.lineComment(c,s,p(u))),!h&&(f.length>m||c.includes("\n"))&&(h=!0),f.push(c),m=f.length}let{start:g,end:y}=r;if(0===f.length)return g+y;if(!h){let e=f.reduce((e,t)=>e+t.length+2,2);h=t.options.lineWidth>0&&e>t.options.lineWidth}if(!h)return`${g}${c}${f.join(" ")}${c}${y}`;{let e=g;for(let t of f)e+=t?`
${u}${l}${t}`:"\n";return`${e}
${l}${y}`}}:function({comment:e,items:t},r,{blockItemPrefix:s,flowChars:l,itemIndent:u,onChompKeep:c,onComment:p}){let d,{indent:h,options:{commentString:m}}=r,f=Object.assign({},r,{indent:u,type:null}),g=!1,y=[];for(let e=0;e<t.length;++e){let l=t[e],c=null;if(n.isNode(l))!g&&l.spaceBefore&&y.push(""),a(r,y,l.commentBefore,g),l.comment&&(c=l.comment);else if(n.isPair(l)){let e=n.isNode(l.key)?l.key:null;e&&(!g&&e.spaceBefore&&y.push(""),a(r,y,e.commentBefore,g))}g=!1;let p=o.stringify(l,f,()=>c=null,()=>g=!0);c&&(p+=i.lineComment(p,u,m(c))),g&&c&&(g=!1),y.push(s+p)}if(0===y.length)d=l.start+l.end;else{d=y[0];for(let e=1;e<y.length;++e){let t=y[e];d+=t?`
${h}${t}`:"\n"}}return e?(d+="\n"+i.indentComment(m(e),h),p&&p()):g&&c&&c(),d})(e,t,r)}},50069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeSDK=void 0;let n=r(18617),o=r(15806),i=r(17694),a=r(23226),s=r(45768),l=r(57634),u=r(16911),c=r(58789),p=r(43310),d=r(67883),h=r(87535),m=r(85788);class f{constructor(e={}){var t,r,o,i,s,l,c;let p=(0,h.getEnv)(),d=(0,h.getEnvWithoutDefaults)();p.OTEL_SDK_DISABLED&&(this._disabled=!0),d.OTEL_LOG_LEVEL&&n.diag.setLogger(new n.DiagConsoleLogger,{logLevel:d.OTEL_LOG_LEVEL}),this._configuration=e,this._resource=null!=(t=e.resource)?t:new a.Resource({});let f=[];if(f=null!=process.env.OTEL_NODE_RESOURCE_DETECTORS?(0,m.getResourceDetectorsFromEnv)():[a.envDetector,a.processDetector,a.hostDetector],this._resourceDetectors=null!=(r=e.resourceDetectors)?r:f,this._serviceName=e.serviceName,this._autoDetectResources=null==(o=e.autoDetectResources)||o,e.traceExporter||e.spanProcessor||e.spanProcessors){let t={};e.sampler&&(t.sampler=e.sampler),e.spanLimits&&(t.spanLimits=e.spanLimits),e.idGenerator&&(t.idGenerator=e.idGenerator),e.spanProcessor&&n.diag.warn("The 'spanProcessor' option is deprecated. Please use 'spanProcessors' instead.");let r=null!=(i=e.spanProcessor)?i:new u.BatchSpanProcessor(e.traceExporter),o=null!=(s=e.spanProcessors)?s:[r];this._tracerProviderConfig={tracerConfig:t,spanProcessors:o,contextManager:e.contextManager,textMapPropagator:e.textMapPropagator}}if(e.logRecordProcessor&&(this._loggerProviderConfig={logRecordProcessor:e.logRecordProcessor}),e.metricReader||e.views){let t={};e.metricReader&&(t.reader=e.metricReader),e.views&&(t.views=e.views),this._meterProviderConfig=t}this._instrumentations=null!=(c=null==(l=e.instrumentations)?void 0:l.flat())?c:[]}start(){var e,t,r,u,h,m;if(this._disabled)return;if((0,i.registerInstrumentations)({instrumentations:this._instrumentations}),this._autoDetectResources){let e={detectors:this._resourceDetectors};this._resource=this._resource.merge((0,a.detectResourcesSync)(e))}this._resource=void 0===this._serviceName?this._resource:this._resource.merge(new a.Resource({[p.SEMRESATTRS_SERVICE_NAME]:this._serviceName}));let f=new(this._tracerProviderConfig?c.NodeTracerProvider:d.TracerProviderWithEnvExporters)(Object.assign(Object.assign({},this._configuration),{resource:this._resource}));if(this._tracerProvider=f,this._tracerProviderConfig)for(let e of this._tracerProviderConfig.spanProcessors)f.addSpanProcessor(e);if(f.register({contextManager:null!=(t=null==(e=this._tracerProviderConfig)?void 0:e.contextManager)?t:null==(r=this._configuration)?void 0:r.contextManager,propagator:null==(u=this._tracerProviderConfig)?void 0:u.textMapPropagator}),this._loggerProviderConfig){let e=new s.LoggerProvider({resource:this._resource});e.addLogRecordProcessor(this._loggerProviderConfig.logRecordProcessor),this._loggerProvider=e,o.logs.setGlobalLoggerProvider(e)}if(this._meterProviderConfig){let e=[];this._meterProviderConfig.reader&&e.push(this._meterProviderConfig.reader);let t=new l.MeterProvider({resource:this._resource,views:null!=(m=null==(h=this._meterProviderConfig)?void 0:h.views)?m:[],readers:e});for(let e of(this._meterProvider=t,n.metrics.setGlobalMeterProvider(t),this._instrumentations))e.setMeterProvider(n.metrics.getMeterProvider())}}shutdown(){let e=[];return this._tracerProvider&&e.push(this._tracerProvider.shutdown()),this._loggerProvider&&e.push(this._loggerProvider.shutdown()),this._meterProvider&&e.push(this._meterProvider.shutdown()),Promise.all(e).then(()=>{})}}t.NodeSDK=f},50143:(e,t,r)=>{"use strict";let n=r(33873),o="application/octet-stream",i=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/geo+json","geojson"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),a=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);e.exports={detectMimeType(e){if(!e)return o;let t=n.parse(e),r=(t.ext.substr(1)||t.name||"").split("?").shift().trim().toLowerCase(),i=o;return(a.has(r)&&(i=a.get(r)),Array.isArray(i))?i[0]:i},detectExtension(e){if(!e)return"bin";let t=(e||"").toLowerCase().trim().split("/"),r=t.shift().trim(),n=t.join("/").trim();if(i.has(r+"/"+n)){let e=i.get(r+"/"+n);return Array.isArray(e)?e[0]:e}return"text"===r?"txt":"bin"}}},50236:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRecordDef=void 0;let n=r(47649),o=r(70350),i=r(24192),a=r(32769),s=r(18271);t.parseRecordDef=function(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:(0,o.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??(0,s.parseAnyDef)(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:(0,o.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){let{type:n,...o}=(0,i.parseStringDef)(e.keyType._def,t);return{...r,propertyNames:o}}if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodBranded&&e.keyType._def.type._def.typeName===n.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.type._def.checks?.length){let{type:n,...o}=(0,a.parseBrandedDef)(e.keyType._def,t);return{...r,propertyNames:o}}return r}},50807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNeverDef=void 0;let n=r(18271);t.parseNeverDef=function(e){return"openAi"===e.target?void 0:{not:(0,n.parseAnyDef)({...e,currentPath:[...e.currentPath,"not"]})}}},50851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(67884),o=r(22964),i=r(45346),a=r(58592);t.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>(0,o._)`{additionalProperty: ${e.additionalProperty}}`},code(e){let{gen:t,schema:r,parentSchema:s,data:l,errsCount:u,it:c}=e;if(!u)throw Error("ajv implementation error");let{allErrors:p,opts:d}=c;if(c.props=!0,"all"!==d.removeAdditional&&(0,a.alwaysValidSchema)(c,r))return;let h=(0,n.allSchemaProperties)(s.properties),m=(0,n.allSchemaProperties)(s.patternProperties);function f(e){t.code((0,o._)`delete ${l}[${e}]`)}function g(n){if("all"===d.removeAdditional||d.removeAdditional&&!1===r)return void f(n);if(!1===r){e.setParams({additionalProperty:n}),e.error(),p||t.break();return}if("object"==typeof r&&!(0,a.alwaysValidSchema)(c,r)){let r=t.name("valid");"failing"===d.removeAdditional?(y(n,r,!1),t.if((0,o.not)(r),()=>{e.reset(),f(n)})):(y(n,r),p||t.if((0,o.not)(r),()=>t.break()))}}function y(t,r,n){let o={keyword:"additionalProperties",dataProp:t,dataPropType:a.Type.Str};!1===n&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,r)}t.forIn("key",l,r=>{h.length||m.length?t.if(function(r){let i;if(h.length>8){let e=(0,a.schemaRefOrVal)(c,s.properties,"properties");i=(0,n.isOwnProperty)(t,e,r)}else i=h.length?(0,o.or)(...h.map(e=>(0,o._)`${r} === ${e}`)):o.nil;return m.length&&(i=(0,o.or)(i,...m.map(t=>(0,o._)`${(0,n.usePattern)(e,t)}.test(${r})`))),(0,o.not)(i)}(r),()=>g(r)):g(r)}),e.ok((0,o._)`${u} === ${i.default.errors}`)}}},51255:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};function a(){let e,t,r=new Promise((r,n)=>([e,t]=[r,n]));return{resolve:e,reject:t,promise:r}}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{Channel:()=>s,LazyPromise:()=>l,lazy:()=>u}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);class s{ready=a();buffer=[];err=null;send(e){this.buffer.push(e),this.ready.resolve()}close(){this.buffer.push(null),this.ready.resolve()}error(e){this.err=e,this.ready.reject(e)}[Symbol.asyncIterator](){return{next:async()=>{if(this.err)throw this.err;this.buffer.length||await this.ready.promise;let e=this.buffer.shift();return this.buffer.length||(this.ready=a()),{value:e,done:!e}}}}}class l{executor;promise;constructor(e){this.executor=e}then(e,t){return this.promise??=new Promise(this.executor),this.promise.then(e,t)}}function u(e){return new l((t,r)=>{try{t(e())}catch(e){r(e)}})}},52060:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{defineGenerateAction:()=>y,generateHelper:()=>v,inferRoleFromParts:()=>x,shouldInjectFormatInstructions:()=>_}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(95566),c=r(40413),p=r(58457),d=r(87963),h=r(58799),m=r(31440),f=r(71622),g=r(1746);function y(e){return(0,l.defineAction)(e,{actionType:"util",name:"generate",inputSchema:h.GenerateActionOptionsSchema,outputSchema:h.GenerateResponseSchema,streamSchema:h.GenerateResponseChunkSchema},async(t,{streamingRequested:r,sendChunk:n})=>{let o=r=>E(e,{rawRequest:t,currentTurn:0,messageIndex:0,middleware:[],streamingCallback:r});return r?o(e=>n(e.toJSON?e.toJSON():e)):o()})}async function v(e,t){let r=t.currentTurn??0,n=t.messageIndex??0;return await (0,c.runInNewSpan)(e,{metadata:{name:"generate"},labels:{[c.SPAN_TYPE_ATTR]:"util"}},async o=>{o.name="generate",o.input=t.rawRequest;let i=await E(e,{rawRequest:t.rawRequest,middleware:t.middleware,currentTurn:r,messageIndex:n,abortSignal:t.abortSignal,streamingCallback:t.streamingCallback});return o.output=JSON.stringify(i),i})}async function b(e,t){let[r,n,o]=await Promise.all([(0,h.resolveModel)(e,t.model,{warnDeprecated:!0}).then(e=>e.modelAction),(0,f.resolveTools)(e,t.tools),(0,p.resolveFormat)(e,t.output)]);return{model:r,tools:n,format:o}}function _(e,t){return e?.defaultInstructions!==!1||t?.instructions}async function E(e,{rawRequest:t,middleware:r,currentTurn:n,messageIndex:o,abortSignal:i,streamingCallback:a}){var s,u;let{model:c,tools:h,format:m}=await b(e,t);t=function(e,t){let r={...e};e.output?.jsonSchema&&!e.output?.format&&(r.output={...e.output,format:"json"});let n=(0,p.resolveInstructions)(t,r.output?.jsonSchema,r?.output?.instructions);return t&&(_(t.config,e?.output)&&(r.messages=(0,p.injectInstructions)(r.messages,n)),r.output={...t.config,...r.output}),r}(t,m),t=await w(e,t),await (0,g.assertValidToolNames)(h);let{revisedRequest:f,interruptedResponse:y,toolMessage:E}=await (0,g.resolveResumeOption)(e,t);if(y)throw new l.GenkitError({status:"FAILED_PRECONDITION",message:"One or more tools triggered an interrupt during a restarted execution.",detail:{message:y.message}});t=f;let x=await S(t,h,m,c),T=[],A="model",O=(e,t)=>{e!==A&&T.length&&o++,A=e;let r=[...T];return T.push(t),new d.GenerateResponseChunk(t,{index:o,role:e,previousChunks:r,parser:m?.handler(x.output?.schema).parseChunk})};E&&a&&a(O("tool",E));let N=async(e,t)=>r&&e!==r.length?(0,r[e])(t,async r=>N(e+1,r||t)):await c(t,{abortSignal:i,onChunk:a&&(e=>a&&a(O("model",e)))}),P=await N(0,x);if(s="background-model"===c.__action.actionType?new d.GenerateResponse({operation:P},{request:x,parser:m?.handler(x.output?.schema).parseMessage}):new d.GenerateResponse(P,{request:x,parser:m?.handler(x.output?.schema).parseMessage}),"background-model"===c.__action.actionType)return s.toJSON();s.assertValid();let C=s.message,k=C.content.filter(e=>!!e.toolRequest);if(t.returnToolRequests||0===k.length)return 0===k.length&&s.assertValidSchema(x),s.toJSON();let I=t.maxTurns??5;if(n+1>I)throw new d.GenerationResponseError(s,`Exceeded maximum tool call iterations (${I})`,"ABORTED",{request:x});let{revisedModelMessage:D,toolMessage:R,transferPreamble:L}=await (0,g.resolveToolRequests)(e,t,C);if(D)return{...s.toJSON(),finishReason:"interrupted",finishMessage:"One or more tool calls resulted in interrupts.",message:D};a?.(O("tool",{content:R.content}));let M={...t,messages:[...t.messages,C.toJSON(),R]};return u=M,M=L?(0,l.stripUndefinedProps)({...u,messages:[...(0,d.tagAsPreamble)(L.messages),...u.messages.filter(e=>!e.metadata?.preamble)],toolChoice:L.toolChoice||u.toolChoice,tools:L.tools||u.tools,config:L.config||u.config}):u,await v(e,{rawRequest:M,middleware:r,currentTurn:n+1,messageIndex:o+1,streamingCallback:a})}async function S(e,t,r,n){let o=n.__action.metadata?.model;(e.tools?.length??0)>0&&o?.supports&&!o?.supports?.tools&&u.logger.warn(`The model '${n.__action.name}' does not support tools (you set: ${e.tools?.length} tools). The model may not behave the way you expect.`),e.toolChoice&&o?.supports&&!o?.supports?.toolChoice&&u.logger.warn(`The model '${n.__action.name}' does not support the 'toolChoice' option (you set: ${e.toolChoice}). The model may not behave the way you expect.`);let i={messages:e.messages,config:e.config,docs:e.docs,tools:t?.map(f.toToolDefinition)||[],output:(0,l.stripUndefinedProps)({constrained:e.output?.constrained,contentType:e.output?.contentType,format:e.output?.format,schema:e.output?.jsonSchema})};return e.toolChoice&&(i.toolChoice=e.toolChoice),i.output&&!i.output.schema&&delete i.output.schema,i}function x(e){let t=new Set;for(let r of e){let e=function(e){if(void 0!==e.toolRequest)return"model";if(void 0!==e.toolResponse)return"tool";if(void 0!==e.text||void 0!==e.media||void 0!==e.data)return"user";throw Error("No recognized fields in content")}(r);if(t.add(e),t.size>1)throw Error("Contents contain mixed roles")}return Array.from(t)[0]}async function w(e,t){if(!t.messages.find(e=>!!e.content.find(e=>e.resource)))return t;let r=[];for(let n of t.messages){if(!n.content.find(e=>e.resource)){r.push(n);continue}let t=[];for(let r of n.content){if(!r.resource){t.push(r);continue}let n=await (0,m.findMatchingResource)(e,r.resource);if(!n)throw new l.GenkitError({status:"NOT_FOUND",message:`failed to find matching resource for ${r.resource.uri}`});let o=await n(r.resource);t.push(...o.content)}r.push({...n,content:t})}return{...t,messages:r}}},52587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(67884),o=r(22964);t.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,o.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,o._)`{pattern: ${e}}`},code(e){let{data:t,$data:r,schema:i,schemaCode:a,it:s}=e,l=s.opts.unicodeRegExp?"u":"",u=r?(0,o._)`(new RegExp(${a}, ${l}))`:(0,n.usePattern)(e,i);e.fail$data((0,o._)`!${u}.test(${t})`)}}},52618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBigintDef=void 0;let n=r(88524);t.parseBigintDef=function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let o of e.checks)switch(o.kind){case"min":"jsonSchema7"===t.target?o.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",o.value,o.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",o.value,o.message,t):(o.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",o.value,o.message,t));break;case"max":"jsonSchema7"===t.target?o.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",o.value,o.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",o.value,o.message,t):(o.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",o.value,o.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",o.value,o.message,t)}return r}},52904:(e,t,r)=>{"use strict";var n=r(58364),o=r(99122),i=r(7562);class a{constructor(e){Object.defineProperty(this,o.NODE_TYPE,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:r,onAnchor:a,reviver:s}={}){if(!o.isDocument(e))throw TypeError("A document argument is required");let l={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100},u=i.toJS(this,"",l);if("function"==typeof a)for(let{count:e,res:t}of l.anchors.values())a(t,e);return"function"==typeof s?n.applyReviver(s,{"":u},"",u):u}}t.NodeBase=a},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},53194:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;let n=r(22964),o=r(97757),i=r(45346),a=r(21326),s=r(58592),l=r(73841);class u{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!=(t=e.baseId)?t:(0,a.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function c(e){let t,r,s=d.call(this,e);if(s)return s;let u=(0,a.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:c,lines:p}=this.opts.code,{ownProperties:h}=this.opts,m=new n.CodeGen(this.scope,{es5:c,lines:p,ownProperties:h});e.$async&&(t=m.scopeValue("Error",{ref:o.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));let f=m.scopeName("validate");e.validateName=f;let g={gen:m,allErrors:this.opts.allErrors,data:i.default.data,parentData:i.default.parentData,parentDataProperty:i.default.parentDataProperty,dataNames:[i.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:m.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,n.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:t,schema:e.schema,schemaEnv:e,rootId:u,baseId:e.baseId||u,schemaPath:n.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};try{this._compilations.add(e),(0,l.validateFunctionCode)(g),m.optimize(this.opts.code.optimize);let t=m.toString();r=`${m.scopeRefs(i.default.scope)}return ${t}`,this.opts.code.process&&(r=this.opts.code.process(r,e));let o=Function(`${i.default.self}`,`${i.default.scope}`,r)(this,this.scope.get());if(this.scope.value(f,{ref:o}),o.errors=null,o.schema=e.schema,o.schemaEnv=e,e.$async&&(o.$async=!0),!0===this.opts.code.source&&(o.source={validateName:f,validateCode:t,scopeValues:m._values}),this.opts.unevaluated){let{props:e,items:t}=g;o.evaluated={props:e instanceof n.Name?void 0:e,items:t instanceof n.Name?void 0:t,dynamicProps:e instanceof n.Name,dynamicItems:t instanceof n.Name},o.source&&(o.source.evaluated=(0,n.stringify)(o.evaluated))}return e.validate=o,e}catch(t){throw delete e.validate,delete e.validateName,r&&this.logger.error("Error compiling schema, function code:",r),t}finally{this._compilations.delete(e)}}function p(e){return(0,a.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:c.call(this,e)}function d(e){for(let n of this._compilations){var t,r;if(t=n,r=e,t.schema===r.schema&&t.root===r.root&&t.baseId===r.baseId)return n}}function h(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||m.call(this,e,t)}function m(e,t){let r=this.opts.uriResolver.parse(t),n=(0,a._getFullPath)(this.opts.uriResolver,r),o=(0,a.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===o)return g.call(this,r,e);let i=(0,a.normalizeId)(n),s=this.refs[i]||this.schemas[i];if("string"==typeof s){let t=m.call(this,e,s);if("object"!=typeof(null==t?void 0:t.schema))return;return g.call(this,r,t)}if("object"==typeof(null==s?void 0:s.schema)){if(s.validate||c.call(this,s),i===(0,a.normalizeId)(t)){let{schema:t}=s,{schemaId:r}=this.opts,n=t[r];return n&&(o=(0,a.resolveUrl)(this.opts.uriResolver,o,n)),new u({schema:t,schemaId:r,root:e,baseId:o})}return g.call(this,r,s)}}t.SchemaEnv=u,t.compileSchema=c,t.resolveRef=function(e,t,r){var n;r=(0,a.resolveUrl)(this.opts.uriResolver,t,r);let o=e.refs[r];if(o)return o;let i=h.call(this,e,r);if(void 0===i){let o=null==(n=e.localRefs)?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new u({schema:o,schemaId:a,root:e,baseId:t}))}if(void 0!==i)return e.refs[r]=p.call(this,i)},t.getCompilingSchema=d,t.resolveSchema=m;let f=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(e,{baseId:t,schema:r,root:n}){var o;let i;if((null==(o=e.fragment)?void 0:o[0])!=="/")return;for(let n of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;let e=r[(0,s.unescapeFragment)(n)];if(void 0===e)return;let o="object"==typeof(r=e)&&r[this.opts.schemaId];!f.has(n)&&o&&(t=(0,a.resolveUrl)(this.opts.uriResolver,t,o))}if("boolean"!=typeof r&&r.$ref&&!(0,s.schemaHasRulesButRef)(r,this.RULES)){let e=(0,a.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=m.call(this,n,e)}let{schemaId:l}=this.opts;if((i=i||new u({schema:r,schemaId:l,root:n,baseId:t})).schema!==i.root.schema)return i}},53752:(e,t,r)=>{"use strict";let n=r(79551);class o{constructor(e){this.options=e||{},this.cookies=[]}set(e,t){let r,o=n.parse(t||""),i=this.parse(e);return i.domain?(r=i.domain.replace(/^\./,""),(o.hostname.length<r.length||("."+o.hostname).substr(-r.length+1)!=="."+r)&&(i.domain=o.hostname)):i.domain=o.hostname,i.path||(i.path=this.getPath(o.pathname)),i.expires||(i.expires=new Date(Date.now()+1e3*(Number(this.options.sessionTimeout||1800)||1800))),this.add(i)}get(e){return this.list(e).map(e=>e.name+"="+e.value).join("; ")}list(e){let t,r,n=[];for(t=this.cookies.length-1;t>=0;t--){if(r=this.cookies[t],this.isExpired(r)){this.cookies.splice(t,t);continue}this.match(r,e)&&n.unshift(r)}return n}parse(e){let t={};return(e||"").toString().split(";").forEach(e=>{let r,n=e.split("="),o=n.shift().trim().toLowerCase(),i=n.join("=").trim();if(o)switch(o){case"expires":"Invalid Date"!==(i=new Date(i)).toString()&&(t.expires=i);break;case"path":t.path=i;break;case"domain":(r=i.toLowerCase()).length&&"."!==r.charAt(0)&&(r="."+r),t.domain=r;break;case"max-age":t.expires=new Date(Date.now()+1e3*(Number(i)||0));break;case"secure":t.secure=!0;break;case"httponly":t.httponly=!0;break;default:t.name||(t.name=o,t.value=i)}}),t}match(e,t){let r=n.parse(t||"");return(r.hostname===e.domain||"."===e.domain.charAt(0)&&("."+r.hostname).substr(-e.domain.length)===e.domain)&&this.getPath(r.pathname).substr(0,e.path.length)===e.path&&(!e.secure||"https:"===r.protocol)}add(e){let t,r;if(!e||!e.name)return!1;for(t=0,r=this.cookies.length;t<r;t++)if(this.compare(this.cookies[t],e)){if(this.isExpired(e))return this.cookies.splice(t,1),!1;return this.cookies[t]=e,!0}return this.isExpired(e)||this.cookies.push(e),!0}compare(e,t){return e.name===t.name&&e.path===t.path&&e.domain===t.domain&&e.secure===t.secure&&e.httponly==e.httponly}isExpired(e){return e.expires&&e.expires<new Date||!e.value}getPath(e){let t=(e||"/").split("/");return t.pop(),"/"!==(t=t.join("/").trim()).charAt(0)&&(t="/"+t),"/"!==t.substr(-1)&&(t+="/"),t}}e.exports=o},54437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBooleanDef=void 0,t.parseBooleanDef=function(){return{type:"boolean"}}},54560:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.addIssueToContext=t.EMPTY_PATH=t.makeIssue=void 0;let o=r(59850),i=n(r(95050));t.makeIssue=e=>{let{data:t,path:r,errorMaps:n,issueData:o}=e,i=[...r,...o.path||[]],a={...o,path:i};if(void 0!==o.message)return{...o,path:i,message:o.message};let s="";for(let e of n.filter(e=>!!e).slice().reverse())s=e(a,{data:t,defaultError:s}).message;return{...o,path:i,message:s}},t.EMPTY_PATH=[],t.addIssueToContext=function(e,r){let n=(0,o.getErrorMap)(),a=(0,t.makeIssue)({issueData:r,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===i.default?void 0:i.default].filter(e=>!!e)});e.common.issues.push(a)};class a{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if("aborted"===o.status)return t.INVALID;"dirty"===o.status&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return a.mergeObjectSync(e,r)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:r,value:i}=o;if("aborted"===r.status||"aborted"===i.status)return t.INVALID;"dirty"===r.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==r.value&&(void 0!==i.value||o.alwaysSet)&&(n[r.value]=i.value)}return{status:e.value,value:n}}}t.ParseStatus=a,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},54898:(e,t,r)=>{"use strict";r.d(t,{$Y:()=>a,Ar:()=>i,Gs:()=>s,h1:()=>l});var n=r(70762);let o=n.z.object({campaignUid:n.z.string(),date:n.z.string(),campaignName:n.z.string(),fromName:n.z.string(),subject:n.z.string(),totalSent:n.z.number(),opens:n.z.number(),clicks:n.z.number(),unsubscribes:n.z.number(),bounces:n.z.number(),deliveryRate:n.z.number(),openRate:n.z.number(),clickRate:n.z.number()}),i=n.z.object({todayReports:n.z.array(o).describe("An array of daily campaign reports from today."),yesterdayReports:n.z.array(o).describe("An array of daily campaign reports from yesterday.")}),a=n.z.object({subject:n.z.string().describe("A compelling subject line for the email report."),body:n.z.string().describe("The full body of the email report, formatted as plain text. Use markdown for lists and bolding.")}),s=n.z.object({to:n.z.string().email().describe("The email address of the recipient."),subject:n.z.string().describe("The subject line of the email."),body:n.z.string().describe("The HTML or plain text body of the email.")}),l=n.z.object({message:n.z.string().describe("A confirmation message indicating the result of the send operation.")})},55085:(e,t,r)=>{"use strict";var n=r(99122),o=r(86104);t.seq={collection:"seq",default:!0,nodeClass:o.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(n.isSeq(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,r)=>o.YAMLSeq.from(e,t,r)}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},55954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configureCompression=t.getCredentialsFromEnvironment=t.configureCredentials=t.validateAndNormalizeUrl=t.DEFAULT_COLLECTOR_URL=void 0;let n=r(18617),o=r(87535),i=r(33873),a=r(79551),s=r(29021),l=r(991),u=r(19490);function c(){let e=function(){let e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE||(0,o.getEnv)().OTEL_EXPORTER_OTLP_CERTIFICATE;if(e)try{return s.readFileSync(i.resolve(process.cwd(),e))}catch(e){n.diag.warn("Failed to read root certificate file");return}}(),t=function(){let e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY||(0,o.getEnv)().OTEL_EXPORTER_OTLP_CLIENT_KEY;if(e)try{return s.readFileSync(i.resolve(process.cwd(),e))}catch(e){n.diag.warn("Failed to read client certificate private key file");return}}(),r=function(){let e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE||(0,o.getEnv)().OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE;if(e)try{return s.readFileSync(i.resolve(process.cwd(),e))}catch(e){n.diag.warn("Failed to read client certificate chain file");return}}();return(0,u.createSslCredentials)(e,t,r)}t.DEFAULT_COLLECTOR_URL="http://localhost:4317",t.validateAndNormalizeUrl=function(e){var t;e.match(/^([\w]{1,8}):\/\//)||(e=`https://${e}`);let r=new a.URL(e);return"unix:"===r.protocol?e:(r.pathname&&"/"!==r.pathname&&n.diag.warn("URL path should not be set when using grpc, the path part of the URL will be ignored."),""===r.protocol||(null==(t=r.protocol)?void 0:t.match(/^(http)s?:$/))||n.diag.warn("URL protocol should be http(s)://. Using http://."),r.host)},t.configureCredentials=function(e,r){return e||(!r.startsWith("https://")&&(r.startsWith("http://")||r===t.DEFAULT_COLLECTOR_URL||function(){let e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_INSECURE||(0,o.getEnv)().OTEL_EXPORTER_OTLP_INSECURE;return!!e&&"true"===e.toLowerCase()}())?(0,u.createInsecureCredentials)():c())},t.getCredentialsFromEnvironment=c,t.configureCompression=function(e){if(null!=e)return e;let t=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,o.getEnv)().OTEL_EXPORTER_OTLP_COMPRESSION;return"gzip"===t?l.CompressionAlgorithm.GZIP:("none"===t||n.diag.warn('Unknown compression "'+t+'", falling back to "none"'),l.CompressionAlgorithm.NONE)}},56264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},57075:e=>{"use strict";e.exports=require("node:stream")},57189:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLocalStorageContextManager=t.AsyncHooksContextManager=void 0;var n=r(22447);Object.defineProperty(t,"AsyncHooksContextManager",{enumerable:!0,get:function(){return n.AsyncHooksContextManager}});var o=r(61015);Object.defineProperty(t,"AsyncLocalStorageContextManager",{enumerable:!0,get:function(){return o.AsyncLocalStorageContextManager}})},57277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelativePath=void 0,t.getRelativePath=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")}},57298:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e},l={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(l,{BaseDataPointSchema:()=>d.BaseDataPointSchema,Document:()=>c.Document,DocumentDataSchema:()=>c.DocumentDataSchema,EvalStatusEnum:()=>d.EvalStatusEnum,GenerateResponse:()=>h.GenerateResponse,GenerateResponseChunk:()=>h.GenerateResponseChunk,GenerateResponseChunkSchema:()=>f.GenerateResponseChunkSchema,GenerationBlockedError:()=>h.GenerationBlockedError,GenerationCommonConfigSchema:()=>f.GenerationCommonConfigSchema,GenerationResponseError:()=>h.GenerationResponseError,Message:()=>m.Message,MessageSchema:()=>f.MessageSchema,ModelRequestSchema:()=>f.ModelRequestSchema,ModelResponseSchema:()=>f.ModelResponseSchema,PartSchema:()=>f.PartSchema,ResourceInputSchema:()=>v.ResourceInputSchema,ResourceOutputSchema:()=>v.ResourceOutputSchema,RoleSchema:()=>f.RoleSchema,ToolInterruptError:()=>_.ToolInterruptError,asTool:()=>_.asTool,checkOperation:()=>u.checkOperation,defineHelper:()=>g.defineHelper,defineInterrupt:()=>_.defineInterrupt,definePartial:()=>g.definePartial,definePrompt:()=>g.definePrompt,defineResource:()=>v.defineResource,defineTool:()=>_.defineTool,dynamicResource:()=>v.dynamicResource,embed:()=>p.embed,embedderActionMetadata:()=>p.embedderActionMetadata,embedderRef:()=>p.embedderRef,evaluate:()=>d.evaluate,evaluatorRef:()=>d.evaluatorRef,generate:()=>h.generate,generateOperation:()=>h.generateOperation,generateStream:()=>h.generateStream,index:()=>b.index,indexerRef:()=>b.indexerRef,isDynamicResourceAction:()=>v.isDynamicResourceAction,isExecutablePrompt:()=>g.isExecutablePrompt,loadPromptFolder:()=>g.loadPromptFolder,modelActionMetadata:()=>f.modelActionMetadata,modelRef:()=>f.modelRef,prompt:()=>g.prompt,rerank:()=>y.rerank,rerankerRef:()=>y.rerankerRef,retrieve:()=>b.retrieve,retrieverRef:()=>b.retrieverRef,tagAsPreamble:()=>h.tagAsPreamble,toGenerateRequest:()=>h.toGenerateRequest}),e.exports=s(n({},"__esModule",{value:!0}),l);var u=r(88522),c=r(40101),p=r(15624),d=r(90911),h=r(87963),m=r(68073),f=r(58799),g=r(92426),y=r(35236),v=r(31440),b=r(8404),_=r(71622);((e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")))(l,r(43639),e.exports)},57481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractAsyncHooksContextManager=void 0;let n=r(94735),o=["addListener","on","once","prependListener","prependOnceListener"];class i{constructor(){this._kOtListeners=Symbol("OtListeners"),this._wrapped=!1}bind(e,t){return t instanceof n.EventEmitter?this._bindEventEmitter(e,t):"function"==typeof t?this._bindFunction(e,t):t}_bindFunction(e,t){let r=this,n=function(...n){return r.with(e,()=>t.apply(this,n))};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),n}_bindEventEmitter(e,t){return void 0!==this._getPatchMap(t)||(this._createPatchMap(t),o.forEach(r=>{void 0!==t[r]&&(t[r]=this._patchAddListener(t,t[r],e))}),"function"==typeof t.removeListener&&(t.removeListener=this._patchRemoveListener(t,t.removeListener)),"function"==typeof t.off&&(t.off=this._patchRemoveListener(t,t.off)),"function"==typeof t.removeAllListeners&&(t.removeAllListeners=this._patchRemoveAllListeners(t,t.removeAllListeners))),t}_patchRemoveListener(e,t){let r=this;return function(n,o){var i;let a=null==(i=r._getPatchMap(e))?void 0:i[n];if(void 0===a)return t.call(this,n,o);let s=a.get(o);return t.call(this,n,s||o)}}_patchRemoveAllListeners(e,t){let r=this;return function(n){let o=r._getPatchMap(e);return void 0!==o&&(0==arguments.length?r._createPatchMap(e):void 0!==o[n]&&delete o[n]),t.apply(this,arguments)}}_patchAddListener(e,t,r){let n=this;return function(o,i){if(n._wrapped)return t.call(this,o,i);let a=n._getPatchMap(e);void 0===a&&(a=n._createPatchMap(e));let s=a[o];void 0===s&&(s=new WeakMap,a[o]=s);let l=n.bind(r,i);s.set(i,l),n._wrapped=!0;try{return t.call(this,o,l)}finally{n._wrapped=!1}}}_createPatchMap(e){let t=Object.create(null);return e[this._kOtListeners]=t,t}_getPatchMap(e){return e[this._kOtListeners]}}t.AbstractAsyncHooksContextManager=i},57557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(32165),o=r(62417),i=r(45659),a=r(96257),s=r(58180);t.default=[n.default,o.default,(0,i.default)(),a.default,s.metadataVocabulary,s.contentVocabulary]},57634:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Aggregation:()=>X,AggregationTemporality:()=>i.h,ConsoleMetricExporter:()=>ek,DataPointType:()=>a.n,DefaultAggregation:()=>ei,DropAggregation:()=>Q,ExplicitBucketHistogramAggregation:()=>en,ExponentialHistogramAggregation:()=>eo,HistogramAggregation:()=>er,InMemoryMetricExporter:()=>eP,InstrumentType:()=>o,LastValueAggregation:()=>et,MeterProvider:()=>tN,MetricReader:()=>ev,PeriodicExportingMetricReader:()=>eN,SumAggregation:()=>ee,TimeoutError:()=>g,View:()=>tR});var n,o,i=r(73888),a=r(58660),s=r(86713),l=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},p=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},d=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function m(e){return null!=e}function f(e){var t=Object.keys(e);return 0===t.length?"":JSON.stringify((t=t.sort()).map(function(t){return[t,e[t]]}))}var g=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return l(t,e),t}(Error);function y(e,t){var r;return Promise.race([e,new Promise(function(e,n){r=setTimeout(function(){n(new g("Operation timed out."))},t)})]).then(function(e){return clearTimeout(r),e},function(e){throw clearTimeout(r),e})}function v(e){return"rejected"===e.status}function b(e,t){var r=[];return e.forEach(function(e){r.push.apply(r,d([],p(t(e)),!1))}),r}!function(e){e[e.DROP=0]="DROP",e[e.SUM=1]="SUM",e[e.LAST_VALUE=2]="LAST_VALUE",e[e.HISTOGRAM=3]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"}(n||(n={}));var _=function(){function e(){this.kind=n.DROP}return e.prototype.createAccumulation=function(){},e.prototype.merge=function(e,t){},e.prototype.diff=function(e,t){},e.prototype.toMetricData=function(e,t,r,n){},e}(),E=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},S=function(){function e(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=!1),this.startTime=e,this.monotonic=t,this._current=r,this.reset=n}return e.prototype.record=function(e){this.monotonic&&e<0||(this._current+=e)},e.prototype.setStartTime=function(e){this.startTime=e},e.prototype.toPointValue=function(){return this._current},e}(),x=function(){function e(e){this.monotonic=e,this.kind=n.SUM}return e.prototype.createAccumulation=function(e){return new S(e,this.monotonic)},e.prototype.merge=function(e,t){var r=e.toPointValue(),n=t.toPointValue();return t.reset?new S(t.startTime,this.monotonic,n,t.reset):new S(e.startTime,this.monotonic,r+n)},e.prototype.diff=function(e,t){var r=e.toPointValue(),n=t.toPointValue();return this.monotonic&&r>n?new S(t.startTime,this.monotonic,n,!0):new S(t.startTime,this.monotonic,n-r)},e.prototype.toMetricData=function(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:a.n.SUM,dataPoints:r.map(function(e){var t=E(e,2),r=t[0],o=t[1];return{attributes:r,startTime:o.startTime,endTime:n,value:o.toPointValue()}}),isMonotonic:this.monotonic}},e}(),w=r(18803),T=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},A=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=[0,0]),this.startTime=e,this._current=t,this.sampleTime=r}return e.prototype.record=function(e){this._current=e,this.sampleTime=(0,w.lg)(Date.now())},e.prototype.setStartTime=function(e){this.startTime=e},e.prototype.toPointValue=function(){return this._current},e}(),O=function(){function e(){this.kind=n.LAST_VALUE}return e.prototype.createAccumulation=function(e){return new A(e)},e.prototype.merge=function(e,t){var r=(0,w.w_)(t.sampleTime)>=(0,w.w_)(e.sampleTime)?t:e;return new A(e.startTime,r.toPointValue(),r.sampleTime)},e.prototype.diff=function(e,t){var r=(0,w.w_)(t.sampleTime)>=(0,w.w_)(e.sampleTime)?t:e;return new A(t.startTime,r.toPointValue(),r.sampleTime)},e.prototype.toMetricData=function(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:a.n.GAUGE,dataPoints:r.map(function(e){var t=T(e,2),r=t[0],o=t[1];return{attributes:r,startTime:o.startTime,endTime:n,value:o.toPointValue()}})}},e}(),N=r(84217);function P(e,t,r){var n,o,i,a;return null==e.match(C)&&s.s.warn('Invalid metric name: "'+e+'". The metric name should be a ASCII string with a length no greater than 255 characters.'),{name:e,type:t,description:null!=(n=null==r?void 0:r.description)?n:"",unit:null!=(o=null==r?void 0:r.unit)?o:"",valueType:null!=(i=null==r?void 0:r.valueType)?i:N.e.DOUBLE,advice:null!=(a=null==r?void 0:r.advice)?a:{}}}!function(e){e.COUNTER="COUNTER",e.GAUGE="GAUGE",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"}(o||(o={}));var C=/^[a-z][a-z0-9_.\-/]{0,254}$/i,k=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},I=function(){function e(e,t,r,n){var o;void 0===r&&(r=!0),void 0===n&&((o=t.map(function(){return 0})).push(0),n={buckets:{boundaries:t,counts:o},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}),this.startTime=e,this._boundaries=t,this._recordMinMax=r,this._current=n}return e.prototype.record=function(e){if(!Number.isNaN(e)){this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);var t=function(e,t){for(var r=0,n=e.length-1;n-r>1;){var o=Math.trunc((n+r)/2);e[o]<=t?r=o:n=o-1}return e[n]<=t?n:e[r]<=t?r:-1}(this._boundaries,e);this._current.buckets.counts[t+1]+=1}},e.prototype.setStartTime=function(e){this.startTime=e},e.prototype.toPointValue=function(){return this._current},e}(),D=function(){function e(e,t){this._boundaries=e,this._recordMinMax=t,this.kind=n.HISTOGRAM}return e.prototype.createAccumulation=function(e){return new I(e,this._boundaries,this._recordMinMax)},e.prototype.merge=function(e,t){for(var r=e.toPointValue(),n=t.toPointValue(),o=r.buckets.counts,i=n.buckets.counts,a=Array(o.length),s=0;s<o.length;s++)a[s]=o[s]+i[s];var l=1/0,u=-1/0;return this._recordMinMax&&(r.hasMinMax&&n.hasMinMax?(l=Math.min(r.min,n.min),u=Math.max(r.max,n.max)):r.hasMinMax?(l=r.min,u=r.max):n.hasMinMax&&(l=n.min,u=n.max)),new I(e.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:a},count:r.count+n.count,sum:r.sum+n.sum,hasMinMax:this._recordMinMax&&(r.hasMinMax||n.hasMinMax),min:l,max:u})},e.prototype.diff=function(e,t){for(var r=e.toPointValue(),n=t.toPointValue(),o=r.buckets.counts,i=n.buckets.counts,a=Array(o.length),s=0;s<o.length;s++)a[s]=i[s]-o[s];return new I(t.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:a},count:n.count-r.count,sum:n.sum-r.sum,hasMinMax:!1,min:1/0,max:-1/0})},e.prototype.toMetricData=function(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:a.n.HISTOGRAM,dataPoints:r.map(function(t){var r=k(t,2),i=r[0],a=r[1],s=a.toPointValue(),l=e.type===o.GAUGE||e.type===o.UP_DOWN_COUNTER||e.type===o.OBSERVABLE_GAUGE||e.type===o.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:i,startTime:a.startTime,endTime:n,value:{min:s.hasMinMax?s.min:void 0,max:s.hasMinMax?s.max:void 0,sum:l?void 0:s.sum,buckets:s.buckets,count:s.count}}})}},e}(),R=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},L=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},M=function(){function e(e,t,r,n){void 0===e&&(e=new j),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.backing=e,this.indexBase=t,this.indexStart=r,this.indexEnd=n}return Object.defineProperty(e.prototype,"offset",{get:function(){return this.indexStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return 0===this.backing.length||this.indexEnd===this.indexStart&&0===this.at(0)?0:this.indexEnd-this.indexStart+1},enumerable:!1,configurable:!0}),e.prototype.counts=function(){var e=this;return Array.from({length:this.length},function(t,r){return e.at(r)})},e.prototype.at=function(e){var t=this.indexBase-this.indexStart;return e<t&&(e+=this.backing.length),e-=t,this.backing.countAt(e)},e.prototype.incrementBucket=function(e,t){this.backing.increment(e,t)},e.prototype.decrementBucket=function(e,t){this.backing.decrement(e,t)},e.prototype.trim=function(){for(var e=0;e<this.length;e++)if(0!==this.at(e)){this.indexStart+=e;break}else if(e===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(var e=this.length-1;e>=0;e--)if(0!==this.at(e)){this.indexEnd-=this.length-e-1;break}this._rotate()},e.prototype.downscale=function(e){this._rotate();for(var t=1+this.indexEnd-this.indexStart,r=1<<e,n=0,o=0,i=this.indexStart;i<=this.indexEnd;){var a=i%r;a<0&&(a+=r);for(var s=a;s<r&&n<t;s++)this._relocateBucket(o,n),n++,i++;o++}this.indexStart>>=e,this.indexEnd>>=e,this.indexBase=this.indexStart},e.prototype.clone=function(){return new e(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)},e.prototype._rotate=function(){var e=this.indexBase-this.indexStart;0!==e&&(e>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,e),this.backing.reverse(e,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+e)),this.indexBase=this.indexStart)},e.prototype._relocateBucket=function(e,t){e!==t&&this.incrementBucket(e,this.backing.emptyBucket(t))},e}(),j=function(){function e(e){void 0===e&&(e=[0]),this._counts=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this._counts.length},enumerable:!1,configurable:!0}),e.prototype.countAt=function(e){return this._counts[e]},e.prototype.growTo=function(e,t,r){var n=Array(e).fill(0);n.splice.apply(n,L([r,this._counts.length-t],R(this._counts.slice(t)),!1)),n.splice.apply(n,L([0,t],R(this._counts.slice(0,t)),!1)),this._counts=n},e.prototype.reverse=function(e,t){for(var r=Math.floor((e+t)/2)-e,n=0;n<r;n++){var o=this._counts[e+n];this._counts[e+n]=this._counts[t-n-1],this._counts[t-n-1]=o}},e.prototype.emptyBucket=function(e){var t=this._counts[e];return this._counts[e]=0,t},e.prototype.increment=function(e,t){this._counts[e]+=t},e.prototype.decrement=function(e,t){this._counts[e]>=t?this._counts[e]-=t:this._counts[e]=0},e.prototype.clone=function(){return new e(L([],R(this._counts),!1))},e}();function U(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e),((0x7ff00000&t.getUint32(0))>>20)-1023}function F(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e),(1048575&t.getUint32(0))*0x100000000+t.getUint32(4)}function $(e,t){return 0===e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||Number.isNaN(e)?e:e*Math.pow(2,t)}var B=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(Error),z=function(){function e(e){this._shift=-e}return e.prototype.mapToIndex=function(e){return e<22250738585072014e-324?this._minNormalLowerBoundaryIndex():U(e)+this._rightShift(F(e)-1,52)>>this._shift},e.prototype.lowerBoundary=function(e){var t=this._minNormalLowerBoundaryIndex();if(e<t)throw new V("underflow: "+e+" is < minimum lower boundary: "+t);var r=this._maxNormalLowerBoundaryIndex();if(e>r)throw new V("overflow: "+e+" is > maximum lower boundary: "+r);return $(1,e<<this._shift)},Object.defineProperty(e.prototype,"scale",{get:function(){return 0===this._shift?0:-this._shift},enumerable:!1,configurable:!0}),e.prototype._minNormalLowerBoundaryIndex=function(){var e=-1022>>this._shift;return this._shift<2&&e--,e},e.prototype._maxNormalLowerBoundaryIndex=function(){return 1023>>this._shift},e.prototype._rightShift=function(e,t){return Math.floor(e*Math.pow(2,-t))},e}(),G=function(){function e(e){this._scale=e,this._scaleFactor=$(Math.LOG2E,e),this._inverseFactor=$(Math.LN2,-e)}return e.prototype.mapToIndex=function(e){if(e<=22250738585072014e-324)return this._minNormalLowerBoundaryIndex()-1;if(0===F(e))return(U(e)<<this._scale)-1;var t=Math.floor(Math.log(e)*this._scaleFactor),r=this._maxNormalLowerBoundaryIndex();return t>=r?r:t},e.prototype.lowerBoundary=function(e){var t=this._maxNormalLowerBoundaryIndex();if(e>=t){if(e===t)return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor);throw new V("overflow: "+e+" is > maximum lower boundary: "+t)}var r=this._minNormalLowerBoundaryIndex();if(e<=r){if(e===r)return 22250738585072014e-324;if(e===r-1)return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2;throw new V("overflow: "+e+" is < minimum lower boundary: "+r)}return Math.exp(e*this._inverseFactor)},Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),e.prototype._minNormalLowerBoundaryIndex=function(){return -1022<<this._scale},e.prototype._maxNormalLowerBoundaryIndex=function(){return(1024<<this._scale)-1},e}(),H=Array.from({length:31},function(e,t){return t>10?new G(t-10):new z(t-10)});function q(e){if(e>20||e<-10)throw new V("expected scale >= -10 && <= 20, got: "+e);return H[e+10]}var K=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Z=function(){function e(e,t){this.low=e,this.high=t}return e.combine=function(t,r){return new e(Math.min(t.low,r.low),Math.max(t.high,r.high))},e}(),Y=function(){function e(e,t,r,n,o,i,a,l,u,c,p){void 0===t&&(t=160),void 0===r&&(r=!0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=Number.POSITIVE_INFINITY),void 0===l&&(l=Number.NEGATIVE_INFINITY),void 0===u&&(u=new M),void 0===c&&(c=new M),void 0===p&&(p=q(20)),this.startTime=e,this._maxSize=t,this._recordMinMax=r,this._sum=n,this._count=o,this._zeroCount=i,this._min=a,this._max=l,this._positive=u,this._negative=c,this._mapping=p,this._maxSize<2&&(s.s.warn("Exponential Histogram Max Size set to "+this._maxSize+",                 changing to the minimum size of: 2"),this._maxSize=2)}return e.prototype.record=function(e){this.updateByIncrement(e,1)},e.prototype.setStartTime=function(e){this.startTime=e},e.prototype.toPointValue=function(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}},Object.defineProperty(e.prototype,"sum",{get:function(){return this._sum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zeroCount",{get:function(){return this._zeroCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._count===this._zeroCount?0:this._mapping.scale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positive",{get:function(){return this._positive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"negative",{get:function(){return this._negative},enumerable:!1,configurable:!0}),e.prototype.updateByIncrement=function(e,t){if(!Number.isNaN(e)){if(e>this._max&&(this._max=e),e<this._min&&(this._min=e),this._count+=t,0===e){this._zeroCount+=t;return}this._sum+=e*t,e>0?this._updateBuckets(this._positive,e,t):this._updateBuckets(this._negative,-e,t)}},e.prototype.merge=function(e){0===this._count?(this._min=e.min,this._max=e.max):0!==e.count&&(e.min<this.min&&(this._min=e.min),e.max>this.max&&(this._max=e.max)),this.startTime=e.startTime,this._sum+=e.sum,this._count+=e.count,this._zeroCount+=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._mergeBuckets(this.positive,e,e.positive,t),this._mergeBuckets(this.negative,e,e.negative,t)},e.prototype.diff=function(e){this._min=1/0,this._max=-1/0,this._sum-=e.sum,this._count-=e.count,this._zeroCount-=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._diffBuckets(this.positive,e,e.positive,t),this._diffBuckets(this.negative,e,e.negative,t)},e.prototype.clone=function(){return new e(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)},e.prototype._updateBuckets=function(e,t,r){var n=this._mapping.mapToIndex(t),o=!1,i=0,a=0;if(0===e.length?(e.indexStart=n,e.indexEnd=e.indexStart,e.indexBase=e.indexStart):n<e.indexStart&&e.indexEnd-n>=this._maxSize?(o=!0,a=n,i=e.indexEnd):n>e.indexEnd&&n-e.indexStart>=this._maxSize&&(o=!0,a=e.indexStart,i=n),o){var s=this._changeScale(i,a);this._downscale(s),n=this._mapping.mapToIndex(t)}this._incrementIndexBy(e,n,r)},e.prototype._incrementIndexBy=function(e,t,r){if(0!==r){if(0===e.length&&(e.indexStart=e.indexEnd=e.indexBase=t),t<e.indexStart){var n=e.indexEnd-t;n>=e.backing.length&&this._grow(e,n+1),e.indexStart=t}else if(t>e.indexEnd){var n=t-e.indexStart;n>=e.backing.length&&this._grow(e,n+1),e.indexEnd=t}var o=t-e.indexBase;o<0&&(o+=e.backing.length),e.incrementBucket(o,r)}},e.prototype._grow=function(e,t){var r,n=e.backing.length,o=e.indexBase-e.indexStart,i=(r=t,r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,++r);i>this._maxSize&&(i=this._maxSize);var a=i-o;e.backing.growTo(i,n-o,a)},e.prototype._changeScale=function(e,t){for(var r=0;e-t>=this._maxSize;)e>>=1,t>>=1,r++;return r},e.prototype._downscale=function(e){if(0!==e){if(e<0)throw Error("impossible change of scale: "+this.scale);var t=this._mapping.scale-e;this._positive.downscale(e),this._negative.downscale(e),this._mapping=q(t)}},e.prototype._minScale=function(e){var t=Math.min(this.scale,e.scale),r=Z.combine(this._highLowAtScale(this.positive,this.scale,t),this._highLowAtScale(e.positive,e.scale,t)),n=Z.combine(this._highLowAtScale(this.negative,this.scale,t),this._highLowAtScale(e.negative,e.scale,t));return Math.min(t-this._changeScale(r.high,r.low),t-this._changeScale(n.high,n.low))},e.prototype._highLowAtScale=function(e,t,r){if(0===e.length)return new Z(0,-1);var n=t-r;return new Z(e.indexStart>>n,e.indexEnd>>n)},e.prototype._mergeBuckets=function(e,t,r,n){for(var o=r.offset,i=t.scale-n,a=0;a<r.length;a++)this._incrementIndexBy(e,o+a>>i,r.at(a))},e.prototype._diffBuckets=function(e,t,r,n){for(var o=r.offset,i=t.scale-n,a=0;a<r.length;a++){var s=(o+a>>i)-e.indexBase;s<0&&(s+=e.backing.length),e.decrementBucket(s,r.at(a))}e.trim()},e}(),J=function(){function e(e,t){this._maxSize=e,this._recordMinMax=t,this.kind=n.EXPONENTIAL_HISTOGRAM}return e.prototype.createAccumulation=function(e){return new Y(e,this._maxSize,this._recordMinMax)},e.prototype.merge=function(e,t){var r=t.clone();return r.merge(e),r},e.prototype.diff=function(e,t){var r=t.clone();return r.diff(e),r},e.prototype.toMetricData=function(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:a.n.EXPONENTIAL_HISTOGRAM,dataPoints:r.map(function(t){var r=K(t,2),i=r[0],a=r[1],s=a.toPointValue(),l=e.type===o.GAUGE||e.type===o.UP_DOWN_COUNTER||e.type===o.OBSERVABLE_GAUGE||e.type===o.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:i,startTime:a.startTime,endTime:n,value:{min:s.hasMinMax?s.min:void 0,max:s.hasMinMax?s.max:void 0,sum:l?void 0:s.sum,positive:{offset:s.positive.offset,bucketCounts:s.positive.bucketCounts},negative:{offset:s.negative.offset,bucketCounts:s.negative.bucketCounts},count:s.count,scale:s.scale,zeroCount:s.zeroCount}}})}},e}(),W=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X=function(){function e(){}return e.Drop=function(){return ea},e.Sum=function(){return es},e.LastValue=function(){return el},e.Histogram=function(){return eu},e.ExponentialHistogram=function(){return ec},e.Default=function(){return ep},e}(),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.createAggregator=function(e){return t.DEFAULT_INSTANCE},t.DEFAULT_INSTANCE=new _,t}(X),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.createAggregator=function(e){switch(e.type){case o.COUNTER:case o.OBSERVABLE_COUNTER:case o.HISTOGRAM:return t.MONOTONIC_INSTANCE;default:return t.NON_MONOTONIC_INSTANCE}},t.MONOTONIC_INSTANCE=new x(!0),t.NON_MONOTONIC_INSTANCE=new x(!1),t}(X),et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.createAggregator=function(e){return t.DEFAULT_INSTANCE},t.DEFAULT_INSTANCE=new O,t}(X),er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.createAggregator=function(e){return t.DEFAULT_INSTANCE},t.DEFAULT_INSTANCE=new D([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0),t}(X),en=function(e){function t(t,r){void 0===r&&(r=!0);var n=e.call(this)||this;if(n._recordMinMax=r,null==t)throw Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");var o=(t=(t=t.concat()).sort(function(e,t){return e-t})).lastIndexOf(-1/0),i=t.indexOf(1/0);return -1===i&&(i=void 0),n._boundaries=t.slice(o+1,i),n}return W(t,e),t.prototype.createAggregator=function(e){return new D(this._boundaries,this._recordMinMax)},t}(X),eo=function(e){function t(t,r){void 0===t&&(t=160),void 0===r&&(r=!0);var n=e.call(this)||this;return n._maxSize=t,n._recordMinMax=r,n}return W(t,e),t.prototype.createAggregator=function(e){return new J(this._maxSize,this._recordMinMax)},t}(X),ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._resolve=function(e){switch(e.type){case o.COUNTER:case o.UP_DOWN_COUNTER:case o.OBSERVABLE_COUNTER:case o.OBSERVABLE_UP_DOWN_COUNTER:return es;case o.GAUGE:case o.OBSERVABLE_GAUGE:return el;case o.HISTOGRAM:if(e.advice.explicitBucketBoundaries)return new en(e.advice.explicitBucketBoundaries);return eu}return s.s.warn("Unable to recognize instrument type: "+e.type),ea},t.prototype.createAggregator=function(e){return this._resolve(e).createAggregator(e)},t}(X),ea=new Q,es=new ee,el=new et,eu=new er,ec=new eo,ep=new ei,ed=function(e){return X.Default()},eh=function(e){return i.h.CUMULATIVE},em=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},ef=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},eg=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ey=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},ev=function(){function e(e){var t,r,n;this._shutdown=!1,this._aggregationSelector=null!=(t=null==e?void 0:e.aggregationSelector)?t:ed,this._aggregationTemporalitySelector=null!=(r=null==e?void 0:e.aggregationTemporalitySelector)?r:eh,this._metricProducers=null!=(n=null==e?void 0:e.metricProducers)?n:[]}return e.prototype.setMetricProducer=function(e){if(this._sdkMetricProducer)throw Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=e,this.onInitialized()},e.prototype.selectAggregation=function(e){return this._aggregationSelector(e)},e.prototype.selectAggregationTemporality=function(e){return this._aggregationTemporalitySelector(e)},e.prototype.onInitialized=function(){},e.prototype.collect=function(e){return em(this,void 0,void 0,function(){var t,r,n,o;return ef(this,function(i){switch(i.label){case 0:if(void 0===this._sdkMetricProducer)throw Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw Error("MetricReader is shutdown");return[4,Promise.all(ey([this._sdkMetricProducer.collect({timeoutMillis:null==e?void 0:e.timeoutMillis})],eg(this._metricProducers.map(function(t){return t.collect({timeoutMillis:null==e?void 0:e.timeoutMillis})})),!1))];case 1:return r=(t=eg.apply(void 0,[i.sent()]))[0],n=t.slice(1),o=r.errors.concat(b(n,function(e){return e.errors})),[2,{resourceMetrics:{resource:r.resourceMetrics.resource,scopeMetrics:r.resourceMetrics.scopeMetrics.concat(b(n,function(e){return e.resourceMetrics.scopeMetrics}))},errors:o}]}})})},e.prototype.shutdown=function(e){return em(this,void 0,void 0,function(){return ef(this,function(t){switch(t.label){case 0:if(this._shutdown)return s.s.error("Cannot call shutdown twice."),[2];if((null==e?void 0:e.timeoutMillis)!=null)return[3,2];return[4,this.onShutdown()];case 1:return t.sent(),[3,4];case 2:return[4,y(this.onShutdown(),e.timeoutMillis)];case 3:t.sent(),t.label=4;case 4:return this._shutdown=!0,[2]}})})},e.prototype.forceFlush=function(e){return em(this,void 0,void 0,function(){return ef(this,function(t){switch(t.label){case 0:if(this._shutdown)return s.s.warn("Cannot forceFlush on already shutdown MetricReader."),[2];if((null==e?void 0:e.timeoutMillis)!=null)return[3,2];return[4,this.onForceFlush()];case 1:case 3:return t.sent(),[2];case 2:return[4,y(this.onForceFlush(),e.timeoutMillis)]}})})},e}(),eb=r(987),e_=r(87535),eE=r(1037),eS=r(80235),ex=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ew=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},eT=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},eA=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},eO=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},eN=function(e){function t(t){var r,n,o,i,a=e.call(this,{aggregationSelector:null==(r=t.exporter.selectAggregation)?void 0:r.bind(t.exporter),aggregationTemporalitySelector:null==(n=t.exporter.selectAggregationTemporality)?void 0:n.bind(t.exporter),metricProducers:t.metricProducers})||this;if(void 0!==t.exportIntervalMillis&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(void 0!==t.exportTimeoutMillis&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(void 0!==t.exportTimeoutMillis&&void 0!==t.exportIntervalMillis&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");return a._exportInterval=null!=(o=t.exportIntervalMillis)?o:6e4,a._exportTimeout=null!=(i=t.exportTimeoutMillis)?i:3e4,a._exporter=t.exporter,a}return ex(t,e),t.prototype._runOnce=function(){return ew(this,void 0,void 0,function(){var e;return eT(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,y(this._doRun(),this._exportTimeout)];case 1:return t.sent(),[3,3];case 2:if((e=t.sent())instanceof g)return s.s.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout),[2];return(0,eb.s)(e),[3,3];case 3:return[2]}})})},t.prototype._doRun=function(){var e,t;return ew(this,void 0,void 0,function(){var r,n,o,i,a,l=this;return eT(this,function(u){switch(u.label){case 0:return[4,this.collect({timeoutMillis:this._exportTimeout})];case 1:if(n=(r=u.sent()).resourceMetrics,(o=r.errors).length>0&&(a=s.s).error.apply(a,eO(["PeriodicExportingMetricReader: metrics collection errors"],eA(o),!1)),i=function(){return ew(l,void 0,void 0,function(){var e;return eT(this,function(t){switch(t.label){case 0:return[4,e_.internal._export(this._exporter,n)];case 1:if((e=t.sent()).code!==eE.V.SUCCESS)throw Error("PeriodicExportingMetricReader: metrics export failed (error "+e.error+")");return[2]}})})},!n.resource.asyncAttributesPending)return[3,2];return null==(t=(e=n.resource).waitForAsyncAttributes)||t.call(e).then(i,function(e){return s.s.debug("Error while resolving async portion of resource: ",e)}),[3,4];case 2:return[4,i()];case 3:u.sent(),u.label=4;case 4:return[2]}})})},t.prototype.onInitialized=function(){var e=this;this._interval=setInterval(function(){e._runOnce()},this._exportInterval),(0,eS.K)(this._interval)},t.prototype.onForceFlush=function(){return ew(this,void 0,void 0,function(){return eT(this,function(e){switch(e.label){case 0:return[4,this._runOnce()];case 1:return e.sent(),[4,this._exporter.forceFlush()];case 2:return e.sent(),[2]}})})},t.prototype.onShutdown=function(){return ew(this,void 0,void 0,function(){return eT(this,function(e){switch(e.label){case 0:return this._interval&&clearInterval(this._interval),[4,this._exporter.shutdown()];case 1:return e.sent(),[2]}})})},t}(ev),eP=function(){function e(e){this._shutdown=!1,this._metrics=[],this._aggregationTemporality=e}return e.prototype.export=function(e,t){if(this._shutdown)return void setTimeout(function(){return t({code:eE.V.FAILED})},0);this._metrics.push(e),setTimeout(function(){return t({code:eE.V.SUCCESS})},0)},e.prototype.getMetrics=function(){return this._metrics},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.reset=function(){this._metrics=[]},e.prototype.selectAggregationTemporality=function(e){return this._aggregationTemporality},e.prototype.shutdown=function(){return this._shutdown=!0,Promise.resolve()},e}(),eC=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ek=function(){function e(e){var t;this._shutdown=!1,this._temporalitySelector=null!=(t=null==e?void 0:e.temporalitySelector)?t:eh}return e.prototype.export=function(t,r){return this._shutdown?void setImmediate(r,{code:eE.V.FAILED}):e._sendMetrics(t,r)},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.selectAggregationTemporality=function(e){return this._temporalitySelector(e)},e.prototype.shutdown=function(){return this._shutdown=!0,Promise.resolve()},e._sendMetrics=function(e,t){var r,n,o,i;try{for(var a=eC(e.scopeMetrics),s=a.next();!s.done;s=a.next()){var l=s.value;try{for(var u=(o=void 0,eC(l.metrics)),c=u.next();!c.done;c=u.next()){var p=c.value;console.dir({descriptor:p.descriptor,dataPointType:p.dataPointType,dataPoints:p.dataPoints},{depth:null})}}catch(e){o={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}t({code:eE.V.SUCCESS})},e}(),eI=r(80548),eD=r(86116),eR=function(){function e(){this._registeredViews=[]}return e.prototype.addView=function(e){this._registeredViews.push(e)},e.prototype.findViews=function(e,t){var r=this;return this._registeredViews.filter(function(n){return r._matchInstrument(n.instrumentSelector,e)&&r._matchMeter(n.meterSelector,t)})},e.prototype._matchInstrument=function(e,t){return(void 0===e.getType()||t.type===e.getType())&&e.getNameFilter().match(t.name)&&e.getUnitFilter().match(t.unit)},e.prototype._matchMeter=function(e,t){return e.getNameFilter().match(t.name)&&(void 0===t.version||e.getVersionFilter().match(t.version))&&(void 0===t.schemaUrl||e.getSchemaUrlFilter().match(t.schemaUrl))},e}(),eL=r(66061),eM=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ej=function(){function e(e,t){this._writableMetricStorage=e,this._descriptor=t}return e.prototype._record=function(e,t,r){if(void 0===t&&(t={}),void 0===r&&(r=eL._.active()),"number"!=typeof e)return void s.s.warn("non-number value provided to metric "+this._descriptor.name+": "+e);(this._descriptor.valueType!==N.e.INT||Number.isInteger(e)||(s.s.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),Number.isInteger(e=Math.trunc(e))))&&this._writableMetricStorage.record(e,t,r,(0,w.lg)(Date.now()))},e}(),eU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eM(t,e),t.prototype.add=function(e,t,r){this._record(e,t,r)},t}(ej),eF=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eM(t,e),t.prototype.add=function(e,t,r){if(e<0)return void s.s.warn("negative value provided to counter "+this._descriptor.name+": "+e);this._record(e,t,r)},t}(ej),e$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eM(t,e),t.prototype.record=function(e,t,r){this._record(e,t,r)},t}(ej),eB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eM(t,e),t.prototype.record=function(e,t,r){if(e<0)return void s.s.warn("negative value provided to histogram "+this._descriptor.name+": "+e);this._record(e,t,r)},t}(ej),eV=function(){function e(e,t,r){this._observableRegistry=r,this._descriptor=e,this._metricStorages=t}return e.prototype.addCallback=function(e){this._observableRegistry.addCallback(e,this)},e.prototype.removeCallback=function(e){this._observableRegistry.removeCallback(e,this)},e}(),ez=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eM(t,e),t}(eV),eG=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eM(t,e),t}(eV),eH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eM(t,e),t}(eV);function eq(e){return e instanceof eV}var eK=function(){function e(e){this._meterSharedState=e}return e.prototype.createGauge=function(e,t){var r=P(e,o.GAUGE,t);return new e$(this._meterSharedState.registerMetricStorage(r),r)},e.prototype.createHistogram=function(e,t){var r=P(e,o.HISTOGRAM,t);return new eB(this._meterSharedState.registerMetricStorage(r),r)},e.prototype.createCounter=function(e,t){var r=P(e,o.COUNTER,t);return new eF(this._meterSharedState.registerMetricStorage(r),r)},e.prototype.createUpDownCounter=function(e,t){var r=P(e,o.UP_DOWN_COUNTER,t);return new eU(this._meterSharedState.registerMetricStorage(r),r)},e.prototype.createObservableGauge=function(e,t){var r=P(e,o.OBSERVABLE_GAUGE,t),n=this._meterSharedState.registerAsyncMetricStorage(r);return new eG(r,n,this._meterSharedState.observableRegistry)},e.prototype.createObservableCounter=function(e,t){var r=P(e,o.OBSERVABLE_COUNTER,t),n=this._meterSharedState.registerAsyncMetricStorage(r);return new ez(r,n,this._meterSharedState.observableRegistry)},e.prototype.createObservableUpDownCounter=function(e,t){var r=P(e,o.OBSERVABLE_UP_DOWN_COUNTER,t),n=this._meterSharedState.registerAsyncMetricStorage(r);return new eH(r,n,this._meterSharedState.observableRegistry)},e.prototype.addBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)},e.prototype.removeBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)},e}(),eZ=function(){function e(e){this._instrumentDescriptor=e}return e.prototype.getInstrumentDescriptor=function(){return this._instrumentDescriptor},e.prototype.updateDescription=function(e){this._instrumentDescriptor=P(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})},e}(),eY=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eJ=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},eW=function(e){function t(){return e.call(this,f)||this}return eY(t,e),t}(function(){function e(e){this._hash=e,this._valueMap=new Map,this._keyMap=new Map}return e.prototype.get=function(e,t){return null!=t||(t=this._hash(e)),this._valueMap.get(t)},e.prototype.getOrDefault=function(e,t){var r=this._hash(e);if(this._valueMap.has(r))return this._valueMap.get(r);var n=t();return this._keyMap.has(r)||this._keyMap.set(r,e),this._valueMap.set(r,n),n},e.prototype.set=function(e,t,r){null!=r||(r=this._hash(e)),this._keyMap.has(r)||this._keyMap.set(r,e),this._valueMap.set(r,t)},e.prototype.has=function(e,t){return null!=t||(t=this._hash(e)),this._valueMap.has(t)},e.prototype.keys=function(){var e,t;return eJ(this,function(r){switch(r.label){case 0:t=(e=this._keyMap.entries()).next(),r.label=1;case 1:if(!0===t.done)return[3,3];return[4,[t.value[1],t.value[0]]];case 2:return r.sent(),t=e.next(),[3,1];case 3:return[2]}})},e.prototype.entries=function(){var e,t;return eJ(this,function(r){switch(r.label){case 0:t=(e=this._valueMap.entries()).next(),r.label=1;case 1:if(!0===t.done)return[3,3];return[4,[this._keyMap.get(t.value[0]),t.value[1],t.value[0]]];case 2:return r.sent(),t=e.next(),[3,1];case 3:return[2]}})},Object.defineProperty(e.prototype,"size",{get:function(){return this._valueMap.size},enumerable:!1,configurable:!0}),e}()),eX=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},eQ=function(){function e(e){this._aggregator=e,this._activeCollectionStorage=new eW,this._cumulativeMemoStorage=new eW}return e.prototype.record=function(e,t,r,n){var o=this,i=this._activeCollectionStorage.getOrDefault(t,function(){return o._aggregator.createAccumulation(n)});null==i||i.record(e)},e.prototype.batchCumulate=function(e,t){var r=this;Array.from(e.entries()).forEach(function(e){var n=eX(e,3),o=n[0],i=n[1],a=n[2],s=r._aggregator.createAccumulation(t);null==s||s.record(i);var l=s;if(r._cumulativeMemoStorage.has(o,a)){var u=r._cumulativeMemoStorage.get(o,a);l=r._aggregator.diff(u,s)}if(r._activeCollectionStorage.has(o,a)){var c=r._activeCollectionStorage.get(o,a);l=r._aggregator.merge(c,l)}r._cumulativeMemoStorage.set(o,s,a),r._activeCollectionStorage.set(o,l,a)})},e.prototype.collect=function(){var e=this._activeCollectionStorage;return this._activeCollectionStorage=new eW,e},e}(),e0=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},e1=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},e2=function(){function e(e,t){var r=this;this._aggregator=e,this._unreportedAccumulations=new Map,this._reportHistory=new Map,t.forEach(function(e){r._unreportedAccumulations.set(e,[])})}return e.prototype.buildMetrics=function(t,r,n,o){this._stashAccumulations(n);var a,s=this._getMergedUnreportedAccumulations(t),l=s;if(this._reportHistory.has(t)){var u=this._reportHistory.get(t),c=u.collectionTime;l=(a=u.aggregationTemporality)===i.h.CUMULATIVE?e.merge(u.accumulations,s,this._aggregator):e.calibrateStartTime(u.accumulations,s,c)}else a=t.selectAggregationTemporality(r.type);this._reportHistory.set(t,{accumulations:l,collectionTime:o,aggregationTemporality:a});var p=Array.from(l.entries());if(0!==p.length)return this._aggregator.toMetricData(r,a,p,o)},e.prototype._stashAccumulations=function(e){var t,r,n=this._unreportedAccumulations.keys();try{for(var o=e0(n),i=o.next();!i.done;i=o.next()){var a=i.value,s=this._unreportedAccumulations.get(a);void 0===s&&(s=[],this._unreportedAccumulations.set(a,s)),s.push(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},e.prototype._getMergedUnreportedAccumulations=function(t){var r,n,o=new eW,i=this._unreportedAccumulations.get(t);if(this._unreportedAccumulations.set(t,[]),void 0===i)return o;try{for(var a=e0(i),s=a.next();!s.done;s=a.next()){var l=s.value;o=e.merge(o,l,this._aggregator)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},e.merge=function(e,t,r){for(var n=t.entries(),o=n.next();!0!==o.done;){var i=e1(o.value,3),a=i[0],s=i[1],l=i[2];if(e.has(a,l)){var u=e.get(a,l),c=r.merge(u,s);e.set(a,c,l)}else e.set(a,s,l);o=n.next()}return e},e.calibrateStartTime=function(e,t,r){var n,o;try{for(var i=e0(e.keys()),a=i.next();!a.done;a=i.next()){var s=e1(a.value,2),l=s[0],u=s[1],c=t.get(l,u);null==c||c.setStartTime(r)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return t},e}(),e3=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e4=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},e5=function(e){function t(t,r,n,o){var i=e.call(this,t)||this;return i._attributesProcessor=n,i._deltaMetricStorage=new eQ(r),i._temporalMetricStorage=new e2(r,o),i}return e3(t,e),t.prototype.record=function(e,t){var r=this,n=new eW;Array.from(e.entries()).forEach(function(e){var t=e4(e,2),o=t[0],i=t[1];n.set(r._attributesProcessor.process(o),i)}),this._deltaMetricStorage.batchCumulate(n,t)},t.prototype.collect=function(e,t){var r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,this._instrumentDescriptor,r,t)},t}(eZ);function e8(e,t){var r="";return e.unit!==t.unit&&(r+="	- Unit '"+e.unit+"' does not match '"+t.unit+"'\n"),e.type!==t.type&&(r+="	- Type '"+e.type+"' does not match '"+t.type+"'\n"),e.valueType!==t.valueType&&(r+="	- Value Type '"+e.valueType+"' does not match '"+t.valueType+"'\n"),e.description!==t.description&&(r+="	- Description '"+e.description+"' does not match '"+t.description+"'\n"),r}function e6(e,t){var r,n;return e.valueType!==t.valueType?"	- use valueType '"+e.valueType+"' on instrument creation or use an instrument name other than '"+t.name+"'":e.unit!==t.unit?"	- use unit '"+e.unit+"' on instrument creation or use an instrument name other than '"+t.name+"'":e.type!==t.type?(r=JSON.stringify({name:t.name,type:t.type,unit:t.unit}),"	- create a new view with a name other than '"+e.name+"' and InstrumentSelector '"+r+"'"):e.description!==t.description?(n=JSON.stringify({name:t.name,type:t.type,unit:t.unit}),"	- create a new view with a name other than '"+e.name+"' and InstrumentSelector '"+n+"'\n    	- OR - create a new view with the name "+e.name+" and description '"+e.description+"' and InstrumentSelector "+n+"\n    	- OR - create a new view with the name "+t.name+" and description '"+e.description+"' and InstrumentSelector "+n):""}var e9=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},e7=function(){function e(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}return e.create=function(){return new e},e.prototype.getStorages=function(e){var t,r,n,o,i=[];try{for(var a=e9(this._sharedRegistry.values()),s=a.next();!s.done;s=a.next()){var l=s.value;i=i.concat(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}var u=this._perCollectorRegistry.get(e);if(null!=u)try{for(var c=e9(u.values()),p=c.next();!p.done;p=c.next()){var l=p.value;i=i.concat(l)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return i},e.prototype.register=function(e){this._registerStorage(e,this._sharedRegistry)},e.prototype.registerForCollector=function(e,t){var r=this._perCollectorRegistry.get(e);null==r&&(r=new Map,this._perCollectorRegistry.set(e,r)),this._registerStorage(t,r)},e.prototype.findOrUpdateCompatibleStorage=function(e){var t=this._sharedRegistry.get(e.name);return void 0===t?null:this._findOrUpdateCompatibleStorage(e,t)},e.prototype.findOrUpdateCompatibleCollectorStorage=function(e,t){var r=this._perCollectorRegistry.get(e);if(void 0===r)return null;var n=r.get(t.name);return void 0===n?null:this._findOrUpdateCompatibleStorage(t,n)},e.prototype._registerStorage=function(e,t){var r=e.getInstrumentDescriptor(),n=t.get(r.name);if(void 0===n)return void t.set(r.name,[e]);n.push(e)},e.prototype._findOrUpdateCompatibleStorage=function(e,t){var r,n,o=null;try{for(var i=e9(t),a=i.next();!a.done;a=i.next()){var l=a.value,u=l.getInstrumentDescriptor();!function(e,t){var r,n;return r=e.name,n=t.name,r.toLowerCase()===n.toLowerCase()&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}(u,e)?s.s.warn("A view or instrument with the name ",e.name," has already been registered and is incompatible with another registered view.\n","Details:\n",e8(u,e),"To resolve the conflict:\n",e6(u,e)):(u.description!==e.description&&(e.description.length>u.description.length&&l.updateDescription(e.description),s.s.warn("A view or instrument with the name ",e.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",e8(u,e),"The longer description will be used.\nTo resolve the conflict:",e6(u,e))),o=l)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},e}(),te=function(){function e(e){this._backingStorages=e}return e.prototype.record=function(e,t,r,n){this._backingStorages.forEach(function(o){o.record(e,t,r,n)})},e}(),tt=function(){function e(e,t){this._instrumentName=e,this._valueType=t,this._buffer=new eW}return e.prototype.observe=function(e,t){if(void 0===t&&(t={}),"number"!=typeof e)return void s.s.warn("non-number value provided to metric "+this._instrumentName+": "+e);(this._valueType!==N.e.INT||Number.isInteger(e)||(s.s.warn("INT value type cannot accept a floating-point value for "+this._instrumentName+", ignoring the fractional digits."),Number.isInteger(e=Math.trunc(e))))&&this._buffer.set(t,e)},e}(),tr=function(){function e(){this._buffer=new Map}return e.prototype.observe=function(e,t,r){if(void 0===r&&(r={}),eq(e)){var n=this._buffer.get(e);if(null==n&&(n=new eW,this._buffer.set(e,n)),"number"!=typeof t)return void s.s.warn("non-number value provided to metric "+e._descriptor.name+": "+t);(e._descriptor.valueType!==N.e.INT||Number.isInteger(t)||(s.s.warn("INT value type cannot accept a floating-point value for "+e._descriptor.name+", ignoring the fractional digits."),Number.isInteger(t=Math.trunc(t))))&&n.set(r,t)}},e}(),tn=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},to=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},ti=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ta=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},ts=function(){function e(){this._callbacks=[],this._batchCallbacks=[]}return e.prototype.addCallback=function(e,t){this._findCallback(e,t)>=0||this._callbacks.push({callback:e,instrument:t})},e.prototype.removeCallback=function(e,t){var r=this._findCallback(e,t);r<0||this._callbacks.splice(r,1)},e.prototype.addBatchCallback=function(e,t){var r=new Set(t.filter(eq));if(0===r.size)return void s.s.error("BatchObservableCallback is not associated with valid instruments",t);this._findBatchCallback(e,r)>=0||this._batchCallbacks.push({callback:e,instruments:r})},e.prototype.removeBatchCallback=function(e,t){var r=new Set(t.filter(eq)),n=this._findBatchCallback(e,r);n<0||this._batchCallbacks.splice(n,1)},e.prototype.observe=function(e,t){return tn(this,void 0,void 0,function(){var r,n;return to(this,function(o){switch(o.label){case 0:return r=this._observeCallbacks(e,t),n=this._observeBatchCallbacks(e,t),[4,function(e){return u(this,void 0,void 0,function(){var t=this;return c(this,function(r){return[2,Promise.all(e.map(function(e){return u(t,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e];case 1:return[2,{status:"fulfilled",value:t.sent()}];case 2:return[2,{status:"rejected",reason:t.sent()}];case 3:return[2]}})})}))]})})}(ta(ta([],ti(r),!1),ti(n),!1))];case 1:return[2,o.sent().filter(v).map(function(e){return e.reason})]}})})},e.prototype._observeCallbacks=function(e,t){var r=this;return this._callbacks.map(function(n){var o=n.callback,i=n.instrument;return tn(r,void 0,void 0,function(){var r,n;return to(this,function(a){switch(a.label){case 0:return n=Promise.resolve(o(r=new tt(i._descriptor.name,i._descriptor.valueType))),null!=t&&(n=y(n,t)),[4,n];case 1:return a.sent(),i._metricStorages.forEach(function(t){t.record(r._buffer,e)}),[2]}})})})},e.prototype._observeBatchCallbacks=function(e,t){var r=this;return this._batchCallbacks.map(function(n){var o=n.callback,i=n.instruments;return tn(r,void 0,void 0,function(){var r,n;return to(this,function(a){switch(a.label){case 0:return n=Promise.resolve(o(r=new tr)),null!=t&&(n=y(n,t)),[4,n];case 1:return a.sent(),i.forEach(function(t){var n=r._buffer.get(t);null!=n&&t._metricStorages.forEach(function(t){t.record(n,e)})}),[2]}})})})},e.prototype._findCallback=function(e,t){return this._callbacks.findIndex(function(r){return r.callback===e&&r.instrument===t})},e.prototype._findBatchCallback=function(e,t){return this._batchCallbacks.findIndex(function(r){return r.callback===e&&function(e,t){var r,n;if(e.size!==t.size)return!1;try{for(var o=h(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(!t.has(a))return!1}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!0}(r.instruments,t)})},e}(),tl=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tu=function(e){function t(t,r,n,o){var i=e.call(this,t)||this;return i._attributesProcessor=n,i._deltaMetricStorage=new eQ(r),i._temporalMetricStorage=new e2(r,o),i}return tl(t,e),t.prototype.record=function(e,t,r,n){t=this._attributesProcessor.process(t,r),this._deltaMetricStorage.record(e,t,r,n)},t.prototype.collect=function(e,t){var r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,this._instrumentDescriptor,r,t)},t}(eZ),tc=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tp=function(){function e(){}return e.Noop=function(){return tm},e}(),td=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tc(t,e),t.prototype.process=function(e,t){return e},t}(tp),th=function(e){function t(t){var r=e.call(this)||this;return r._allowedAttributeNames=t,r}return tc(t,e),t.prototype.process=function(e,t){var r=this,n={};return Object.keys(e).filter(function(e){return r._allowedAttributeNames.includes(e)}).forEach(function(t){return n[t]=e[t]}),n},t}(tp),tm=new td,tf=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},tg=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ty=function(){function e(e,t){this._meterProviderSharedState=e,this._instrumentationScope=t,this.metricStorageRegistry=new e7,this.observableRegistry=new ts,this.meter=new eK(this)}return e.prototype.registerMetricStorage=function(e){var t=this._registerMetricStorage(e,tu);return 1===t.length?t[0]:new te(t)},e.prototype.registerAsyncMetricStorage=function(e){return this._registerMetricStorage(e,e5)},e.prototype.collect=function(e,t,r){var n,o,i,a;return n=this,o=void 0,i=void 0,a=function(){var n,o,i;return tf(this,function(a){switch(a.label){case 0:return[4,this.observableRegistry.observe(t,null==r?void 0:r.timeoutMillis)];case 1:if(n=a.sent(),0===(o=this.metricStorageRegistry.getStorages(e)).length)return[2,null];if(0===(i=o.map(function(r){return r.collect(e,t)}).filter(m)).length)return[2,{errors:n}];return[2,{scopeMetrics:{scope:this._instrumentationScope,metrics:i},errors:n}]}})},new(i||(i=Promise))(function(e,t){function r(e){try{l(a.next(e))}catch(e){t(e)}}function s(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(r,s)}l((a=a.apply(n,o||[])).next())})},e.prototype._registerMetricStorage=function(e,t){var r=this,n=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope).map(function(n){var o,i,a={name:null!=(o=n.name)?o:e.name,description:null!=(i=n.description)?i:e.description,type:e.type,unit:e.unit,valueType:e.valueType,advice:e.advice},s=r.metricStorageRegistry.findOrUpdateCompatibleStorage(a);if(null!=s)return s;var l=n.aggregation.createAggregator(a),u=new t(a,l,n.attributesProcessor,r._meterProviderSharedState.metricCollectors);return r.metricStorageRegistry.register(u),u});if(0===n.length){var o=this._meterProviderSharedState.selectAggregations(e.type).map(function(n){var o=tg(n,2),i=o[0],a=o[1],s=r.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(i,e);if(null!=s)return s;var l=a.createAggregator(e),u=new t(e,l,tp.Noop(),[i]);return r.metricStorageRegistry.registerForCollector(i,u),u});n=n.concat(o)}return n},e}(),tv=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tb=function(){function e(e){this.resource=e,this.viewRegistry=new eR,this.metricCollectors=[],this.meterSharedStates=new Map}return e.prototype.getMeterSharedState=function(e){var t,r,n=e.name+":"+(null!=(t=e.version)?t:"")+":"+(null!=(r=e.schemaUrl)?r:""),o=this.meterSharedStates.get(n);return null==o&&(o=new ty(this,e),this.meterSharedStates.set(n,o)),o},e.prototype.selectAggregations=function(e){var t,r,n=[];try{for(var o=tv(this.metricCollectors),i=o.next();!i.done;i=o.next()){var a=i.value;n.push([a,a.selectAggregation(e)])}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e}(),t_=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},tE=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},tS=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},tx=function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},tw=function(){function e(e,t){this._sharedState=e,this._metricReader=t}return e.prototype.collect=function(e){return t_(this,void 0,void 0,function(){var t,r,n,o=this;return tE(this,function(i){switch(i.label){case 0:return t=(0,w.lg)(Date.now()),r=[],n=[],[4,Promise.all(Array.from(this._sharedState.meterSharedStates.values()).map(function(i){return t_(o,void 0,void 0,function(){var o;return tE(this,function(a){switch(a.label){case 0:return[4,i.collect(this,t,e)];case 1:return(null==(o=a.sent())?void 0:o.scopeMetrics)!=null&&r.push(o.scopeMetrics),(null==o?void 0:o.errors)!=null&&n.push.apply(n,tx([],tS(o.errors),!1)),[2]}})})}))];case 1:return i.sent(),[2,{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:r},errors:n}]}})})},e.prototype.forceFlush=function(e){return t_(this,void 0,void 0,function(){return tE(this,function(t){switch(t.label){case 0:return[4,this._metricReader.forceFlush(e)];case 1:return t.sent(),[2]}})})},e.prototype.shutdown=function(e){return t_(this,void 0,void 0,function(){return tE(this,function(t){switch(t.label){case 0:return[4,this._metricReader.shutdown(e)];case 1:return t.sent(),[2]}})})},e.prototype.selectAggregationTemporality=function(e){return this._metricReader.selectAggregationTemporality(e)},e.prototype.selectAggregation=function(e){return this._metricReader.selectAggregation(e)},e}(),tT=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},tA=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},tO=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tN=function(){function e(e){this._shutdown=!1;var t,r,n,o,i,a=eD.F.default().merge(null!=(i=null==e?void 0:e.resource)?i:eD.F.empty());if(this._sharedState=new tb(a),(null==e?void 0:e.views)!=null&&e.views.length>0)try{for(var s=tO(e.views),l=s.next();!l.done;l=s.next()){var u=l.value;this._sharedState.viewRegistry.addView(u)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}if((null==e?void 0:e.readers)!=null&&e.readers.length>0)try{for(var c=tO(e.readers),p=c.next();!p.done;p=c.next()){var d=p.value;this.addMetricReader(d)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}return e.prototype.getMeter=function(e,t,r){return(void 0===t&&(t=""),void 0===r&&(r={}),this._shutdown)?(s.s.warn("A shutdown MeterProvider cannot provide a Meter"),(0,eI.Ac)()):this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:r.schemaUrl}).meter},e.prototype.addMetricReader=function(e){var t=new tw(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)},e.prototype.shutdown=function(e){return tT(this,void 0,void 0,function(){return tA(this,function(t){switch(t.label){case 0:if(this._shutdown)return s.s.warn("shutdown may only be called once per MeterProvider"),[2];return this._shutdown=!0,[4,Promise.all(this._sharedState.metricCollectors.map(function(t){return t.shutdown(e)}))];case 1:return t.sent(),[2]}})})},e.prototype.forceFlush=function(e){return tT(this,void 0,void 0,function(){return tA(this,function(t){switch(t.label){case 0:if(this._shutdown)return s.s.warn("invalid attempt to force flush after MeterProvider shutdown"),[2];return[4,Promise.all(this._sharedState.metricCollectors.map(function(t){return t.forceFlush(e)}))];case 1:return t.sent(),[2]}})})},e}(),tP=/[\^$\\.+?()[\]{}|]/g,tC=function(){function e(t){"*"===t?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(e.escapePattern(t)))}return e.prototype.match=function(e){return!!this._matchAll||this._regexp.test(e)},e.escapePattern=function(e){return"^"+e.replace(tP,"\\$&").replace("*",".*")+"$"},e.hasWildcard=function(e){return e.includes("*")},e}(),tk=function(){function e(e){this._matchAll=void 0===e,this._pattern=e}return e.prototype.match=function(e){return!!this._matchAll||e===this._pattern},e}(),tI=function(){function e(e){var t;this._nameFilter=new tC(null!=(t=null==e?void 0:e.name)?t:"*"),this._type=null==e?void 0:e.type,this._unitFilter=new tk(null==e?void 0:e.unit)}return e.prototype.getType=function(){return this._type},e.prototype.getNameFilter=function(){return this._nameFilter},e.prototype.getUnitFilter=function(){return this._unitFilter},e}(),tD=function(){function e(e){this._nameFilter=new tk(null==e?void 0:e.name),this._versionFilter=new tk(null==e?void 0:e.version),this._schemaUrlFilter=new tk(null==e?void 0:e.schemaUrl)}return e.prototype.getNameFilter=function(){return this._nameFilter},e.prototype.getVersionFilter=function(){return this._versionFilter},e.prototype.getSchemaUrlFilter=function(){return this._schemaUrlFilter},e}(),tR=function(e){var t;if(null==e.instrumentName&&null==e.instrumentType&&null==e.instrumentUnit&&null==e.meterName&&null==e.meterVersion&&null==e.meterSchemaUrl)throw Error("Cannot create view with no selector arguments supplied");if(null!=e.name&&((null==e?void 0:e.instrumentName)==null||tC.hasWildcard(e.instrumentName)))throw Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");null!=e.attributeKeys?this.attributesProcessor=new th(e.attributeKeys):this.attributesProcessor=tp.Noop(),this.name=e.name,this.description=e.description,this.aggregation=null!=(t=e.aggregation)?t:X.Default(),this.instrumentSelector=new tI({name:e.instrumentName,type:e.instrumentType,unit:e.instrumentUnit}),this.meterSelector=new tD({name:e.meterName,version:e.meterVersion,schemaUrl:e.meterSchemaUrl})}},57837:(e,t,r)=>{"use strict";var n=r(12330),o=r(99122),i=r(46076);t.createNode=function(e,t,r){let a;if(o.isDocument(e)&&(e=e.contents),o.isNode(e))return e;if(o.isPair(e)){let t=r.schema[o.MAP].createNode?.(r.schema,null,r);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());let{aliasDuplicateObjects:s,onAnchor:l,onTagObj:u,schema:c,sourceObjects:p}=r;if(s&&e&&"object"==typeof e){if(a=p.get(e))return a.anchor??(a.anchor=l(e)),new n.Alias(a.anchor);a={anchor:null,node:null},p.set(e,a)}t?.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let d=function(e,t,r){if(t){let e=r.filter(e=>e.tag===t),n=e.find(e=>!e.format)??e[0];if(!n)throw Error(`Tag ${t} not found`);return n}return r.find(t=>t.identify?.(e)&&!t.format)}(e,t,c.tags);if(!d){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){let t=new i.Scalar(e);return a&&(a.node=t),t}d=e instanceof Map?c[o.MAP]:Symbol.iterator in Object(e)?c[o.SEQ]:c[o.MAP]}u&&(u(d),delete r.onTagObj);let h=d?.createNode?d.createNode(r.schema,e,r):"function"==typeof d?.nodeClass?.from?d.nodeClass.from(r.schema,e,r):new i.Scalar(e);return t?h.tag=t:d.default||(h.tag=d.tag),a&&(a.node=h),h}},57975:e=>{"use strict";e.exports=require("node:util")},58093:(e,t,r)=>{"use strict";t.__esModule=!0;var n=r(66112),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];console[t].apply(console,n)}}};t.default=o,e.exports=t.default},58180:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},58361:(e,t,r)=>{"use strict";let n=r(64487);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},58364:(e,t)=>{"use strict";t.applyReviver=function e(t,r,n,o){if(o&&"object"==typeof o)if(Array.isArray(o))for(let r=0,n=o.length;r<n;++r){let n=o[r],i=e(t,o,String(r),n);void 0===i?delete o[r]:i!==n&&(o[r]=i)}else if(o instanceof Map)for(let r of Array.from(o.keys())){let n=o.get(r),i=e(t,o,r,n);void 0===i?o.delete(r):i!==n&&o.set(r,i)}else if(o instanceof Set)for(let r of Array.from(o)){let n=e(t,o,r,r);void 0===n?o.delete(r):n!==r&&(o.delete(r),o.add(n))}else for(let[r,n]of Object.entries(o)){let i=e(t,o,r,n);void 0===i?delete o[r]:i!==n&&(o[r]=i)}return t.call(r,n,o)}},58417:e=>{"use strict";e.exports=JSON.parse('{"126":{"host":"smtp.126.com","port":465,"secure":true},"163":{"host":"smtp.163.com","port":465,"secure":true},"1und1":{"host":"smtp.1und1.de","port":465,"secure":true,"authMethod":"LOGIN"},"Aliyun":{"domains":["aliyun.com"],"host":"smtp.aliyun.com","port":465,"secure":true},"AOL":{"domains":["aol.com"],"host":"smtp.aol.com","port":587},"Bluewin":{"host":"smtpauths.bluewin.ch","domains":["bluewin.ch"],"port":465},"DebugMail":{"host":"debugmail.io","port":25},"DynectEmail":{"aliases":["Dynect"],"host":"smtp.dynect.net","port":25},"Ethereal":{"aliases":["ethereal.email"],"host":"smtp.ethereal.email","port":587},"FastMail":{"domains":["fastmail.fm"],"host":"smtp.fastmail.com","port":465,"secure":true},"Forward Email":{"aliases":["FE","ForwardEmail"],"domains":["forwardemail.net"],"host":"smtp.forwardemail.net","port":465,"secure":true},"Feishu Mail":{"aliases":["Feishu","FeishuMail"],"domains":["www.feishu.cn"],"host":"smtp.feishu.cn","port":465,"secure":true},"GandiMail":{"aliases":["Gandi","Gandi Mail"],"host":"mail.gandi.net","port":587},"Gmail":{"aliases":["Google Mail"],"domains":["gmail.com","googlemail.com"],"host":"smtp.gmail.com","port":465,"secure":true},"Godaddy":{"host":"smtpout.secureserver.net","port":25},"GodaddyAsia":{"host":"smtp.asia.secureserver.net","port":25},"GodaddyEurope":{"host":"smtp.europe.secureserver.net","port":25},"hot.ee":{"host":"mail.hot.ee"},"Hotmail":{"aliases":["Outlook","Outlook.com","Hotmail.com"],"domains":["hotmail.com","outlook.com"],"host":"smtp-mail.outlook.com","port":587},"iCloud":{"aliases":["Me","Mac"],"domains":["me.com","mac.com"],"host":"smtp.mail.me.com","port":587},"Infomaniak":{"host":"mail.infomaniak.com","domains":["ik.me","ikmail.com","etik.com"],"port":587},"Loopia":{"host":"mailcluster.loopia.se","port":465},"mail.ee":{"host":"smtp.mail.ee"},"Mail.ru":{"host":"smtp.mail.ru","port":465,"secure":true},"Mailcatch.app":{"host":"sandbox-smtp.mailcatch.app","port":2525},"Maildev":{"port":1025,"ignoreTLS":true},"Mailgun":{"host":"smtp.mailgun.org","port":465,"secure":true},"Mailjet":{"host":"in.mailjet.com","port":587},"Mailosaur":{"host":"mailosaur.io","port":25},"Mailtrap":{"host":"live.smtp.mailtrap.io","port":587},"Mandrill":{"host":"smtp.mandrillapp.com","port":587},"Naver":{"host":"smtp.naver.com","port":587},"One":{"host":"send.one.com","port":465,"secure":true},"OpenMailBox":{"aliases":["OMB","openmailbox.org"],"host":"smtp.openmailbox.org","port":465,"secure":true},"Outlook365":{"host":"smtp.office365.com","port":587,"secure":false},"OhMySMTP":{"host":"smtp.ohmysmtp.com","port":587,"secure":false},"Postmark":{"aliases":["PostmarkApp"],"host":"smtp.postmarkapp.com","port":2525},"Proton":{"aliases":["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],"domains":["proton.me","protonmail.com","pm.me","protonmail.ch"],"host":"smtp.protonmail.ch","port":587,"requireTLS":true},"qiye.aliyun":{"host":"smtp.mxhichina.com","port":"465","secure":true},"QQ":{"domains":["qq.com"],"host":"smtp.qq.com","port":465,"secure":true},"QQex":{"aliases":["QQ Enterprise"],"domains":["exmail.qq.com"],"host":"smtp.exmail.qq.com","port":465,"secure":true},"SendCloud":{"host":"smtp.sendcloud.net","port":2525},"SendGrid":{"host":"smtp.sendgrid.net","port":587},"SendinBlue":{"aliases":["Brevo"],"host":"smtp-relay.brevo.com","port":587},"SendPulse":{"host":"smtp-pulse.com","port":465,"secure":true},"SES":{"host":"email-smtp.us-east-1.amazonaws.com","port":465,"secure":true},"SES-US-EAST-1":{"host":"email-smtp.us-east-1.amazonaws.com","port":465,"secure":true},"SES-US-WEST-2":{"host":"email-smtp.us-west-2.amazonaws.com","port":465,"secure":true},"SES-EU-WEST-1":{"host":"email-smtp.eu-west-1.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTH-1":{"host":"email-smtp.ap-south-1.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-1":{"host":"email-smtp.ap-northeast-1.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-2":{"host":"email-smtp.ap-northeast-2.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-3":{"host":"email-smtp.ap-northeast-3.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTHEAST-1":{"host":"email-smtp.ap-southeast-1.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTHEAST-2":{"host":"email-smtp.ap-southeast-2.amazonaws.com","port":465,"secure":true},"Seznam":{"aliases":["Seznam Email"],"domains":["seznam.cz","email.cz","post.cz","spoluzaci.cz"],"host":"smtp.seznam.cz","port":465,"secure":true},"Sparkpost":{"aliases":["SparkPost","SparkPost Mail"],"domains":["sparkpost.com"],"host":"smtp.sparkpostmail.com","port":587,"secure":false},"Tipimail":{"host":"smtp.tipimail.com","port":587},"Yahoo":{"domains":["yahoo.com"],"host":"smtp.mail.yahoo.com","port":465,"secure":true},"Yandex":{"domains":["yandex.ru"],"host":"smtp.yandex.ru","port":465,"secure":true},"Zoho":{"host":"smtp.zoho.com","port":465,"secure":true,"authMethod":"LOGIN"}}')},58457:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{DEFAULT_FORMATS:()=>y,configureFormats:()=>v,defineFormat:()=>h,injectInstructions:()=>g,resolveFormat:()=>m,resolveInstructions:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(24912),u=r(1256),c=r(31183),p=r(76499),d=r(18478);function h(e,t,r){let{name:n,...o}=t,i={config:o,handler:r};return e.registerValue("format",n,i),i}async function m(e,t){if(t){if((t.jsonSchema||t.schema)&&!t.format)return e.lookupValue("format","json");if(t.format)return e.lookupValue("format",t.format)}}function f(e,t,r){return"string"==typeof r?r:!1===r?void 0:e?e.handler(t).instructions:void 0}function g(e,t){if(!t||e.find(e=>e.content.find(e=>e.metadata?.purpose==="output"&&!e.metadata?.pending)))return e;let r={text:t,metadata:{purpose:"output"}},n=e.findIndex(e=>"system"===e.role);if(n<0&&(n=e.map(e=>e.role).lastIndexOf("user")),n<0)return e;let o={...e[n],content:[...e[n].content]},i=o.content.findIndex(e=>e.metadata?.purpose==="output"&&e.metadata?.pending);i>0?o.content.splice(i,1,r):o.content.push(r);let a=[...e];return a.splice(n,1,o),a}let y=[c.jsonFormatter,l.arrayFormatter,d.textFormatter,u.enumFormatter,p.jsonlFormatter];function v(e){for(let t of y)h(e,{name:t.name,...t.config},t.handler)}},58459:(e,t,r)=>{"use strict";var n=r(99122),o=r(63715);function i(e){let t=new Set;return o.visit(e,{Value(e,r){r.anchor&&t.add(r.anchor)}}),t}function a(e,t){for(let r=1;;++r){let n=`${e}${r}`;if(!t.has(n))return n}}t.anchorIsValid=function(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){let t=JSON.stringify(e);throw Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0},t.anchorNames=i,t.createNodeAnchors=function(e,t){let r=[],o=new Map,s=null;return{onAnchor:n=>{r.push(n),s??(s=i(e));let o=a(t,s);return s.add(o),o},setAnchors:()=>{for(let e of r){let t=o.get(e);if("object"==typeof t&&t.anchor&&(n.isScalar(t.node)||n.isCollection(t.node)))t.node.anchor=t.anchor;else{let t=Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}}},sourceObjects:o}},t.findNewAnchor=a},58504:(e,t,r)=>{"use strict";r.d(t,{q:()=>o});var n=r(79646),o=r(28354).promisify(n.exec)},58592:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;let o=r(22964),i=r(34955);function a(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||"boolean"==typeof t)return;let o=n.RULES.keywords;for(let r in t)o[r]||m(e,`unknown keyword: "${r}"`)}function s(e,t){if("boolean"==typeof e)return!e;for(let r in e)if(t[r])return!0;return!1}function l(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function u(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(i,a,s,l)=>{let u=void 0===s?a:s instanceof o.Name?(a instanceof o.Name?e(i,a,s):t(i,a,s),s):a instanceof o.Name?(t(i,s,a),a):r(a,s);return l!==o.Name||u instanceof o.Name?u:n(i,u)}}function p(e,t){if(!0===t)return e.var("props",!0);let r=e.var("props",(0,o._)`{}`);return void 0!==t&&d(e,r,t),r}function d(e,t,r){Object.keys(r).forEach(r=>e.assign((0,o._)`${t}${(0,o.getProperty)(r)}`,!0))}t.toHash=function(e){let t={};for(let r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(a(e,t),!s(t,e.self.RULES.all))},t.checkUnknownRules=a,t.schemaHasRules=s,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(let r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,n,i){if(!i){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return(0,o._)`${r}`}return(0,o._)`${e}${t}${(0,o.getProperty)(n)}`},t.unescapeFragment=function(e){return u(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(l(e))},t.escapeJsonPointer=l,t.unescapeJsonPointer=u,t.eachItem=function(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,r)=>e.if((0,o._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,o._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,o._)`${r} || {}`).code((0,o._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,o._)`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,(0,o._)`${r} || {}`),d(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:p}),items:c({mergeNames:(e,t,r)=>e.if((0,o._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,o._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,o._)`${r} !== true`,()=>e.assign(r,!0===t||(0,o._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=p,t.setEvaluated=d;let h={};function m(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new i._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(n||(t.Type=n={})),t.getErrorPath=function(e,t,r){if(e instanceof o.Name){let i=t===n.Num;return r?i?(0,o._)`"[" + ${e} + "]"`:(0,o._)`"['" + ${e} + "']"`:i?(0,o._)`"/" + ${e}`:(0,o._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,o.getProperty)(e).toString():"/"+l(e)},t.checkStrictMode=m},58660:(e,t,r)=>{"use strict";var n;r.d(t,{n:()=>n}),function(e){e[e.HISTOGRAM=0]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",e[e.GAUGE=2]="GAUGE",e[e.SUM=3]="SUM"}(n||(n={}))},58668:(e,t)=>{"use strict";t.__esModule=!0;var r=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function n(e,t){var o=t&&t.loc,i=void 0,a=void 0,s=void 0,l=void 0;o&&(i=o.start.line,a=o.end.line,s=o.start.column,l=o.end.column,e+=" - "+i+":"+s);for(var u=Error.prototype.constructor.call(this,e),c=0;c<r.length;c++)this[r[c]]=u[r[c]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{o&&(this.lineNumber=i,this.endLineNumber=a,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=s,this.endColumn=l))}catch(e){}}n.prototype=Error(),t.default=n,e.exports=t.default},58789:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(25745),t),o(r(16911),t)},58799:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e},l={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(l,{CustomPartSchema:()=>h.CustomPartSchema,DataPartSchema:()=>h.DataPartSchema,MediaPartSchema:()=>h.MediaPartSchema,TextPartSchema:()=>h.TextPartSchema,ToolRequestPartSchema:()=>h.ToolRequestPartSchema,ToolResponsePartSchema:()=>h.ToolResponsePartSchema,defineBackgroundModel:()=>v,defineGenerateAction:()=>g.defineGenerateAction,defineModel:()=>y,getBasicUsageStats:()=>E,modelActionMetadata:()=>_,modelRef:()=>function e(t){let r={...t};return r.withConfig=r=>e({...t,config:r}),r.withVersion=r=>e({...t,version:r}),r},resolveModel:()=>x,simulateConstrainedGeneration:()=>f.simulateConstrainedGeneration}),e.exports=s(n({},"__esModule",{value:!0}),l);var u=r(83455),c=r(95566),p=r(72448),d=r(643),h=r(40101),m=r(93283),f=r(67062),g=r(52060);function y(e,t,r){let n=t.label||t.name,o=b(t),i=(0,u.defineAction)(e,{actionType:"model",name:t.name,description:n,inputSchema:m.GenerateRequestSchema,outputSchema:m.GenerateResponseSchema,metadata:{model:{label:n,customOptions:t.configSchema?(0,p.toJsonSchema)({schema:t.configSchema}):void 0,versions:t.versions,supports:t.supports}},use:o},(e,n)=>{let o=d.performance.now();return r(e,"v2"===t.apiVersion?n:n.streamingRequested?n.sendChunk:void 0).then(e=>({...e,latencyMs:d.performance.now()-o}))});return Object.assign(i,{__configSchema:t.configSchema||u.z.unknown()}),i}function v(e,t){let r=t.label||t.name,n=b(t),o=(0,u.defineBackgroundAction)(e,{actionType:"background-model",name:t.name,description:r,inputSchema:m.GenerateRequestSchema,outputSchema:m.GenerateResponseSchema,metadata:{model:{label:r,customOptions:t.configSchema?(0,p.toJsonSchema)({schema:t.configSchema}):void 0,versions:t.versions,supports:t.supports}},use:n,async start(e){let r=d.performance.now(),n=await t.start(e);return Object.assign(n,{latencyMs:d.performance.now()-r}),n},check:async e=>t.check(e),cancel:t.cancel?async e=>{if(!t.cancel)throw new u.GenkitError({status:"UNIMPLEMENTED",message:"cancel not implemented"});return t.cancel(e)}:void 0});return Object.assign(o,{__configSchema:t.configSchema||u.z.unknown()}),o}function b(e){let t=[...e.use||[],(0,f.validateSupport)(e)];e?.supports?.context||t.push((0,f.augmentWithContext)());let r=(0,f.simulateConstrainedGeneration)();return t.push((t,n)=>!e?.supports?.constrained||e?.supports?.constrained==="none"||e?.supports?.constrained==="no-tools"&&(t.tools?.length??0)>0?r(t,n):n(t)),t}function _({name:e,info:t,configSchema:r,background:n}){return{actionType:n?"background-model":"model",name:e,inputJsonSchema:(0,p.toJsonSchema)({schema:m.GenerateRequestSchema}),outputJsonSchema:n?(0,p.toJsonSchema)({schema:u.OperationSchema}):(0,p.toJsonSchema)({schema:m.GenerateResponseSchema}),metadata:{model:{...t,customOptions:r?(0,p.toJsonSchema)({schema:r}):void 0}}}}function E(e,t){let r=S(e.flatMap(e=>e.content)),n=S(Array.isArray(t)?t.flatMap(e=>e.message.content):t.content);return{inputCharacters:r.characters,inputImages:r.images,inputVideos:r.videos,inputAudioFiles:r.audio,outputCharacters:n.characters,outputImages:n.images,outputVideos:n.videos,outputAudioFiles:n.audio}}function S(e){return e.reduce((e,t)=>{let r=t.media?.contentType?.startsWith("image")||t.media?.url?.startsWith("data:image"),n=t.media?.contentType?.startsWith("video")||t.media?.url?.startsWith("data:video"),o=t.media?.contentType?.startsWith("audio")||t.media?.url?.startsWith("data:audio");return{characters:e.characters+(t.text?.length||0),images:e.images+ +!!r,videos:e.videos+ +!!n,audio:e.audio+ +!!o}},{characters:0,images:0,videos:0,audio:0})}async function x(e,t,r){let n,o;if(t||(t=await e.lookupValue("defaultModel","defaultModel")),!t)throw new u.GenkitError({status:"INVALID_ARGUMENT",message:"Must supply a `model` to `generate()` calls."});if("string"==typeof t)o=t,n={modelAction:await w(e,t)};else if(t.hasOwnProperty("__action"))o=t.__action.name,n={modelAction:t};else{let r=t;o=r.name,n={modelAction:await w(e,r.name),config:{...r.config},version:r.version}}if(!n.modelAction)throw new u.GenkitError({status:"NOT_FOUND",message:`Model '${o}' not found`});return r?.warnDeprecated&&n.modelAction.__action.metadata?.model?.stage==="deprecated"&&c.logger.warn(`Model '${n.modelAction.__action.name}' is deprecated and may be removed in a future release.`),n}async function w(e,t){return await e.lookupAction(`/model/${t}`)||await e.lookupAction(`/background-model/${t}`)}((e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")))(l,r(93283),e.exports)},59510:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{Chat:()=>f,MAIN_THREAD:()=>d,SESSION_ID_ATTR:()=>h,THREAD_NAME_ATTR:()=>m}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(51255),u=r(40413),c=r(57298),p=r(93814);let d="main",h=`${u.ATTR_PREFIX}:sessionId`,m=`${u.ATTR_PREFIX}:threadName`;class f{constructor(e,t,r){this.session=e,this.sessionId=r.id,this.threadName=r.thread,this.requestBase=t?.then(e=>{var t,n;let o={...e};if(o&&o.prompt){let e,t=o.prompt;e="string"==typeof t?{role:"user",content:[{text:t}]}:Array.isArray(t)?{role:"user",content:t}:{role:"user",content:[t]},o.messages=[...o.messages??[],e]}return(t=o.messages,t?.find(e=>e.metadata?.preamble))?o.messages=[...(n=o.messages,n?.filter(e=>e.metadata?.preamble)??[]),...g(r.messages)??[],...g(o.messages)??[]]:o.messages=[...r.messages??[],...o.messages??[]],this._messages=o.messages,o}),this._messages=r.messages}requestBase;sessionId;_messages;threadName;async send(e){return(0,p.runWithSession)(this.session.registry,this.session,()=>(0,u.runInNewSpan)(this.session.registry,{metadata:{name:"send"},labels:{[u.SPAN_TYPE_ATTR]:"helper",[h]:this.session.id,[m]:this.threadName}},async t=>{let r,n=y(e);(n.onChunk||n.streamingCallback)&&(r=n.onChunk??n.streamingCallback);let o={...await this.requestBase,messages:this.messages,...n};t.input=n;let i=await (0,c.generate)(this.session.registry,{...o,onChunk:r});return this.requestBase=Promise.resolve({...await this.requestBase,tools:i?.request?.tools?.map(e=>e.name),toolChoice:i?.request?.toolChoice,config:i?.request?.config}),await this.updateMessages(i.messages),t.output=JSON.stringify(i),i}))}sendStream(e){let t=new l.Channel,r=y(e),n=this.send({...r,onChunk:e=>t.send(e)});return n.then(()=>t.close(),e=>t.error(e)),{response:n,stream:t}}get messages(){return this._messages??[]}async updateMessages(e){this._messages=e,await this.session.updateMessages(this.threadName,e)}}function g(e){return e?.filter(e=>!e.metadata?.preamble)}function y(e){let t;return"string"==typeof e||Array.isArray(e)?{prompt:e}:e}},59524:(e,t,r)=>{"use strict";r.d(t,{u:()=>c});var n=r(11765),o=r(36646),i=r(11423),a=r(86713),s=r(34392),l=r(28038),u=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=function(e){function t(t,r,n){void 0===t&&(t={});var u=e.call(this,t)||this;return u.DEFAULT_HEADERS={},u._contentType=n,t.metadata&&a.s.warn("Metadata cannot be set when using http"),u.headers=Object.assign(u.DEFAULT_HEADERS,(0,o.QG)(t.headers),s.parseKeyPairsIntoRecord((0,l._)().OTEL_EXPORTER_OTLP_HEADERS)),u.agent=(0,i.KX)(t),u.compression=(0,i.Ft)(t.compression),u._serializer=r,u}return u(t,e),t.prototype.onInit=function(e){},t.prototype.send=function(e,t,r){var n=this;if(this._shutdownOnce.isCalled)return void a.s.debug("Shutdown already started. Cannot send objects");var o=new Promise(function(t,r){var o;(0,i.Pk)(n,null!=(o=n._serializer.serializeRequest(e))?o:new Uint8Array,n._contentType,t,r)}).then(t,r);this._sendingPromises.push(o);var s=function(){var e=n._sendingPromises.indexOf(o);n._sendingPromises.splice(e,1)};o.then(s,s)},t.prototype.onShutdown=function(){},t}(n.S)},59601:(e,t,r)=>{"use strict";var n=r(99122),o=r(29240),i=r(36813),a=r(86104),s=r(20923),l=r(69844),u=r(75240),c=r(94504);let p="Block collections are not allowed within flow collections",d=e=>e&&("block-map"===e.type||"block-seq"===e.type);t.resolveFlowCollection=function({composeNode:e,composeEmptyNode:t},r,h,m,f){let g="{"===h.start.source,y=g?"flow map":"flow sequence",v=new(f?.nodeClass??(g?i.YAMLMap:a.YAMLSeq))(r.schema);v.flow=!0;let b=r.atRoot;b&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let _=h.offset+h.start.source.length;for(let a=0;a<h.items.length;++a){let s=h.items[a],{start:f,key:b,sep:E,value:S}=s,x=l.resolveProps(f,{flow:y,indicator:"explicit-key-ind",next:b??E?.[0],offset:_,onError:m,parentIndent:h.indent,startOnNewline:!1});if(!x.found){if(!x.anchor&&!x.tag&&!E&&!S){0===a&&x.comma?m(x.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${y}`):a<h.items.length-1&&m(x.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${y}`),x.comment&&(v.comment?v.comment+="\n"+x.comment:v.comment=x.comment),_=x.end;continue}!g&&r.options.strict&&u.containsNewline(b)&&m(b,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===a)x.comma&&m(x.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${y}`);else if(x.comma||m(x.start,"MISSING_CHAR",`Missing , between ${y} items`),x.comment){let e="";t:for(let t of f)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break t;default:break t}if(e){let t=v.items[v.items.length-1];n.isPair(t)&&(t=t.value??t.key),t.comment?t.comment+="\n"+e:t.comment=e,x.comment=x.comment.substring(e.length+1)}}if(g||E||x.found){r.atKey=!0;let n=x.end,a=b?e(r,b,x,m):t(r,n,f,null,x,m);d(b)&&m(a.range,"BLOCK_IN_FLOW",p),r.atKey=!1;let u=l.resolveProps(E??[],{flow:y,indicator:"map-value-ind",next:S,offset:a.range[2],onError:m,parentIndent:h.indent,startOnNewline:!1});if(u.found){if(!g&&!x.found&&r.options.strict){if(E)for(let e of E){if(e===u.found)break;if("newline"===e.type){m(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}x.start<u.found.offset-1024&&m(u.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else S&&("source"in S&&S.source&&":"===S.source[0]?m(S,"MISSING_CHAR",`Missing space after : in ${y}`):m(u.start,"MISSING_CHAR",`Missing , or : between ${y} items`));let w=S?e(r,S,u,m):u.found?t(r,u.end,E,null,u,m):null;w?d(S)&&m(w.range,"BLOCK_IN_FLOW",p):u.comment&&(a.comment?a.comment+="\n"+u.comment:a.comment=u.comment);let T=new o.Pair(a,w);if(r.options.keepSourceTokens&&(T.srcToken=s),g)c.mapIncludes(r,v.items,a)&&m(n,"DUPLICATE_KEY","Map keys must be unique"),v.items.push(T);else{let e=new i.YAMLMap(r.schema);e.flow=!0,e.items.push(T);let t=(w??a).range;e.range=[a.range[0],t[1],t[2]],v.items.push(e)}_=w?w.range[2]:u.end}else{let n=S?e(r,S,x,m):t(r,x.end,E,null,x,m);v.items.push(n),_=n.range[2],d(S)&&m(n.range,"BLOCK_IN_FLOW",p)}}let E=g?"}":"]",[S,...x]=h.end,w=_;if(S&&S.source===E)w=S.offset+S.source.length;else{let e=y[0].toUpperCase()+y.substring(1),t=b?`${e} must end with a ${E}`:`${e} in block collection must be sufficiently indented and end with a ${E}`;m(_,b?"MISSING_CHAR":"BAD_INDENT",t),S&&1!==S.source.length&&x.unshift(S)}if(x.length>0){let e=s.resolveEnd(x,w,r.options.strict,m);e.comment&&(v.comment?v.comment+="\n"+e.comment:v.comment=e.comment),v.range=[h.offset,w,e.offset]}else v.range=[h.offset,w,w];return v}},59819:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(60834);n.code='require("ajv/dist/runtime/equal").default',t.default=n},59850:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMap=t.setErrorMap=t.defaultErrorMap=void 0;let o=n(r(95050));t.defaultErrorMap=o.default;let i=o.default;t.setErrorMap=function(e){i=e},t.getErrorMap=function(){return i}},60791:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=n.operators,i={maximum:{okStr:"<=",ok:o.LTE,fail:o.GT},minimum:{okStr:">=",ok:o.GTE,fail:o.LT},exclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},exclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}};t.default={keyword:Object.keys(i),type:"number",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,n.str)`must be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,n._)`{comparison: ${i[e].okStr}, limit: ${t}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e;e.fail$data((0,n._)`${r} ${i[t].fail} ${o} || isNaN(${r})`)}}},60823:(e,t,r)=>{"use strict";var n=r(99122),o=r(63715);let i={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},a=e=>e.replace(/[!,[\]{}]/g,e=>i[e]);class s{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},s.defaultYaml,e),this.tags=Object.assign({},s.defaultTags,t)}clone(){let e=new s(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new s(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:s.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},s.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:s.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},s.defaultTags),this.atNextDocument=!1);let r=e.trim().split(/[ \t]+/),n=r.shift();switch(n){case"%TAG":{if(2!==r.length&&(t(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;let[e,n]=r;return this.tags[e]=n,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==r.length)return t(0,"%YAML directive should contain exactly one part"),!1;let[e]=r;if("1.1"===e||"1.2"===e)return this.yaml.version=e,!0;{let r=/^\d+\.\d+$/.test(e);return t(6,`Unsupported YAML version ${e}`,r),!1}}default:return t(0,`Unknown directive ${n}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){let r=e.slice(2,-1);return"!"===r||"!!"===r?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),r)}let[,r,n]=e.match(/^(.*!)([^!]*)$/s);n||t(`The ${e} tag has no suffix`);let o=this.tags[r];if(o)try{return o+decodeURIComponent(n)}catch(e){return t(String(e)),null}return"!"===r?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[t,r]of Object.entries(this.tags))if(e.startsWith(r))return t+a(e.substring(r.length));return"!"===e[0]?e:`!<${e}>`}toString(e){let t,r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags);if(e&&i.length>0&&n.isNode(e.contents)){let r={};o.visit(e.contents,(e,t)=>{n.isNode(t)&&t.tag&&(r[t.tag]=!0)}),t=Object.keys(r)}else t=[];for(let[n,o]of i)("!!"!==n||"tag:yaml.org,2002:"!==o)&&(!e||t.some(e=>e.startsWith(o)))&&r.push(`%TAG ${n} ${o}`);return r.join("\n")}}s.defaultYaml={explicit:!1,version:"1.2"},s.defaultTags={"!!":"tag:yaml.org,2002:"},t.Directives=s},60834:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var n,o,i,a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},61015:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLocalStorageContextManager=void 0;let n=r(18617),o=r(84297),i=r(57481);class a extends i.AbstractAsyncHooksContextManager{constructor(){super(),this._asyncLocalStorage=new o.AsyncLocalStorage}active(){var e;return null!=(e=this._asyncLocalStorage.getStore())?e:n.ROOT_CONTEXT}with(e,t,r,...n){let o=null==r?t:t.bind(r);return this._asyncLocalStorage.run(e,o,...n)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}}t.AsyncLocalStorageContextManager=a},61080:(e,t,r)=>{"use strict";var n=r(29240),o=r(36813),i=r(69844),a=r(75240),s=r(6962),l=r(94504);let u="All mapping items must start at the same column";t.resolveBlockMap=function({composeNode:e,composeEmptyNode:t},r,c,p,d){let h=new(d?.nodeClass??o.YAMLMap)(r.schema);r.atRoot&&(r.atRoot=!1);let m=c.offset,f=null;for(let o of c.items){let{start:d,key:g,sep:y,value:v}=o,b=i.resolveProps(d,{indicator:"explicit-key-ind",next:g??y?.[0],offset:m,onError:p,parentIndent:c.indent,startOnNewline:!0}),_=!b.found;if(_){if(g&&("block-seq"===g.type?p(m,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in g&&g.indent!==c.indent&&p(m,"BAD_INDENT",u)),!b.anchor&&!b.tag&&!y){f=b.end,b.comment&&(h.comment?h.comment+="\n"+b.comment:h.comment=b.comment);continue}(b.newlineAfterProp||a.containsNewline(g))&&p(g??d[d.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else b.found?.indent!==c.indent&&p(m,"BAD_INDENT",u);r.atKey=!0;let E=b.end,S=g?e(r,g,b,p):t(r,E,d,null,b,p);r.schema.compat&&s.flowIndentCheck(c.indent,g,p),r.atKey=!1,l.mapIncludes(r,h.items,S)&&p(E,"DUPLICATE_KEY","Map keys must be unique");let x=i.resolveProps(y??[],{indicator:"map-value-ind",next:v,offset:S.range[2],onError:p,parentIndent:c.indent,startOnNewline:!g||"block-scalar"===g.type});if(m=x.end,x.found){_&&(v?.type!=="block-map"||x.hasNewline||p(m,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&b.start<x.found.offset-1024&&p(S.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let i=v?e(r,v,x,p):t(r,m,y,null,x,p);r.schema.compat&&s.flowIndentCheck(c.indent,v,p),m=i.range[2];let a=new n.Pair(S,i);r.options.keepSourceTokens&&(a.srcToken=o),h.items.push(a)}else{_&&p(S.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),x.comment&&(S.comment?S.comment+="\n"+x.comment:S.comment=x.comment);let e=new n.Pair(S);r.options.keepSourceTokens&&(e.srcToken=o),h.items.push(e)}}return f&&f<m&&p(f,"IMPOSSIBLE","Map comment with trailing content"),h.range=[c.offset,m,f??m],h}},61292:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0;var i=o(r(76704)),a=n(r(27736)),s=n(r(58668)),l=o(r(66112)),u=o(r(78217)),c=n(r(91325));function p(){var e=new i.HandlebarsEnvironment;return l.extend(e,i),e.SafeString=a.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var d=p();d.create=p,c.default(d),d.default=d,t.default=d,e.exports=t.default},61316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(62557),o=r(22964),i=r(58592),a=r(59819);t.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>(0,o.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,o._)`{i: ${e}, j: ${t}}`},code(e){let{gen:t,data:r,$data:s,schema:l,parentSchema:u,schemaCode:c,it:p}=e;if(!s&&!l)return;let d=t.let("valid"),h=u.items?(0,n.getSchemaTypes)(u.items):[];e.block$data(d,function(){let s=t.let("i",(0,o._)`${r}.length`),l=t.let("j");e.setParams({i:s,j:l}),t.assign(d,!0),t.if((0,o._)`${s} > 1`,()=>(h.length>0&&!h.some(e=>"object"===e||"array"===e)?function(i,a){let s=t.name("item"),l=(0,n.checkDataTypes)(h,s,p.opts.strictNumbers,n.DataType.Wrong),u=t.const("indices",(0,o._)`{}`);t.for((0,o._)`;${i}--;`,()=>{t.let(s,(0,o._)`${r}[${i}]`),t.if(l,(0,o._)`continue`),h.length>1&&t.if((0,o._)`typeof ${s} == "string"`,(0,o._)`${s} += "_"`),t.if((0,o._)`typeof ${u}[${s}] == "number"`,()=>{t.assign(a,(0,o._)`${u}[${s}]`),e.error(),t.assign(d,!1).break()}).code((0,o._)`${u}[${s}] = ${i}`)})}:function(n,s){let l=(0,i.useFunc)(t,a.default),u=t.name("outer");t.label(u).for((0,o._)`;${n}--;`,()=>t.for((0,o._)`${s} = ${n}; ${s}--;`,()=>t.if((0,o._)`${l}(${r}[${n}], ${r}[${s}])`,()=>{e.error(),t.assign(d,!1).break(u)})))})(s,l))},(0,o._)`${c} === false`),e.ok(d)}}},61834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(58592);t.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:o}=e;if((0,n.alwaysValidSchema)(o,r))return void e.fail();let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}}},62417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(60791),o=r(46364),i=r(82038),a=r(52587),s=r(10659),l=r(14152),u=r(43464),c=r(61316),p=r(86942),d=r(93280);t.default=[n.default,o.default,i.default,a.default,s.default,l.default,u.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},p.default,d.default]},62557:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;let o=r(42049),i=r(75892),a=r(37439),s=r(22964),l=r(58592);function u(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(o.isJSONType))return t;throw Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(n||(t.DataType=n={})),t.getSchemaTypes=function(e){let t=u(e.type);if(t.includes("null")){if(!1===e.nullable)throw Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=u,t.coerceAndCheckDataType=function(e,t){var r,o;let{gen:a,data:l,opts:u}=e,p=(r=t,(o=u.coerceTypes)?r.filter(e=>c.has(e)||"array"===o&&"array"===e):[]),h=t.length>0&&!(0===p.length&&1===t.length&&(0,i.schemaHasRulesForType)(e,t[0]));if(h){let r=d(t,l,u.strictNumbers,n.Wrong);a.if(r,()=>{p.length?function(e,t,r){let{gen:n,data:o,opts:i}=e,a=n.let("dataType",(0,s._)`typeof ${o}`),l=n.let("coerced",(0,s._)`undefined`);for(let e of("array"===i.coerceTypes&&n.if((0,s._)`${a} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,()=>n.assign(o,(0,s._)`${o}[0]`).assign(a,(0,s._)`typeof ${o}`).if(d(t,o,i.strictNumbers),()=>n.assign(l,o))),n.if((0,s._)`${l} !== undefined`),r))(c.has(e)||"array"===e&&"array"===i.coerceTypes)&&function(e){switch(e){case"string":n.elseIf((0,s._)`${a} == "number" || ${a} == "boolean"`).assign(l,(0,s._)`"" + ${o}`).elseIf((0,s._)`${o} === null`).assign(l,(0,s._)`""`);return;case"number":n.elseIf((0,s._)`${a} == "boolean" || ${o} === null
              || (${a} == "string" && ${o} && ${o} == +${o})`).assign(l,(0,s._)`+${o}`);return;case"integer":n.elseIf((0,s._)`${a} === "boolean" || ${o} === null
              || (${a} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(l,(0,s._)`+${o}`);return;case"boolean":n.elseIf((0,s._)`${o} === "false" || ${o} === 0 || ${o} === null`).assign(l,!1).elseIf((0,s._)`${o} === "true" || ${o} === 1`).assign(l,!0);return;case"null":n.elseIf((0,s._)`${o} === "" || ${o} === 0 || ${o} === false`),n.assign(l,null);return;case"array":n.elseIf((0,s._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${o} === null`).assign(l,(0,s._)`[${o}]`)}}(e);n.else(),m(e),n.endIf(),n.if((0,s._)`${l} !== undefined`,()=>{n.assign(o,l),function({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,s._)`${t} !== undefined`,()=>e.assign((0,s._)`${t}[${r}]`,n))}(e,l)})}(e,t,p):m(e)})}return h};let c=new Set(["string","number","integer","boolean","null"]);function p(e,t,r,o=n.Correct){let i,a=o===n.Correct?s.operators.EQ:s.operators.NEQ;switch(e){case"null":return(0,s._)`${t} ${a} null`;case"array":i=(0,s._)`Array.isArray(${t})`;break;case"object":i=(0,s._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=l((0,s._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=l();break;default:return(0,s._)`typeof ${t} ${a} ${e}`}return o===n.Correct?i:(0,s.not)(i);function l(e=s.nil){return(0,s.and)((0,s._)`typeof ${t} == "number"`,e,r?(0,s._)`isFinite(${t})`:s.nil)}}function d(e,t,r,n){let o;if(1===e.length)return p(e[0],t,r,n);let i=(0,l.toHash)(e);if(i.array&&i.object){let e=(0,s._)`typeof ${t} != "object"`;o=i.null?e:(0,s._)`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else o=s.nil;for(let e in i.number&&delete i.integer,i)o=(0,s.and)(o,p(e,t,r,n));return o}t.checkDataType=p,t.checkDataTypes=d;let h={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?(0,s._)`{type: ${e}}`:(0,s._)`{type: ${t}}`};function m(e){let t=function(e){let{gen:t,data:r,schema:n}=e,o=(0,l.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:o,schemaValue:o,parentSchema:n,params:{},it:e}}(e);(0,a.reportError)(t,h)}t.reportTypeError=m},62872:(e,t,r)=>{"use strict";r.d(t,{Go:()=>l,Ko:()=>s,U1:()=>a});var n=r(65183),o=r(92971),i=r(77572),a={serializeRequest:function(e){var t=(0,n.s)(e,{useHex:!0,useLongBits:!1});return new TextEncoder().encode(JSON.stringify(t))},deserializeResponse:function(e){return JSON.parse(new TextDecoder().decode(e))}},s={serializeRequest:function(e){var t=(0,o.K)(e,{useLongBits:!1});return new TextEncoder().encode(JSON.stringify(t))},deserializeResponse:function(e){return JSON.parse(new TextDecoder().decode(e))}},l={serializeRequest:function(e){var t=(0,i.W)(e,{useHex:!0,useLongBits:!1});return new TextEncoder().encode(JSON.stringify(t))},deserializeResponse:function(e){return JSON.parse(new TextDecoder().decode(e))}}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63356:(e,t,r)=>{"use strict";let n=r(27910).Transform;function o(e){let t;"string"==typeof e&&(e=Buffer.from(e,"utf-8"));let r=[[9],[10],[13],[32,60],[62,126]],n="";for(let o=0,i=e.length;o<i;o++){if(function(e,t){for(let r=t.length-1;r>=0;r--)if(t[r].length&&(1===t[r].length&&e===t[r][0]||2===t[r].length&&e>=t[r][0]&&e<=t[r][1]))return!0;return!1}(t=e[o],r)&&(32!==t&&9!==t||o!==i-1&&10!==e[o+1]&&13!==e[o+1])){n+=String.fromCharCode(t);continue}n+="="+(t<16?"0":"")+t.toString(16).toUpperCase()}return n}function i(e,t){let r,n,o;if(e=(e||"").toString(),t=t||76,e.length<=t)return e;let i=0,a=e.length,s=Math.floor(t/3),l="";for(;i<a;){if(r=(o=e.substr(i,t)).match(/\r\n/)){l+=o=o.substr(0,r.index+r[0].length),i+=o.length;continue}if("\n"===o.substr(-1)){l+=o,i+=o.length;continue}if(r=o.substr(-s).match(/\n.*?$/)){l+=o=o.substr(0,o.length-(r[0].length-1)),i+=o.length;continue}if(o.length>t-s&&(r=o.substr(-s).match(/[ \t.,!?][^ \t.,!?]*$/)))o=o.substr(0,o.length-(r[0].length-1));else if(o.match(/[=][\da-f]{0,2}$/i))for((r=o.match(/[=][\da-f]{0,1}$/i))&&(o=o.substr(0,o.length-r[0].length));o.length>3&&o.length<a-i&&!o.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(r=o.match(/[=][\da-f]{2}$/gi))&&!((n=parseInt(r[0].substr(1,2),16))<128)&&(o=o.substr(0,o.length-3),!(n>=192)););i+o.length<a&&"\n"!==o.substr(-1)?(o.length===t&&o.match(/[=][\da-f]{2}$/i)?o=o.substr(0,o.length-3):o.length===t&&(o=o.substr(0,o.length-1)),i+=o.length,o+="=\r\n"):i+=o.length,l+=o}return l}class a extends n{constructor(e){super(),this.options=e||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(e,t,r){let n;if("buffer"!==t&&(e=Buffer.from(e,t)),!e||!e.length)return r();this.inputBytes+=e.length,this.options.lineLength?(n=(n=i(n=this._curLine+o(e),this.options.lineLength)).replace(/(^|\n)([^\n]*)$/,(e,t,r)=>(this._curLine=r,t)))&&(this.outputBytes+=n.length,this.push(n)):(n=o(e),this.outputBytes+=n.length,this.push(n,"ascii")),r()}_flush(e){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),e()}}e.exports={encode:o,wrap:i,Encoder:a}},63379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnknownDef=void 0;let n=r(18271);t.parseUnknownDef=function(e){return(0,n.parseAnyDef)(e)}},63380:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});var n=require("perf_hooks").performance},63715:(e,t,r)=>{"use strict";var n=r(99122);let o=Symbol("break visit"),i=Symbol("skip children"),a=Symbol("remove node");function s(e,t){let r=p(t);n.isDocument(e)?l(null,e.contents,r,Object.freeze([e]))===a&&(e.contents=null):l(null,e,r,Object.freeze([]))}function l(e,t,r,i){let s=d(e,t,r,i);if(n.isNode(s)||n.isPair(s))return h(e,i,s),l(e,s,r,i);if("symbol"!=typeof s){if(n.isCollection(t)){i=Object.freeze(i.concat(t));for(let e=0;e<t.items.length;++e){let n=l(e,t.items[e],r,i);if("number"==typeof n)e=n-1;else{if(n===o)return o;n===a&&(t.items.splice(e,1),e-=1)}}}else if(n.isPair(t)){i=Object.freeze(i.concat(t));let e=l("key",t.key,r,i);if(e===o)return o;e===a&&(t.key=null);let n=l("value",t.value,r,i);if(n===o)return o;n===a&&(t.value=null)}}return s}async function u(e,t){let r=p(t);n.isDocument(e)?await c(null,e.contents,r,Object.freeze([e]))===a&&(e.contents=null):await c(null,e,r,Object.freeze([]))}async function c(e,t,r,i){let s=await d(e,t,r,i);if(n.isNode(s)||n.isPair(s))return h(e,i,s),c(e,s,r,i);if("symbol"!=typeof s){if(n.isCollection(t)){i=Object.freeze(i.concat(t));for(let e=0;e<t.items.length;++e){let n=await c(e,t.items[e],r,i);if("number"==typeof n)e=n-1;else{if(n===o)return o;n===a&&(t.items.splice(e,1),e-=1)}}}else if(n.isPair(t)){i=Object.freeze(i.concat(t));let e=await c("key",t.key,r,i);if(e===o)return o;e===a&&(t.key=null);let n=await c("value",t.value,r,i);if(n===o)return o;n===a&&(t.value=null)}}return s}function p(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function d(e,t,r,o){return"function"==typeof r?r(e,t,o):n.isMap(t)?r.Map?.(e,t,o):n.isSeq(t)?r.Seq?.(e,t,o):n.isPair(t)?r.Pair?.(e,t,o):n.isScalar(t)?r.Scalar?.(e,t,o):n.isAlias(t)?r.Alias?.(e,t,o):void 0}function h(e,t,r){let o=t[t.length-1];if(n.isCollection(o))o.items[e]=r;else if(n.isPair(o))"key"===e?o.key=r:o.value=r;else if(n.isDocument(o))o.contents=r;else{let e=n.isAlias(o)?"alias":"scalar";throw Error(`Cannot replace node with ${e} parent`)}}s.BREAK=o,s.SKIP=i,s.REMOVE=a,u.BREAK=o,u.SKIP=i,u.REMOVE=a,t.visit=s,t.visitAsync=u},63879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createServiceClientConstructor=void 0;let n=r(71777);t.createServiceClientConstructor=function(e,t){return n.makeGenericClientConstructor({export:{path:e,requestStream:!1,responseStream:!1,requestSerialize:e=>e,requestDeserialize:e=>e,responseSerialize:e=>e,responseDeserialize:e=>e}},t)}},64328:(e,t,r)=>{"use strict";function n(){return"unknown_service:"+process.argv0}r.d(t,{m:()=>n})},64487:(e,t,r)=>{"use strict";let n=r(38267),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=r(32397),{safeRe:a,t:s}=r(26515),l=r(98300),{compareIdentifiers:u}=r(78668);class c{constructor(e,t){if(t=l(t),e instanceof c)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else e=e.version;else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>o)throw TypeError(`version is longer than ${o} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return -1;else if(r===o)continue;else return u(r,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{let r=this.build[t],o=e.build[t];if(n("build compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return -1;else if(r===o)continue;else return u(r,o)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?a[s.PRERELEASELOOSE]:a[s.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},64533:(e,t,r)=>{"use strict";var n=r(71e3),o=r(16361),i=r(55085),a=r(39985),s=r(33590),l=r(13838),u=r(76317);t.schema=[n.map,i.seq,a.string,o.nullTag,s.boolTag,u.intOct,u.int,u.intHex,l.floatNaN,l.floatExp,l.float]},64933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var n=r(73841);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var o=r(22964);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return o.CodeGen}});let i=r(97757),a=r(19166),s=r(42049),l=r(53194),u=r(22964),c=r(21326),p=r(62557),d=r(58592),h=r(2845),m=r(25821),f=(e,t)=>new RegExp(e,t);f.code="new RegExp";let g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};class _{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...function(e){var t,r,n,o,i,a,s,l,u,c,p,d,h,g,y,v,b,_,E,S,x,w,T,A,O;let N=e.strict,P=null==(t=e.code)?void 0:t.optimize,C=!0===P||void 0===P?1:P||0,k=null!=(n=null==(r=e.code)?void 0:r.regExp)?n:f,I=null!=(o=e.uriResolver)?o:m.default;return{strictSchema:null==(a=null!=(i=e.strictSchema)?i:N)||a,strictNumbers:null==(l=null!=(s=e.strictNumbers)?s:N)||l,strictTypes:null!=(c=null!=(u=e.strictTypes)?u:N)?c:"log",strictTuples:null!=(d=null!=(p=e.strictTuples)?p:N)?d:"log",strictRequired:null!=(g=null!=(h=e.strictRequired)?h:N)&&g,code:e.code?{...e.code,optimize:C,regExp:k}:{optimize:C,regExp:k},loopRequired:null!=(y=e.loopRequired)?y:200,loopEnum:null!=(v=e.loopEnum)?v:200,meta:null==(b=e.meta)||b,messages:null==(_=e.messages)||_,inlineRefs:null==(E=e.inlineRefs)||E,schemaId:null!=(S=e.schemaId)?S:"$id",addUsedSchema:null==(x=e.addUsedSchema)||x,validateSchema:null==(w=e.validateSchema)||w,validateFormats:null==(T=e.validateFormats)||T,unicodeRegExp:null==(A=e.unicodeRegExp)||A,int32range:null==(O=e.int32range)||O,uriResolver:I}}(e)};let{es5:t,lines:r}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:y,es5:t,lines:r}),this.logger=function(e){if(!1===e)return O;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw Error("logger must implement log, warn and error methods")}(e.logger);let n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,v,e,"NOT SUPPORTED"),E.call(this,b,e,"DEPRECATED","warn"),this._metaOpts=A.call(this),e.formats&&w.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&T.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),x.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:t,schemaId:r}=this.opts,n=h;"id"===r&&((n={...h}).id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){let{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);let n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){let r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw Error("options.loadSchema should be a function");let{loadSchema:r}=this.opts;return n.call(this,e,t);async function n(e,t){await o.call(this,e.$schema);let r=this._addSchema(e,t);return r.validate||i.call(this,r)}async function o(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof a.default))throw t;return s.call(this,t),await l.call(this,t.missingSchema),i.call(this,e)}}function s({missingSchema:e,missingRef:t}){if(this.refs[e])throw Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){let r=await u.call(this,e);this.refs[e]||await o.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function u(e){let t=this._loading[e];if(t)return t;try{return await (this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){let o;if(Array.isArray(e)){for(let t of e)this.addSchema(t,void 0,r,n);return this}if("object"==typeof e){let{schemaId:t}=this.opts;if(void 0!==(o=e[t])&&"string"!=typeof o)throw Error(`schema ${t} must be string`)}return t=(0,c.normalizeId)(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){let r;if("boolean"==typeof e)return!0;if(void 0!==(r=e.$schema)&&"string"!=typeof r)throw Error("$schema must be a string");if(!(r=r||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(r,e);if(!n&&t){let e="schema is invalid: "+this.errorsText();if("log"===this.opts.validateSchema)this.logger.error(e);else throw Error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=S.call(this,e));)e=t;if(void 0===t){let{schemaId:r}=this.opts,n=new l.SchemaEnv({schema:{},schemaId:r});if(!(t=l.resolveSchema.call(this,n,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let t=S.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{this._cache.delete(e);let t=e[this.opts.schemaId];return t&&(t=(0,c.normalizeId)(t),delete this.schemas[t],delete this.refs[t]),this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else if("object"==typeof e&&void 0===t){if(Array.isArray(r=(t=e).keyword)&&!r.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(P.call(this,r,t),!t)return(0,d.eachItem)(r,e=>C.call(this,e)),this;I.call(this,t);let n={...t,type:(0,p.getJSONTypes)(t.type),schemaType:(0,p.getJSONTypes)(t.schemaType)};return(0,d.eachItem)(r,0===n.type.length?e=>C.call(this,e,n):e=>n.type.forEach(t=>C.call(this,e,n,t))),this}getKeyword(e){let t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){let{RULES:t}=this;for(let r of(delete t.keywords[e],delete t.all[e],t.rules)){let t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){let r=this.RULES.all;for(let n of(e=JSON.parse(JSON.stringify(e)),t)){let t=n.split("/").slice(1),o=e;for(let e of t)o=o[e];for(let e in r){let t=r[e];if("object"!=typeof t)continue;let{$data:n}=t.definition,i=o[e];n&&i&&(o[e]=R(i))}}return e}_removeAllSchemas(e,t){for(let r in e){let n=e[r];(!t||t.test(r))&&("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r,n=this.opts.validateSchema,o=this.opts.addUsedSchema){let i,{schemaId:a}=this.opts;if("object"==typeof e)i=e[a];else if(this.opts.jtd)throw Error("schema must be object");else if("boolean"!=typeof e)throw Error("schema must be object or boolean");let s=this._cache.get(e);if(void 0!==s)return s;r=(0,c.normalizeId)(i||r);let u=c.getSchemaRefs.call(this,e,r);return s=new l.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:r,localRefs:u}),this._cache.set(s.schema,s),o&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=s),n&&this.validateSchema(e,!0),s}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function E(e,t,r,n="error"){for(let o in e)o in t&&this.logger[n](`${r}: option ${o}. ${e[o]}`)}function S(e){return e=(0,c.normalizeId)(e),this.schemas[e]||this.refs[e]}function x(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function w(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function T(e){if(Array.isArray(e))return void this.addVocabulary(e);for(let t in this.logger.warn("keywords option as map is deprecated, pass array"),e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function A(){let e={...this.opts};for(let t of g)delete e[t];return e}_.ValidationError=i.default,_.MissingRefError=a.default,t.default=_;let O={log(){},warn(){},error(){}},N=/^[a-z_$][a-z0-9_$:-]*$/i;function P(e,t){let{RULES:r}=this;if((0,d.eachItem)(e,e=>{if(r.keywords[e])throw Error(`Keyword ${e} is already defined`);if(!N.test(e))throw Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t||"validate"in t))throw Error('$data keyword must have "code" or "validate" function')}function C(e,t,r){var n;let o=null==t?void 0:t.post;if(r&&o)throw Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,a=o?i.post:i.rules.find(({type:e})=>e===r);if(a||(a={type:r,rules:[]},i.rules.push(a)),i.keywords[e]=!0,!t)return;let s={keyword:e,definition:{...t,type:(0,p.getJSONTypes)(t.type),schemaType:(0,p.getJSONTypes)(t.schemaType)}};t.before?k.call(this,a,s,t.before):a.rules.push(s),i.all[e]=s,null==(n=t.implements)||n.forEach(e=>this.addKeyword(e))}function k(e,t,r){let n=e.rules.findIndex(e=>e.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function I(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=R(t)),e.validateSchema=this.compile(t,!0))}let D={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function R(e){return{anyOf:[e,D]}}},65183:(e,t,r)=>{"use strict";r.d(t,{s:()=>l});var n=r(95917),o=r(14646),i=r(9306),a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function l(e,t){return{resourceSpans:function(e,t){for(var r=function(e){var t,r,n=new Map;try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var s=i.value,l=n.get(s.resource);l||(l=new Map,n.set(s.resource,l));var u=s.instrumentationLibrary.name+"@"+(s.instrumentationLibrary.version||"")+":"+(s.instrumentationLibrary.schemaUrl||""),c=l.get(u);c||(c=[],l.set(u,c)),c.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}(e),o=[],l=r.entries(),u=l.next();!u.done;){for(var c=s(u.value,2),p=c[0],d=c[1],h=[],m=d.values(),f=m.next();!f.done;){var g=f.value;if(g.length>0){var y=g.map(function(e){return function(e,t){var r,o=e.spanContext(),i=e.status;return{traceId:t.encodeSpanContext(o.traceId),spanId:t.encodeSpanContext(o.spanId),parentSpanId:t.encodeOptionalSpanContext(e.parentSpanId),traceState:null==(r=o.traceState)?void 0:r.serialize(),name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:(0,n.Zs)(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(function(e){var r,o;return r=e,o=t,{attributes:r.attributes?(0,n.Zs)(r.attributes):[],name:r.name,timeUnixNano:o.encodeHrTime(r.time),droppedAttributesCount:r.droppedAttributesCount||0}}),droppedEventsCount:e.droppedEventsCount,status:{code:i.code,message:i.message},links:e.links.map(function(e){return function(e,t){var r;return{attributes:e.attributes?(0,n.Zs)(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:null==(r=e.context.traceState)?void 0:r.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t)}),droppedLinksCount:e.droppedLinksCount}}(e,t)});h.push({scope:(0,n.d1)(g[0].instrumentationLibrary),spans:y,schemaUrl:g[0].instrumentationLibrary.schemaUrl})}f=m.next()}var v={resource:(0,i.Z)(p),scopeSpans:h,schemaUrl:void 0};o.push(v),u=l.next()}return o}(e,(0,o.Az)(t))}}},65608:(e,t,r)=>{"use strict";r.d(t,{g:()=>l});var n=r(67218);r(79130);var o=r(13846),i=r(54898),a=r(5757),s=r(17478);async function l(e){return c(e)}let u=o.ai.definePrompt({name:"generateEmailReportPrompt",input:{schema:i.Ar},output:{schema:i.$Y},model:a.YF.model("gemini-1.5-flash"),prompt:`You are an expert email marketing analyst. Your task is to generate a concise daily performance report email.

Analyze the following campaign data from today and yesterday.

{{#if todayReports}}
**Today's Campaigns:**
{{#each todayReports}}
- Campaign: "{{campaignName}}"
  - Date: {{date}}
  - Subject: "{{subject}}"
  - Sent: {{totalSent}}
  - Opens: {{opens}} ({{openRate}}%)
  - Clicks: {{clicks}} ({{clickRate}}%)
  - Unsubscribes: {{unsubscribes}}
{{/each}}
{{/if}}

{{#if yesterdayReports}}
**Yesterday's Campaigns:**
{{#each yesterdayReports}}
- Campaign: "{{campaignName}}"
  - Date: {{date}}
  - Subject: "{{subject}}"
  - Sent: {{totalSent}}
  - Opens: {{opens}} ({{openRate}}%)
  - Clicks: {{clicks}} ({{clickRate}}%)
  - Unsubscribes: {{unsubscribes}}
{{/each}}
{{/if}}

Based on this data, write an email body that:
1. Starts with a brief, high-level summary of the overall performance in the last 24 hours.
2. Includes the segmented lists for "Today's Campaigns" and "Yesterday's Campaigns" if data exists for them.
3. Do not include any introductory or closing remarks like "Hi Team" or "Best,". Just provide the subject and the main content of the report.
4. The entire output should be in plain text, using markdown for formatting like lists and bolding.`}),c=o.ai.defineFlow({name:"generateEmailReportFlow",inputSchema:i.Ar,outputSchema:i.$Y},async e=>{if(0===e.todayReports.length&&0===e.yesterdayReports.length)return{subject:"No Campaigns Sent in Last 48 Hours",body:"There were no email campaigns sent today or yesterday."};let{output:t}=await u(e);return t});(0,s.D)([l]),(0,n.A)(l,"40e144796725503669357c2bdbfed923acc81b4602",null)},65799:(e,t,r)=>{"use strict";let n,o,i,a,s,l,u,c,p,d,h,m,f,g;r.r(t),r.d(t,{default:()=>D});var y={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},v={isSpaceSeparator:e=>"string"==typeof e&&y.Space_Separator.test(e),isIdStartChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||y.ID_Start.test(e)),isIdContinueChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||y.ID_Continue.test(e)),isDigit:e=>"string"==typeof e&&/[0-9]/.test(e),isHexDigit:e=>"string"==typeof e&&/[0-9A-Fa-f]/.test(e)};function b(){if(n[a])return String.fromCodePoint(n.codePointAt(a))}function _(){let e=b();return"\n"===e?(s++,l=0):e?l+=e.length:l++,e&&(a+=e.length),e}let E={default(){switch(g){case"	":case"\v":case"\f":case" ":case"\xa0":case"\uFEFF":case"\n":case"\r":case"\u2028":case"\u2029":_();return;case"/":_(),d="comment";return;case void 0:return _(),S("eof")}return v.isSpaceSeparator(g)?void _():E[o]()},comment(){switch(g){case"*":_(),d="multiLineComment";return;case"/":_(),d="singleLineComment";return}throw N(_())},multiLineComment(){switch(g){case"*":_(),d="multiLineCommentAsterisk";return;case void 0:throw N(_())}_()},multiLineCommentAsterisk(){switch(g){case"*":_();return;case"/":_(),d="default";return;case void 0:throw N(_())}_(),d="multiLineComment"},singleLineComment(){switch(g){case"\n":case"\r":case"\u2028":case"\u2029":_(),d="default";return;case void 0:return _(),S("eof")}_()},value(){switch(g){case"{":case"[":return S("punctuator",_());case"n":return _(),x("ull"),S("null",null);case"t":return _(),x("rue"),S("boolean",!0);case"f":return _(),x("alse"),S("boolean",!1);case"-":case"+":"-"===_()&&(f=-1),d="sign";return;case".":h=_(),d="decimalPointLeading";return;case"0":h=_(),d="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":h=_(),d="decimalInteger";return;case"I":return _(),x("nfinity"),S("numeric",1/0);case"N":return _(),x("aN"),S("numeric",NaN);case'"':case"'":m='"'===_(),h="",d="string";return}throw N(_())},identifierNameStartEscape(){if("u"!==g)throw N(_());_();let e=w();switch(e){case"$":case"_":break;default:if(!v.isIdStartChar(e))throw C()}h+=e,d="identifierName"},identifierName(){switch(g){case"$":case"_":case"‌":case"‍":h+=_();return;case"\\":_(),d="identifierNameEscape";return}if(v.isIdContinueChar(g)){h+=_();return}return S("identifier",h)},identifierNameEscape(){if("u"!==g)throw N(_());_();let e=w();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!v.isIdContinueChar(e))throw C()}h+=e,d="identifierName"},sign(){switch(g){case".":h=_(),d="decimalPointLeading";return;case"0":h=_(),d="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":h=_(),d="decimalInteger";return;case"I":return _(),x("nfinity"),S("numeric",1/0*f);case"N":return _(),x("aN"),S("numeric",NaN)}throw N(_())},zero(){switch(g){case".":h+=_(),d="decimalPoint";return;case"e":case"E":h+=_(),d="decimalExponent";return;case"x":case"X":h+=_(),d="hexadecimal";return}return S("numeric",0*f)},decimalInteger(){switch(g){case".":h+=_(),d="decimalPoint";return;case"e":case"E":h+=_(),d="decimalExponent";return}if(v.isDigit(g)){h+=_();return}return S("numeric",f*Number(h))},decimalPointLeading(){if(v.isDigit(g)){h+=_(),d="decimalFraction";return}throw N(_())},decimalPoint(){switch(g){case"e":case"E":h+=_(),d="decimalExponent";return}if(v.isDigit(g)){h+=_(),d="decimalFraction";return}return S("numeric",f*Number(h))},decimalFraction(){switch(g){case"e":case"E":h+=_(),d="decimalExponent";return}if(v.isDigit(g)){h+=_();return}return S("numeric",f*Number(h))},decimalExponent(){switch(g){case"+":case"-":h+=_(),d="decimalExponentSign";return}if(v.isDigit(g)){h+=_(),d="decimalExponentInteger";return}throw N(_())},decimalExponentSign(){if(v.isDigit(g)){h+=_(),d="decimalExponentInteger";return}throw N(_())},decimalExponentInteger(){if(v.isDigit(g)){h+=_();return}return S("numeric",f*Number(h))},hexadecimal(){if(v.isHexDigit(g)){h+=_(),d="hexadecimalInteger";return}throw N(_())},hexadecimalInteger(){if(v.isHexDigit(g)){h+=_();return}return S("numeric",f*Number(h))},string(){switch(g){case"\\":_(),h+=function(){switch(b()){case"b":return _(),"\b";case"f":return _(),"\f";case"n":return _(),"\n";case"r":return _(),"\r";case"t":return _(),"	";case"v":return _(),"\v";case"0":if(_(),v.isDigit(b()))throw N(_());return"\0";case"x":return _(),function(){let e="",t=b();if(!v.isHexDigit(t)||(e+=_(),t=b(),!v.isHexDigit(t)))throw N(_());return String.fromCodePoint(parseInt(e+=_(),16))}();case"u":return _(),w();case"\n":case"\u2028":case"\u2029":return _(),"";case"\r":return _(),"\n"===b()&&_(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw N(_())}return _()}();return;case'"':if(m)return _(),S("string",h);h+=_();return;case"'":if(!m)return _(),S("string",h);h+=_();return;case"\n":case"\r":case void 0:throw N(_());case"\u2028":case"\u2029":var e;e=g,console.warn(`JSON5: '${k(e)}' in strings is not valid ECMAScript; consider escaping`)}h+=_()},start(){switch(g){case"{":case"[":return S("punctuator",_())}d="value"},beforePropertyName(){switch(g){case"$":case"_":h=_(),d="identifierName";return;case"\\":_(),d="identifierNameStartEscape";return;case"}":return S("punctuator",_());case'"':case"'":m='"'===_(),d="string";return}if(v.isIdStartChar(g)){h+=_(),d="identifierName";return}throw N(_())},afterPropertyName(){if(":"===g)return S("punctuator",_());throw N(_())},beforePropertyValue(){d="value"},afterPropertyValue(){switch(g){case",":case"}":return S("punctuator",_())}throw N(_())},beforeArrayValue(){if("]"===g)return S("punctuator",_());d="value"},afterArrayValue(){switch(g){case",":case"]":return S("punctuator",_())}throw N(_())},end(){throw N(_())}};function S(e,t){return{type:e,value:t,line:s,column:l}}function x(e){for(let t of e){if(b()!==t)throw N(_());_()}}function w(){let e="",t=4;for(;t-- >0;){let t=b();if(!v.isHexDigit(t))throw N(_());e+=_()}return String.fromCodePoint(parseInt(e,16))}let T={start(){if("eof"===u.type)throw P();A()},beforePropertyName(){switch(u.type){case"identifier":case"string":c=u.value,o="afterPropertyName";return;case"punctuator":O();return;case"eof":throw P()}},afterPropertyName(){if("eof"===u.type)throw P();o="beforePropertyValue"},beforePropertyValue(){if("eof"===u.type)throw P();A()},beforeArrayValue(){if("eof"===u.type)throw P();if("punctuator"===u.type&&"]"===u.value)return void O();A()},afterPropertyValue(){if("eof"===u.type)throw P();switch(u.value){case",":o="beforePropertyName";return;case"}":O()}},afterArrayValue(){if("eof"===u.type)throw P();switch(u.value){case",":o="beforeArrayValue";return;case"]":O()}},end(){}};function A(){let e;switch(u.type){case"punctuator":switch(u.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=u.value}if(void 0===p)p=e;else{let t=i[i.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,c,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(null!==e&&"object"==typeof e)i.push(e),o=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{let e=i[i.length-1];o=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}}function O(){i.pop();let e=i[i.length-1];o=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function N(e){return void 0===e?I(`JSON5: invalid end of input at ${s}:${l}`):I(`JSON5: invalid character '${k(e)}' at ${s}:${l}`)}function P(){return I(`JSON5: invalid end of input at ${s}:${l}`)}function C(){return l-=5,I(`JSON5: invalid identifier character at ${s}:${l}`)}function k(e){let t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){let t=e.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return e}function I(e){let t=SyntaxError(e);return t.lineNumber=s,t.columnNumber=l,t}let D={parse:function(e,t){n=String(e),o="start",i=[],a=0,s=1,l=0,u=void 0,c=void 0,p=void 0;do u=function(){for(d="default",h="",m=!1,f=1;;){g=b();let e=E[d]();if(e)return e}}(),T[o]();while("eof"!==u.type);return"function"==typeof t?function e(t,r,n){let o=t[r];if(null!=o&&"object"==typeof o)if(Array.isArray(o))for(let t=0;t<o.length;t++){let r=String(t),i=e(o,r,n);void 0===i?delete o[r]:Object.defineProperty(o,r,{value:i,writable:!0,enumerable:!0,configurable:!0})}else for(let t in o){let r=e(o,t,n);void 0===r?delete o[t]:Object.defineProperty(o,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}return n.call(t,r,o)}({"":p},"",t):p},stringify:function(e,t,r){let n,o,i,a=[],s="",l="";if(null==t||"object"!=typeof t||Array.isArray(t)||(r=t.space,i=t.quote,t=t.replacer),"function"==typeof t)o=t;else if(Array.isArray(t))for(let e of(n=[],t)){let t;"string"==typeof e?t=e:("number"==typeof e||e instanceof String||e instanceof Number)&&(t=String(e)),void 0!==t&&0>n.indexOf(t)&&n.push(t)}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),"number"==typeof r?r>0&&(r=Math.min(10,Math.floor(r)),l="          ".substr(0,r)):"string"==typeof r&&(l=r.substr(0,10)),function e(t,r){let i=r[t];switch(null!=i&&("function"==typeof i.toJSON5?i=i.toJSON5(t):"function"==typeof i.toJSON&&(i=i.toJSON(t))),o&&(i=o.call(r,t,i)),i instanceof Number?i=Number(i):i instanceof String?i=String(i):i instanceof Boolean&&(i=i.valueOf()),i){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof i?u(i,!1):"number"==typeof i?String(i):"object"==typeof i?Array.isArray(i)?function(t){let r;if(a.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");a.push(t);let n=s;s+=l;let o=[];for(let r=0;r<t.length;r++){let n=e(String(r),t);o.push(void 0!==n?n:"null")}if(0===o.length)r="[]";else if(""===l)r="["+o.join(",")+"]";else{let e=",\n"+s,t=o.join(e);r="[\n"+s+t+",\n"+n+"]"}return a.pop(),s=n,r}(i):function(t){let r;if(a.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");a.push(t);let o=s;s+=l;let i=n||Object.keys(t),c=[];for(let r of i){let n=e(r,t);if(void 0!==n){let e=function(e){if(0===e.length)return u(e,!0);let t=String.fromCodePoint(e.codePointAt(0));if(!v.isIdStartChar(t))return u(e,!0);for(let r=t.length;r<e.length;r++)if(!v.isIdContinueChar(String.fromCodePoint(e.codePointAt(r))))return u(e,!0);return e}(r)+":";""!==l&&(e+=" "),e+=n,c.push(e)}}if(0===c.length)r="{}";else{let e;if(""===l)r="{"+(e=c.join(","))+"}";else{let t=",\n"+s;e=c.join(t),r="{\n"+s+e+",\n"+o+"}"}}return a.pop(),s=o,r}(i):void 0}("",{"":e});function u(e){let t={"'":.1,'"':.2},r={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},n="";for(let o=0;o<e.length;o++){let i=e[o];switch(i){case"'":case'"':t[i]++,n+=i;continue;case"\0":if(v.isDigit(e[o+1])){n+="\\x00";continue}}if(r[i]){n+=r[i];continue}if(i<" "){let e=i.charCodeAt(0).toString(16);n+="\\x"+("00"+e).substring(e.length);continue}n+=i}let o=i||Object.keys(t).reduce((e,r)=>t[e]<t[r]?e:r);return n=n.replace(RegExp(o,"g"),r[o]),o+n+o}}}},66112:(e,t)=>{"use strict";t.__esModule=!0,t.extend=a,t.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return o.test(e)?e.replace(n,i):e},t.isEmpty=function(e){return!e&&0!==e||!!u(e)&&0===e.length},t.createFrame=function(e){var t=a({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},n=/[&<>"'`=]/g,o=/[&<>"'`=]/;function i(e){return r[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}var s=Object.prototype.toString;t.toString=s;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!!e&&"object"==typeof e&&"[object Array]"===s.call(e)};t.isArray=u},66766:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLiteralDef=void 0,t.parseLiteralDef=function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}},66834:(e,t)=>{"use strict";function r(e){let t,r=e.length,n=0,o=0;for(;o<r;)n++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<r&&(64512&(t=e.charCodeAt(o)))==56320&&o++;return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},67062:(e,t,r)=>{"use strict";Object.create;var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=(Object.getPrototypeOf,Object.prototype.hasOwnProperty),s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{CONTEXT_PREFACE:()=>h,augmentWithContext:()=>f,downloadRequestMedia:()=>c,simulateConstrainedGeneration:()=>y,simulateSystemPrompt:()=>d,validateSupport:()=>p}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(40101),u=r(58457);function c(e){return async(t,n)=>{let{default:o}=await r.e(487).then(r.bind(r,10487));return n({...t,messages:await Promise.all(t.messages.map(async t=>{let r=await Promise.all(t.content.map(async t=>{if(!t.media||!t.media.url.startsWith("http")||e?.filter&&!e?.filter(t))return t;let r=await o(t.media.url,{size:e?.maxBytes});if(200!==r.status)throw Error(`HTTP error downloading media '${t.media.url}': ${await r.text()}`);let n=t.media.contentType||r.headers.get("content-type")||"";return{media:{contentType:n,url:`data:${n};base64,${Buffer.from(await r.arrayBuffer()).toString("base64")}`}}}));return{...t,content:r}}))})}}function p(e){let t=e.supports||{};return async(r,n)=>{function o(t){throw Error(`Model '${e.name}' does not support ${t}. Request: ${JSON.stringify(r,null,2)}`)}return!1===t.media&&r.messages.some(e=>e.content.some(e=>e.media))&&o("media, but media was provided"),!1===t.tools&&r.tools?.length&&o("tool use, but tools were provided"),!1===t.multiturn&&r.messages.length>1&&o(`multiple messages, but ${r.messages.length} were provided`),n()}}function d(e){let t=e?.preface||"SYSTEM INSTRUCTIONS:\n",r=e?.acknowledgement||"Understood.";return(e,n)=>{let o=[...e.messages];for(let n=0;n<o.length;n++)if("system"===e.messages[n].role){let e=o[n].content;o.splice(n,1,{role:"user",content:[{text:t},...e]},{role:"model",content:[{text:r}]});break}return n({...e,messages:o})}}let h="\n\nUse the following information to complete your task:\n\n",m=(e,t,r)=>{let n="- ";return r?.citationKey?n+=`[${e.metadata[r.citationKey]}]: `:r?.citationKey===void 0&&(n+=`[${e.metadata?.ref||e.metadata?.id||t}]: `),n+=e.text+"\n"};function f(e){let t=void 0===e?.preface?h:e.preface,r=e?.itemTemplate||m;return(n,o)=>{if(!n.docs?.length)return o(n);let i=function(e){for(let t=e.length-1;t>=0;t--)if("user"===e[t].role)return e[t]}(n.messages);if(!i)return o(n);let a=i?.content.findIndex(e=>e.metadata?.purpose==="context"),s=a>=0&&i.content[a];if(s&&!s.metadata?.pending)return o(n);let u=`${t||""}`;return n.docs?.forEach((t,n)=>{u+=r(new l.Document(t),n,e)}),u+="\n",a>=0?i.content[a]={...s,text:u,metadata:{purpose:"context"}}:i.content.push({text:u,metadata:{purpose:"context"}}),o(n)}}let g=e=>`Output should be in JSON format and conform to the following schema:

\`\`\`
${JSON.stringify(e)}
\`\`\`
`;function y(e){return(t,r)=>{let n;return t.output?.constrained&&t.output?.schema&&(n=(e?.instructionsRenderer??g)(t.output?.schema),t={...t,messages:(0,u.injectInstructions)(t.messages,n),output:{...t.output,constrained:!1,format:void 0,contentType:void 0,schema:void 0}}),r(t)}}},67383:(e,t,r)=>{"use strict";var n=r(12236),o=r(2929),i=r(75853),a=r(70230);function s(e,t){if(t)for(let r of t)switch(r.type){case"space":case"comment":e.push(r);break;case"newline":return e.push(r),!0}return!1}function l(e,t,r){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=r,e.source=t;break;case"block-scalar":{let n=e.props.slice(1),o=t.length;for(let t of("block-scalar-header"===e.props[0].type&&(o-=e.props[0].source.length),n))t.offset+=o;delete e.props,Object.assign(e,{type:r,source:t,end:n});break}case"block-map":case"block-seq":{let n={type:"newline",offset:e.offset+t.length,indent:e.indent,source:"\n"};delete e.items,Object.assign(e,{type:r,source:t,end:[n]});break}default:{let n="indent"in e?e.indent:-1,o="end"in e&&Array.isArray(e.end)?e.end.filter(e=>"space"===e.type||"comment"===e.type||"newline"===e.type):[];for(let t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:r,indent:n,source:t,end:o})}}}t.createScalarToken=function(e,t){let{implicitKey:r=!1,indent:n,inFlow:o=!1,offset:i=-1,type:l="PLAIN"}=t,u=a.stringifyString({type:l,value:e},{implicitKey:r,indent:n>0?" ".repeat(n):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),c=t.end??[{type:"newline",offset:-1,indent:n,source:"\n"}];switch(u[0]){case"|":case">":{let e=u.indexOf("\n"),t=u.substring(0,e),r=u.substring(e+1)+"\n",o=[{type:"block-scalar-header",offset:i,indent:n,source:t}];return s(o,c)||o.push({type:"newline",offset:-1,indent:n,source:"\n"}),{type:"block-scalar",offset:i,indent:n,props:o,source:r}}case'"':return{type:"double-quoted-scalar",offset:i,indent:n,source:u,end:c};case"'":return{type:"single-quoted-scalar",offset:i,indent:n,source:u,end:c};default:return{type:"scalar",offset:i,indent:n,source:u,end:c}}},t.resolveAsScalar=function(e,t=!0,r){if(e){let a=(e,t,n)=>{let o="number"==typeof e?e:Array.isArray(e)?e[0]:e.offset;if(r)r(o,t,n);else throw new i.YAMLParseError([o,o+1],t,n)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return o.resolveFlowScalar(e,t,a);case"block-scalar":return n.resolveBlockScalar({options:{strict:t}},e,a)}}return null},t.setScalarValue=function(e,t,r={}){let{afterKey:n=!1,implicitKey:o=!1,inFlow:i=!1,type:u}=r,c="indent"in e?e.indent:null;if(n&&"number"==typeof c&&(c+=2),!u)switch(e.type){case"single-quoted-scalar":u="QUOTE_SINGLE";break;case"double-quoted-scalar":u="QUOTE_DOUBLE";break;case"block-scalar":{let t=e.props[0];if("block-scalar-header"!==t.type)throw Error("Invalid block scalar header");u=">"===t.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:u="PLAIN"}let p=a.stringifyString({type:u,value:t},{implicitKey:o||null===c,indent:null!==c&&c>0?" ".repeat(c):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}});switch(p[0]){case"|":case">":!function(e,t){let r=t.indexOf("\n"),n=t.substring(0,r),o=t.substring(r+1)+"\n";if("block-scalar"===e.type){let t=e.props[0];if("block-scalar-header"!==t.type)throw Error("Invalid block scalar header");t.source=n,e.source=o}else{let{offset:t}=e,r="indent"in e?e.indent:-1,i=[{type:"block-scalar-header",offset:t,indent:r,source:n}];for(let t of(s(i,"end"in e?e.end:void 0)||i.push({type:"newline",offset:-1,indent:r,source:"\n"}),Object.keys(e)))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:"block-scalar",indent:r,props:i,source:o})}}(e,p);break;case'"':l(e,p,"double-quoted-scalar");break;case"'":l(e,p,"single-quoted-scalar");break;default:l(e,p,"scalar")}}},67432:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},67883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracerProviderWithEnvExporters=void 0;let n=r(18617),o=r(87535),i=r(16911),a=r(58789),s=r(72068),l=r(85029),u=r(43356),c=r(79211);class p extends a.NodeTracerProvider{constructor(e={}){super(e),this._configuredExporters=[],this._hasSpanProcessors=!1;let t=this.filterBlanksAndNulls(Array.from(new Set((0,o.getEnv)().OTEL_TRACES_EXPORTER.split(","))));"none"===t[0]?n.diag.warn('OTEL_TRACES_EXPORTER contains "none". SDK will not be initialized.'):0===t.length?(n.diag.warn("OTEL_TRACES_EXPORTER is empty. Using default otlp exporter."),t=["otlp"],this.createExportersFromList(t),this._spanProcessors=this.configureSpanProcessors(this._configuredExporters),this._spanProcessors.forEach(e=>{this.addSpanProcessor(e)})):(t.length>1&&t.includes("none")&&(n.diag.warn('OTEL_TRACES_EXPORTER contains "none" along with other exporters. Using default otlp exporter.'),t=["otlp"]),this.createExportersFromList(t),this._configuredExporters.length>0?(this._spanProcessors=this.configureSpanProcessors(this._configuredExporters),this._spanProcessors.forEach(e=>{this.addSpanProcessor(e)})):n.diag.warn("Unable to set up trace exporter(s) due to invalid exporter and/or protocol values."))}static configureOtlp(){let e=this.getOtlpProtocol();switch(e){case"grpc":return new u.OTLPTraceExporter;case"http/json":return new l.OTLPTraceExporter;case"http/protobuf":return new s.OTLPTraceExporter;default:return n.diag.warn(`Unsupported OTLP traces protocol: ${e}. Using http/protobuf.`),new s.OTLPTraceExporter}}static getOtlpProtocol(){var e,t,r;let n=(0,o.getEnvWithoutDefaults)();return null!=(r=null!=(t=null!=(e=n.OTEL_EXPORTER_OTLP_TRACES_PROTOCOL)?e:n.OTEL_EXPORTER_OTLP_PROTOCOL)?t:(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_PROTOCOL)?r:(0,o.getEnv)().OTEL_EXPORTER_OTLP_PROTOCOL}static configureJaeger(){try{let{JaegerExporter:e}=r(Object(function(){var e=Error("Cannot find module '@opentelemetry/exporter-jaeger'");throw e.code="MODULE_NOT_FOUND",e}()));return new e}catch(e){throw Error(`Could not instantiate JaegerExporter. This could be due to the JaegerExporter's lack of support for bundling. If possible, use @opentelemetry/exporter-trace-otlp-proto instead. Original Error: ${e}`)}}addSpanProcessor(e){super.addSpanProcessor(e),this._hasSpanProcessors=!0}register(e){this._hasSpanProcessors&&super.register(e)}createExportersFromList(e){e.forEach(e=>{let t=this._getSpanExporter(e);t?this._configuredExporters.push(t):n.diag.warn(`Unrecognized OTEL_TRACES_EXPORTER value: ${e}.`)})}configureSpanProcessors(e){return e.map(e=>e instanceof i.ConsoleSpanExporter?new i.SimpleSpanProcessor(e):new i.BatchSpanProcessor(e))}filterBlanksAndNulls(e){return e.map(e=>e.trim()).filter(e=>"null"!==e&&""!==e)}}t.TracerProviderWithEnvExporters=p,p._registeredExporters=new Map([["otlp",()=>p.configureOtlp()],["zipkin",()=>new c.ZipkinExporter],["jaeger",()=>p.configureJaeger()],["console",()=>new i.ConsoleSpanExporter]])},67884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;let n=r(22964),o=r(58592),i=r(45346),a=r(58592);function s(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}function l(e,t,r){return(0,n._)`${s(e)}.call(${t}, ${r})`}function u(e,t,r,o){let i=(0,n._)`${t}${(0,n.getProperty)(r)} === undefined`;return o?(0,n.or)(i,(0,n.not)(l(e,t,r))):i}function c(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){let{gen:r,data:o,it:i}=e;r.if(u(r,o,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,n._)`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},o,i){return(0,n.or)(...o.map(o=>(0,n.and)(u(e,t,o,r.ownProperties),(0,n._)`${i} = ${o}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=s,t.isOwnProperty=l,t.propertyInData=function(e,t,r,o){let i=(0,n._)`${t}${(0,n.getProperty)(r)} !== undefined`;return o?(0,n._)`${i} && ${l(e,t,r)}`:i},t.noPropertyInData=u,t.allSchemaProperties=c,t.schemaProperties=function(e,t){return c(t).filter(r=>!(0,o.alwaysValidSchema)(e,t[r]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:o,schemaPath:a,errorPath:s},it:l},u,c,p){let d=p?(0,n._)`${e}, ${t}, ${o}${a}`:t,h=[[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,s)],[i.default.parentData,l.parentData],[i.default.parentDataProperty,l.parentDataProperty],[i.default.rootData,i.default.rootData]];l.opts.dynamicRef&&h.push([i.default.dynamicAnchors,i.default.dynamicAnchors]);let m=(0,n._)`${d}, ${r.object(...h)}`;return c!==n.nil?(0,n._)`${u}.call(${c}, ${m})`:(0,n._)`${u}(${m})`};let p=(0,n._)`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){let o=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(r,o);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,n._)`${"new RegExp"===i.code?p:(0,a.useFunc)(e,i)}(${r}, ${o})`})},t.validateArray=function(e){let{gen:t,data:r,keyword:i,it:a}=e,s=t.name("valid");if(a.allErrors){let e=t.let("valid",!0);return l(()=>t.assign(e,!1)),e}return t.var(s,!0),l(()=>t.break()),s;function l(a){let l=t.const("len",(0,n._)`${r}.length`);t.forRange("i",0,l,r=>{e.subschema({keyword:i,dataProp:r,dataPropType:o.Type.Num},s),t.if((0,n.not)(s),a)})}},t.validateUnion=function(e){let{gen:t,schema:r,keyword:i,it:a}=e;if(!Array.isArray(r))throw Error("ajv implementation error");if(r.some(e=>(0,o.alwaysValidSchema)(a,e))&&!a.opts.unevaluated)return;let s=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((r,o)=>{let a=e.subschema({keyword:i,schemaProp:o,compositeRule:!0},l);t.assign(s,(0,n._)`${s} || ${l}`),e.mergeValidEvaluated(a,l)||t.if((0,n.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}},68073:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{Message:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(11535);class u{role;content;metadata;parser;static parseData(e,t="user"){return"string"==typeof e?{role:t,content:[{text:e}]}:{...e,content:u.parseContent(e.content)}}static parse(e){return new u(u.parseData(e))}static parseContent(e){return"string"==typeof e?[{text:e}]:Array.isArray(e)?e.map(e=>"string"==typeof e?{text:e}:e):[e]}constructor(e,t){this.role=e.role,this.content=e.content,this.metadata=e.metadata,this.parser=t?.parser}get output(){return this.parser?.(this)||this.data||(0,l.extractJson)(this.text)}toolResponseParts(){return this.content.filter(e=>!!e.toolResponse)}get text(){return this.content.map(e=>e.text||"").join("")}get reasoning(){return this.content.map(e=>e.reasoning||"").join("")}get media(){return this.content.find(e=>e.media)?.media||null}get data(){return this.content.find(e=>e.data)?.data}get toolRequests(){return this.content.filter(e=>!!e.toolRequest)}get interrupts(){return this.toolRequests.filter(e=>!!e.metadata?.interrupt)}toJSON(){let e={role:this.role,content:[...this.content]};return this.metadata&&(e.metadata=this.metadata),e}}},68078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRefs=void 0;let n=r(2784);t.getRefs=e=>{let t=(0,n.getDefaultOptions)(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}}},68360:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty;e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),{})},68518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;let n=r(22964),o=r(45346),i=r(67884),a=r(37439);function s(e){let{gen:t,data:r,it:o}=e;t.if(o.parentData,()=>t.assign(r,(0,n._)`${o.parentData}[${o.parentDataProperty}]`))}function l(e,t,r){if(void 0===r)throw Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,n.stringify)(r)})}t.macroKeywordCode=function(e,t){let{gen:r,keyword:o,schema:i,parentSchema:a,it:s}=e,u=t.macro.call(s.self,i,a,s),c=l(r,o,u);!1!==s.opts.validateSchema&&s.self.validateSchema(u,!0);let p=r.name("valid");e.subschema({schema:u,schemaPath:n.nil,errSchemaPath:`${s.errSchemaPath}/${o}`,topSchemaRef:c,compositeRule:!0},p),e.pass(p,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var r;let{gen:u,keyword:c,schema:p,parentSchema:d,$data:h,it:m}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw Error("async keyword in sync schema")}(m,t);let f=l(u,c,!h&&t.compile?t.compile.call(m.self,p,d,m):t.validate),g=u.let("valid");function y(r=t.async?(0,n._)`await `:n.nil){let a=m.opts.passContext?o.default.this:o.default.self,s=!("compile"in t&&!h||!1===t.schema);u.assign(g,(0,n._)`${r}${(0,i.callValidateCode)(e,f,a,s)}`,t.modifying)}function v(e){var r;u.if((0,n.not)(null!=(r=t.valid)?r:g),e)}e.block$data(g,function(){if(!1===t.errors)y(),t.modifying&&s(e),v(()=>e.error());else{let r=t.async?function(){let e=u.let("ruleErrs",null);return u.try(()=>y((0,n._)`await `),t=>u.assign(g,!1).if((0,n._)`${t} instanceof ${m.ValidationError}`,()=>u.assign(e,(0,n._)`${t}.errors`),()=>u.throw(t))),e}():function(){let e=(0,n._)`${f}.errors`;return u.assign(e,null),y(n.nil),e}();t.modifying&&s(e),v(()=>(function(e,t){let{gen:r}=e;r.if((0,n._)`Array.isArray(${t})`,()=>{r.assign(o.default.vErrors,(0,n._)`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`).assign(o.default.errors,(0,n._)`${o.default.vErrors}.length`),(0,a.extendErrors)(e)},()=>e.error())})(e,r))}}),e.ok(null!=(r=t.valid)?r:g)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:n},o,i){if(Array.isArray(o.keyword)?!o.keyword.includes(i):o.keyword!==i)throw Error("ajv implementation error");let a=o.dependencies;if(null==a?void 0:a.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw Error(`parent schema must have dependencies of ${i}: ${a.join(",")}`);if(o.validateSchema&&!o.validateSchema(e[i])){let e=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(o.validateSchema.errors);if("log"===t.validateSchema)r.logger.error(e);else throw Error(e)}}},68737:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.tracing=t.resources=t.node=t.metrics=t.logs=t.core=t.contextBase=t.api=void 0,t.api=r(18617),t.contextBase=r(18617),t.core=r(87535),t.logs=r(45768),t.metrics=r(57634),t.node=r(58789),t.resources=r(23226),t.tracing=r(16911),o(r(50069),t),o(r(67432),t)},69844:(e,t)=>{"use strict";t.resolveProps=function(e,{flow:t,indicator:r,next:n,offset:o,onError:i,parentIndent:a,startOnNewline:s}){let l=!1,u=s,c=s,p="",d="",h=!1,m=!1,f=null,g=null,y=null,v=null,b=null,_=null,E=null;for(let o of e)switch(m&&("space"!==o.type&&"newline"!==o.type&&"comma"!==o.type&&i(o.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m=!1),f&&(u&&"comment"!==o.type&&"newline"!==o.type&&i(f,"TAB_AS_INDENT","Tabs are not allowed as indentation"),f=null),o.type){case"space":!t&&("doc-start"!==r||n?.type!=="flow-collection")&&o.source.includes("	")&&(f=o),c=!0;break;case"comment":{c||i(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let e=o.source.substring(1)||" ";p?p+=d+e:p=e,d="",u=!1;break}case"newline":u?p?p+=o.source:_&&"seq-item-ind"===r||(l=!0):d+=o.source,u=!0,h=!0,(g||y)&&(v=o),c=!0;break;case"anchor":g&&i(o,"MULTIPLE_ANCHORS","A node can have at most one anchor"),o.source.endsWith(":")&&i(o.offset+o.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=o,E??(E=o.offset),u=!1,c=!1,m=!0;break;case"tag":y&&i(o,"MULTIPLE_TAGS","A node can have at most one tag"),y=o,E??(E=o.offset),u=!1,c=!1,m=!0;break;case r:(g||y)&&i(o,"BAD_PROP_ORDER",`Anchors and tags must be after the ${o.source} indicator`),_&&i(o,"UNEXPECTED_TOKEN",`Unexpected ${o.source} in ${t??"collection"}`),_=o,u="seq-item-ind"===r||"explicit-key-ind"===r,c=!1;break;case"comma":if(t){b&&i(o,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),b=o,u=!1,c=!1;break}default:i(o,"UNEXPECTED_TOKEN",`Unexpected ${o.type} token`),u=!1,c=!1}let S=e[e.length-1],x=S?S.offset+S.source.length:o;return m&&n&&"space"!==n.type&&"newline"!==n.type&&"comma"!==n.type&&("scalar"!==n.type||""!==n.source)&&i(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),f&&(u&&f.indent<=a||n?.type==="block-map"||n?.type==="block-seq")&&i(f,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:b,found:_,spaceBefore:l,comment:p,hasNewline:h,anchor:g,tag:y,newlineAfterProp:v,end:x,start:E??x}}},69845:e=>{"use strict";let t=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,r=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function o(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function i(e){let t="https"===String(e.scheme).toLowerCase();return(e.port===(t?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}let a={scheme:"http",domainHost:!0,parse:o,serialize:i},s={scheme:"https",domainHost:a.domainHost,parse:o,serialize:i},l={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=n(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if((e.port===(n(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},u={scheme:"wss",domainHost:l.domainHost,parse:l.parse,serialize:l.serialize},c={http:a,https:s,ws:l,wss:u,urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;let n=e.path.match(r);if(n){let r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];let o=c[`${r}:${t.nid||e.nid}`];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),o=c[`${r}:${t.nid||n}`];o&&(e=o.serialize(e,t));let i=e,a=e.nss;return i.path=`${n||t.nid}:${a}`,t.skipEscape=!0,i},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,r){return e.uuid=e.nss,e.nss=void 0,r.tolerant||e.uuid&&t.test(e.uuid)||(e.error=e.error||"UUID is not valid."),e},serialize:function(e){return e.nss=(e.uuid||"").toLowerCase(),e},skipNormalize:!0}};e.exports=c},70080:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(76704),i=n(r(58668)),a=r(66112),s=n(r(16837));function l(e){this.value=e}function u(){}u.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=o.COMPILER_REVISION,t=o.REVISION_CHANGES[e];return[e,t]},appendToBuffer:function(e,t,r){return(a.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple)?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,a=void 0,s=void 0,l=void 0,u=void 0;for(l=0,u=o.length;l<u;l++)a=o[l],this.source.currentLocation=a.loc,s=s||a.loc,this[a.opcode].apply(this,a.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var p={compiler:this.compilerInfo(),main:c};this.decorators&&(p.main_d=this.decorators,p.useDecorators=!0);var d=this.context,h=d.programs,m=d.decorators;for(l=0,u=h.length;l<u;l++)h[l]&&(p[l]=h[l],m[l]&&(p[l+"_d"]=m[l],p.useDecorators=!0));return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),n?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),t.srcName?(p=p.toStringWithSourceMap({file:t.destName})).map=p.map&&p.map.toString():p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new s.default(this.options.srcName),this.decorators=new s.default(this.options.srcName)},createFunctionContext:function(e){var t=this,r="",n=this.stackVars.concat(this.registers.list);n.length>0&&(r+=", "+n.join(", "));var o=0;Object.keys(this.aliases).forEach(function(e){var n=t.aliases[e];n.children&&n.referenceCount>1&&(r+=", alias"+ ++o+"="+e,n.children[0]="alias"+o)}),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var i=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths");var a=this.mergeSource(r);return e?(i.push(a),Function.apply(this,i)):this.source.wrap(["function(",i.join(","),") {\n  ",a,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,o=void 0,i=void 0,a=void 0;return this.source.each(function(e){e.appendToBuffer?(i?e.prepend("  + "):i=e,a=e):(i&&(o?i.prepend("buffer += "):n=!0,a.add(";"),i=a=void 0),o=!0,t||(r=!1))}),r?i?(i.prepend("return "),a.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),i?(i.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var o=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[o++])),this.resolvePath("context",e,o,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(e,t,r,n,o){var i=this;if(this.options.strict||this.options.assumeObjects)return void this.push(function(e,t,r,n,o){var i=t.popStack(),a=r.length;for(e&&a--;n<a;n++)i=t.nameLookup(i,r[n],o);return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(r[n]),", ",JSON.stringify(t.source.currentLocation)," )"]:i}(this.options.strict&&o,this,t,r,e));for(var a=t.length;r<a;r++)this.replaceStack(function(o){var a=i.nameLookup(o,t[r],e);return n?[" && ",a]:[" != null ? ",a," : ",o]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),o=this.setupHelper(e,t),i=[];r&&i.push(o.name),i.push(n),this.options.strict||i.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(i,"||"),")"],s=this.source.functionCall(a,"call",o.callParams);this.push(s)},itemsSeparatedBy:function(e,t){var r=[];r.push(e[0]);for(var n=1;n<e.length;n++)r.push(t,e[n]);return r},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),o=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",r,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",o,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],o=this.setupParams(t,1,n);e&&(t=this.popStack(),delete o.name),r&&(o.indent=JSON.stringify(r)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),n.push(o),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var i=this.hash;r&&(i.contexts[e]=r),n&&(i.types[e]=n),o&&(i.ids[e]=o),i.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(e,t){for(var r=e.children,n=void 0,o=void 0,i=0,a=r.length;i<a;i++){n=r[i],o=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=o.compile(n,t,this.context,!this.precompile),this.context.decorators[l]=o.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;t<r;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof l||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new l(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,n=void 0,o=void 0;if(!this.isInline())throw new i.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof l)t=["(",r=[a.value]],o=!0;else{n=!0;var s=this.incrStack();t=["((",this.push(s)," = ",a,")"],r=this.topStack()}var u=e.call(this,r);o||this.popStack(),n&&this.stackSlot--,this.push(t.concat(u,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];if(n instanceof l)this.compileStack.push(n);else{var o=this.incrStack();this.pushSource([o," = ",n,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof l)return r.value;if(!t){if(!this.stackSlot)throw new i.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof l?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?t.referenceCount++:((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1),t},setupHelper:function(e,t,r){var n=[],o=this.setupHelperArgs(t,e,n,r);return{params:n,paramsInit:o,name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(e,t,r){var n={},o=[],i=[],a=[],s=!r,l=void 0;s&&(r=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var u=this.popStack(),c=this.popStack();(c||u)&&(n.fn=c||"container.noop",n.inverse=u||"container.noop");for(var p=t;p--;)l=this.popStack(),r[p]=l,this.trackIds&&(a[p]=this.popStack()),this.stringParams&&(i[p]=this.popStack(),o[p]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(i),n.contexts=this.source.generateArray(o)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var o=this.setupParams(e,t,r);return(o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),n)?(this.useRegister("options"),r.push("options"),["options=",o]):r?(r.push(o),""):o}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=u.RESERVED_WORDS={},r=0,n=e.length;r<n;r++)t[e[r]]=!0}(),u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=u,e.exports=t.default},70230:(e,t,r)=>{"use strict";let n;var o=r(46076),i=r(41984);let a=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),s=e=>/^(%|---|\.\.\.)/m.test(e);function l(e,t){let r=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=t,o=t.options.doubleQuotedMinMultiLineLength,l=t.indent||(s(e)?"  ":""),u="",c=0;for(let e=0,t=r[e];t;t=r[++e])if(" "===t&&"\\"===r[e+1]&&"n"===r[e+2]&&(u+=r.slice(c,e)+"\\ ",e+=1,c=e,t="\\"),"\\"===t)switch(r[e+1]){case"u":{u+=r.slice(c,e);let t=r.substr(e+2,4);switch(t){case"0000":u+="\\0";break;case"0007":u+="\\a";break;case"000b":u+="\\v";break;case"001b":u+="\\e";break;case"0085":u+="\\N";break;case"00a0":u+="\\_";break;case"2028":u+="\\L";break;case"2029":u+="\\P";break;default:"00"===t.substr(0,2)?u+="\\x"+t.substr(2):u+=r.substr(e,6)}e+=5,c=e+1}break;case"n":if(n||'"'===r[e+2]||r.length<o)e+=1;else{for(u+=r.slice(c,e)+"\n\n";"\\"===r[e+2]&&"n"===r[e+3]&&'"'!==r[e+4];)u+="\n",e+=2;u+=l," "===r[e+2]&&(u+="\\"),e+=1,c=e+1}break;default:e+=1}return u=c?u+r.slice(c):r,n?u:i.foldFlowLines(u,l,i.FOLD_QUOTED,a(t,!1))}function u(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return l(e,t);let r=t.indent||(s(e)?"  ":""),n="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return t.implicitKey?n:i.foldFlowLines(n,r,i.FOLD_FLOW,a(t,!1))}function c(e,t){let r,{singleQuote:n}=t.options;if(!1===n)r=l;else{let t=e.includes('"'),o=e.includes("'");r=t&&!o?u:o&&!t?l:n?u:l}return r(e,t)}try{n=RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{n=/\n+(?!\n|$)/g}function p({comment:e,type:t,value:r},l,u,p){let d,h,m,{blockQuote:f,commentString:g,lineWidth:y}=l.options;if(!f||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return c(r,l);let v=l.indent||(l.forceBlockIndent||s(r)?"  ":""),b="literal"===f||"folded"!==f&&t!==o.Scalar.BLOCK_FOLDED&&(t===o.Scalar.BLOCK_LITERAL||!function(e,t,r){if(!t||t<0)return!1;let n=t-r,o=e.length;if(o<=n)return!1;for(let t=0,r=0;t<o;++t)if("\n"===e[t]){if(t-r>n)return!0;if(o-(r=t+1)<=n)return!1}return!0}(r,y,v.length));if(!r)return b?"|\n":">\n";for(h=r.length;h>0;--h){let e=r[h-1];if("\n"!==e&&"	"!==e&&" "!==e)break}let _=r.substring(h),E=_.indexOf("\n");-1===E?d="-":r===_||E!==_.length-1?(d="+",p&&p()):d="",_&&(r=r.slice(0,-_.length),"\n"===_[_.length-1]&&(_=_.slice(0,-1)),_=_.replace(n,`$&${v}`));let S=!1,x=-1;for(m=0;m<r.length;++m){let e=r[m];if(" "===e)S=!0;else if("\n"===e)x=m;else break}let w=r.substring(0,x<m?x+1:m);w&&(r=r.substring(w.length),w=w.replace(/\n+/g,`$&${v}`));let T=v?"2":"1",A=(S?T:"")+d;if(e&&(A+=" "+g(e.replace(/ ?[\r\n]+/g," ")),u&&u()),!b){let e=r.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${v}`),n=!1,s=a(l,!0);"folded"!==f&&t!==o.Scalar.BLOCK_FOLDED&&(s.onOverflow=()=>{n=!0});let u=i.foldFlowLines(`${w}${e}${_}`,v,i.FOLD_BLOCK,s);if(!n)return`>${A}
${v}${u}`}return r=r.replace(/\n+/g,`$&${v}`),`|${A}
${v}${w}${r}${_}`}t.stringifyString=function(e,t,r,n){let{implicitKey:d,inFlow:h}=t,m="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)}),{type:f}=e;f!==o.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(m.value)&&(f=o.Scalar.QUOTE_DOUBLE);let g=e=>{switch(e){case o.Scalar.BLOCK_FOLDED:case o.Scalar.BLOCK_LITERAL:return d||h?c(m.value,t):p(m,t,r,n);case o.Scalar.QUOTE_DOUBLE:return l(m.value,t);case o.Scalar.QUOTE_SINGLE:return u(m.value,t);case o.Scalar.PLAIN:return function(e,t,r,n){let{type:l,value:u}=e,{actualString:d,implicitKey:h,indent:m,indentStep:f,inFlow:g}=t;if(h&&u.includes("\n")||g&&/[[\]{},]/.test(u))return c(u,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(u))return h||g||!u.includes("\n")?c(u,t):p(e,t,r,n);if(!h&&!g&&l!==o.Scalar.PLAIN&&u.includes("\n"))return p(e,t,r,n);if(s(u)){if(""===m)return t.forceBlockIndent=!0,p(e,t,r,n);else if(h&&m===f)return c(u,t)}let y=u.replace(/\n+/g,`$&
${m}`);if(d){let e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(y),{compat:r,tags:n}=t.doc.schema;if(n.some(e)||r?.some(e))return c(u,t)}return h?y:i.foldFlowLines(y,m,i.FOLD_FLOW,a(t,!1))}(m,t,r,n);default:return null}},y=g(f);if(null===y){let{defaultKeyType:e,defaultStringType:r}=t.options,n=d&&e||r;if(null===(y=g(n)))throw Error(`Unsupported default string type ${n}`)}return y}},70350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDef=void 0;let n=r(2784),o=r(3139),i=r(57277),a=r(18271);t.parseDef=function e(t,r,i=!1){let a=r.seen.get(t);if(r.override){let e=r.override?.(t,r,a,i);if(e!==n.ignoreOverride)return e}if(a&&!i){let e=s(a,r);if(void 0!==e)return e}let u={def:t,path:r.currentPath,jsonSchema:void 0};r.seen.set(t,u);let c=(0,o.selectParser)(t,t.typeName,r),p="function"==typeof c?e(c(),r):c;if(p&&l(t,r,p),r.postProcess){let e=r.postProcess(p,t,r);return u.jsonSchema=p,e}return u.jsonSchema=p,p};let s=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:(0,i.getRelativePath)(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),(0,a.parseAnyDef)(t);return"seen"===t.$refStrategy?(0,a.parseAnyDef)(t):void 0}},l=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r)},70762:(e,t,r)=>{"use strict";let n;r.d(t,{z:()=>tu}),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(tn||(tn={})),(to||(to={})).mergeShapes=(e,t)=>({...e,...t});let o=tn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),i=e=>{switch(typeof e){case"undefined":return o.undefined;case"string":return o.string;case"number":return isNaN(e)?o.nan:o.number;case"boolean":return o.boolean;case"function":return o.function;case"bigint":return o.bigint;case"symbol":return o.symbol;case"object":if(Array.isArray(e))return o.array;if(null===e)return o.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return o.promise;if("undefined"!=typeof Map&&e instanceof Map)return o.map;if("undefined"!=typeof Set&&e instanceof Set)return o.set;if("undefined"!=typeof Date&&e instanceof Date)return o.date;return o.object;default:return o.unknown}},a=tn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class s extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let o of e.issues)if("invalid_union"===o.code)o.unionErrors.map(n);else if("invalid_return_type"===o.code)n(o.returnTypeError);else if("invalid_arguments"===o.code)n(o.argumentsError);else if(0===o.path.length)r._errors.push(t(o));else{let e=r,n=0;for(;n<o.path.length;){let r=o.path[n];n===o.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(o))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof s))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tn.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}s.create=e=>new s(e);let l=(e,t)=>{let r;switch(e.code){case a.invalid_type:r=e.received===o.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case a.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,tn.jsonStringifyReplacer)}`;break;case a.unrecognized_keys:r=`Unrecognized key(s) in object: ${tn.joinValues(e.keys,", ")}`;break;case a.invalid_union:r="Invalid input";break;case a.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${tn.joinValues(e.options)}`;break;case a.invalid_enum_value:r=`Invalid enum value. Expected ${tn.joinValues(e.options)}, received '${e.received}'`;break;case a.invalid_arguments:r="Invalid function arguments";break;case a.invalid_return_type:r="Invalid function return type";break;case a.invalid_date:r="Invalid date";break;case a.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:tn.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case a.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case a.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case a.custom:r="Invalid input";break;case a.invalid_intersection_types:r="Intersection results could not be merged";break;case a.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case a.not_finite:r="Number must be finite";break;default:r=t.defaultError,tn.assertNever(e)}return{message:r}},u=l;function c(){return u}let p=e=>{let{data:t,path:r,errorMaps:n,issueData:o}=e,i=[...r,...o.path||[]],a={...o,path:i};if(void 0!==o.message)return{...o,path:i,message:o.message};let s="";for(let e of n.filter(e=>!!e).slice().reverse())s=e(a,{data:t,defaultError:s}).message;return{...o,path:i,message:s}};function d(e,t){let r=c(),n=p({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===l?void 0:l].filter(e=>!!e)});e.common.issues.push(n)}class h{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return m;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return h.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:o}=n;if("aborted"===t.status||"aborted"===o.status)return m;"dirty"===t.status&&e.dirty(),"dirty"===o.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==o.value||n.alwaysSet)&&(r[t.value]=o.value)}return{status:e.value,value:r}}}let m=Object.freeze({status:"aborted"}),f=e=>({status:"dirty",value:e}),g=e=>({status:"valid",value:e}),y=e=>"aborted"===e.status,v=e=>"dirty"===e.status,b=e=>"valid"===e.status,_=e=>"undefined"!=typeof Promise&&e instanceof Promise;function E(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function S(e,t,r,n,o){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(ti||(ti={}));class x{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let w=(e,t)=>{if(b(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new s(e.common.issues);return this._error=t,this._error}}};function T(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:o}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:o}:{errorMap:(t,o)=>{var i,a;let{message:s}=e;return"invalid_enum_value"===t.code?{message:null!=s?s:o.defaultError}:void 0===o.data?{message:null!=(i=null!=s?s:n)?i:o.defaultError}:"invalid_type"!==t.code?{message:o.defaultError}:{message:null!=(a=null!=s?s:r)?a:o.defaultError}},description:o}}class A{get description(){return this._def.description}_getType(e){return i(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:i(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new h,ctx:{common:e.parent.common,data:e.data,parsedType:i(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(_(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:i(e)},o=this._parseSync({data:e,path:n.path,parent:n});return w(n,o)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:i(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return b(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null==(r=null==(t=null==e?void 0:e.message)?void 0:t.toLowerCase())?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>b(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:i(e)},n=this._parse({data:e,path:r.path,parent:r});return w(r,await (_(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let o=e(t),i=()=>n.addIssue({code:a.custom,...r(t)});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(e=>!!e||(i(),!1)):!!o||(i(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new e_({schema:this,typeName:tl.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eE.create(this,this._def)}nullable(){return eS.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return en.create(this)}promise(){return eb.create(this,this._def)}or(e){return ei.create([this,e],this._def)}and(e){return el.create(this,e,this._def)}transform(e){return new e_({...T(this._def),schema:this,typeName:tl.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ex({...T(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:tl.ZodDefault})}brand(){return new eO({typeName:tl.ZodBranded,type:this,...T(this._def)})}catch(e){return new ew({...T(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:tl.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eN.create(this,e)}readonly(){return eP.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let O=/^c[^\s-]{8,}$/i,N=/^[0-9a-z]+$/,P=/^[0-9A-HJKMNP-TV-Z]{26}$/i,C=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,k=/^[a-z0-9_-]{21}$/i,I=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,D=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,R=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,L=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,M=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,j=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,U=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,F=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,B="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",V=RegExp(`^${B}$`);function z(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function G(e){let t=`${B}T${z(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class H extends A{_parse(e){var t,r,i,s;let l;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==o.string){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.string,received:t.parsedType}),m}let u=new h;for(let o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(d(l=this._getOrReturnCtx(e,l),{code:a.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),u.dirty());else if("max"===o.kind)e.data.length>o.value&&(d(l=this._getOrReturnCtx(e,l),{code:a.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),u.dirty());else if("length"===o.kind){let t=e.data.length>o.value,r=e.data.length<o.value;(t||r)&&(l=this._getOrReturnCtx(e,l),t?d(l,{code:a.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):r&&d(l,{code:a.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),u.dirty())}else if("email"===o.kind)R.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"email",code:a.invalid_string,message:o.message}),u.dirty());else if("emoji"===o.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"emoji",code:a.invalid_string,message:o.message}),u.dirty());else if("uuid"===o.kind)C.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"uuid",code:a.invalid_string,message:o.message}),u.dirty());else if("nanoid"===o.kind)k.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"nanoid",code:a.invalid_string,message:o.message}),u.dirty());else if("cuid"===o.kind)O.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"cuid",code:a.invalid_string,message:o.message}),u.dirty());else if("cuid2"===o.kind)N.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"cuid2",code:a.invalid_string,message:o.message}),u.dirty());else if("ulid"===o.kind)P.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"ulid",code:a.invalid_string,message:o.message}),u.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(t){d(l=this._getOrReturnCtx(e,l),{validation:"url",code:a.invalid_string,message:o.message}),u.dirty()}else"regex"===o.kind?(o.regex.lastIndex=0,o.regex.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"regex",code:a.invalid_string,message:o.message}),u.dirty())):"trim"===o.kind?e.data=e.data.trim():"includes"===o.kind?e.data.includes(o.value,o.position)||(d(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),u.dirty()):"toLowerCase"===o.kind?e.data=e.data.toLowerCase():"toUpperCase"===o.kind?e.data=e.data.toUpperCase():"startsWith"===o.kind?e.data.startsWith(o.value)||(d(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:{startsWith:o.value},message:o.message}),u.dirty()):"endsWith"===o.kind?e.data.endsWith(o.value)||(d(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:{endsWith:o.value},message:o.message}),u.dirty()):"datetime"===o.kind?G(o).test(e.data)||(d(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:"datetime",message:o.message}),u.dirty()):"date"===o.kind?V.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:"date",message:o.message}),u.dirty()):"time"===o.kind?RegExp(`^${z(o)}$`).test(e.data)||(d(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:"time",message:o.message}),u.dirty()):"duration"===o.kind?D.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"duration",code:a.invalid_string,message:o.message}),u.dirty()):"ip"===o.kind?(t=e.data,!(("v4"===(r=o.version)||!r)&&L.test(t)||("v6"===r||!r)&&j.test(t))&&1&&(d(l=this._getOrReturnCtx(e,l),{validation:"ip",code:a.invalid_string,message:o.message}),u.dirty())):"jwt"===o.kind?!function(e,t){if(!I.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));if("object"!=typeof o||null===o||!o.typ||!o.alg||t&&o.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,o.alg)&&(d(l=this._getOrReturnCtx(e,l),{validation:"jwt",code:a.invalid_string,message:o.message}),u.dirty()):"cidr"===o.kind?(i=e.data,!(("v4"===(s=o.version)||!s)&&M.test(i)||("v6"===s||!s)&&U.test(i))&&1&&(d(l=this._getOrReturnCtx(e,l),{validation:"cidr",code:a.invalid_string,message:o.message}),u.dirty())):"base64"===o.kind?F.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"base64",code:a.invalid_string,message:o.message}),u.dirty()):"base64url"===o.kind?$.test(e.data)||(d(l=this._getOrReturnCtx(e,l),{validation:"base64url",code:a.invalid_string,message:o.message}),u.dirty()):tn.assertNever(o);return{status:u.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:a.invalid_string,...ti.errToObj(r)})}_addCheck(e){return new H({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ti.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ti.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ti.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ti.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ti.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ti.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ti.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ti.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ti.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ti.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ti.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ti.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ti.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(r=null==e?void 0:e.local)&&r,...ti.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...ti.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ti.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ti.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...ti.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ti.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ti.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ti.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ti.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ti.errToObj(t)})}nonempty(e){return this.min(1,ti.errToObj(e))}trim(){return new H({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new H({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new H({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}H.create=e=>{var t;return new H({checks:[],typeName:tl.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...T(e)})};class q extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==o.number){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.number,received:t.parsedType}),m}let r=new h;for(let n of this._def.checks)"int"===n.kind?tn.isInteger(e.data)||(d(t=this._getOrReturnCtx(e,t),{code:a.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(d(t=this._getOrReturnCtx(e,t),{code:a.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(d(t=this._getOrReturnCtx(e,t),{code:a.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,o=r>n?r:n;return parseInt(e.toFixed(o).replace(".",""))%parseInt(t.toFixed(o).replace(".",""))/Math.pow(10,o)}(e.data,n.value)&&(d(t=this._getOrReturnCtx(e,t),{code:a.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(d(t=this._getOrReturnCtx(e,t),{code:a.not_finite,message:n.message}),r.dirty()):tn.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ti.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ti.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ti.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ti.toString(t))}setLimit(e,t,r,n){return new q({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ti.toString(n)}]})}_addCheck(e){return new q({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ti.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ti.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ti.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ti.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ti.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ti.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ti.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ti.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ti.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&tn.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}q.create=e=>new q({checks:[],typeName:tl.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...T(e)});class K extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==o.bigint)return this._getInvalidInput(e);let r=new h;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(d(t=this._getOrReturnCtx(e,t),{code:a.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(d(t=this._getOrReturnCtx(e,t),{code:a.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(d(t=this._getOrReturnCtx(e,t),{code:a.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):tn.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.bigint,received:t.parsedType}),m}gte(e,t){return this.setLimit("min",e,!0,ti.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ti.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ti.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ti.toString(t))}setLimit(e,t,r,n){return new K({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ti.toString(n)}]})}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ti.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ti.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ti.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ti.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ti.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}K.create=e=>{var t;return new K({checks:[],typeName:tl.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...T(e)})};class Z extends A{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==o.boolean){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.boolean,received:t.parsedType}),m}return g(e.data)}}Z.create=e=>new Z({typeName:tl.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...T(e)});class Y extends A{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==o.date){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.date,received:t.parsedType}),m}if(isNaN(e.data.getTime()))return d(this._getOrReturnCtx(e),{code:a.invalid_date}),m;let r=new h;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(d(t=this._getOrReturnCtx(e,t),{code:a.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(d(t=this._getOrReturnCtx(e,t),{code:a.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):tn.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Y({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ti.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ti.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Y.create=e=>new Y({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:tl.ZodDate,...T(e)});class J extends A{_parse(e){if(this._getType(e)!==o.symbol){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.symbol,received:t.parsedType}),m}return g(e.data)}}J.create=e=>new J({typeName:tl.ZodSymbol,...T(e)});class W extends A{_parse(e){if(this._getType(e)!==o.undefined){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.undefined,received:t.parsedType}),m}return g(e.data)}}W.create=e=>new W({typeName:tl.ZodUndefined,...T(e)});class X extends A{_parse(e){if(this._getType(e)!==o.null){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.null,received:t.parsedType}),m}return g(e.data)}}X.create=e=>new X({typeName:tl.ZodNull,...T(e)});class Q extends A{constructor(){super(...arguments),this._any=!0}_parse(e){return g(e.data)}}Q.create=e=>new Q({typeName:tl.ZodAny,...T(e)});class ee extends A{constructor(){super(...arguments),this._unknown=!0}_parse(e){return g(e.data)}}ee.create=e=>new ee({typeName:tl.ZodUnknown,...T(e)});class et extends A{_parse(e){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.never,received:t.parsedType}),m}}et.create=e=>new et({typeName:tl.ZodNever,...T(e)});class er extends A{_parse(e){if(this._getType(e)!==o.undefined){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.void,received:t.parsedType}),m}return g(e.data)}}er.create=e=>new er({typeName:tl.ZodVoid,...T(e)});class en extends A{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==o.array)return d(t,{code:a.invalid_type,expected:o.array,received:t.parsedType}),m;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(e||o)&&(d(t,{code:e?a.too_big:a.too_small,minimum:o?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(d(t,{code:a.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(d(t,{code:a.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new x(t,e,t.path,r)))).then(e=>h.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new x(t,e,t.path,r)));return h.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new en({...this._def,minLength:{value:e,message:ti.toString(t)}})}max(e,t){return new en({...this._def,maxLength:{value:e,message:ti.toString(t)}})}length(e,t){return new en({...this._def,exactLength:{value:e,message:ti.toString(t)}})}nonempty(e){return this.min(1,e)}}en.create=(e,t)=>new en({type:e,minLength:null,maxLength:null,exactLength:null,typeName:tl.ZodArray,...T(t)});class eo extends A{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=tn.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==o.object){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.object,received:t.parsedType}),m}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof et&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||s.push(e);let l=[];for(let e of i){let t=n[e],o=r.data[e];l.push({key:{status:"valid",value:e},value:t._parse(new x(r,o,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof et){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)l.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(d(r,{code:a.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];l.push({key:{status:"valid",value:t},value:e._parse(new x(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of l){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>h.mergeObjectSync(t,e)):h.mergeObjectSync(t,l)}get shape(){return this._def.shape()}strict(e){return ti.errToObj,new eo({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,o,i,a;let s=null!=(i=null==(o=(n=this._def).errorMap)?void 0:o.call(n,t,r).message)?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(a=ti.errToObj(e).message)?a:s}:{message:s}}}:{}})}strip(){return new eo({...this._def,unknownKeys:"strip"})}passthrough(){return new eo({...this._def,unknownKeys:"passthrough"})}extend(e){return new eo({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new eo({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:tl.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new eo({...this._def,catchall:e})}pick(e){let t={};return tn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new eo({...this._def,shape:()=>t})}omit(e){let t={};return tn.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new eo({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof eo){let r={};for(let n in t.shape){let o=t.shape[n];r[n]=eE.create(e(o))}return new eo({...t._def,shape:()=>r})}if(t instanceof en)return new en({...t._def,type:e(t.element)});if(t instanceof eE)return eE.create(e(t.unwrap()));if(t instanceof eS)return eS.create(e(t.unwrap()));if(t instanceof eu)return eu.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return tn.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new eo({...this._def,shape:()=>t})}required(e){let t={};return tn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eE;)e=e._def.innerType;t[r]=e}}),new eo({...this._def,shape:()=>t})}keyof(){return eg(tn.objectKeys(this.shape))}}eo.create=(e,t)=>new eo({shape:()=>e,unknownKeys:"strip",catchall:et.create(),typeName:tl.ZodObject,...T(t)}),eo.strictCreate=(e,t)=>new eo({shape:()=>e,unknownKeys:"strict",catchall:et.create(),typeName:tl.ZodObject,...T(t)}),eo.lazycreate=(e,t)=>new eo({shape:e,unknownKeys:"strip",catchall:et.create(),typeName:tl.ZodObject,...T(t)});class ei extends A{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new s(e.ctx.common.issues));return d(t,{code:a.invalid_union,unionErrors:r}),m});{let e,n=[];for(let o of r){let r={...t,common:{...t.common,issues:[]},parent:null},i=o._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let o=n.map(e=>new s(e));return d(t,{code:a.invalid_union,unionErrors:o}),m}}get options(){return this._def.options}}ei.create=(e,t)=>new ei({options:e,typeName:tl.ZodUnion,...T(t)});let ea=e=>{if(e instanceof em)return ea(e.schema);if(e instanceof e_)return ea(e.innerType());if(e instanceof ef)return[e.value];if(e instanceof ey)return e.options;if(e instanceof ev)return tn.objectValues(e.enum);else if(e instanceof ex)return ea(e._def.innerType);else if(e instanceof W)return[void 0];else if(e instanceof X)return[null];else if(e instanceof eE)return[void 0,...ea(e.unwrap())];else if(e instanceof eS)return[null,...ea(e.unwrap())];else if(e instanceof eO)return ea(e.unwrap());else if(e instanceof eP)return ea(e.unwrap());else if(e instanceof ew)return ea(e._def.innerType);else return[]};class es extends A{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.object)return d(t,{code:a.invalid_type,expected:o.object,received:t.parsedType}),m;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(d(t,{code:a.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),m)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=ea(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of t){if(n.has(o))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,r)}}return new es({typeName:tl.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...T(r)})}}class el extends A{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(y(e)||y(n))return m;let s=function e(t,r){let n=i(t),a=i(r);if(t===r)return{valid:!0,data:t};if(n===o.object&&a===o.object){let n=tn.objectKeys(r),o=tn.objectKeys(t).filter(e=>-1!==n.indexOf(e)),i={...t,...r};for(let n of o){let o=e(t[n],r[n]);if(!o.valid)return{valid:!1};i[n]=o.data}return{valid:!0,data:i}}if(n===o.array&&a===o.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let o=0;o<t.length;o++){let i=e(t[o],r[o]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}if(n===o.date&&a===o.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return s.valid?((v(e)||v(n))&&t.dirty(),{status:t.value,value:s.data}):(d(r,{code:a.invalid_intersection_types}),m)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}el.create=(e,t,r)=>new el({left:e,right:t,typeName:tl.ZodIntersection,...T(r)});class eu extends A{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.array)return d(r,{code:a.invalid_type,expected:o.array,received:r.parsedType}),m;if(r.data.length<this._def.items.length)return d(r,{code:a.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),m;!this._def.rest&&r.data.length>this._def.items.length&&(d(r,{code:a.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new x(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>h.mergeArray(t,e)):h.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new eu({...this._def,rest:e})}}eu.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eu({items:e,typeName:tl.ZodTuple,rest:null,...T(t)})};class ec extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.object)return d(r,{code:a.invalid_type,expected:o.object,received:r.parsedType}),m;let n=[],i=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new x(r,e,r.path,e)),value:s._parse(new x(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?h.mergeObjectAsync(t,n):h.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ec(t instanceof A?{keyType:e,valueType:t,typeName:tl.ZodRecord,...T(r)}:{keyType:H.create(),valueType:e,typeName:tl.ZodRecord,...T(t)})}}class ep extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.map)return d(r,{code:a.invalid_type,expected:o.map,received:r.parsedType}),m;let n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([e,t],o)=>({key:n._parse(new x(r,e,r.path,[o,"key"])),value:i._parse(new x(r,t,r.path,[o,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,o=await r.value;if("aborted"===n.status||"aborted"===o.status)return m;("dirty"===n.status||"dirty"===o.status)&&t.dirty(),e.set(n.value,o.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,o=r.value;if("aborted"===n.status||"aborted"===o.status)return m;("dirty"===n.status||"dirty"===o.status)&&t.dirty(),e.set(n.value,o.value)}return{status:t.value,value:e}}}}ep.create=(e,t,r)=>new ep({valueType:t,keyType:e,typeName:tl.ZodMap,...T(r)});class ed extends A{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.set)return d(r,{code:a.invalid_type,expected:o.set,received:r.parsedType}),m;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(d(r,{code:a.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(d(r,{code:a.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return m;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let l=[...r.data.values()].map((e,t)=>i._parse(new x(r,e,r.path,t)));return r.common.async?Promise.all(l).then(e=>s(e)):s(l)}min(e,t){return new ed({...this._def,minSize:{value:e,message:ti.toString(t)}})}max(e,t){return new ed({...this._def,maxSize:{value:e,message:ti.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ed.create=(e,t)=>new ed({valueType:e,minSize:null,maxSize:null,typeName:tl.ZodSet,...T(t)});class eh extends A{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.function)return d(t,{code:a.invalid_type,expected:o.function,received:t.parsedType}),m;function r(e,r){return p({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,c(),l].filter(e=>!!e),issueData:{code:a.invalid_arguments,argumentsError:r}})}function n(e,r){return p({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,c(),l].filter(e=>!!e),issueData:{code:a.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof eb){let e=this;return g(async function(...t){let o=new s([]),a=await e._def.args.parseAsync(t,i).catch(e=>{throw o.addIssue(r(t,e)),o}),l=await Reflect.apply(u,this,a);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw o.addIssue(n(l,e)),o})})}{let e=this;return g(function(...t){let o=e._def.args.safeParse(t,i);if(!o.success)throw new s([r(t,o.error)]);let a=Reflect.apply(u,this,o.data),l=e._def.returns.safeParse(a,i);if(!l.success)throw new s([n(a,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eh({...this._def,args:eu.create(e).rest(ee.create())})}returns(e){return new eh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eh({args:e||eu.create([]).rest(ee.create()),returns:t||ee.create(),typeName:tl.ZodFunction,...T(r)})}}class em extends A{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}em.create=(e,t)=>new em({getter:e,typeName:tl.ZodLazy,...T(t)});class ef extends A{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return d(t,{received:t.data,code:a.invalid_literal,expected:this._def.value}),m}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eg(e,t){return new ey({values:e,typeName:tl.ZodEnum,...T(t)})}ef.create=(e,t)=>new ef({value:e,typeName:tl.ZodLiteral,...T(t)});class ey extends A{constructor(){super(...arguments),ta.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return d(t,{expected:tn.joinValues(r),received:t.parsedType,code:a.invalid_type}),m}if(E(this,ta,"f")||S(this,ta,new Set(this._def.values),"f"),!E(this,ta,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return d(t,{received:t.data,code:a.invalid_enum_value,options:r}),m}return g(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ey.create(e,{...this._def,...t})}exclude(e,t=this._def){return ey.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}ta=new WeakMap,ey.create=eg;class ev extends A{constructor(){super(...arguments),ts.set(this,void 0)}_parse(e){let t=tn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==o.string&&r.parsedType!==o.number){let e=tn.objectValues(t);return d(r,{expected:tn.joinValues(e),received:r.parsedType,code:a.invalid_type}),m}if(E(this,ts,"f")||S(this,ts,new Set(tn.getValidEnumValues(this._def.values)),"f"),!E(this,ts,"f").has(e.data)){let e=tn.objectValues(t);return d(r,{received:r.data,code:a.invalid_enum_value,options:e}),m}return g(e.data)}get enum(){return this._def.values}}ts=new WeakMap,ev.create=(e,t)=>new ev({values:e,typeName:tl.ZodNativeEnum,...T(t)});class eb extends A{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==o.promise&&!1===t.common.async?(d(t,{code:a.invalid_type,expected:o.promise,received:t.parsedType}),m):g((t.parsedType===o.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eb.create=(e,t)=>new eb({type:e,typeName:tl.ZodPromise,...T(t)});class e_ extends A{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tl.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,o={addIssue:e=>{d(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===n.type){let e=n.transform(r.data,o);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return m;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?m:"dirty"===n.status||"dirty"===t.value?f(n.value):n});{if("aborted"===t.value)return m;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?m:"dirty"===n.status||"dirty"===t.value?f(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,o);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?m:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?m:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>b(e)?Promise.resolve(n.transform(e.value,o)).then(e=>({status:t.value,value:e})):e);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!b(e))return e;let i=n.transform(e.value,o);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}tn.assertNever(n)}}e_.create=(e,t,r)=>new e_({schema:e,typeName:tl.ZodEffects,effect:t,...T(r)}),e_.createWithPreprocess=(e,t,r)=>new e_({schema:t,effect:{type:"preprocess",transform:e},typeName:tl.ZodEffects,...T(r)});class eE extends A{_parse(e){return this._getType(e)===o.undefined?g(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eE.create=(e,t)=>new eE({innerType:e,typeName:tl.ZodOptional,...T(t)});class eS extends A{_parse(e){return this._getType(e)===o.null?g(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eS.create=(e,t)=>new eS({innerType:e,typeName:tl.ZodNullable,...T(t)});class ex extends A{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===o.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ex.create=(e,t)=>new ex({innerType:e,typeName:tl.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...T(t)});class ew extends A{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new s(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new s(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ew.create=(e,t)=>new ew({innerType:e,typeName:tl.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...T(t)});class eT extends A{_parse(e){if(this._getType(e)!==o.nan){let t=this._getOrReturnCtx(e);return d(t,{code:a.invalid_type,expected:o.nan,received:t.parsedType}),m}return{status:"valid",value:e.data}}}eT.create=e=>new eT({typeName:tl.ZodNaN,...T(e)});let eA=Symbol("zod_brand");class eO extends A{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eN extends A{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?m:"dirty"===e.status?(t.dirty(),f(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?m:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eN({in:e,out:t,typeName:tl.ZodPipeline})}}class eP extends A{_parse(e){let t=this._def.innerType._parse(e),r=e=>(b(e)&&(e.value=Object.freeze(e.value)),e);return _(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eC(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function ek(e,t={},r){return e?Q.create().superRefine((n,o)=>{var i,a;let s=e(n);if(s instanceof Promise)return s.then(e=>{var i,a;if(!e){let e=eC(t,n),s=null==(a=null!=(i=e.fatal)?i:r)||a;o.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=eC(t,n),s=null==(a=null!=(i=e.fatal)?i:r)||a;o.addIssue({code:"custom",...e,fatal:s})}}):Q.create()}eP.create=(e,t)=>new eP({innerType:e,typeName:tl.ZodReadonly,...T(t)});let eI={object:eo.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(tl||(tl={}));let eD=H.create,eR=q.create,eL=eT.create,eM=K.create,ej=Z.create,eU=Y.create,eF=J.create,e$=W.create,eB=X.create,eV=Q.create,ez=ee.create,eG=et.create,eH=er.create,eq=en.create,eK=eo.create,eZ=eo.strictCreate,eY=ei.create,eJ=es.create,eW=el.create,eX=eu.create,eQ=ec.create,e0=ep.create,e1=ed.create,e2=eh.create,e3=em.create,e4=ef.create,e5=ey.create,e8=ev.create,e6=eb.create,e9=e_.create,e7=eE.create,te=eS.create,tt=e_.createWithPreprocess,tr=eN.create;var tn,to,ti,ta,ts,tl,tu=Object.freeze({__proto__:null,defaultErrorMap:l,setErrorMap:function(e){u=e},getErrorMap:c,makeIssue:p,EMPTY_PATH:[],addIssueToContext:d,ParseStatus:h,INVALID:m,DIRTY:f,OK:g,isAborted:y,isDirty:v,isValid:b,isAsync:_,get util(){return tn},get objectUtil(){return to},ZodParsedType:o,getParsedType:i,ZodType:A,datetimeRegex:G,ZodString:H,ZodNumber:q,ZodBigInt:K,ZodBoolean:Z,ZodDate:Y,ZodSymbol:J,ZodUndefined:W,ZodNull:X,ZodAny:Q,ZodUnknown:ee,ZodNever:et,ZodVoid:er,ZodArray:en,ZodObject:eo,ZodUnion:ei,ZodDiscriminatedUnion:es,ZodIntersection:el,ZodTuple:eu,ZodRecord:ec,ZodMap:ep,ZodSet:ed,ZodFunction:eh,ZodLazy:em,ZodLiteral:ef,ZodEnum:ey,ZodNativeEnum:ev,ZodPromise:eb,ZodEffects:e_,ZodTransformer:e_,ZodOptional:eE,ZodNullable:eS,ZodDefault:ex,ZodCatch:ew,ZodNaN:eT,BRAND:eA,ZodBranded:eO,ZodPipeline:eN,ZodReadonly:eP,custom:ek,Schema:A,ZodSchema:A,late:eI,get ZodFirstPartyTypeKind(){return tl},coerce:{string:e=>H.create({...e,coerce:!0}),number:e=>q.create({...e,coerce:!0}),boolean:e=>Z.create({...e,coerce:!0}),bigint:e=>K.create({...e,coerce:!0}),date:e=>Y.create({...e,coerce:!0})},any:eV,array:eq,bigint:eM,boolean:ej,date:eU,discriminatedUnion:eJ,effect:e9,enum:e5,function:e2,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>ek(t=>t instanceof e,t),intersection:eW,lazy:e3,literal:e4,map:e0,nan:eL,nativeEnum:e8,never:eG,null:eB,nullable:te,number:eR,object:eK,oboolean:()=>ej().optional(),onumber:()=>eR().optional(),optional:e7,ostring:()=>eD().optional(),pipeline:tr,preprocess:tt,promise:e6,record:eQ,set:e1,strictObject:eZ,string:eD,symbol:eF,transformer:e9,tuple:eX,undefined:e$,union:eY,unknown:ez,void:eH,NEVER:m,ZodIssueCode:a,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:s})},71e3:(e,t,r)=>{"use strict";var n=r(99122),o=r(36813);t.map={collection:"map",default:!0,nodeClass:o.YAMLMap,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(n.isMap(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,r)=>o.YAMLMap.from(e,t,r)}},71505:(e,t,r)=>{"use strict";let n=r(3706);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},71622:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{ToolInterruptError:()=>S,asTool:()=>d,defineInterrupt:()=>E,defineTool:()=>g,dynamicTool:()=>w,isDynamicTool:()=>_,isToolRequest:()=>v,isToolResponse:()=>b,lookupToolByName:()=>m,resolveTools:()=>h,toToolDefinition:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(72448),c=r(40413),p=r(92426);function d(e,t){if(t.__action?.metadata?.type==="tool")return t;let r=r=>((0,c.setCustomMetadataAttributes)(e,{subtype:"tool"}),t(r));return r.__action={...t.__action,metadata:{...t.__action.metadata,type:"tool"}},r}async function h(e,t){return t&&0!==t.length?await Promise.all(t.map(async t=>{if("string"==typeof t)return await m(e,t);if((0,l.isAction)(t))return d(e,t);if((0,p.isExecutablePrompt)(t))return await t.asTool();if(t.name)return await m(e,t.metadata?.originalName||t.name);throw Error("Tools must be strings, tool definitions, or actions.")})):[]}async function m(e,t){let r=await e.lookupAction(t)||await e.lookupAction(`/tool/${t}`)||await e.lookupAction(`/prompt/${t}`);if(!r)throw Error(`Tool ${t} not found`);return r}function f(e){let t=e.__action.name,r=t;t.includes("/")&&(r=t.substring(t.lastIndexOf("/")+1));let n={name:r,description:e.__action.description||"",outputSchema:(0,u.toJsonSchema)({schema:e.__action.outputSchema??l.z.void(),jsonSchema:e.__action.outputJsonSchema}),inputSchema:(0,u.toJsonSchema)({schema:e.__action.inputSchema??l.z.void(),jsonSchema:e.__action.inputJsonSchema})};return t!==r&&(n.metadata={originalName:t}),n}function g(e,t,r){let n=(0,l.defineAction)(e,{...t,actionType:"tool",metadata:{...t.metadata||{},type:"tool"}},(t,n)=>r(t,{...n,context:{...n.context},interrupt:x(e)}));return y(n,t,e),n}function y(e,t,r){e.respond=(e,n,o)=>(r&&(0,l.assertUnstable)(r,"beta","The 'tool.reply' method is part of the 'interrupts' beta feature."),(0,u.parseSchema)(n,{jsonSchema:t.outputJsonSchema,schema:t.outputSchema}),{toolResponse:(0,l.stripUndefinedProps)({name:e.toolRequest.name,ref:e.toolRequest.ref,output:n}),metadata:{interruptResponse:o?.metadata||!0}}),e.restart=(e,n,o)=>{r&&(0,l.assertUnstable)(r,"beta","The 'tool.restart' method is part of the 'interrupts' beta feature.");let i=o?.replaceInput;return i&&(i=(0,u.parseSchema)(i,{schema:t.inputSchema,jsonSchema:t.inputJsonSchema})),{toolRequest:(0,l.stripUndefinedProps)({name:e.toolRequest.name,ref:e.toolRequest.ref,input:i||e.toolRequest.input}),metadata:(0,l.stripUndefinedProps)({...e.metadata,resumed:n||!0,replacedInput:i?e.toolRequest.input:void 0})}}}function v(e){return!!e.toolRequest}function b(e){return!!e.toolResponse}function _(e){return((0,l.isDetachedAction)(e)||(0,l.isAction)(e))&&e.__action.metadata?.type==="tool"&&e.__action.metadata?.dynamic}function E(e,t){let{requestMetadata:r,...n}=t;return g(e,n,async(e,{interrupt:r})=>{t.requestMetadata?r("object"==typeof t.requestMetadata?t.requestMetadata:await Promise.resolve(t.requestMetadata(e))):r()})}class S extends Error{constructor(e){super(),this.metadata=e,this.name="ToolInterruptError"}}function x(e){return t=>{throw(0,l.assertUnstable)(e,"beta","Tool interrupts are a beta feature."),new S(t)}}function w(e,t){let r=(0,l.detachedAction)({...e,actionType:"tool",metadata:{...e.metadata||{},type:"tool",dynamic:!0}},(e,r)=>{let n=x(r.registry);return t?t(e,{...r,context:{...r.context},interrupt:n}):n()});return y(r,e),{__action:{...r.__action,metadata:{...r.__action.metadata,type:"tool"}},attach(t){let n=r.attach(t);return y(n,e),n}}}},72068:(e,t,r)=>{"use strict";r.r(t),r.d(t,{OTLPTraceExporter:()=>h});var n=r(34392),o=r(28038),i=r(36646),a=r(59524),s=r(7269),l=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c="v1/traces",p="http://localhost:4318/"+c,d={"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.52.1"},h=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t,s.nW,"application/x-protobuf")||this;return r.headers=u(u(u(u({},r.headers),d),n.parseKeyPairsIntoRecord((0,o._)().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),(0,i.QG)(null==t?void 0:t.headers)),r}return l(t,e),t.prototype.getDefaultUrl=function(e){return"string"==typeof e.url?e.url:(0,o._)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,i.u3)((0,o._)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,o._)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,i.Ir)((0,o._)().OTEL_EXPORTER_OTLP_ENDPOINT,c):p},t}(a.u)},72184:(e,t)=>{"use strict";var r;t.SchemaType=void 0,function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(t.SchemaType||(t.SchemaType={})),t.ExecutableCodeLanguage=void 0,function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(t.ExecutableCodeLanguage||(t.ExecutableCodeLanguage={})),t.Outcome=void 0,function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(t.Outcome||(t.Outcome={}));let n=["user","model","function","system"];t.HarmCategory=void 0,function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(t.HarmCategory||(t.HarmCategory={})),t.HarmBlockThreshold=void 0,function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(t.HarmBlockThreshold||(t.HarmBlockThreshold={})),t.HarmProbability=void 0,function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(t.HarmProbability||(t.HarmProbability={})),t.BlockReason=void 0,function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(t.BlockReason||(t.BlockReason={})),t.FinishReason=void 0,function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"}(t.FinishReason||(t.FinishReason={})),t.TaskType=void 0,function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(t.TaskType||(t.TaskType={})),t.FunctionCallingMode=void 0,function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(t.FunctionCallingMode||(t.FunctionCallingMode={})),t.DynamicRetrievalMode=void 0,function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(t.DynamicRetrievalMode||(t.DynamicRetrievalMode={}));class o extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class i extends o{constructor(e,t){super(e),this.response=t}}class a extends o{constructor(e,t,r,n){super(e),this.status=t,this.statusText=r,this.errorDetails=n}}class s extends o{}class l extends o{}!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(r||(r={}));class u{constructor(e,t,r,n,o){this.model=e,this.task=t,this.apiKey=r,this.stream=n,this.requestOptions=o}toString(){var e,t;let r=(null==(e=this.requestOptions)?void 0:e.apiVersion)||"v1beta",n=(null==(t=this.requestOptions)?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",o=`${n}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}async function c(e){var t;let r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",function(e){let t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.24.1"),t.join(" ")}(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=null==(t=e.requestOptions)?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(e){throw new s(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${e.message}`)}for(let[e,t]of n.entries()){if("x-goog-api-key"===e)throw new s(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new s(`Header name ${e} can only be set using the apiClient field`);r.append(e,t)}}return r}async function p(e,t,r,n,o,i){let a=new u(e,t,r,n,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let r=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}(i)),{method:"POST",headers:await c(a),body:o})}}async function d(e,t,r,n,o,i={},a=fetch){let{url:s,fetchOptions:l}=await p(e,t,r,n,o,i);return h(s,l,a)}async function h(e,t,r=fetch){let n;try{n=await r(e,t)}catch(r){var i=r,u=e;let t=i;throw"AbortError"===t.name?(t=new l(`Request aborted when fetching ${u.toString()}: ${i.message}`)).stack=i.stack:i instanceof a||i instanceof s||((t=new o(`Error fetching from ${u.toString()}: ${i.message}`)).stack=i.stack),t}return n.ok||await m(n,e),n}async function m(e,t){let r,n="";try{let t=await e.json();n=t.error.message,t.error.details&&(n+=` ${JSON.stringify(t.error.details)}`,r=t.error.details)}catch(e){}throw new a(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,r)}function f(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),v(e.candidates[0]))throw new i(`${b(e)}`,e);return function(e){var t,r,n,o;let i=[];if(null==(r=null==(t=e.candidates)?void 0:t[0].content)?void 0:r.parts)for(let t of null==(o=null==(n=e.candidates)?void 0:n[0].content)?void 0:o.parts)t.text&&i.push(t.text),t.executableCode&&i.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&i.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(e)}if(e.promptFeedback)throw new i(`Text not available. ${b(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),v(e.candidates[0]))throw new i(`${b(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),g(e)[0]}if(e.promptFeedback)throw new i(`Function call not available. ${b(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),v(e.candidates[0]))throw new i(`${b(e)}`,e);return g(e)}if(e.promptFeedback)throw new i(`Function call not available. ${b(e)}`,e)},e}function g(e){var t,r,n,o;let i=[];if(null==(r=null==(t=e.candidates)?void 0:t[0].content)?void 0:r.parts)for(let t of null==(o=null==(n=e.candidates)?void 0:n[0].content)?void 0:o.parts)t.functionCall&&i.push(t.functionCall);return i.length>0?i:void 0}let y=[t.FinishReason.RECITATION,t.FinishReason.SAFETY,t.FinishReason.LANGUAGE];function v(e){return!!e.finishReason&&y.includes(e.finishReason)}function b(e){var t,r,n;let o="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)o+="Response was blocked",(null==(t=e.promptFeedback)?void 0:t.blockReason)&&(o+=` due to ${e.promptFeedback.blockReason}`),(null==(r=e.promptFeedback)?void 0:r.blockReasonMessage)&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null==(n=e.candidates)?void 0:n[0]){let t=e.candidates[0];v(t)&&(o+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(o+=`: ${t.finishMessage}`))}return o}function _(e){return this instanceof _?(this.v=e,this):new _(e)}"function"==typeof SuppressedError&&SuppressedError;let E=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function S(e){let t=[],r=e.getReader();for(;;){let{done:e,value:n}=await r.read();if(e)return f(function(e){let t=e[e.length-1],r={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates){let e=0;for(let n of t.candidates)if(r.candidates||(r.candidates=[]),r.candidates[e]||(r.candidates[e]={index:e}),r.candidates[e].citationMetadata=n.citationMetadata,r.candidates[e].groundingMetadata=n.groundingMetadata,r.candidates[e].finishReason=n.finishReason,r.candidates[e].finishMessage=n.finishMessage,r.candidates[e].safetyRatings=n.safetyRatings,n.content&&n.content.parts){r.candidates[e].content||(r.candidates[e].content={role:n.content.role||"user",parts:[]});let t={};for(let o of n.content.parts)o.text&&(t.text=o.text),o.functionCall&&(t.functionCall=o.functionCall),o.executableCode&&(t.executableCode=o.executableCode),o.codeExecutionResult&&(t.codeExecutionResult=o.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),r.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(r.usageMetadata=t.usageMetadata)}return r}(t));t.push(n)}}async function x(e,t,n,i){let[a,s]=(function(e){let t=e.getReader();return new ReadableStream({start(e){let r="";return function n(){return t.read().then(({value:t,done:i})=>{let a;if(i)return r.trim()?void e.error(new o("Failed to parse stream")):void e.close();let s=(r+=t).match(E);for(;s;){try{a=JSON.parse(s[1])}catch(t){e.error(new o(`Error parsing JSON response: "${s[1]}"`));return}e.enqueue(a),s=(r=r.substring(s[0].length)).match(E)}return n()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new l("Request aborted when reading from the stream"):new o("Error reading from the stream")})}()}})})((await d(t,r.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),i)).body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(e){return function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{var r;(r=o[e](t)).value instanceof _?Promise.resolve(r.value.v).then(l,u):c(i[0][2],r)}catch(e){c(i[0][3],e)}}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:r}=yield _(t.read());if(r)break;yield yield _(f(e))}})}(a),response:S(s)}}async function w(e,t,n,o){let i=await d(t,r.GENERATE_CONTENT,e,!1,JSON.stringify(n),o);return{response:f(await i.json())}}function T(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)if(!e.role)return{role:"system",parts:e.parts};else return e}}function A(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let r of e)"string"==typeof r?t.push({text:r}):t.push(r);var r=t;let n={role:"user",parts:[]},i={role:"function",parts:[]},a=!1,s=!1;for(let e of r)"functionResponse"in e?(i.parts.push(e),s=!0):(n.parts.push(e),a=!0);if(a&&s)throw new o("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!s)throw new o("No content is provided for sending chat message.");return a?n:i}function O(e){let t;return t=e.contents?e:{contents:[A(e)]},e.systemInstruction&&(t.systemInstruction=T(e.systemInstruction)),t}let N=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],P={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function C(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;let r=null==(t=e.candidates[0])?void 0:t.content;if(void 0===r||void 0===r.parts||0===r.parts.length)return!1;for(let e of r.parts)if(void 0===e||0===Object.keys(e).length||void 0!==e.text&&""===e.text)return!1;return!0}let k="SILENT_ERROR";class I{constructor(e,t,r,i={}){this.model=t,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==r?void 0:r.history)&&(!function(e){let t=!1;for(let r of e){let{role:e,parts:i}=r;if(!t&&"user"!==e)throw new o(`First content should be with role 'user', got ${e}`);if(!n.includes(e))throw new o(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(n)}`);if(!Array.isArray(i))throw new o("Content should have 'parts' property with an array of Parts");if(0===i.length)throw new o("Each Content should have at least one part");let a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of i)for(let t of N)t in e&&(a[t]+=1);let s=P[e];for(let t of N)if(!s.includes(t)&&a[t]>0)throw new o(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,n,o,i,a,s;let l;await this._sendPromise;let u=A(e),c={safetySettings:null==(r=this.params)?void 0:r.safetySettings,generationConfig:null==(n=this.params)?void 0:n.generationConfig,tools:null==(o=this.params)?void 0:o.tools,toolConfig:null==(i=this.params)?void 0:i.toolConfig,systemInstruction:null==(a=this.params)?void 0:a.systemInstruction,cachedContent:null==(s=this.params)?void 0:s.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),t);return this._sendPromise=this._sendPromise.then(()=>w(this._apiKey,this.model,c,p)).then(e=>{var t;if(C(e.response)){this._history.push(u);let r=Object.assign({parts:[],role:"model"},null==(t=e.response.candidates)?void 0:t[0].content);this._history.push(r)}else{let t=b(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}l=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,l}async sendMessageStream(e,t={}){var r,n,o,i,a,s;await this._sendPromise;let l=A(e),u={safetySettings:null==(r=this.params)?void 0:r.safetySettings,generationConfig:null==(n=this.params)?void 0:n.generationConfig,tools:null==(o=this.params)?void 0:o.tools,toolConfig:null==(i=this.params)?void 0:i.toolConfig,systemInstruction:null==(a=this.params)?void 0:a.systemInstruction,cachedContent:null==(s=this.params)?void 0:s.cachedContent,contents:[...this._history,l]},c=Object.assign(Object.assign({},this._requestOptions),t),p=x(this._apiKey,this.model,u,c);return this._sendPromise=this._sendPromise.then(()=>p).catch(e=>{throw Error(k)}).then(e=>e.response).then(e=>{if(C(e)){this._history.push(l);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=b(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==k&&console.error(e)}),p}}async function D(e,t,n,o){return(await d(t,r.COUNT_TOKENS,e,!1,JSON.stringify(n),o)).json()}async function R(e,t,n,o){return(await d(t,r.EMBED_CONTENT,e,!1,JSON.stringify(n),o)).json()}async function L(e,t,n,o){let i=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await d(t,r.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),o)).json()}class M{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=T(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;let n=O(e),o=Object.assign(Object.assign({},this._requestOptions),t);return w(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(r=this.cachedContent)?void 0:r.name},n),o)}async generateContentStream(e,t={}){var r;let n=O(e),o=Object.assign(Object.assign({},this._requestOptions),t);return x(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(r=this.cachedContent)?void 0:r.name},n),o)}startChat(e){var t;return new I(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(t=this.cachedContent)?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let r=function(e,t){var r;let n={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null==(r=null==t?void 0:t.cachedContent)?void 0:r.name,contents:[]},o=null!=e.generateContentRequest;if(e.contents){if(o)throw new s("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(o)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{let t=A(e);n.contents=[t]}return{generateContentRequest:n}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),t);return D(this.apiKey,this.model,r,n)}async embedContent(e,t={}){let r="string"==typeof e||Array.isArray(e)?{content:A(e)}:e,n=Object.assign(Object.assign({},this._requestOptions),t);return R(this.apiKey,this.model,r,n)}async batchEmbedContents(e,t={}){let r=Object.assign(Object.assign({},this._requestOptions),t);return L(this.apiKey,this.model,e,r)}}class j{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new o("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new M(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new s("Cached content must contain a `name` field.");if(!e.model)throw new s("Cached content must contain a `model` field.");for(let r of["model","systemInstruction"])if((null==t?void 0:t[r])&&e[r]&&(null==t?void 0:t[r])!==e[r]){if("model"===r&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new s(`Different value for "${r}" specified in modelParams (${t[r]}) and cachedContent (${e[r]})`)}let n=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new M(this.apiKey,n,r)}}t.ChatSession=I,t.GenerativeModel=M,t.GoogleGenerativeAI=j,t.GoogleGenerativeAIAbortError=l,t.GoogleGenerativeAIError=o,t.GoogleGenerativeAIFetchError=a,t.GoogleGenerativeAIRequestInputError=s,t.GoogleGenerativeAIResponseError=i,t.POSSIBLE_ROLES=n},72448:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c=(e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),p={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(p,{ValidationError:()=>_,defineJsonSchema:()=>A,defineSchema:()=>T,parseSchema:()=>w,toJsonSchema:()=>E,validateSchema:()=>x,z:()=>m.z}),e.exports=u(o({},"__esModule",{value:!0}),p);var d=c(r(94371)),h=c(r(14659)),m=r(47649),f=c(r(39770)),g=r(27633);let y=new d.default;(0,h.default)(y);let v=new WeakMap,b=new WeakMap;class _ extends g.GenkitError{constructor({data:e,errors:t,schema:r}){super({status:"INVALID_ARGUMENT",message:`Schema validation failed. Parse Errors:

${t.map(e=>`- ${e.path}: ${e.message}`).join("\n")}

Provided data:

${JSON.stringify(e,null,2)}

Required JSON schema:

${JSON.stringify(r,null,2)}`,detail:{errors:t,schema:r}})}}function E({jsonSchema:e,schema:t}){if(!e&&!t)return null;if(e)return e;if(v.has(t))return v.get(t);let r=(0,f.default)(t,{$refStrategy:"none",removeAdditionalStrategy:"strict"});return v.set(t,r),r}function S(e){return{path:e.instancePath.substring(1).replace(/\//g,".")||"(root)",message:e.message}}function x(e,t){let r=E(t);if(!r)return{valid:!0,schema:r};let n=b.get(r)||y.compile(r),o=n(e),i=n.errors?.map(e=>e);return{valid:o,errors:i?.map(S),schema:r}}function w(e,t){let{valid:r,errors:n,schema:o}=x(e,t);if(!r)throw new _({data:e,errors:n,schema:o});return e}function T(e,t,r){return e.registerSchema(t,{schema:r}),r}function A(e,t,r){return e.registerSchema(t,{jsonSchema:r}),r}},73024:e=>{"use strict";e.exports=require("node:fs")},73051:(e,t,r)=>{"use strict";let n=r(58361);e.exports=(e,t)=>{let r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},73136:e=>{"use strict";e.exports=require("node:url")},73156:function(e,t){var r,n;void 0===(n="function"==typeof(r=function(){var e={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},t={"*":!0};function r(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function n(e){return encodeURIComponent(e=e.replace(/%../g,""))===e}function o(i){if(!(this instanceof o))return new o(i);for(var a=i.split("{"),s=[a.shift()],l=[],u=[],c=[],p=[];a.length>0;){var d=a.shift(),h=d.split("}")[0],m=d.substring(h.length+1),f=function(o){var i="";e[o.charAt(0)]&&(i=o.charAt(0),o=o.substring(1));var a="",s="",l=!0,u=!1,c=!1;"+"==i?l=!1:"."==i?(s=".",a="."):"/"==i?(s="/",a="/"):"#"==i?(s="#",l=!1):";"==i?(s=";",a=";",u=!0,c=!0):"?"==i?(s="?",a="&",u=!0):"&"==i&&(s="&",a="&",u=!0);for(var p=[],d=o.split(","),h=[],m={},f=0;f<d.length;f++){var g=d[f],y=null;if(-1!=g.indexOf(":")){var v=g.split(":");g=v[0],y=parseInt(v[1])}for(var b={};t[g.charAt(g.length-1)];)b[g.charAt(g.length-1)]=!0,g=g.substring(0,g.length-1);var _={truncate:y,name:g,suffices:b};h.push(_),m[g]=_,p.push(g)}return{varNames:p,prefix:s,substitution:function(e){for(var t="",n=0,o=0;o<h.length;o++){var i=h[o],p=e(i.name);if(null==p||Array.isArray(p)&&0==p.length||"object"==typeof p&&0==Object.keys(p).length){n++;continue}if(o==n?t+=s:t+=a||",",Array.isArray(p)){u&&(t+=i.name+"=");for(var d=0;d<p.length;d++)d>0&&(t+=i.suffices["*"]&&a||",",i.suffices["*"]&&u&&(t+=i.name+"=")),t+=l?encodeURIComponent(p[d]).replace(/!/g,"%21"):r(p[d])}else if("object"==typeof p){u&&!i.suffices["*"]&&(t+=i.name+"=");var m=!0;for(var f in p)m||(t+=i.suffices["*"]&&a||","),m=!1,t+=l?encodeURIComponent(f).replace(/!/g,"%21"):r(f),t+=i.suffices["*"]?"=":",",t+=l?encodeURIComponent(p[f]).replace(/!/g,"%21"):r(p[f])}else u&&(t+=i.name,c&&""==p||(t+="=")),null!=i.truncate&&(p=p.substring(0,i.truncate)),t+=l?encodeURIComponent(p).replace(/!/g,"%21"):r(p)}return t},unSubstitution:function(e,t,r){if(s&&(e=e.substring(s.length)),1==h.length&&h[0].suffices["*"]){for(var o=h[0],i=o.name,c=o.suffices["*"]?e.split(a||","):[e],p=l&&-1!=e.indexOf("="),d=1;d<c.length;d++){var e=c[d];p&&-1==e.indexOf("=")&&(c[d-1]+=(a||",")+e,c.splice(d,1),d--)}for(var d=0;d<c.length;d++){var e=c[d];l&&-1!=e.indexOf("=")&&(p=!0);var f=e.split(",");1==f.length?c[d]=f[0]:c[d]=f}if(u||p){for(var g=t[i]||{},y=0;y<c.length;y++){var v=e;if(!u||v){if("string"==typeof c[y]){var e=c[y],b=e.split("=",1)[0],e=e.substring(b.length+1);if(l){if(r&&!n(e))return;e=decodeURIComponent(e)}v=e}else{var e=c[y][0],b=e.split("=",1)[0],e=e.substring(b.length+1);if(l){if(r&&!n(e))return;e=decodeURIComponent(e)}c[y][0]=e,v=c[y]}if(l){if(r&&!n(b))return;b=decodeURIComponent(b)}void 0!==g[b]?Array.isArray(g[b])?g[b].push(v):g[b]=[g[b],v]:g[b]=v}}1==Object.keys(g).length&&void 0!==g[i]?t[i]=g[i]:t[i]=g}else{if(l)for(var y=0;y<c.length;y++){var f=c[y];if(Array.isArray(f))for(var _=0;_<f.length;_++){if(r&&!n(f[_]))return;f[_]=decodeURIComponent(f[_])}else{if(r&&!n(f))return;c[y]=decodeURIComponent(f)}}void 0!==t[i]?Array.isArray(t[i])?t[i]=t[i].concat(c):t[i]=[t[i]].concat(c):1!=c.length||o.suffices["*"]?t[i]=c:t[i]=c[0]}}else{for(var c=1==h.length?[e]:e.split(a||","),E={},d=0;d<c.length;d++){for(var S=0;S<h.length-1&&S<d&&!h[S].suffices["*"];S++);if(S==d){E[d]=d;continue}for(var x=h.length-1;x>0&&h.length-x<c.length-d&&!h[x].suffices["*"];x--);if(h.length-x==c.length-d){E[d]=x;continue}E[d]=S}for(var d=0;d<c.length;d++){var e=c[d];if(e||!u){var f=e.split(","),p=!1;if(u){var e=f[0],i=e.split("=",1)[0],e=e.substring(i.length+1);f[0]=e;var o=m[i]||h[0]}else var o=h[E[d]],i=o.name;for(var y=0;y<f.length;y++)if(l){if(r&&!n(f[y]))return;f[y]=decodeURIComponent(f[y])}(u||o.suffices["*"])&&void 0!==t[i]?Array.isArray(t[i])?t[i]=t[i].concat(f):t[i]=[t[i]].concat(f):1!=f.length||o.suffices["*"]?t[i]=f:t[i]=f[0]}}}return 1}}}(h);u.push(f.substitution),c.push(f.unSubstitution),l.push(f.prefix),s.push(m),p=p.concat(f.varNames)}this.fill=function(e){if(e&&"function"!=typeof e){var t=e;e=function(e){return t[e]}}for(var r=s[0],n=0;n<u.length;n++)r+=(0,u[n])(e),r+=s[n+1];return r},this.fromUri=function(e,t){t=t||{};for(var r={},n=0;n<s.length;n++){var o=s[n];if(e.substring(0,o.length)!==o)return;if(e=e.substring(o.length),n>=s.length-1)if(""!=e)return;else break;var i=l[n];if(!i||e.substring(0,i.length)===i){for(var a=s[n+1],u=n;;){if(u==s.length-2){var p=e.substring(e.length-a.length);if(p!==a)return;var d=e.substring(0,e.length-a.length);e=p}else if(a){var h=e.indexOf(a),d=e.substring(0,h);e=e.substring(h)}else if(l[u+1]){var h=e.indexOf(l[u+1]);-1===h&&(h=e.length);var d=e.substring(0,h);e=e.substring(h)}else if(s.length>u+2){a=s[++u+1];continue}else{var d=e;e=""}break}if(!c[n](d,r,t.strict))return}}return r},this.varNames=p,this.template=i}return o.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(e)},test:function(e,t){return!!this.fromUri(e,t)}},o})?r.apply(t,[]):r)||(e.exports=n)},73213:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.name="OTLPExporterError",o.data=n,o.code=r,o}return n(t,e),t}(Error)},73287:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{Registry:()=>l.Registry}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(8436)},73429:e=>{"use strict";e.exports=require("node:util/types")},73438:(e,t,r)=>{"use strict";let n=r(33877);e.exports=(e,t,r)=>0===n(e,t,r)},73471:(e,t,r)=>{"use strict";var n=r(99122),o=r(46076),i=r(96363),a=r(14386);t.stringifyPair=function({key:e,value:t},r,s,l){let u,c,p,{allNullValues:d,doc:h,indent:m,indentStep:f,options:{commentString:g,indentSeq:y,simpleKeys:v}}=r,b=n.isNode(e)&&e.comment||null;if(v){if(b)throw Error("With simple keys, key nodes cannot have comments");if(n.isCollection(e)||!n.isNode(e)&&"object"==typeof e)throw Error("With simple keys, collection cannot be used as a key value")}let _=!v&&(!e||b&&null==t&&!r.inFlow||n.isCollection(e)||(n.isScalar(e)?e.type===o.Scalar.BLOCK_FOLDED||e.type===o.Scalar.BLOCK_LITERAL:"object"==typeof e));r=Object.assign({},r,{allNullValues:!1,implicitKey:!_&&(v||!d),indent:m+f});let E=!1,S=!1,x=i.stringify(e,r,()=>E=!0,()=>S=!0);if(!_&&!r.inFlow&&x.length>1024){if(v)throw Error("With simple keys, single line scalar must not span more than 1024 characters");_=!0}if(r.inFlow){if(d||null==t)return E&&s&&s(),""===x?"?":_?`? ${x}`:x}else if(d&&!v||null==t&&_)return x=`? ${x}`,b&&!E?x+=a.lineComment(x,r.indent,g(b)):S&&l&&l(),x;E&&(b=null),_?(b&&(x+=a.lineComment(x,r.indent,g(b))),x=`? ${x}
${m}:`):(x=`${x}:`,b&&(x+=a.lineComment(x,r.indent,g(b)))),n.isNode(t)?(u=!!t.spaceBefore,c=t.commentBefore,p=t.comment):(u=!1,c=null,p=null,t&&"object"==typeof t&&(t=h.createNode(t))),r.implicitKey=!1,!_&&!b&&n.isScalar(t)&&(r.indentAtStart=x.length+1),S=!1,!(!y&&f.length>=2&&!r.inFlow&&!_&&n.isSeq(t))||t.flow||t.tag||t.anchor||(r.indent=r.indent.substring(2));let w=!1,T=i.stringify(t,r,()=>w=!0,()=>S=!0),A=" ";if(b||u||c){if(A=u?"\n":"",c){let e=g(c);A+=`
${a.indentComment(e,r.indent)}`}""!==T||r.inFlow?A+=`
${r.indent}`:"\n"===A&&(A="\n\n")}else if(!_&&n.isCollection(t)){let e=T[0],n=T.indexOf("\n"),o=-1!==n,i=r.inFlow??t.flow??0===t.items.length;if(o||!i){let t=!1;if(o&&("&"===e||"!"===e)){let r=T.indexOf(" ");"&"===e&&-1!==r&&r<n&&"!"===T[r+1]&&(r=T.indexOf(" ",r+1)),(-1===r||n<r)&&(t=!0)}t||(A=`
${r.indent}`)}}else(""===T||"\n"===T[0])&&(A="");return x+=A+T,r.inFlow?w&&s&&s():p&&!w?x+=a.lineComment(x,r.indent,g(p)):S&&l&&l(),x}},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},73816:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{apiKey:()=>h,getContext:()=>d,runWithContext:()=>p}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(88581),u=r(27633);let c="core.auth.context";function p(e,t,r){return void 0===t?r():e.asyncStore.run(c,t,()=>(0,l.runInActionRuntimeContext)(e,r))}function d(e){return e.registry&&(e=e.registry),e.asyncStore.getStore(c)}function h(e){return async t=>{let r={auth:{apiKey:t.headers.authorization}};if("string"==typeof e){if(!r.auth?.apiKey)throw console.error("THROWING UNAUTHENTICATED"),new u.UserFacingError("UNAUTHENTICATED","Unauthenticated");if(r.auth?.apiKey!=e)throw console.error("Throwing PERMISSION_DENIED"),new u.UserFacingError("PERMISSION_DENIED","Permission Denied")}else if("function"==typeof e)await e(r);else if(void 0!==e)throw Error(`Invalid type ${typeof e} passed to apiKey()`);return r}}},73841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;let n=r(3190),o=r(62557),i=r(75892),a=r(62557),s=r(9551),l=r(68518),u=r(90456),c=r(22964),p=r(45346),d=r(21326),h=r(58592),m=r(37439);function f({gen:e,validateName:t,schema:r,schemaEnv:n,opts:o},i){var a;o.code.es5?e.func(t,(0,c._)`${p.default.data}, ${p.default.valCxt}`,n.$async,()=>{var t,n;e.code((0,c._)`"use strict"; ${g(r,o)}`),t=e,n=o,t.if(p.default.valCxt,()=>{t.var(p.default.instancePath,(0,c._)`${p.default.valCxt}.${p.default.instancePath}`),t.var(p.default.parentData,(0,c._)`${p.default.valCxt}.${p.default.parentData}`),t.var(p.default.parentDataProperty,(0,c._)`${p.default.valCxt}.${p.default.parentDataProperty}`),t.var(p.default.rootData,(0,c._)`${p.default.valCxt}.${p.default.rootData}`),n.dynamicRef&&t.var(p.default.dynamicAnchors,(0,c._)`${p.default.valCxt}.${p.default.dynamicAnchors}`)},()=>{t.var(p.default.instancePath,(0,c._)`""`),t.var(p.default.parentData,(0,c._)`undefined`),t.var(p.default.parentDataProperty,(0,c._)`undefined`),t.var(p.default.rootData,p.default.data),n.dynamicRef&&t.var(p.default.dynamicAnchors,(0,c._)`{}`)}),e.code(i)}):e.func(t,(0,c._)`${p.default.data}, ${(a=o,(0,c._)`{${p.default.instancePath}="", ${p.default.parentData}, ${p.default.parentDataProperty}, ${p.default.rootData}=${p.default.data}${a.dynamicRef?(0,c._)`, ${p.default.dynamicAnchors}={}`:c.nil}}={}`)}`,n.$async,()=>e.code(g(r,o)).code(i))}function g(e,t){let r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,c._)`/*# sourceURL=${r} */`:c.nil}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function v(e){return"boolean"!=typeof e.schema}function b(e){(0,h.checkUnknownRules)(e),function(e){let{schema:t,errSchemaPath:r,opts:n,self:o}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(t,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function _(e,t){if(e.opts.jtd)return S(e,[],!1,t);let r=(0,o.getSchemaTypes)(e.schema),n=(0,o.coerceAndCheckDataType)(e,r);S(e,r,!n,t)}function E({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:o}){let i=r.$comment;if(!0===o.$comment)e.code((0,c._)`${p.default.self}.logger.log(${i})`);else if("function"==typeof o.$comment){let r=(0,c.str)`${n}/$comment`,o=e.scopeValue("root",{ref:t.root});e.code((0,c._)`${p.default.self}.opts.$comment(${i}, ${r}, ${o}.schema)`)}}function S(e,t,r,n){var o,s,l,u;let{gen:d,schema:m,data:f,allErrors:g,opts:y,self:v}=e,{RULES:b}=v;if(m.$ref&&(y.ignoreKeywordsWithRef||!(0,h.schemaHasRulesButRef)(m,b)))return void d.block(()=>O(e,"$ref",b.all.$ref.definition));function _(o){(0,i.shouldUseGroup)(m,o)&&(o.type?(d.if((0,a.checkDataType)(o.type,f,y.strictNumbers)),x(e,o),1===t.length&&t[0]===o.type&&r&&(d.else(),(0,a.reportTypeError)(e)),d.endIf()):x(e,o),g||d.if((0,c._)`${p.default.errors} === ${n||0}`))}y.jtd||(o=e,s=t,!o.schemaEnv.meta&&o.opts.strictTypes&&(function(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(t=>{w(e.dataTypes,t)||T(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){let r=[];for(let n of e.dataTypes)w(t,n)?r.push(n):t.includes("integer")&&"number"===n&&r.push("integer");e.dataTypes=r}(e,t)}}(o,s),o.opts.allowUnionTypes||(l=o,(u=s).length>1&&!(2===u.length&&u.includes("null"))&&T(l,"use allowUnionTypes to allow union type keyword")),function(e,t){let r=e.self.RULES.all;for(let n in r){let o=r[n];if("object"==typeof o&&(0,i.shouldUseRule)(e.schema,o)){let{type:r}=o.definition;r.length&&!r.some(e=>{var r,n;return r=t,n=e,r.includes(n)||"number"===n&&r.includes("integer")})&&T(e,`missing type "${r.join(",")}" for keyword "${n}"`)}}}(o,o.dataTypes))),d.block(()=>{for(let e of b.rules)_(e);_(b.post)})}function x(e,t){let{gen:r,schema:n,opts:{useDefaults:o}}=e;o&&(0,s.assignDefaults)(e,t.type),r.block(()=>{for(let r of t.rules)(0,i.shouldUseRule)(n,r)&&O(e,r.keyword,r.definition,t.type)})}function w(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function T(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,h.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){if(v(e)&&(b(e),y(e)))return void function(e){let{schema:t,opts:r,gen:n}=e;f(e,()=>{r.$comment&&t.$comment&&E(e),function(e){let{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,h.checkStrictMode)(e,"default is ignored in the schema root")}(e),n.let(p.default.vErrors,null),n.let(p.default.errors,0),r.unevaluated&&function(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,c._)`${r}.evaluated`),t.if((0,c._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,c._)`${e.evaluated}.props`,(0,c._)`undefined`)),t.if((0,c._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,c._)`${e.evaluated}.items`,(0,c._)`undefined`))}(e),_(e),function(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:o,opts:i}=e;r.$async?t.if((0,c._)`${p.default.errors} === 0`,()=>t.return(p.default.data),()=>t.throw((0,c._)`new ${o}(${p.default.vErrors})`)):(t.assign((0,c._)`${n}.errors`,p.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:r,items:n}){r instanceof c.Name&&e.assign((0,c._)`${t}.props`,r),n instanceof c.Name&&e.assign((0,c._)`${t}.items`,n)}(e),t.return((0,c._)`${p.default.errors} === 0`))}(e)})}(e);f(e,()=>(0,n.topBoolOrEmptySchema)(e))};class A{constructor(e,t,r){if((0,l.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,h.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",C(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",p.default.errors))}result(e,t,r){this.failResult((0,c.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,c.not)(e),void 0,t)}fail(e){if(void 0===e){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:t}=this;this.fail((0,c._)`${t} !== undefined && (${(0,c.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t){this.setParams(t),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,t){(e?m.reportExtraError:m.reportError)(this,this.def.error,t)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(void 0===this.errsCount)throw Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=c.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=c.nil,t=c.nil){if(!this.$data)return;let{gen:r,schemaCode:n,schemaType:o,def:i}=this;r.if((0,c.or)((0,c._)`${n} === undefined`,t)),e!==c.nil&&r.assign(e,!0),(o.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==c.nil&&r.assign(e,!1)),r.else()}invalid$data(){let{gen:e,schemaCode:t,schemaType:r,def:n,it:o}=this;return(0,c.or)(function(){if(r.length){if(!(t instanceof c.Name))throw Error("ajv implementation error");let e=Array.isArray(r)?r:[r];return(0,c._)`${(0,a.checkDataTypes)(e,t,o.opts.strictNumbers,a.DataType.Wrong)}`}return c.nil}(),function(){if(n.validateSchema){let r=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,c._)`!${r}(${t})`}return c.nil}())}subschema(e,t){let r=(0,u.getSubschema)(this.it,e);(0,u.extendSubschemaData)(r,this.it,e),(0,u.extendSubschemaMode)(r,e);let o={...this.it,...r,items:void 0,props:void 0};return!function(e,t){if(v(e)&&(b(e),y(e))){var r=e,o=t;let{schema:n,gen:i,opts:a}=r;a.$comment&&n.$comment&&E(r),function(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,d.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(r),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw Error("async schema in sync schema")}(r);let s=i.const("_errs",p.default.errors);_(r,s),i.var(o,(0,c._)`${s} === ${p.default.errors}`);return}(0,n.boolOrEmptySchema)(e,t)}(o,t),o}mergeEvaluated(e,t){let{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=h.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=h.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){let{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,()=>this.mergeEvaluated(e,c.Name)),!0}}function O(e,t,r,n){let o=new A(e,r,t);"code"in r?r.code(o,n):o.$data&&r.validate?(0,l.funcKeywordCode)(o,r):"macro"in r?(0,l.macroKeywordCode)(o,r):(r.compile||r.validate)&&(0,l.funcKeywordCode)(o,r)}t.KeywordCxt=A;let N=/^\/(?:[^~]|~0|~1)*$/,P=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function C(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let o,i;if(""===e)return p.default.rootData;if("/"===e[0]){if(!N.test(e))throw Error(`Invalid JSON-pointer: ${e}`);o=e,i=p.default.rootData}else{let a=P.exec(e);if(!a)throw Error(`Invalid JSON-pointer: ${e}`);let l=+a[1];if("#"===(o=a[2])){if(l>=t)throw Error(s("property/index",l));return n[t-l]}if(l>t)throw Error(s("data",l));if(i=r[t-l],!o)return i}let a=i;for(let e of o.split("/"))e&&(i=(0,c._)`${i}${(0,c.getProperty)((0,h.unescapeJsonPointer)(e))}`,a=(0,c._)`${a} && ${i}`);return a;function s(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=C},73888:(e,t,r)=>{"use strict";var n;r.d(t,{h:()=>n}),function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"}(n||(n={}))},74016:(e,t,r)=>{"use strict";let{HEX:n}=r(78092),o=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function i(e){if(3>l(e,"."))return{host:e,isIPV4:!1};let[t]=e.match(o)||[];return t?{host:function(e,t){let r="",n=!0,o=e.length;for(let i=0;i<o;i++){let a=e[i];"0"===a&&n?(i+1<=o&&"."===e[i+1]||i+1===o)&&(r+=a,n=!1):(n=a===t,r+=a)}return r}(t,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function a(e,t=!1){let r="",o=!0;for(let t of e){if(void 0===n[t])return;"0"!==t&&!0===o&&(o=!1),o||(r+=t)}return t&&0===r.length&&(r="0"),r}function s(e){if(2>l(e,":"))return{host:e,isIPV6:!1};let t=function(e){let t=0,r={error:!1,address:"",zone:""},n=[],o=[],i=!1,s=!1,l=!1;function u(){if(o.length){if(!1===i){let e=a(o);if(void 0===e)return r.error=!0,!1;n.push(e)}o.length=0}return!0}for(let a=0;a<e.length;a++){let c=e[a];if("["!==c&&"]"!==c)if(":"===c){if(!0===s&&(l=!0),!u())break;if(t++,n.push(":"),t>7){r.error=!0;break}a-1>=0&&":"===e[a-1]&&(s=!0);continue}else if("%"===c){if(!u())break;i=!0}else{o.push(c);continue}}return o.length&&(i?r.zone=o.join(""):l?n.push(o.join("")):n.push(a(o))),r.address=n.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,escapedHost:r,isIPV6:!0}}}function l(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}let u=/^\.\.?\//u,c=/^\/\.(?:\/|$)/u,p=/^\/\.\.(?:\/|$)/u,d=/^\/?(?:.|\n)*?(?=\/|$)/u;e.exports={recomposeAuthority:function(e){let t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let r=unescape(e.host),n=i(r);if(n.isIPV4)r=n.host;else{let t=s(n.host);r=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(r)}return("number"==typeof e.port||"string"==typeof e.port)&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){let r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){let t=[];for(;e.length;)if(e.match(u))e=e.replace(u,"");else if(e.match(c))e=e.replace(c,"/");else if(e.match(p))e=e.replace(p,"/"),t.pop();else if("."===e||".."===e)e="";else{let r=e.match(d);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw Error("Unexpected dot segment condition")}return t.join("")},normalizeIPv4:i,normalizeIPv6:s,stringArrayToHexStripped:a}},74075:e=>{"use strict";e.exports=require("zlib")},74200:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var n=r(29021),o=r(86713),i=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function s(){var e,t,r,s;return e=this,t=void 0,r=void 0,s=function(){var e,t,r,s,l,u,c;return i(this,function(i){switch(i.label){case 0:e=["/etc/machine-id","/var/lib/dbus/machine-id"],i.label=1;case 1:i.trys.push([1,8,9,10]),r=(t=a(e)).next(),i.label=2;case 2:if(r.done)return[3,7];s=r.value,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,n.promises.readFile(s,{encoding:"utf8"})];case 4:return[2,i.sent().trim()];case 5:return l=i.sent(),o.s.debug("error reading machine id: "+l),[3,6];case 6:return r=t.next(),[3,2];case 7:return[3,10];case 8:return u={error:i.sent()},[3,10];case 9:try{r&&!r.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 10:return[2,""]}})},new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})}},74301:(e,t,r)=>{"use strict";let n=r(48178),o=r(18199),i=r(55511);function a(e,t,r){let n=new Set,o=new Set,i=new Map;(r||"").toLowerCase().split(":").forEach(e=>{o.add(e.trim())}),(t||"").toLowerCase().split(":").filter(e=>!o.has(e.trim())).forEach(e=>{n.add(e.trim())});for(let t=e.length-1;t>=0;t--){let r=e[t];n.has(r.key)&&!i.has(r.key)&&i.set(r.key,s(r.line))}let a=[],l=[];return n.forEach(e=>{i.has(e)&&(l.push(e),a.push(e+":"+i.get(e)))}),{headers:a.join("\r\n")+"\r\n",fieldNames:l.join(":")}}function s(e){return e.substr(e.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}e.exports=(e,t,r,l)=>{let u,c,p=a(e,(l=l||{}).headerFieldNames||"From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",l.skipFields),d=function(e,t,r,i,a){let s=["v=1","a=rsa-"+i,"c=relaxed/relaxed","d="+n.toASCII(e),"q=dns/txt","s="+t,"bh="+a,"h="+r].join("; ");return o.foldLines("DKIM-Signature: "+s,76)+";\r\n b="}(l.domainName,l.keySelector,p.fieldNames,t,r);p.headers+="dkim-signature:"+s(d),(u=i.createSign(("rsa-"+t).toUpperCase())).update(p.headers);try{c=u.sign(l.privateKey,"base64")}catch(e){return!1}return d+c.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,"$&\r\n ").trim()},e.exports.relaxedHeaders=a},74508:e=>{"use strict";class t{constructor(e){this.str=(e||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let e=[];for(let e=0,t=this.str.length;e<t;e++){let r=this.str.charAt(e),n=e<t-1?this.str.charAt(e+1):null;this.checkChar(r,n)}return this.list.forEach(t=>{t.value=(t.value||"").toString().trim(),t.value&&e.push(t)}),e}checkChar(e,t){if(this.escaped);else if(e===this.operatorExpecting){this.node={type:"operator",value:e},t&&![" ","	","\r","\n",",",";"].includes(t)&&(this.node.noBreak=!0),this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&e in this.operators){this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[e],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&"\\"===e){this.escaped=!0;return}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),"\n"===e&&(e=" "),(e.charCodeAt(0)>=33||[" ","	"].includes(e))&&(this.node.value+=e),this.escaped=!1}}e.exports=function e(r,n){n=n||{};let o=new t(r).tokenize(),i=[],a=[],s=[];if(o.forEach(e=>{"operator"===e.type&&(","===e.value||";"===e.value)?(a.length&&i.push(a),a=[]):a.push(e)}),a.length&&i.push(a),i.forEach(t=>{(t=function(t){let r,n,o,i=!1,a="text",s=[],l={address:[],comment:[],group:[],text:[]};for(n=0,o=t.length;n<o;n++){let e=t[n],r=n?t[n-1]:null;if("operator"===e.type)switch(e.value){case"<":a="address";break;case"(":a="comment";break;case":":a="group",i=!0;break;default:a="text"}else e.value&&("address"===a&&(e.value=e.value.replace(/^[^<]*<\s*/,"")),r&&r.noBreak&&l[a].length?l[a][l[a].length-1]+=e.value:l[a].push(e.value))}if(!l.text.length&&l.comment.length&&(l.text=l.comment,l.comment=[]),i)l.text=l.text.join(" "),s.push({name:l.text||r&&r.name,group:l.group.length?e(l.group.join(",")):[]});else{if(!l.address.length&&l.text.length){for(n=l.text.length-1;n>=0;n--)if(l.text[n].match(/^[^@\s]+@[^@\s]+$/)){l.address=l.text.splice(n,1);break}let e=function(e){return l.address.length?e:(l.address=[e.trim()]," ")};if(!l.address.length)for(n=l.text.length-1;n>=0&&(l.text[n]=l.text[n].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,e).trim(),!l.address.length);n--);}if(!l.text.length&&l.comment.length&&(l.text=l.comment,l.comment=[]),l.address.length>1&&(l.text=l.text.concat(l.address.splice(1))),l.text=l.text.join(" "),l.address=l.address.join(" "),!l.address&&i)return[];(r={address:l.address||l.text||"",name:l.text||l.address||""}).address===r.name&&((r.address||"").match(/@/)?r.name="":r.address=""),s.push(r)}return s}(t)).length&&(s=s.concat(t))}),n.flatten){let e=[],t=r=>{r.forEach(r=>{if(r.group)return t(r.group);e.push(r)})};return t(s),e}return s}},75240:(e,t)=>{"use strict";t.containsNewline=function e(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes("\n"))return!0;if(t.end){for(let e of t.end)if("newline"===e.type)return!0}return!1;case"flow-collection":for(let r of t.items){for(let e of r.start)if("newline"===e.type)return!0;if(r.sep){for(let e of r.sep)if("newline"===e.type)return!0}if(e(r.key)||e(r.value))return!0}return!1;default:return!0}}},75738:(e,t,r)=>{"use strict";var n=r(79428),o=r(46076),i=r(70230);t.binary={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof n.Buffer)return n.Buffer.from(e,"base64");if("function"!=typeof atob)return t("This environment does not support reading binary tags; either Buffer or atob is required"),e;{let t=atob(e.replace(/[\n\r]/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}},stringify({comment:e,type:t,value:r},a,s,l){let u;if(!r)return"";if("function"==typeof n.Buffer)u=r instanceof n.Buffer?r.toString("base64"):n.Buffer.from(r.buffer).toString("base64");else if("function"==typeof btoa){let e="";for(let t=0;t<r.length;++t)e+=String.fromCharCode(r[t]);u=btoa(e)}else throw Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=o.Scalar.BLOCK_LITERAL),t!==o.Scalar.QUOTE_DOUBLE){let e=Math.max(a.options.lineWidth-a.indent.length,a.options.minContentWidth),r=Math.ceil(u.length/e),n=Array(r);for(let t=0,o=0;t<r;++t,o+=e)n[t]=u.substr(o,e);u=n.join(t===o.Scalar.BLOCK_LITERAL?"\n":" ")}return i.stringifyString({comment:e,type:t,value:u},a,s,l)}}},75836:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAndNormalizeUrl=t.DEFAULT_COLLECTOR_URL=t.OTLPGRPCExporterNodeBase=void 0;var n=r(89577);Object.defineProperty(t,"OTLPGRPCExporterNodeBase",{enumerable:!0,get:function(){return n.OTLPGRPCExporterNodeBase}});var o=r(55954);Object.defineProperty(t,"DEFAULT_COLLECTOR_URL",{enumerable:!0,get:function(){return o.DEFAULT_COLLECTOR_URL}}),Object.defineProperty(t,"validateAndNormalizeUrl",{enumerable:!0,get:function(){return o.validateAndNormalizeUrl}})},75853:(e,t)=>{"use strict";class r extends Error{constructor(e,t,r,n){super(),this.name=e,this.code=r,this.message=n,this.pos=t}}class n extends r{constructor(e,t,r){super("YAMLParseError",e,t,r)}}class o extends r{constructor(e,t,r){super("YAMLWarning",e,t,r)}}t.YAMLError=r,t.YAMLParseError=n,t.YAMLWarning=o,t.prettifyError=(e,t)=>r=>{if(-1===r.pos[0])return;r.linePos=r.pos.map(e=>t.linePos(e));let{line:n,col:o}=r.linePos[0];r.message+=` at line ${n}, column ${o}`;let i=o-1,a=e.substring(t.lineStarts[n-1],t.lineStarts[n]).replace(/[\n\r]+$/,"");if(i>=60&&a.length>80){let e=Math.min(i-39,a.length-79);a="…"+a.substring(e),i-=e-1}if(a.length>80&&(a=a.substring(0,79)+"…"),n>1&&/^ *$/.test(a.substring(0,i))){let r=e.substring(t.lineStarts[n-2],t.lineStarts[n-1]);r.length>80&&(r=r.substring(0,79)+"…\n"),a=r+a}if(/[^ ]/.test(a)){let e=1,t=r.linePos[1];t&&t.line===n&&t.col>o&&(e=Math.max(1,Math.min(t.col-o,80-i)));let s=" ".repeat(i)+"^".repeat(e);r.message+=`:

${a}
${s}
`}}},75890:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.parseWithoutProcessing=u,t.parse=function(e,t){var r=u(e,t);return new i.default(t).accept(r)};var o=n(r(43500)),i=n(r(91738)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(78238)),s=r(66112);t.parser=o.default;var l={};function u(e,t){return"Program"===e.type?e:(o.default.yy=l,l.locInfo=function(e){return new l.SourceLocation(t&&t.srcName,e)},o.default.parse(e))}s.extend(l,a)},75892:(e,t)=>{"use strict";function r(e,t){return t.rules.some(t=>n(e,t))}function n(e,t){var r;return void 0!==e[t.keyword]||(null==(r=t.definition.implements)?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},n){let o=t.RULES.types[n];return o&&!0!==o&&r(e,o)},t.shouldUseGroup=r,t.shouldUseRule=n},75919:e=>{"use strict";e.exports=require("node:worker_threads")},76317:(e,t,r)=>{"use strict";var n=r(11206);let o=e=>"bigint"==typeof e||Number.isInteger(e),i=(e,t,r,{intAsBigInt:n})=>n?BigInt(e):parseInt(e.substring(t),r);function a(e,t,r){let{value:i}=e;return o(i)&&i>=0?r+i.toString(t):n.stringifyNumber(e)}t.int={identify:o,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,r)=>i(e,0,10,r),stringify:n.stringifyNumber},t.intHex={identify:e=>o(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,r)=>i(e,2,16,r),stringify:e=>a(e,16,"0x")},t.intOct={identify:e=>o(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,r)=>i(e,2,8,r),stringify:e=>a(e,8,"0o")}},76423:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{version:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a="1.15.2"},76499:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{jsonlFormatter:()=>m}),e.exports=u(o({},"__esModule",{value:!0}),c);var p=r(83455),d=((e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(r(65799)),h=r(11535);let m={name:"jsonl",config:{contentType:"application/jsonl"},handler:e=>{let t;if(e&&("array"!==e.type||e.items?.type!=="object"))throw new p.GenkitError({status:"INVALID_ARGUMENT",message:"Must supply an 'array' schema type containing 'object' items when using the 'jsonl' parser format."});return e?.items&&(t=`Output should be JSONL format, a sequence of JSON objects (one per line) separated by a newline \`\\n\` character. Each line should be a JSON object conforming to the following schema:

\`\`\`
${JSON.stringify(e.items)}
\`\`\`
    `),{parseChunk:e=>{let t=[],r=e.accumulatedText,n=0;if(e.previousChunks?.length){let t=e.previousText.lastIndexOf("\n");-1!==t&&(n=t+1)}for(let e of r.slice(n).split("\n")){let r=e.trim();if(r.startsWith("{"))try{let e=d.default.parse(r);e&&t.push(e)}catch(e){break}}return t},parseMessage:e=>e.text.split("\n").map(e=>e.trim()).filter(e=>e.startsWith("{")).map(e=>(0,h.extractJson)(e)).filter(e=>!!e),instructions:t}}}},76690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(247),i=r(53194),a=r(19166),s=r(58592);t.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===o.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,n._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){let{gen:t,data:r,schema:l,parentSchema:u,it:c}=e,{oneOf:p}=u;if(!c.opts.discriminator)throw Error("discriminator: requires discriminator option");let d=l.propertyName;if("string"!=typeof d)throw Error("discriminator: requires propertyName");if(l.mapping)throw Error("discriminator: mapping is not supported");if(!p)throw Error("discriminator: requires oneOf keyword");let h=t.let("valid",!1),m=t.const("tag",(0,n._)`${r}${(0,n.getProperty)(d)}`);t.if((0,n._)`typeof ${m} == "string"`,()=>(function(){let r=function(){var e;let t={},r=o(u),n=!0;for(let t=0;t<p.length;t++){let u=p[t];if((null==u?void 0:u.$ref)&&!(0,s.schemaHasRulesButRef)(u,c.self.RULES)){let e=u.$ref;if((u=i.resolveRef.call(c.self,c.schemaEnv.root,c.baseId,e))instanceof i.SchemaEnv&&(u=u.schema),void 0===u)throw new a.default(c.opts.uriResolver,c.baseId,e)}let h=null==(e=null==u?void 0:u.properties)?void 0:e[d];if("object"!=typeof h)throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${d}"`);n=n&&(r||o(u)),function(e,t){if(e.const)l(e.const,t);else if(e.enum)for(let r of e.enum)l(r,t);else throw Error(`discriminator: "properties/${d}" must have "const" or "enum"`)}(h,t)}if(!n)throw Error(`discriminator: "${d}" must be required`);return t;function o({required:e}){return Array.isArray(e)&&e.includes(d)}function l(e,r){if("string"!=typeof e||e in t)throw Error(`discriminator: "${d}" values must be unique strings`);t[e]=r}}();for(let o in t.if(!1),r)t.elseIf((0,n._)`${m} === ${o}`),t.assign(h,function(r){let o=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:r},o);return e.mergeEvaluated(i,n.Name),o}(r[o]));t.else(),e.error(!1,{discrError:o.DiscrError.Mapping,tag:m,tagName:d}),t.endIf()})(),()=>e.error(!1,{discrError:o.DiscrError.Tag,tag:m,tagName:d})),e.ok(h)}}},76704:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=p;var o=r(66112),i=n(r(58668)),a=r(79984),s=r(16283),l=n(r(58093)),u=r(34e3);t.VERSION="4.7.8",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function p(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},a.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}p.prototype={constructor:p,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(o.toString.call(e)===c){if(t)throw new i.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===c)o.extend(this.partials,e);else{if(void 0===t)throw new i.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===c){if(t)throw new i.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}},t.log=l.default.log,t.createFrame=o.createFrame,t.logger=l.default},76760:e=>{"use strict";e.exports=require("node:path")},76854:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ESpanKind:()=>n,JsonLogsSerializer:()=>u.Go,JsonMetricsSerializer:()=>u.Ko,JsonTraceSerializer:()=>u.U1,ProtobufLogsSerializer:()=>l.xc,ProtobufMetricsSerializer:()=>l.Dm,ProtobufTraceSerializer:()=>l.nW,createExportLogsServiceRequest:()=>s.W,createExportMetricsServiceRequest:()=>a.K,createExportTraceServiceRequest:()=>i.s,encodeAsLongBits:()=>o.z3,encodeAsString:()=>o.SP,getOtlpEncoder:()=>o.Az,hrTimeToNanos:()=>o.qd,toLongBits:()=>o.II});var n,o=r(14646);!function(e){e[e.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",e[e.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",e[e.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",e[e.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",e[e.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",e[e.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"}(n||(n={}));var i=r(65183),a=r(92971),s=r(77572),l=r(7269),u=r(62872)},77030:e=>{"use strict";e.exports=require("node:net")},77572:(e,t,r)=>{"use strict";r.d(t,{W:()=>l});var n=r(14646),o=r(95917),i=r(9306),a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function l(e,t){var r,l;return{resourceLogs:(r=e,l=(0,n.Az)(t),Array.from(function(e){var t,r,n=new Map;try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var s=i.value,l=s.resource,u=s.instrumentationScope,c=u.name,p=u.version,d=void 0===p?"":p,h=u.schemaUrl,m=void 0===h?"":h,f=n.get(l);f||(f=new Map,n.set(l,f));var g=c+"@"+d+":"+m,y=f.get(g);y||(y=[],f.set(g,y)),y.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}(r),function(e){var t=s(e,2),r=t[0],n=t[1];return{resource:(0,i.Z)(r),scopeLogs:Array.from(n,function(e){var t=s(e,2)[1];return{scope:(0,o.d1)(t[0].instrumentationScope),logRecords:t.map(function(e){var t,r,n,i,a,s;return t=e,{timeUnixNano:(r=l).encodeHrTime(t.hrTime),observedTimeUnixNano:r.encodeHrTime(t.hrTimeObserved),severityNumber:t.severityNumber,severityText:t.severityText,body:(0,o.Ff)(t.body),attributes:Object.keys(s=t.attributes).map(function(e){return(0,o.EB)(e,s[e])}),droppedAttributesCount:t.droppedAttributesCount,flags:null==(n=t.spanContext)?void 0:n.traceFlags,traceId:r.encodeOptionalSpanContext(null==(i=t.spanContext)?void 0:i.traceId),spanId:r.encodeOptionalSpanContext(null==(a=t.spanContext)?void 0:a.spanId)}}),schemaUrl:t[0].instrumentationScope.schemaUrl}}),schemaUrl:void 0}}))}}},77587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},77598:e=>{"use strict";e.exports=require("node:crypto")},77821:(e,t,r)=>{"use strict";let n=r(49074),o=r(91292);class i{constructor(e){e=e||{},this.options=e||{},this.name="StreamTransport",this.version=n.version,this.logger=o.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos","\r\n"].includes((e.newline||"").toString().toLowerCase())}send(e,t){e.message.keepBcc=!0;let r=e.data.envelope||e.message.getEnvelope(),n=e.message.messageId(),o=[].concat(r.to||[]);o.length>3&&o.push("...and "+o.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n},"Sending message %s to <%s> using %s line breaks",n,o.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let r;try{r=e.message.createReadStream()}catch(e){return this.logger.error({err:e,tnx:"send",messageId:n},"Creating send stream failed for %s. %s",n,e.message),t(e)}if(!this.options.buffer)return r.once("error",e=>{this.logger.error({err:e,tnx:"send",messageId:n},"Failed creating message for %s. %s",n,e.message)}),t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:n,message:r});let o=[],i=0;r.on("readable",()=>{let e;for(;null!==(e=r.read());)o.push(e),i+=e.length}),r.once("error",e=>(this.logger.error({err:e,tnx:"send",messageId:n},"Failed creating message for %s. %s",n,e.message),t(e))),r.on("end",()=>t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:n,message:Buffer.concat(o,i)}))})}}e.exports=i},77860:(e,t,r)=>{"use strict";let n=r(42679),o=r(33877);e.exports=(e,t,r)=>{let i=[],a=null,s=null,l=e.sort((e,t)=>o(e,t,r));for(let e of l)n(e,t,r)?(s=e,a||(a=e)):(s&&i.push([a,s]),s=null,a=null);a&&i.push([a,null]);let u=[];for(let[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");let c=u.join(" || "),p="string"==typeof t.raw?t.raw:String(t);return c.length<p.length?c:t}},78092:e=>{"use strict";e.exports={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}},78166:(e,t,r)=>{"use strict";var n=r(99122),o=r(96363),i=r(14386);t.stringifyDocument=function(e,t){let r=[],a=!0===t.directives;if(!1!==t.directives&&e.directives){let t=e.directives.toString(e);t?(r.push(t),a=!0):e.directives.docStart&&(a=!0)}a&&r.push("---");let s=o.createStringifyContext(e,t),{commentString:l}=s.options;if(e.commentBefore){1!==r.length&&r.unshift("");let t=l(e.commentBefore);r.unshift(i.indentComment(t,""))}let u=!1,c=null;if(e.contents){if(n.isNode(e.contents)){if(e.contents.spaceBefore&&a&&r.push(""),e.contents.commentBefore){let t=l(e.contents.commentBefore);r.push(i.indentComment(t,""))}s.forceBlockIndent=!!e.comment,c=e.contents.comment}let t=c?void 0:()=>u=!0,p=o.stringify(e.contents,s,()=>c=null,t);c&&(p+=i.lineComment(p,"",l(c))),("|"===p[0]||">"===p[0])&&"---"===r[r.length-1]?r[r.length-1]=`--- ${p}`:r.push(p)}else r.push(o.stringify(e.contents,s));if(e.directives?.docEnd)if(e.comment){let t=l(e.comment);t.includes("\n")?(r.push("..."),r.push(i.indentComment(t,""))):r.push(`... ${t}`)}else r.push("...");else{let t=e.comment;t&&u&&(t=t.replace(/^\n+/,"")),t&&((!u||c)&&""!==r[r.length-1]&&r.push(""),r.push(i.indentComment(l(t),"")))}return r.join("\n")+"\n"}},78172:(e,t,r)=>{"use strict";let n=r(64487);e.exports=(e,t)=>new n(e,t).patch},78217:(e,t,r)=>{"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,r=i.COMPILER_REVISION;if(!(t>=i.LAST_COMPATIBLE_COMPILER_REVISION)||!(t<=i.COMPILER_REVISION))if(t<i.LAST_COMPATIBLE_COMPILER_REVISION){var n=i.REVISION_CHANGES[r],a=i.REVISION_CHANGES[t];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+a+").")}else throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new o.default("No environment passed to template");if(!e||!e.main)throw new o.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r=e.compiler&&7===e.compiler[0],c={strict:function(e,t,r){if(!e||!(t in e))throw new o.default('"'+t+'" not defined in '+e,{loc:r});return c.lookupProperty(e,t)},lookupProperty:function(e,t){var r=e[t];if(null==r||Object.prototype.hasOwnProperty.call(e,t)||l.resultIsAllowed(r,c.protoAccessControl,t))return r},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(null!=(e[n]&&c.lookupProperty(e[n],t)))return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:n.escapeExpression,invokePartial:function(r,i,a){a.hash&&(i=n.extend({},i,a.hash),a.ids&&(a.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,i,a);var s=n.extend({},a,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,r,i,s);if(null==l&&t.compile&&(a.partials[a.name]=t.compile(r,e.compilerOptions,t),l=a.partials[a.name](i,s)),null!=l){if(a.indent){for(var u=l.split("\n"),c=0,p=u.length;c<p&&(u[c]||c+1!==p);c++)u[c]=a.indent+u[c];l=u.join("\n")}return l}throw new o.default("The partial "+a.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,o){var i=this.programs[e],a=this.fn(e);return t||o||n||r?i=u(this,e,a,t,r,n,o):i||(i=this.programs[e]=u(this,e,a)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=n.extend({},t,e)),r},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function d(t){var r,n,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;d._setup(o),!o.partial&&e.useData&&(r=t,(n=a)&&"root"in n||((n=n?i.createFrame(n):{}).root=r),a=n);var s=void 0,l=e.useBlockParams?[]:void 0;function u(t){return""+e.main(c,t,c.helpers,c.partials,a,l,s)}return e.useDepths&&(s=o.depths?t!=o.depths[0]?[t].concat(o.depths):o.depths:[t]),(u=p(e.main,u,c,o.depths||[],a,l))(t,o)}return d.isTop=!0,d._setup=function(o){if(o.partial)c.protoAccessControl=o.protoAccessControl,c.helpers=o.helpers,c.partials=o.partials,c.decorators=o.decorators,c.hooks=o.hooks;else{var i,u,p=n.extend({},t.helpers,o.helpers);i=p,u=c,Object.keys(i).forEach(function(e){var t,r,o=i[e];i[e]=(t=o,r=u.lookupProperty,s.wrapHelper(t,function(e){return n.extend({lookupProperty:r},e)}))}),c.helpers=p,e.usePartial&&(c.partials=c.mergeIfNeeded(o.partials,t.partials)),(e.usePartial||e.useDecorators)&&(c.decorators=n.extend({},t.decorators,o.decorators)),c.hooks={},c.protoAccessControl=l.createProtoAccessControl(o);var d=o.allowCallsToHelperMissing||r;a.moveHelperToHooks(c,"helperMissing",d),a.moveHelperToHooks(c,"blockHelperMissing",d)}},d._child=function(t,r,n,i){if(e.useBlockParams&&!n)throw new o.default("must pass block params");if(e.useDepths&&!i)throw new o.default("must pass parent depths");return u(c,t,e[t],r,0,n,i)},d},t.wrapProgram=u,t.resolvePartial=function(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e},t.invokePartial=function(e,t,r){var a,s=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var l=void 0;if(r.fn&&r.fn!==c&&(r.data=i.createFrame(r.data),a=r.fn,l=r.data["partial-block"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.data=i.createFrame(t.data),t.data["partial-block"]=s,a(e,t)},a.partials&&(r.partials=n.extend({},r.partials,a.partials))),void 0===e&&l&&(e=l),void 0===e)throw new o.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)},t.noop=c;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(66112)),o=function(e){return e&&e.__esModule?e:{default:e}}(r(58668)),i=r(76704),a=r(79984),s=r(94267),l=r(34e3);function u(e,t,r,n,o,i,a){function s(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return a&&t!=a[0]&&(t!==e.nullContext||null!==a[0])&&(s=[t].concat(a)),r(e,t,e.helpers,e.partials,o.data||n,i&&[o.blockParams].concat(i),s)}return(s=p(r,s,e,a,n,i)).program=t,s.depth=a?a.length:0,s.blockParams=o||0,s}function c(){return""}function p(e,t,r,o,i,a){if(e.decorator){var s={};t=e.decorator(t,s,r,o&&o[0],i,a,o),n.extend(t,s)}return t}},78238:(e,t,r)=>{"use strict";t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,r){r=this.locInfo(r);for(var o=e?"@":"",i=[],a=0,s=0,l=t.length;s<l;s++){var u=t[s].part,c=t[s].original!==u;if(o+=(t[s].separator||"")+u,c||".."!==u&&"."!==u&&"this"!==u)i.push(u);else if(i.length>0)throw new n.default("Invalid path: "+o,{loc:r});else".."===u&&a++}return{type:"PathExpression",data:e,depth:a,parts:i,original:o,loc:r}},t.prepareMustache=function(e,t,r,n,o,i){var a=n.charAt(3)||n.charAt(2);return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:"{"!==a&&"&"!==a,strip:o,loc:this.locInfo(i)}},t.prepareRawBlock=function(e,t,r,n){o(e,r);var i={type:"Program",body:t,strip:{},loc:n=this.locInfo(n)};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:n}},t.prepareBlock=function(e,t,r,i,a,s){i&&i.path&&o(e,i);var l=/\*/.test(e.open);t.blockParams=e.blockParams;var u=void 0,c=void 0;if(r){if(l)throw new n.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),c=r.strip,u=r.program}return a&&(a=u,u=t,t=a),{type:l?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:u,openStrip:e.strip,inverseStrip:c,closeStrip:i&&i.strip,loc:this.locInfo(s)}},t.prepareProgram=function(e,t){if(!t&&e.length){var r=e[0].loc,n=e[e.length-1].loc;r&&n&&(t={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},t.preparePartialBlock=function(e,t,r,n){return o(e,r),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:r&&r.strip,loc:this.locInfo(n)}};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(58668));function o(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var r={loc:e.path.loc};throw new n.default(e.path.original+" doesn't match "+t,r)}}},78335:()=>{},78474:e=>{"use strict";e.exports=require("node:events")},78624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePromiseDef=void 0;let n=r(70350);t.parsePromiseDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},78668:e=>{"use strict";let t=/^[0-9]+$/,r=(e,r)=>{let n=t.test(e),o=t.test(r);return n&&o&&(e*=1,r*=1),e===r?0:n&&!o?-1:o&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},78824:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{augmentWithContext:()=>l.augmentWithContext,downloadRequestMedia:()=>l.downloadRequestMedia,simulateSystemPrompt:()=>l.simulateSystemPrompt,validateSupport:()=>l.validateSupport}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(67062)},78879:e=>{"use strict";function t(e){return"function"==typeof e}var r=console.error.bind(console);function n(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function o(e){e&&e.logger&&(t(e.logger)?r=e.logger:r("new logger isn't a function, not replacing"))}function i(e,o,i){if(!e||!e[o])return void r("no original function "+o+" to wrap");if(!i){r("no wrapper function"),r(Error().stack);return}if(!t(e[o])||!t(i))return void r("original object and wrapper must be functions");var a=e[o],s=i(a,o);return n(s,"__original",a),n(s,"__unwrap",function(){e[o]===s&&n(e,o,a)}),n(s,"__wrapped",!0),n(e,o,s),s}function a(e,t){if(!e||!e[t]){r("no function to unwrap."),r(Error().stack);return}if(e[t].__unwrap)return e[t].__unwrap();r("no original to unwrap to -- has "+t+" already been unwrapped?")}o.wrap=i,o.massWrap=function(e,t,n){if(e)Array.isArray(e)||(e=[e]);else{r("must provide one or more modules to patch"),r(Error().stack);return}if(!(t&&Array.isArray(t)))return void r("must provide one or more functions to wrap on modules");e.forEach(function(e){t.forEach(function(t){i(e,t,n)})})},o.unwrap=a,o.massUnwrap=function(e,t){if(e)Array.isArray(e)||(e=[e]);else{r("must provide one or more modules to patch"),r(Error().stack);return}if(!(t&&Array.isArray(t)))return void r("must provide one or more functions to unwrap on modules");e.forEach(function(e){t.forEach(function(t){a(e,t)})})},e.exports=o},78955:(e,t,r)=>{"use strict";r.d(t,{$58:()=>nc,$5b:()=>a0,$8v:()=>oW,$wW:()=>ou,AVC:()=>aV,Ac3:()=>tW,AdO:()=>ab,BJ_:()=>oj,Bez:()=>au,Bh9:()=>oJ,C2y:()=>ni,CGC:()=>iG,CK9:()=>ia,CQB:()=>on,CdG:()=>r3,D3U:()=>iK,DA0:()=>rX,DBy:()=>rV,DNX:()=>tC,Dzx:()=>os,EPu:()=>ay,EUV:()=>ij,E__:()=>nt,Eh5:()=>tS,Eo2:()=>o4,F0K:()=>rB,F7w:()=>rz,FoJ:()=>t_,G49:()=>o0,GKr:()=>tU,GOV:()=>nn,GR7:()=>iR,GY$:()=>a1,Gsd:()=>np,H35:()=>rS,HVV:()=>tq,HXm:()=>aj,IMI:()=>aE,IOi:()=>oh,IXq:()=>nm,Ijl:()=>iy,Itx:()=>tw,IxL:()=>is,JK9:()=>rJ,JPM:()=>aS,JZz:()=>oO,JjG:()=>iM,K0$:()=>ow,K2_:()=>oy,KNN:()=>aX,KSs:()=>iY,KjL:()=>oi,L2R:()=>ol,L5D:()=>og,La$:()=>rI,LfK:()=>nh,Ltc:()=>t5,LxM:()=>tB,MWE:()=>rn,MpS:()=>ot,N4Y:()=>oU,N9D:()=>ty,NlA:()=>tD,NlD:()=>tN,Nxd:()=>o6,Nz$:()=>ry,O2W:()=>o2,OSW:()=>o5,OdI:()=>rv,Oe4:()=>o$,Ouu:()=>rq,P4J:()=>tL,PIi:()=>tZ,PU4:()=>n9,PfM:()=>t4,Plv:()=>rb,Puv:()=>t2,Q5s:()=>oV,Q_6:()=>ai,Qgf:()=>az,QhH:()=>ak,Qt9:()=>tT,Qv9:()=>rh,RHQ:()=>rt,Rk0:()=>oP,Rpt:()=>ao,Rt6:()=>tb,RvY:()=>tX,RyT:()=>re,Ryq:()=>aH,Spc:()=>oC,TCh:()=>tm,TKU:()=>oN,TRX:()=>tK,TVZ:()=>rM,Ta3:()=>rT,TiO:()=>aJ,Tl5:()=>iE,ToY:()=>il,U5o:()=>nd,Unu:()=>tx,V02:()=>op,V0Q:()=>tf,VEl:()=>im,VMk:()=>oQ,Vp5:()=>n8,Vur:()=>iZ,WJJ:()=>o1,W_O:()=>rf,W_f:()=>oI,Wb_:()=>n5,Wif:()=>rU,Wx7:()=>rO,X36:()=>ok,XER:()=>oa,XH7:()=>r0,XNY:()=>tY,XTF:()=>om,Xdf:()=>of,Xuz:()=>oT,XyR:()=>rE,Y$v:()=>oS,Y3v:()=>no,Yjy:()=>rZ,Ylk:()=>oF,Ywq:()=>sr,ZSz:()=>na,ZUK:()=>iI,ZUg:()=>tQ,Zl1:()=>r8,Zwr:()=>nl,_28:()=>a_,_Q_:()=>a8,_Zr:()=>r2,_af:()=>rW,_iR:()=>tO,_pX:()=>aQ,a4d:()=>rN,aKn:()=>tz,aP6:()=>tM,aTe:()=>tG,abe:()=>tV,ay9:()=>aY,b7t:()=>aU,bWQ:()=>aw,bZN:()=>se,bd4:()=>tk,bes:()=>tF,bfK:()=>n6,byW:()=>rA,c1V:()=>iH,cA3:()=>t6,cAF:()=>aT,cFk:()=>tH,cSi:()=>rr,cZl:()=>r7,cd9:()=>tg,ch2:()=>aq,cjY:()=>iL,crS:()=>r_,cvh:()=>rl,d3j:()=>iS,dNH:()=>aD,dXK:()=>a3,dbJ:()=>aN,ddb:()=>ax,dsp:()=>t$,f3T:()=>a6,fN3:()=>iD,fhG:()=>rH,frU:()=>rk,fub:()=>rd,g9x:()=>o8,gFG:()=>a4,gGD:()=>aC,gUJ:()=>rR,h70:()=>t3,hV:()=>oR,hXS:()=>t9,hu9:()=>ap,hze:()=>av,i9b:()=>as,iFX:()=>aI,iPC:()=>iu,imY:()=>tJ,ipG:()=>tj,irN:()=>o_,j$y:()=>t1,j7z:()=>iq,jCw:()=>oe,jrL:()=>ra,kOl:()=>ix,kPW:()=>aP,kgK:()=>ad,klU:()=>rs,l60:()=>tE,lDI:()=>rY,lcm:()=>oA,lpz:()=>ro,mGg:()=>rF,mN_:()=>ac,mO:()=>aB,mc2:()=>oE,mlL:()=>ig,nN_:()=>r1,nS0:()=>rw,nWK:()=>od,nXs:()=>aW,ngE:()=>ob,njt:()=>aK,npt:()=>aM,nvt:()=>t0,nwz:()=>or,o8O:()=>rg,oBD:()=>oD,oF4:()=>ih,p1q:()=>a2,p30:()=>rP,pHC:()=>tR,pfp:()=>oo,poY:()=>oM,qGX:()=>tv,r0m:()=>r$,rBh:()=>am,rsL:()=>r9,sLO:()=>nr,slN:()=>o3,sr7:()=>st,sxk:()=>rG,t8j:()=>rQ,tGA:()=>rC,tNm:()=>ne,taz:()=>ri,ti:()=>rj,tto:()=>rx,u4L:()=>rL,uZf:()=>io,ueJ:()=>a5,usz:()=>ru,uwh:()=>af,uzh:()=>al,v8K:()=>ii,vSt:()=>rp,vhy:()=>oX,vl2:()=>ox,vof:()=>rc,w54:()=>r5,wAY:()=>aZ,wJ:()=>aG,wYf:()=>ag,wgx:()=>t7,wpU:()=>rD,wy2:()=>tI,x0j:()=>ah,x85:()=>ik,xhJ:()=>n7,xq_:()=>tP,y3W:()=>i_,y6V:()=>ov,yIV:()=>aa,yRs:()=>r6,y__:()=>oB,yew:()=>ns,ynC:()=>oc,ynP:()=>t8,z4S:()=>iU,zBy:()=>rK,zI8:()=>iw,zPu:()=>rm,z_u:()=>nu,zmF:()=>oL,zpg:()=>r4,zri:()=>tA});var n=r(47643),o="aws.lambda.invoked_arn",i="db.system",a="db.connection_string",s="db.user",l="db.jdbc.driver_classname",u="db.name",c="db.statement",p="db.operation",d="db.mssql.instance_name",h="db.cassandra.keyspace",m="db.cassandra.page_size",f="db.cassandra.consistency_level",g="db.cassandra.table",y="db.cassandra.idempotence",v="db.cassandra.speculative_execution_count",b="db.cassandra.coordinator.id",_="db.cassandra.coordinator.dc",E="db.hbase.namespace",S="db.redis.database_index",x="db.mongodb.collection",w="db.sql.table",T="exception.type",A="exception.message",O="exception.stacktrace",N="exception.escaped",P="faas.trigger",C="faas.execution",k="faas.document.collection",I="faas.document.operation",D="faas.document.time",R="faas.document.name",L="faas.time",M="faas.cron",j="faas.coldstart",U="faas.invoked_name",F="faas.invoked_provider",$="faas.invoked_region",B="net.transport",V="net.peer.ip",z="net.peer.port",G="net.peer.name",H="net.host.ip",q="net.host.port",K="net.host.name",Z="net.host.connection.type",Y="net.host.connection.subtype",J="net.host.carrier.name",W="net.host.carrier.mcc",X="net.host.carrier.mnc",Q="net.host.carrier.icc",ee="peer.service",et="enduser.id",er="enduser.role",en="enduser.scope",eo="thread.id",ei="thread.name",ea="code.function",es="code.namespace",el="code.filepath",eu="code.lineno",ec="http.method",ep="http.url",ed="http.target",eh="http.host",em="http.scheme",ef="http.status_code",eg="http.flavor",ey="http.user_agent",ev="http.request_content_length",eb="http.request_content_length_uncompressed",e_="http.response_content_length",eE="http.response_content_length_uncompressed",eS="http.server_name",ex="http.route",ew="http.client_ip",eT="aws.dynamodb.table_names",eA="aws.dynamodb.consumed_capacity",eO="aws.dynamodb.item_collection_metrics",eN="aws.dynamodb.provisioned_read_capacity",eP="aws.dynamodb.provisioned_write_capacity",eC="aws.dynamodb.consistent_read",ek="aws.dynamodb.projection",eI="aws.dynamodb.limit",eD="aws.dynamodb.attributes_to_get",eR="aws.dynamodb.index_name",eL="aws.dynamodb.select",eM="aws.dynamodb.global_secondary_indexes",ej="aws.dynamodb.local_secondary_indexes",eU="aws.dynamodb.exclusive_start_table",eF="aws.dynamodb.table_count",e$="aws.dynamodb.scan_forward",eB="aws.dynamodb.segment",eV="aws.dynamodb.total_segments",ez="aws.dynamodb.count",eG="aws.dynamodb.scanned_count",eH="aws.dynamodb.attribute_definitions",eq="aws.dynamodb.global_secondary_index_updates",eK="messaging.system",eZ="messaging.destination",eY="messaging.destination_kind",eJ="messaging.temp_destination",eW="messaging.protocol",eX="messaging.protocol_version",eQ="messaging.url",e0="messaging.message_id",e1="messaging.conversation_id",e2="messaging.message_payload_size_bytes",e3="messaging.message_payload_compressed_size_bytes",e4="messaging.operation",e5="messaging.consumer_id",e8="messaging.rabbitmq.routing_key",e6="messaging.kafka.message_key",e9="messaging.kafka.consumer_group",e7="messaging.kafka.client_id",te="messaging.kafka.partition",tt="messaging.kafka.tombstone",tr="rpc.system",tn="rpc.service",to="rpc.method",ti="rpc.grpc.status_code",ta="rpc.jsonrpc.version",ts="rpc.jsonrpc.request_id",tl="rpc.jsonrpc.error_code",tu="rpc.jsonrpc.error_message",tc="message.type",tp="message.id",td="message.compressed_size",th="message.uncompressed_size",tm=o,tf=i,tg=a,ty=s,tv=l,tb=u,t_=c,tE=p,tS=d,tx=h,tw=m,tT=f,tA=g,tO=y,tN=v,tP=b,tC=_,tk=E,tI=S,tD=x,tR=w,tL=T,tM=A,tj=O,tU=N,tF=P,t$=C,tB=k,tV=I,tz=D,tG=R,tH=L,tq=M,tK=j,tZ=U,tY=F,tJ=$,tW=B,tX=V,tQ=z,t0=G,t1=H,t2=q,t3=K,t4=Z,t5=Y,t8=J,t6=W,t9=X,t7=Q,re=ee,rt=et,rr=er,rn=en,ro=eo,ri=ei,ra=ea,rs=es,rl=el,ru=eu,rc=ec,rp=ep,rd=ed,rh=eh,rm=em,rf=ef,rg=eg,ry=ey,rv=ev,rb=eb,r_=e_,rE=eE,rS=eS,rx=ex,rw=ew,rT=eT,rA=eA,rO=eO,rN=eN,rP=eP,rC=eC,rk=ek,rI=eI,rD=eD,rR=eR,rL=eL,rM=eM,rj=ej,rU=eU,rF=eF,r$=e$,rB=eB,rV=eV,rz=ez,rG=eG,rH=eH,rq=eq,rK=eK,rZ=eZ,rY=eY,rJ=eJ,rW=eW,rX=eX,rQ=eQ,r0=e0,r1=e1,r2=e2,r3=e3,r4=e4,r5=e5,r8=e8,r6=e6,r9=e9,r7=e7,ne=te,nt=tt,nr=tr,nn=tn,no=to,ni=ti,na=ta,ns=ts,nl=tl,nu=tu,nc=tc,np=tp,nd=td,nh=th,nm=(0,n.O)([o,i,a,s,l,u,c,p,d,h,m,f,g,y,v,b,_,E,S,x,w,T,A,O,N,P,C,k,I,D,R,L,M,j,U,F,$,B,V,z,G,H,q,K,Z,Y,J,W,X,Q,ee,et,er,en,eo,ei,ea,es,el,eu,ec,ep,ed,eh,em,ef,eg,ey,ev,eb,e_,eE,eS,ex,ew,eT,eA,eO,eN,eP,eC,ek,eI,eD,eR,eL,eM,ej,eU,eF,e$,eB,eV,ez,eG,eH,eq,eK,eZ,eY,eJ,eW,eX,eQ,e0,e1,e2,e3,e4,e5,e8,e6,e9,e7,te,tt,tr,tn,to,ti,ta,ts,tl,tu,tc,tp,td,th]),nf="other_sql",ng="mssql",ny="mysql",nv="oracle",nb="postgresql",n_="redshift",nE="hive",nS="cloudscape",nx="hsqldb",nw="progress",nT="maxdb",nA="hanadb",nO="ingres",nN="firstsql",nP="cache",nC="adabas",nk="firebird",nI="derby",nD="filemaker",nR="informix",nL="instantdb",nM="interbase",nj="mariadb",nU="netezza",nF="pervasive",n$="pointbase",nB="sqlite",nV="sybase",nz="teradata",nG="vertica",nH="coldfusion",nq="cassandra",nK="hbase",nZ="mongodb",nY="redis",nJ="couchbase",nW="couchdb",nX="cosmosdb",nQ="dynamodb",n0="neo4j",n1="geode",n2="elasticsearch",n3="memcached",n4="cockroachdb",n5=nf,n8=ng,n6=ny,n9=nv,n7="db2",oe=nb,ot=n_,or=nE,on=nS,oo=nx,oi=nw,oa=nT,os=nA,ol=nO,ou=nN,oc="edb",op=nP,od=nC,oh=nk,om=nI,of=nD,og=nR,oy=nL,ov=nM,ob=nj,o_=nU,oE=nF,oS=n$,ox=nB,ow=nV,oT=nz,oA=nG,oO="h2",oN=nH,oP=nq,oC=nK,ok=nZ,oI=nY,oD=nJ,oR=nW,oL=nX,oM=nQ,oj=n0,oU=n1,oF=n2,o$=n3,oB=n4,oV=(0,n.O)([nf,ng,ny,nv,"db2",nb,n_,nE,nS,nx,nw,nT,nA,nO,nN,"edb",nP,nC,nk,nI,nD,nR,nL,nM,nj,nU,nF,n$,nB,nV,nz,nG,"h2",nH,nq,nK,nZ,nY,nJ,nW,nX,nQ,n0,n1,n2,n3,n4]),oz="each_quorum",oG="quorum",oH="local_quorum",oq="three",oK="local_one",oZ="serial",oY="local_serial",oJ="all",oW=oz,oX=oG,oQ=oH,o0="one",o1="two",o2=oq,o3=oK,o4="any",o5=oZ,o8=oY,o6=(0,n.O)(["all",oz,oG,oH,"one","two",oq,oK,"any",oZ,oY]),o9="datasource",o7="http",ie="pubsub",it="timer",ir="other",io=o9,ii=o7,ia=ie,is=it,il=ir,iu=(0,n.O)([o9,o7,ie,it,ir]),ic="insert",ip="edit",id="delete",ih=ic,im=ip,ig=id,iy=(0,n.O)([ic,ip,id]),iv="alibaba_cloud",ib="azure",i_=iv,iE="aws",iS=ib,ix="gcp",iw=(0,n.O)([iv,"aws",ib,"gcp"]),iT="ip_tcp",iA="ip_udp",iO="unix",iN="pipe",iP="inproc",iC="other",ik=iT,iI=iA,iD="ip",iR=iO,iL=iN,iM=iP,ij=iC,iU=(0,n.O)([iT,iA,"ip",iO,iN,iP,iC]),iF="wifi",i$="wired",iB="cell",iV="unavailable",iz="unknown",iG=iF,iH=i$,iq=iB,iK=iV,iZ=iz,iY=(0,n.O)([iF,i$,iB,iV,iz]),iJ="gprs",iW="edge",iX="umts",iQ="cdma",i0="evdo_0",i1="evdo_a",i2="cdma2000_1xrtt",i3="hsdpa",i4="hsupa",i5="hspa",i8="iden",i6="evdo_b",i9="ehrpd",i7="hspap",ae="td_scdma",at="iwlan",ar="nrnsa",an="lte_ca",ao=iJ,ai=iW,aa=iX,as=iQ,al=i0,au=i1,ac=i2,ap=i3,ad=i4,ah=i5,am=i8,af=i6,ag="lte",ay=i9,av=i7,ab="gsm",a_=ae,aE=at,aS="nr",ax=ar,aw=an,aT=(0,n.O)([iJ,iW,iX,iQ,i0,i1,i2,i3,i4,i5,i8,i6,"lte",i9,i7,"gsm",ae,at,"nr",ar,an]),aA="SPDY",aO="QUIC",aN="1.0",aP="1.1",aC="2.0",ak=aA,aI=aO,aD={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:aA,QUIC:aO},aR="queue",aL="topic",aM=aR,aj=aL,aU=(0,n.O)([aR,aL]),aF="receive",a$="process",aB=aF,aV=a$,az=(0,n.O)([aF,a$]),aG=0,aH=1,aq=2,aK=3,aZ=4,aY=5,aJ=6,aW=7,aX=8,aQ=9,a0=10,a1=11,a2=12,a3=13,a4=14,a5=15,a8=16,a6={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},a9="SENT",a7="RECEIVED",se=a9,st=a7,sr=(0,n.O)([a9,a7])},79211:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ZipkinExporter:()=>b,prepareSend:()=>p});var n,o,i=r(86713),a=r(1037),s=r(81630),l=r(55591),u=r(79551),c=function(){return(c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var r=u.parse(e),n=Object.assign({method:"POST",headers:c({"Content-Type":"application/json"},t)},r);return function(e,t){if(0===e.length)return i.s.debug("Zipkin send with empty spans"),t({code:a.V.SUCCESS});var r=(0,("http:"===n.protocol?s:l).request)(n,function(e){var r="";e.on("data",function(e){r+=e}),e.on("end",function(){var n=e.statusCode||0;return(i.s.debug("Zipkin response status code: "+n+", body: "+r),n<400)?t({code:a.V.SUCCESS}):t({code:a.V.FAILED,error:Error("Got unexpected status code from zipkin: "+n)})})});r.on("error",function(e){return t({code:a.V.FAILED,error:e})});var o=JSON.stringify(e);i.s.debug("Zipkin request payload: "+o),r.write(o,"utf8"),r.end()}}var d=r(28038),h=r(21974),m=r(89131),f=r(18803);!function(e){e.CLIENT="CLIENT",e.SERVER="SERVER",e.CONSUMER="CONSUMER",e.PRODUCER="PRODUCER"}(n||(n={}));var g=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},y=((o={})[h.v.CLIENT]=n.CLIENT,o[h.v.SERVER]=n.SERVER,o[h.v.CONSUMER]=n.CONSUMER,o[h.v.PRODUCER]=n.PRODUCER,o[h.v.INTERNAL]=void 0,o),v=r(92518),b=function(){function e(e){if(void 0===e&&(e={}),this.DEFAULT_SERVICE_NAME="OpenTelemetry Service",this._sendingPromises=[],this._urlStr=e.url||(0,d._)().OTEL_EXPORTER_ZIPKIN_ENDPOINT,this._send=p(this._urlStr,e.headers),this._serviceName=e.serviceName,this._statusCodeTagName=e.statusCodeTagName||"otel.status_code",this._statusDescriptionTagName=e.statusDescriptionTagName||"error",this._isShutdown=!1,"function"==typeof e.getExportRequestHeaders){var t;this._getHeaders=(t=e.getExportRequestHeaders,function(){return t()})}else this._beforeSend=function(){}}return e.prototype.export=function(e,t){var r=this,n=String(this._serviceName||e[0].resource.attributes[v.AV]||this.DEFAULT_SERVICE_NAME);if(i.s.debug("Zipkin exporter export"),this._isShutdown)return void setTimeout(function(){return t({code:a.V.FAILED,error:Error("Exporter has been shutdown")})});var o=new Promise(function(o){r._sendSpans(e,n,function(e){o(),t(e)})});this._sendingPromises.push(o);var s=function(){var e=r._sendingPromises.indexOf(o);r._sendingPromises.splice(e,1)};o.then(s,s)},e.prototype.shutdown=function(){return i.s.debug("Zipkin exporter shutdown"),this._isShutdown=!0,this.forceFlush()},e.prototype.forceFlush=function(){var e=this;return new Promise(function(t,r){Promise.all(e._sendingPromises).then(function(){t()},r)})},e.prototype._beforeSend=function(){this._getHeaders&&(this._send=p(this._urlStr,this._getHeaders()))},e.prototype._sendSpans=function(e,t,r){var n=this,o=e.map(function(e){var r,o,i;return r=String(e.attributes[v.AV]||e.resource.attributes[v.AV]||t),o=n._statusCodeTagName,i=n._statusDescriptionTagName,{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:y[e.kind],timestamp:(0,f.w_)(e.startTime),duration:Math.round((0,f.w_)(e.duration)),localEndpoint:{serviceName:r},tags:function(e,t,r){var n,o,i=e.attributes,a=e.resource,s=e.status,l=e.droppedAttributesCount,u=e.droppedEventsCount,c=e.droppedLinksCount,p={};try{for(var d=g(Object.keys(i)),h=d.next();!h.done;h=d.next()){var f=h.value;p[f]=String(i[f])}}catch(e){n={error:e}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return s.code!==m.s.UNSET&&(p[t]=String(m.s[s.code])),s.code===m.s.ERROR&&s.message&&(p[r]=s.message),l&&(p["otel.dropped_attributes_count"]=String(l)),u&&(p["otel.dropped_events_count"]=String(u)),c&&(p["otel.dropped_links_count"]=String(c)),Object.keys(a.attributes).forEach(function(e){return p[e]=String(a.attributes[e])}),p}(e,o,i),annotations:e.events.length?e.events.map(function(e){return{timestamp:Math.round((0,f.w_)(e.time)),value:e.name}}):void 0}});return this._beforeSend(),this._send(o,function(e){if(r)return r(e)})},e}()},79428:e=>{"use strict";e.exports=require("buffer")},79524:(e,t,r)=>{"use strict";let n=r(79646).spawn,o=r(49074),i=r(91292);class a{constructor(e){e=e||{},this._spawn=n,this.options=e||{},this.name="Sendmail",this.version=o.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=i.getLogger(this.options,{component:this.options.component||"sendmail"}),e&&("string"==typeof e?this.path=e:"object"==typeof e&&(e.path&&(this.path=e.path),Array.isArray(e.args)&&(this.args=e.args),this.winbreak=["win","windows","dos","\r\n"].includes((e.newline||"").toString().toLowerCase())))}send(e,t){let r,n,o;e.message.keepBcc=!0;let i=e.data.envelope||e.message.getEnvelope(),a=e.message.messageId();if([].concat(i.from||[]).concat(i.to||[]).some(e=>/^-/.test(e)))return t(Error("Can not send mail. Invalid envelope addresses."));r=this.args?["-i"].concat(this.args).concat(i.to):["-i"].concat(i.from?["-f",i.from]:[]).concat(i.to);let s=r=>{if(!o&&(o=!0,"function"==typeof t))if(r)return t(r);else return t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:a,response:"Messages queued for delivery"})};try{n=this._spawn(this.path,r)}catch(e){return this.logger.error({err:e,tnx:"spawn",messageId:a},"Error occurred while spawning sendmail. %s",e.message),s(e)}if(!n)return s(Error("sendmail was not found"));{n.on("error",e=>{this.logger.error({err:e,tnx:"spawn",messageId:a},"Error occurred when sending message %s. %s",a,e.message),s(e)}),n.once("exit",e=>{let t;if(!e)return s();t=127===e?Error("Sendmail command not found, process exited with code "+e):Error("Sendmail exited with code "+e),this.logger.error({err:t,tnx:"stdin",messageId:a},"Error sending message %s to sendmail. %s",a,t.message),s(t)}),n.once("close",s),n.stdin.on("error",e=>{this.logger.error({err:e,tnx:"stdin",messageId:a},"Error occurred when piping message %s to sendmail. %s",a,e.message),s(e)});let t=[].concat(i.to||[]);t.length>3&&t.push("...and "+t.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:a},"Sending message %s to <%s>",a,t.join(", "));let r=e.message.createReadStream();r.once("error",e=>{this.logger.error({err:e,tnx:"stdin",messageId:a},"Error occurred when generating message %s. %s",a,e.message),n.kill("SIGINT"),s(e)}),r.pipe(n.stdin)}}}e.exports=a},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},79805:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{handleCacheIfNeeded:()=>h,handleContextCache:()=>d}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(85642),u=r(48334),c=r(97535),p=r(8008);async function d(e,t,r,n,o){let i=new l.GoogleAICacheManager(e),{cachedContent:a,chatRequest:s}=(0,p.getContentForCache)(t,r,n,o);a.model=n;let d=(0,p.generateCacheKey)(a);a.displayName=d;let h=await (0,p.lookupContextCache)(i,d);if(c.logger.debug(`Cache hit: ${h?"true":"false"}`),!h)try{c.logger.debug("No cache found, creating one.");let e={...a,ttlSeconds:(0,p.calculateTTL)(o)};h=await i.create(e),c.logger.debug(`Created new cache entry with key: ${d}`)}catch(e){throw c.logger.error(`Failed to create cache with key ${d}: ${e}`),new u.GenkitError({status:"INTERNAL",message:`Failed to create cache: ${e}`})}if(!h)throw new u.GenkitError({status:"INTERNAL",message:"Failed to use context cache feature"});return{cache:h,newChatRequest:s}}async function h(e,t,r,n,o){if(!o||!(0,p.validateContextCacheRequest)(t,n))return{chatRequest:r,cache:null};let{cache:i,newChatRequest:a}=await d(e,t,r,n,o);return{chatRequest:a,cache:i}}},79843:(e,t,r)=>{"use strict";var n=r(11206);function o(e,t){let r=e[0],n="-"===r||"+"===r?e.substring(1):e,o=e=>t?BigInt(e):Number(e),i=n.replace(/_/g,"").split(":").reduce((e,t)=>e*o(60)+o(t),o(0));return"-"===r?o(-1)*i:i}function i(e){let{value:t}=e,r=e=>e;if("bigint"==typeof t)r=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return n.stringifyNumber(e);let o="";t<0&&(o="-",t*=r(-1));let i=r(60),a=[t%i];return t<60?a.unshift(0):(t=(t-a[0])/i,a.unshift(t%i),t>=60&&(t=(t-a[0])/i,a.unshift(t))),o+a.map(e=>String(e).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}let a={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){let t=e.match(a.test);if(!t)throw Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,i,s,l,u]=t.map(Number),c=Date.UTC(r,n-1,i,s||0,l||0,u||0,t[7]?Number((t[7]+"00").substr(1,3)):0),p=t[8];if(p&&"Z"!==p){let e=o(p,!1);30>Math.abs(e)&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""};t.floatTime={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>o(e,!1),stringify:i},t.intTime={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:r})=>o(e,r),stringify:i},t.timestamp=a},79882:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};function a(){return process.env.GENKIT_ENV||"prod"}function s(){return"dev"===a()}function l(e){return`feature:${e}`}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{deleteUndefinedProps:()=>function e(t){for(let r in t)void 0===t[r]?delete t[r]:"object"==typeof t[r]&&e(t[r])},featureMetadataPrefix:()=>l,getCurrentEnv:()=>a,isDevEnv:()=>s,stripUndefinedProps:()=>function e(t){if(null==t||Array.isArray(t)||"object"!=typeof t)return t;let r={};for(let n in t)void 0!==t[n]&&(r[n]=e(t[n]));return r}}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i)},79984:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){o.default(e),i.default(e),a.default(e),s.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,r){e.helpers[t]&&(e.hooks[t]=e.helpers[t],r||delete e.helpers[t])};var o=n(r(14010)),i=n(r(31842)),a=n(r(47358)),s=n(r(47032)),l=n(r(35089)),u=n(r(28901)),c=n(r(44007))},80235:(e,t,r)=>{"use strict";function n(e){e.unref()}r.d(t,{K:()=>n})},80714:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Compiler=l,t.precompile=function(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0),t.compat&&(t.useDepths=!0);var n=r.parse(e,t),i=new r.Compiler().compile(n,t);return new r.JavaScriptCompiler().compile(i,t)},t.compile=function(e,t,r){if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=i.extend({},t))||(t.data=!0),t.compat&&(t.useDepths=!0);var n=void 0;function a(){var n=r.parse(e,t),o=new r.Compiler().compile(n,t),i=new r.JavaScriptCompiler().compile(o,t,void 0,!0);return r.template(i)}function s(e,t){return n||(n=a()),n.call(this,e,t)}return s._setup=function(e){return n||(n=a()),n._setup(e)},s._child=function(e,t,r,o){return n||(n=a()),n._child(e,t,r,o)},s};var o=n(r(58668)),i=r(66112),a=n(r(9431)),s=[].slice;function l(){}function u(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}l.prototype={compiler:l,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;r<t;r++){var n=this.opcodes[r],o=e.opcodes[r];if(n.opcode!==o.opcode||!function e(t,r){if(t===r)return!0;if(i.isArray(t)&&i.isArray(r)&&t.length===r.length){for(var n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}}(n.args,o.args))return!1}t=this.children.length;for(var r=0;r<t;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=i.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=new this.compiler().compile(e,this.options),r=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[r]=t,this.useDepths=this.useDepths||t.useDepths,r},accept:function(e){if(!this[e.type])throw new o.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;n<r;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){u(e);var t=e.program,r=e.inverse;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var r=e.params;if(r.length>1)throw new o.default("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=e.name.original,i="SubExpression"===e.name.type;i&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var a=e.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a=""),this.opcode("invokePartial",i,n,a),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){u(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,o=n.parts[0];this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",o,null!=t||null!=r)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var n=this.setupFullMustacheParams(e,t,r),i=e.path,s=i.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else if(this.options.knownHelpersOnly)throw new o.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);else i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,a.default.helpers.simpleId(i))},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=a.default.helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:s.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=a.default.helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&a.default.helpers.helperExpression(e),o=!r&&(n||t);if(o&&!n){var i=e.path.parts[0],s=this.options;s.knownHelpers[i]?n=!0:s.knownHelpersOnly&&(o=!1)}return n?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;t<r;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||a.default.helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),o},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;t<r;t++){var n=this.options.blockParams[t],o=n&&i.indexOf(n,e);if(n&&o>=0)return[t,o]}}}},80958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(73841),o=r(67884),i=r(58592),a=r(50851);t.default={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:s,data:l,it:u}=e;"all"===u.opts.removeAdditional&&void 0===s.additionalProperties&&a.default.code(new n.KeywordCxt(u,a.default,"additionalProperties"));let c=(0,o.allSchemaProperties)(r);for(let e of c)u.definedProperties.add(e);u.opts.unevaluated&&c.length&&!0!==u.props&&(u.props=i.mergeEvaluated.props(t,(0,i.toHash)(c),u.props));let p=c.filter(e=>!(0,i.alwaysValidSchema)(u,r[e]));if(0===p.length)return;let d=t.name("valid");for(let n of p){var h;(h=n,u.opts.useDefaults&&!u.compositeRule&&void 0!==r[h].default)?m(n):(t.if((0,o.propertyInData)(t,l,n,u.opts.ownProperties)),m(n),u.allErrors||t.else().var(d,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(d)}function m(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},d)}}}},81272:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GENERIC_IMAGEN_INFO:()=>h,ImagenConfigSchema:()=>d,defineImagenModel:()=>m}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(48334),u=r(95563),c=r(44192),p=r(36440);let d=l.z.object({numberOfImages:l.z.number().describe("The number of images to generate, from 1 to 4 (inclusive). The default is 1.").optional(),aspectRatio:l.z.enum(["1:1","9:16","16:9","3:4","4:3"]).describe("Desired aspect ratio of the output image.").optional(),personGeneration:l.z.enum(["dont_allow","allow_adult","allow_all"]).describe("Control if/how images of people will be generated by the model.").optional()}).passthrough(),h={label:"Google AI - Generic Imagen",supports:{media:!0,multiturn:!1,tools:!1,systemRole:!1,output:["media"]}};function m(e,t,r){if(!1!==r&&!(r=r||(0,c.getApiKeyFromEnvVar)()))throw new l.GenkitError({status:"FAILED_PRECONDITION",message:"Please pass in the API key or set the GEMINI_API_KEY or GOOGLE_API_KEY environment variable.\nFor more details see https://genkit.dev/docs/plugins/google-genai"});let n=`googleai/${t}`,o=(0,u.modelRef)({name:n,info:{...h,label:`Google AI - ${t}`},configSchema:d});return e.defineModel({name:n,...o.info,configSchema:d},async e=>{let n={prompt:e.messages.at(-1).content.map(e=>e.text||"").join("")},i=e.messages.at(-1)?.content.find(e=>!!e.media)?.media?.url.split(",")[1];i&&(n.image={bytesBase64Encoded:i});let a=(0,p.predictModel)(o.version||t,r,"predict"),s=await a([n],function(e){let t={sampleCount:e.config?.numberOfImages??1,...e?.config};for(let e in t)t[e]||delete t[e];return t}(e));if(!s.predictions||0==s.predictions.length)throw Error("Model returned no predictions. Possibly due to content filters.");let l={role:"model",content:[]};return s.predictions.forEach((e,t)=>{let r=e.bytesBase64Encoded,n=e.mimeType;l.content.push({media:{url:`data:${n};base64,${r}`,contentType:n}})}),{finishReason:"stop",message:l,usage:(0,u.getBasicUsageStats)(e.messages,l),custom:s}})}},81448:function(e,t,r){"use strict";let n;var o,i,a,s,l=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,r,n,o){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.custom=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.datetimeRegex=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=t.discriminatedUnion=t.date=void 0;let c=r(59850),p=r(30477),d=r(54560),h=r(42495),m=r(28824);class f{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let g=(e,t)=>{if((0,d.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new m.ZodError(e.common.issues);return this._error=t,this._error}}};function y(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:o}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:o}:{errorMap:(t,o)=>{var i,a;let{message:s}=e;return"invalid_enum_value"===t.code?{message:null!=s?s:o.defaultError}:void 0===o.data?{message:null!=(i=null!=s?s:n)?i:o.defaultError}:"invalid_type"!==t.code?{message:o.defaultError}:{message:null!=(a=null!=s?s:r)?a:o.defaultError}},description:o}}class v{get description(){return this._def.description}_getType(e){return(0,h.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,h.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new d.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,h.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if((0,d.isAsync)(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,h.getParsedType)(e)},o=this._parseSync({data:e,path:n.path,parent:n});return g(n,o)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,h.getParsedType)(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return(0,d.isValid)(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null==(r=null==(t=null==e?void 0:e.message)?void 0:t.toLowerCase())?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>(0,d.isValid)(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,h.getParsedType)(e)},n=this._parse({data:e,path:r.path,parent:r});return g(r,await ((0,d.isAsync)(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let o=e(t),i=()=>n.addIssue({code:m.ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(e=>!!e||(i(),!1)):!!o||(i(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new ed({schema:this,typeName:s.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eh.create(this,this._def)}nullable(){return em.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Y.create(this)}promise(){return ep.create(this,this._def)}or(e){return W.create([this,e],this._def)}and(e){return ee.create(this,e,this._def)}transform(e){return new ed({...y(this._def),schema:this,typeName:s.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ef({...y(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:s.ZodDefault})}brand(){return new ev({typeName:s.ZodBranded,type:this,...y(this._def)})}catch(e){return new eg({...y(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:s.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eb.create(this,e)}readonly(){return e_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=v,t.Schema=v,t.ZodSchema=v;let b=/^c[^\s-]{8,}$/i,_=/^[0-9a-z]+$/,E=/^[0-9A-HJKMNP-TV-Z]{26}$/i,S=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,x=/^[a-z0-9_-]{21}$/i,w=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,T=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,A=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,O=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,N=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,P=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,C=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,k=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,I=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,D="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",R=RegExp(`^${D}$`);function L(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function M(e){let t=`${D}T${L(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}t.datetimeRegex=M;class j extends v{_parse(e){var t,r,o,i;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==h.ZodParsedType.string){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.string,received:t.parsedType}),d.INVALID}let s=new d.ParseStatus;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if("max"===l.kind)e.data.length>l.value&&(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(a=this._getOrReturnCtx(e,a),t?(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),s.dirty())}else if("email"===l.kind)A.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"email",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("emoji"===l.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"emoji",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("uuid"===l.kind)S.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"uuid",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("nanoid"===l.kind)x.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"nanoid",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("cuid"===l.kind)b.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"cuid",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("cuid2"===l.kind)_.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"cuid2",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("ulid"===l.kind)E.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"ulid",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("url"===l.kind)try{new URL(e.data)}catch(t){a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"url",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"regex",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),s.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.invalid_string,validation:{startsWith:l.value},message:l.message}),s.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.invalid_string,validation:{endsWith:l.value},message:l.message}),s.dirty()):"datetime"===l.kind?M(l).test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.invalid_string,validation:"datetime",message:l.message}),s.dirty()):"date"===l.kind?R.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.invalid_string,validation:"date",message:l.message}),s.dirty()):"time"===l.kind?RegExp(`^${L(l)}$`).test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{code:m.ZodIssueCode.invalid_string,validation:"time",message:l.message}),s.dirty()):"duration"===l.kind?T.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"duration",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty()):"ip"===l.kind?(t=e.data,!(("v4"===(r=l.version)||!r)&&O.test(t)||("v6"===r||!r)&&P.test(t))&&1&&(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"ip",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty())):"jwt"===l.kind?!function(e,t){if(!w.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));if("object"!=typeof o||null===o||!o.typ||!o.alg||t&&o.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,l.alg)&&(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"jwt",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty()):"cidr"===l.kind?(o=e.data,!(("v4"===(i=l.version)||!i)&&N.test(o)||("v6"===i||!i)&&C.test(o))&&1&&(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"cidr",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty())):"base64"===l.kind?k.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"base64",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty()):"base64url"===l.kind?I.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.addIssueToContext)(a,{validation:"base64url",code:m.ZodIssueCode.invalid_string,message:l.message}),s.dirty()):h.util.assertNever(l);return{status:s.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:m.ZodIssueCode.invalid_string,...p.errorUtil.errToObj(r)})}_addCheck(e){return new j({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...p.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...p.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...p.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...p.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...p.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...p.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...p.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...p.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...p.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...p.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...p.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...p.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...p.errorUtil.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(r=null==e?void 0:e.local)&&r,...p.errorUtil.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...p.errorUtil.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...p.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...p.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...p.errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...p.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...p.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...p.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...p.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...p.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,p.errorUtil.errToObj(e))}trim(){return new j({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new j({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new j({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodString=j,j.create=e=>{var t;return new j({checks:[],typeName:s.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...y(e)})};class U extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==h.ZodParsedType.number){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.number,received:t.parsedType}),d.INVALID}let r=new d.ParseStatus;for(let n of this._def.checks)"int"===n.kind?h.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,o=r>n?r:n;return parseInt(e.toFixed(o).replace(".",""))%parseInt(t.toFixed(o).replace(".",""))/Math.pow(10,o)}(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.not_finite,message:n.message}),r.dirty()):h.util.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,p.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,p.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,p.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,p.errorUtil.toString(t))}setLimit(e,t,r,n){return new U({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:p.errorUtil.toString(n)}]})}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:p.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:p.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:p.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:p.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:p.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:p.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:p.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:p.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:p.errorUtil.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&h.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=U,U.create=e=>new U({checks:[],typeName:s.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...y(e)});class F extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==h.ZodParsedType.bigint)return this._getInvalidInput(e);let r=new d.ParseStatus;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):h.util.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.bigint,received:t.parsedType}),d.INVALID}gte(e,t){return this.setLimit("min",e,!0,p.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,p.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,p.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,p.errorUtil.toString(t))}setLimit(e,t,r,n){return new F({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:p.errorUtil.toString(n)}]})}_addCheck(e){return new F({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:p.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:p.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:p.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:p.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:p.errorUtil.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=F,F.create=e=>{var t;return new F({checks:[],typeName:s.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...y(e)})};class $ extends v{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==h.ZodParsedType.boolean){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.boolean,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}t.ZodBoolean=$,$.create=e=>new $({typeName:s.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...y(e)});class B extends v{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==h.ZodParsedType.date){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.date,received:t.parsedType}),d.INVALID}if(isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_date}),d.INVALID}let r=new d.ParseStatus;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):h.util.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new B({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:p.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:p.errorUtil.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=B,B.create=e=>new B({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:s.ZodDate,...y(e)});class V extends v{_parse(e){if(this._getType(e)!==h.ZodParsedType.symbol){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.symbol,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}t.ZodSymbol=V,V.create=e=>new V({typeName:s.ZodSymbol,...y(e)});class z extends v{_parse(e){if(this._getType(e)!==h.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.undefined,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}t.ZodUndefined=z,z.create=e=>new z({typeName:s.ZodUndefined,...y(e)});class G extends v{_parse(e){if(this._getType(e)!==h.ZodParsedType.null){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.null,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}t.ZodNull=G,G.create=e=>new G({typeName:s.ZodNull,...y(e)});class H extends v{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,d.OK)(e.data)}}t.ZodAny=H,H.create=e=>new H({typeName:s.ZodAny,...y(e)});class q extends v{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,d.OK)(e.data)}}t.ZodUnknown=q,q.create=e=>new q({typeName:s.ZodUnknown,...y(e)});class K extends v{_parse(e){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.never,received:t.parsedType}),d.INVALID}}t.ZodNever=K,K.create=e=>new K({typeName:s.ZodNever,...y(e)});class Z extends v{_parse(e){if(this._getType(e)!==h.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.void,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}t.ZodVoid=Z,Z.create=e=>new Z({typeName:s.ZodVoid,...y(e)});class Y extends v{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==h.ZodParsedType.array)return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.array,received:t.parsedType}),d.INVALID;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(e||o)&&((0,d.addIssueToContext)(t,{code:e?m.ZodIssueCode.too_big:m.ZodIssueCode.too_small,minimum:o?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&((0,d.addIssueToContext)(t,{code:m.ZodIssueCode.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&((0,d.addIssueToContext)(t,{code:m.ZodIssueCode.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new f(t,e,t.path,r)))).then(e=>d.ParseStatus.mergeArray(r,e));let o=[...t.data].map((e,r)=>n.type._parseSync(new f(t,e,t.path,r)));return d.ParseStatus.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new Y({...this._def,minLength:{value:e,message:p.errorUtil.toString(t)}})}max(e,t){return new Y({...this._def,maxLength:{value:e,message:p.errorUtil.toString(t)}})}length(e,t){return new Y({...this._def,exactLength:{value:e,message:p.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}t.ZodArray=Y,Y.create=(e,t)=>new Y({type:e,minLength:null,maxLength:null,exactLength:null,typeName:s.ZodArray,...y(t)});class J extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=h.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==h.ZodParsedType.object){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.object,received:t.parsedType}),d.INVALID}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof K&&"strip"===this._def.unknownKeys))for(let e in r.data)o.includes(e)||i.push(e);let a=[];for(let e of o){let t=n[e],o=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new f(r,o,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof K){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&((0,d.addIssueToContext)(r,{code:m.ZodIssueCode.unrecognized_keys,keys:i}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new f(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>d.ParseStatus.mergeObjectSync(t,e)):d.ParseStatus.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return p.errorUtil.errToObj,new J({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,o,i,a;let s=null!=(i=null==(o=(n=this._def).errorMap)?void 0:o.call(n,t,r).message)?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(a=p.errorUtil.errToObj(e).message)?a:s}:{message:s}}}:{}})}strip(){return new J({...this._def,unknownKeys:"strip"})}passthrough(){return new J({...this._def,unknownKeys:"passthrough"})}extend(e){return new J({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new J({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:s.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new J({...this._def,catchall:e})}pick(e){let t={};return h.util.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new J({...this._def,shape:()=>t})}omit(e){let t={};return h.util.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new J({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof J){let r={};for(let n in t.shape){let o=t.shape[n];r[n]=eh.create(e(o))}return new J({...t._def,shape:()=>r})}if(t instanceof Y)return new Y({...t._def,type:e(t.element)});if(t instanceof eh)return eh.create(e(t.unwrap()));if(t instanceof em)return em.create(e(t.unwrap()));if(t instanceof et)return et.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return h.util.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new J({...this._def,shape:()=>t})}required(e){let t={};return h.util.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eh;)e=e._def.innerType;t[r]=e}}),new J({...this._def,shape:()=>t})}keyof(){return el(h.util.objectKeys(this.shape))}}t.ZodObject=J,J.create=(e,t)=>new J({shape:()=>e,unknownKeys:"strip",catchall:K.create(),typeName:s.ZodObject,...y(t)}),J.strictCreate=(e,t)=>new J({shape:()=>e,unknownKeys:"strict",catchall:K.create(),typeName:s.ZodObject,...y(t)}),J.lazycreate=(e,t)=>new J({shape:e,unknownKeys:"strip",catchall:K.create(),typeName:s.ZodObject,...y(t)});class W extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new m.ZodError(e.ctx.common.issues));return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_union,unionErrors:r}),d.INVALID});{let e,n=[];for(let o of r){let r={...t,common:{...t.common,issues:[]},parent:null},i=o._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let o=n.map(e=>new m.ZodError(e));return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_union,unionErrors:o}),d.INVALID}}get options(){return this._def.options}}t.ZodUnion=W,W.create=(e,t)=>new W({options:e,typeName:s.ZodUnion,...y(t)});let X=e=>{if(e instanceof ea)return X(e.schema);if(e instanceof ed)return X(e.innerType());if(e instanceof es)return[e.value];if(e instanceof eu)return e.options;if(e instanceof ec)return h.util.objectValues(e.enum);else if(e instanceof ef)return X(e._def.innerType);else if(e instanceof z)return[void 0];else if(e instanceof G)return[null];else if(e instanceof eh)return[void 0,...X(e.unwrap())];else if(e instanceof em)return[null,...X(e.unwrap())];else if(e instanceof ev)return X(e.unwrap());else if(e instanceof e_)return X(e.unwrap());else if(e instanceof eg)return X(e._def.innerType);else return[]};class Q extends v{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.ZodParsedType.object)return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.object,received:t.parsedType}),d.INVALID;let r=this.discriminator,n=t.data[r],o=this.optionsMap.get(n);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):((0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),d.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=X(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of t){if(n.has(o))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,r)}}return new Q({typeName:s.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...y(r)})}}t.ZodDiscriminatedUnion=Q;class ee extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if((0,d.isAborted)(e)||(0,d.isAborted)(n))return d.INVALID;let o=function e(t,r){let n=(0,h.getParsedType)(t),o=(0,h.getParsedType)(r);if(t===r)return{valid:!0,data:t};if(n===h.ZodParsedType.object&&o===h.ZodParsedType.object){let n=h.util.objectKeys(r),o=h.util.objectKeys(t).filter(e=>-1!==n.indexOf(e)),i={...t,...r};for(let n of o){let o=e(t[n],r[n]);if(!o.valid)return{valid:!1};i[n]=o.data}return{valid:!0,data:i}}if(n===h.ZodParsedType.array&&o===h.ZodParsedType.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let o=0;o<t.length;o++){let i=e(t[o],r[o]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}if(n===h.ZodParsedType.date&&o===h.ZodParsedType.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return o.valid?(((0,d.isDirty)(e)||(0,d.isDirty)(n))&&t.dirty(),{status:t.value,value:o.data}):((0,d.addIssueToContext)(r,{code:m.ZodIssueCode.invalid_intersection_types}),d.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}t.ZodIntersection=ee,ee.create=(e,t,r)=>new ee({left:e,right:t,typeName:s.ZodIntersection,...y(r)});class et extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.ZodParsedType.array)return(0,d.addIssueToContext)(r,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.array,received:r.parsedType}),d.INVALID;if(r.data.length<this._def.items.length)return(0,d.addIssueToContext)(r,{code:m.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),d.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,d.addIssueToContext)(r,{code:m.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new f(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>d.ParseStatus.mergeArray(t,e)):d.ParseStatus.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new et({...this._def,rest:e})}}t.ZodTuple=et,et.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new et({items:e,typeName:s.ZodTuple,rest:null,...y(t)})};class er extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.ZodParsedType.object)return(0,d.addIssueToContext)(r,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.object,received:r.parsedType}),d.INVALID;let n=[],o=this._def.keyType,i=this._def.valueType;for(let e in r.data)n.push({key:o._parse(new f(r,e,r.path,e)),value:i._parse(new f(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?d.ParseStatus.mergeObjectAsync(t,n):d.ParseStatus.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new er(t instanceof v?{keyType:e,valueType:t,typeName:s.ZodRecord,...y(r)}:{keyType:j.create(),valueType:e,typeName:s.ZodRecord,...y(t)})}}t.ZodRecord=er;class en extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.ZodParsedType.map)return(0,d.addIssueToContext)(r,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.map,received:r.parsedType}),d.INVALID;let n=this._def.keyType,o=this._def.valueType,i=[...r.data.entries()].map(([e,t],i)=>({key:n._parse(new f(r,e,r.path,[i,"key"])),value:o._parse(new f(r,t,r.path,[i,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of i){let n=await r.key,o=await r.value;if("aborted"===n.status||"aborted"===o.status)return d.INVALID;("dirty"===n.status||"dirty"===o.status)&&t.dirty(),e.set(n.value,o.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of i){let n=r.key,o=r.value;if("aborted"===n.status||"aborted"===o.status)return d.INVALID;("dirty"===n.status||"dirty"===o.status)&&t.dirty(),e.set(n.value,o.value)}return{status:t.value,value:e}}}}t.ZodMap=en,en.create=(e,t,r)=>new en({valueType:t,keyType:e,typeName:s.ZodMap,...y(r)});class eo extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.ZodParsedType.set)return(0,d.addIssueToContext)(r,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.set,received:r.parsedType}),d.INVALID;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&((0,d.addIssueToContext)(r,{code:m.ZodIssueCode.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&((0,d.addIssueToContext)(r,{code:m.ZodIssueCode.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let o=this._def.valueType;function i(e){let r=new Set;for(let n of e){if("aborted"===n.status)return d.INVALID;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let a=[...r.data.values()].map((e,t)=>o._parse(new f(r,e,r.path,t)));return r.common.async?Promise.all(a).then(e=>i(e)):i(a)}min(e,t){return new eo({...this._def,minSize:{value:e,message:p.errorUtil.toString(t)}})}max(e,t){return new eo({...this._def,maxSize:{value:e,message:p.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=eo,eo.create=(e,t)=>new eo({valueType:e,minSize:null,maxSize:null,typeName:s.ZodSet,...y(t)});class ei extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.ZodParsedType.function)return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.function,received:t.parsedType}),d.INVALID;function r(e,r){return(0,d.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,c.getErrorMap)(),c.defaultErrorMap].filter(e=>!!e),issueData:{code:m.ZodIssueCode.invalid_arguments,argumentsError:r}})}function n(e,r){return(0,d.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,c.getErrorMap)(),c.defaultErrorMap].filter(e=>!!e),issueData:{code:m.ZodIssueCode.invalid_return_type,returnTypeError:r}})}let o={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof ep){let e=this;return(0,d.OK)(async function(...t){let a=new m.ZodError([]),s=await e._def.args.parseAsync(t,o).catch(e=>{throw a.addIssue(r(t,e)),a}),l=await Reflect.apply(i,this,s);return await e._def.returns._def.type.parseAsync(l,o).catch(e=>{throw a.addIssue(n(l,e)),a})})}{let e=this;return(0,d.OK)(function(...t){let a=e._def.args.safeParse(t,o);if(!a.success)throw new m.ZodError([r(t,a.error)]);let s=Reflect.apply(i,this,a.data),l=e._def.returns.safeParse(s,o);if(!l.success)throw new m.ZodError([n(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ei({...this._def,args:et.create(e).rest(q.create())})}returns(e){return new ei({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ei({args:e||et.create([]).rest(q.create()),returns:t||q.create(),typeName:s.ZodFunction,...y(r)})}}t.ZodFunction=ei;class ea extends v{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=ea,ea.create=(e,t)=>new ea({getter:e,typeName:s.ZodLazy,...y(t)});class es extends v{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{received:t.data,code:m.ZodIssueCode.invalid_literal,expected:this._def.value}),d.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function el(e,t){return new eu({values:e,typeName:s.ZodEnum,...y(t)})}t.ZodLiteral=es,es.create=(e,t)=>new es({value:e,typeName:s.ZodLiteral,...y(t)});class eu extends v{constructor(){super(...arguments),i.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,d.addIssueToContext)(t,{expected:h.util.joinValues(r),received:t.parsedType,code:m.ZodIssueCode.invalid_type}),d.INVALID}if(l(this,i,"f")||u(this,i,new Set(this._def.values),"f"),!l(this,i,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,d.addIssueToContext)(t,{received:t.data,code:m.ZodIssueCode.invalid_enum_value,options:r}),d.INVALID}return(0,d.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eu.create(e,{...this._def,...t})}exclude(e,t=this._def){return eu.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}t.ZodEnum=eu,i=new WeakMap,eu.create=el;class ec extends v{constructor(){super(...arguments),a.set(this,void 0)}_parse(e){let t=h.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==h.ZodParsedType.string&&r.parsedType!==h.ZodParsedType.number){let e=h.util.objectValues(t);return(0,d.addIssueToContext)(r,{expected:h.util.joinValues(e),received:r.parsedType,code:m.ZodIssueCode.invalid_type}),d.INVALID}if(l(this,a,"f")||u(this,a,new Set(h.util.getValidEnumValues(this._def.values)),"f"),!l(this,a,"f").has(e.data)){let e=h.util.objectValues(t);return(0,d.addIssueToContext)(r,{received:r.data,code:m.ZodIssueCode.invalid_enum_value,options:e}),d.INVALID}return(0,d.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=ec,a=new WeakMap,ec.create=(e,t)=>new ec({values:e,typeName:s.ZodNativeEnum,...y(t)});class ep extends v{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.ZodParsedType.promise&&!1===t.common.async)return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.promise,received:t.parsedType}),d.INVALID;let r=t.parsedType===h.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,d.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}t.ZodPromise=ep,ep.create=(e,t)=>new ep({type:e,typeName:s.ZodPromise,...y(t)});class ed extends v{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===s.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,o={addIssue:e=>{(0,d.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===n.type){let e=n.transform(r.data,o);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return d.INVALID;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?d.INVALID:"dirty"===n.status||"dirty"===t.value?(0,d.DIRTY)(n.value):n});{if("aborted"===t.value)return d.INVALID;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?d.INVALID:"dirty"===n.status||"dirty"===t.value?(0,d.DIRTY)(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,o);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?d.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?d.INVALID:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,d.isValid)(e)?Promise.resolve(n.transform(e.value,o)).then(e=>({status:t.value,value:e})):e);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,d.isValid)(e))return e;let i=n.transform(e.value,o);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}h.util.assertNever(n)}}t.ZodEffects=ed,t.ZodTransformer=ed,ed.create=(e,t,r)=>new ed({schema:e,typeName:s.ZodEffects,effect:t,...y(r)}),ed.createWithPreprocess=(e,t,r)=>new ed({schema:t,effect:{type:"preprocess",transform:e},typeName:s.ZodEffects,...y(r)});class eh extends v{_parse(e){return this._getType(e)===h.ZodParsedType.undefined?(0,d.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=eh,eh.create=(e,t)=>new eh({innerType:e,typeName:s.ZodOptional,...y(t)});class em extends v{_parse(e){return this._getType(e)===h.ZodParsedType.null?(0,d.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=em,em.create=(e,t)=>new em({innerType:e,typeName:s.ZodNullable,...y(t)});class ef extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===h.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=ef,ef.create=(e,t)=>new ef({innerType:e,typeName:s.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...y(t)});class eg extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,d.isAsync)(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new m.ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new m.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=eg,eg.create=(e,t)=>new eg({innerType:e,typeName:s.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...y(t)});class ey extends v{_parse(e){if(this._getType(e)!==h.ZodParsedType.nan){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:m.ZodIssueCode.invalid_type,expected:h.ZodParsedType.nan,received:t.parsedType}),d.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=ey,ey.create=e=>new ey({typeName:s.ZodNaN,...y(e)}),t.BRAND=Symbol("zod_brand");class ev extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=ev;class eb extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?d.INVALID:"dirty"===e.status?(t.dirty(),(0,d.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?d.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eb({in:e,out:t,typeName:s.ZodPipeline})}}t.ZodPipeline=eb;class e_ extends v{_parse(e){let t=this._def.innerType._parse(e),r=e=>((0,d.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,d.isAsync)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eE(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eS(e,t={},r){return e?H.create().superRefine((n,o)=>{var i,a;let s=e(n);if(s instanceof Promise)return s.then(e=>{var i,a;if(!e){let e=eE(t,n),s=null==(a=null!=(i=e.fatal)?i:r)||a;o.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=eE(t,n),s=null==(a=null!=(i=e.fatal)?i:r)||a;o.addIssue({code:"custom",...e,fatal:s})}}):H.create()}t.ZodReadonly=e_,e_.create=(e,t)=>new e_({innerType:e,typeName:s.ZodReadonly,...y(t)}),t.custom=eS,t.late={object:J.lazycreate},(o=s||(t.ZodFirstPartyTypeKind=s={})).ZodString="ZodString",o.ZodNumber="ZodNumber",o.ZodNaN="ZodNaN",o.ZodBigInt="ZodBigInt",o.ZodBoolean="ZodBoolean",o.ZodDate="ZodDate",o.ZodSymbol="ZodSymbol",o.ZodUndefined="ZodUndefined",o.ZodNull="ZodNull",o.ZodAny="ZodAny",o.ZodUnknown="ZodUnknown",o.ZodNever="ZodNever",o.ZodVoid="ZodVoid",o.ZodArray="ZodArray",o.ZodObject="ZodObject",o.ZodUnion="ZodUnion",o.ZodDiscriminatedUnion="ZodDiscriminatedUnion",o.ZodIntersection="ZodIntersection",o.ZodTuple="ZodTuple",o.ZodRecord="ZodRecord",o.ZodMap="ZodMap",o.ZodSet="ZodSet",o.ZodFunction="ZodFunction",o.ZodLazy="ZodLazy",o.ZodLiteral="ZodLiteral",o.ZodEnum="ZodEnum",o.ZodEffects="ZodEffects",o.ZodNativeEnum="ZodNativeEnum",o.ZodOptional="ZodOptional",o.ZodNullable="ZodNullable",o.ZodDefault="ZodDefault",o.ZodCatch="ZodCatch",o.ZodPromise="ZodPromise",o.ZodBranded="ZodBranded",o.ZodPipeline="ZodPipeline",o.ZodReadonly="ZodReadonly",t.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>eS(t=>t instanceof e,t);let ex=j.create;t.string=ex;let ew=U.create;t.number=ew,t.nan=ey.create,t.bigint=F.create;let eT=$.create;t.boolean=eT,t.date=B.create,t.symbol=V.create,t.undefined=z.create,t.null=G.create,t.any=H.create,t.unknown=q.create,t.never=K.create,t.void=Z.create,t.array=Y.create,t.object=J.create,t.strictObject=J.strictCreate,t.union=W.create,t.discriminatedUnion=Q.create,t.intersection=ee.create,t.tuple=et.create,t.record=er.create,t.map=en.create,t.set=eo.create,t.function=ei.create,t.lazy=ea.create,t.literal=es.create,t.enum=eu.create,t.nativeEnum=ec.create,t.promise=ep.create;let eA=ed.create;t.effect=eA,t.transformer=eA,t.optional=eh.create,t.nullable=em.create,t.preprocess=ed.createWithPreprocess,t.pipeline=eb.create,t.ostring=()=>ex().optional(),t.onumber=()=>ew().optional(),t.oboolean=()=>eT().optional(),t.coerce={string:e=>j.create({...e,coerce:!0}),number:e=>U.create({...e,coerce:!0}),boolean:e=>$.create({...e,coerce:!0}),bigint:e=>F.create({...e,coerce:!0}),date:e=>B.create({...e,coerce:!0})},t.NEVER=d.INVALID},81630:e=>{"use strict";e.exports=require("http")},82038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(58592),i=r(66834);t.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,n.str)`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>(0,n._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:a,it:s}=e,l="maxLength"===t?n.operators.GT:n.operators.LT,u=!1===s.opts.unicode?(0,n._)`${r}.length`:(0,n._)`${(0,o.useFunc)(e.gen,i.default)}(${r})`;e.fail$data((0,n._)`${u} ${l} ${a}`)}}},82136:(e,t,r)=>{"use strict";r.d(t,{FU:()=>i,M1:()=>o,Zf:()=>a});var n=(0,r(13944).n)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function o(e){return e.setValue(n,!0)}function i(e){return e.deleteValue(n)}function a(e){return!0===e.getValue(n)}},82682:(e,t,r)=>{"use strict";let n=r(33877);e.exports=(e,t,r)=>0>=n(e,t,r)},82753:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GenerateResponse:()=>p}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(72448),u=r(87963),c=r(68073);class p{message;finishReason;finishMessage;usage;custom;raw;request;operation;model;parser;constructor(e,t){let r=e.message||e.candidates?.[0]?.message;r&&(this.message=new c.Message(r,{parser:t?.parser})),this.finishReason=e.finishReason||e.candidates?.[0]?.finishReason,this.finishMessage=e.finishMessage||e.candidates?.[0]?.finishMessage,this.usage=e.usage||{},this.custom=e.custom||{},this.raw=e.raw||this.custom,this.request=t?.request,this.operation=e?.operation}assertValid(){if("blocked"===this.finishReason)throw new u.GenerationBlockedError(this,`Generation blocked${this.finishMessage?`: ${this.finishMessage}`:"."}`);if(!this.message&&!this.operation)throw new u.GenerationResponseError(this,`Model did not generate a message. Finish reason: '${this.finishReason}': ${this.finishMessage}`)}assertValidSchema(e){if(e?.output?.schema||this.request?.output?.schema){let t=this.output;(0,l.parseSchema)(t,{jsonSchema:e?.output?.schema||this.request?.output?.schema})}}isValid(e){try{return this.assertValid(),this.assertValidSchema(e),!0}catch(e){return!1}}get output(){return this.message?.output||null}get text(){return this.message?.text||""}get reasoning(){return this.message?.reasoning||""}get media(){return this.message?.media||null}get data(){return this.message?.data||null}get toolRequests(){return this.message?.toolRequests||[]}get interrupts(){return this.message?.interrupts||[]}get messages(){if(!this.request)throw Error("Can't construct history for response without request reference.");if(!this.message)throw Error("Can't construct history for response without generated message.");return[...this.request?.messages,this.message.toJSON()]}toJSON(){let e={message:this.message?.toJSON(),finishReason:this.finishReason,finishMessage:this.finishMessage,usage:this.usage,custom:this.custom.toJSON?.()||this.custom,request:this.request,operation:this.operation};return e.finishMessage||delete e.finishMessage,e.request||delete e.request,e.operation||delete e.operation,e}}},82804:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{EmbedderInfoSchema:()=>l.EmbedderInfoSchema,embedderRef:()=>l.embedderRef}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(15624)},82984:(e,t,r)=>{"use strict";var n=r(12330),o=r(99122),i=r(42856),a=r(95900),s=r(20923),l=r(84146);let u={composeNode:c,composeEmptyNode:p};function c(e,t,r,l){let c,d=e.atKey,{spaceBefore:h,comment:m,anchor:f,tag:g}=r,y=!0;switch(t.type){case"alias":c=function({options:e},{offset:t,source:r,end:o},i){let a=new n.Alias(r.substring(1));""===a.source&&i(t,"BAD_ALIAS","Alias cannot be an empty string"),a.source.endsWith(":")&&i(t+r.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let l=t+r.length,u=s.resolveEnd(o,l,e.strict,i);return a.range=[t,l,u.offset],u.comment&&(a.comment=u.comment),a}(e,t,l),(f||g)&&l(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=a.composeScalar(e,t,g,l),f&&(c.anchor=f.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=i.composeCollection(u,e,t,r,l),f&&(c.anchor=f.source.substring(1));break;default:{let n="error"===t.type?t.message:`Unsupported token (type: ${t.type})`;l(t,"UNEXPECTED_TOKEN",n),c=p(e,t.offset,void 0,null,r,l),y=!1}}return f&&""===c.anchor&&l(f,"BAD_ALIAS","Anchor cannot be an empty string"),d&&e.options.stringKeys&&(!o.isScalar(c)||"string"!=typeof c.value||c.tag&&"tag:yaml.org,2002:str"!==c.tag)&&l(g??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),h&&(c.spaceBefore=!0),m&&("scalar"===t.type&&""===t.source?c.comment=m:c.commentBefore=m),e.options.keepSourceTokens&&y&&(c.srcToken=t),c}function p(e,t,r,n,{spaceBefore:o,comment:i,anchor:s,tag:u,end:c},p){let d={type:"scalar",offset:l.emptyScalarPosition(t,r,n),indent:-1,source:""},h=a.composeScalar(e,d,u,p);return s&&(h.anchor=s.source.substring(1),""===h.anchor&&p(s,"BAD_ALIAS","Anchor cannot be an empty string")),o&&(h.spaceBefore=!0),i&&(h.comment=i,h.range[2]=c),h}t.composeEmptyNode=p,t.composeNode=c},83455:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e},l=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),u={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(u,{GENKIT_CLIENT_HEADER:()=>v,GENKIT_REFLECTION_API_SPEC_VERSION:()=>b,GENKIT_VERSION:()=>y,GenkitError:()=>m.GenkitError,OperationSchema:()=>d.OperationSchema,UnstableApiError:()=>m.UnstableApiError,UserFacingError:()=>m.UserFacingError,apiKey:()=>h.apiKey,assertUnstable:()=>m.assertUnstable,defineBackgroundAction:()=>d.defineBackgroundAction,defineFlow:()=>f.defineFlow,defineJsonSchema:()=>g.defineJsonSchema,defineSchema:()=>g.defineSchema,getCallableJSON:()=>m.getCallableJSON,getContext:()=>h.getContext,getHttpStatus:()=>m.getHttpStatus,run:()=>f.run,runWithContext:()=>h.runWithContext,z:()=>p.z}),e.exports=s(n({},"__esModule",{value:!0}),u);var c=r(76423),p=r(47649);l(u,r(88581),e.exports);var d=r(87334),h=r(73816),m=r(27633),f=r(31179);l(u,r(68360),e.exports),l(u,r(11346),e.exports);var g=r(72448);l(u,r(41479),e.exports),l(u,r(79882),e.exports);let y=c.version,v=`genkit-node/${y} gl-node/${process.versions.node}`,b=1},84146:(e,t)=>{"use strict";t.emptyScalarPosition=function(e,t,r){if(t){r??(r=t.length);for(let n=r-1;n>=0;--n){let r=t[n];switch(r.type){case"space":case"comment":case"newline":e-=r.source.length;continue}for(r=t[++n];r?.type==="space";)e+=r.source.length,r=t[++n];break}}return e}},84297:e=>{"use strict";e.exports=require("async_hooks")},84450:(e,t,r)=>{"use strict";let n=r(73438),o=r(27290),i=r(42699),a=r(44156),s=r(40720),l=r(82682);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return o(e,r,u);case">":return i(e,r,u);case">=":return a(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw TypeError(`Invalid operator: ${t}`)}}},84681:(e,t,r)=>{"use strict";let n=r(94735),o=r(20068),i=r(16435),a=r(91292),s=r(21940),l=r(49074);class u extends n{constructor(e){let t;super(),"string"==typeof(e=e||{})&&(e={url:e});let r=e.service;"function"==typeof e.getSocket&&(this.getSocket=e.getSocket),e.url&&(t=a.parseConnectionUrl(e.url),r=r||t.service),this.options=a.assign(!1,e,t,r&&i(r)),this.logger=a.getLogger(this.options,{component:this.options.component||"smtp-transport"});let n=new o(this.options);this.name="SMTP",this.version=l.version+"[client:"+n.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(e,t){return setImmediate(()=>t(null,!1))}getAuth(e){if(!e)return this.auth;let t=!1,r={};if(this.options.auth&&"object"==typeof this.options.auth&&Object.keys(this.options.auth).forEach(e=>{t=!0,r[e]=this.options.auth[e]}),e&&"object"==typeof e&&Object.keys(e).forEach(n=>{t=!0,r[n]=e[n]}),!t)return!1;if("OAUTH2"!==(r.type||"").toString().toUpperCase())return{type:(r.type||"").toString().toUpperCase()||"LOGIN",user:r.user,credentials:{user:r.user||"",pass:r.pass,options:r.options},method:(r.method||"").trim().toUpperCase()||this.options.authMethod||!1};{if(!r.service&&!r.user)return!1;let e=new s(r,this.logger);return e.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||e.provisionCallback,e.on("token",e=>this.mailer.emit("token",e)),e.on("error",e=>this.emit("error",e)),{type:"OAUTH2",user:r.user,oauth2:e,method:"XOAUTH2"}}}send(e,t){this.getSocket(this.options,(r,n)=>{if(r)return t(r);let i=!1,s=this.options;n&&n.connection&&(this.logger.info({tnx:"proxy",remoteAddress:n.connection.remoteAddress,remotePort:n.connection.remotePort,destHost:s.host||"",destPort:s.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",n.connection.remoteAddress,n.connection.remotePort,s.host||"",s.port||""),s=a.assign(!1,s),Object.keys(n).forEach(e=>{s[e]=n[e]}));let l=new o(s);l.once("error",e=>{if(!i)return i=!0,l.close(),t(e)}),l.once("end",()=>{if(i)return;let e=setTimeout(()=>{if(i)return;i=!0;let e=Error("Unexpected socket close");l&&l._socket&&l._socket.upgrading&&(e.code="ETLS"),t(e)},1e3);try{e.unref()}catch(e){}});let u=()=>{let r=e.message.getEnvelope(),n=e.message.messageId(),o=[].concat(r.to||[]);o.length>3&&o.push("...and "+o.splice(2).length+" more"),e.data.dsn&&(r.dsn=e.data.dsn),this.logger.info({tnx:"send",messageId:n},"Sending message %s to <%s>",n,o.join(", ")),l.send(r,e.message.createReadStream(),(e,o)=>{if(i=!0,l.close(),e)return this.logger.error({err:e,tnx:"send"},"Send error for %s: %s",n,e.message),t(e);o.envelope={from:r.from,to:r.to},o.messageId=n;try{return t(null,o)}catch(e){this.logger.error({err:e,tnx:"callback"},"Callback error for %s: %s",n,e.message)}})};l.connect(()=>{if(i)return;let r=this.getAuth(e.data.auth);r&&(l.allowsAuth||s.forceAuth)?l.login(r,e=>{if(r&&r!==this.auth&&r.oauth2&&r.oauth2.removeAllListeners(),!i){if(e)return i=!0,l.close(),t(e);u()}}):u()})})}verify(e){let t;return e||(t=new Promise((t,r)=>{e=a.callbackPromise(t,r)})),this.getSocket(this.options,(t,r)=>{if(t)return e(t);let n=this.options;r&&r.connection&&(this.logger.info({tnx:"proxy",remoteAddress:r.connection.remoteAddress,remotePort:r.connection.remotePort,destHost:n.host||"",destPort:n.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",r.connection.remoteAddress,r.connection.remotePort,n.host||"",n.port||""),n=a.assign(!1,n),Object.keys(r).forEach(e=>{n[e]=r[e]}));let i=new o(n),s=!1;i.once("error",t=>{if(!s)return s=!0,i.close(),e(t)}),i.once("end",()=>{if(!s)return s=!0,e(Error("Connection closed"))});let l=()=>{if(!s)return s=!0,i.quit(),e(null,!0)};i.connect(()=>{if(s)return;let t=this.getAuth({});if(t&&(i.allowsAuth||n.forceAuth))i.login(t,t=>{if(!s){if(t)return s=!0,i.close(),e(t);l()}});else if(!t&&i.allowsAuth&&n.forceAuth){let t=Error("Authentication info was not provided");return t.code="NoAuth",s=!0,i.close(),e(t)}else l()})}),t}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}}e.exports=u},85029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{OTLPTraceExporter:()=>h});var n=r(34392),o=r(28038),i=r(36646),a=r(59524),s=r(62872),l=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c="v1/traces",p="http://localhost:4318/"+c,d={"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.52.1"},h=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t,s.U1,"application/json")||this;return r.headers=u(u(u(u({},r.headers),d),n.parseKeyPairsIntoRecord((0,o._)().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),(0,i.QG)(null==t?void 0:t.headers)),r}return l(t,e),t.prototype.getDefaultUrl=function(e){return"string"==typeof e.url?e.url:(0,o._)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,i.u3)((0,o._)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,o._)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,i.Ir)((0,o._)().OTEL_EXPORTER_OTLP_ENDPOINT,c):p},t}(a.u)},85094:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})},c=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},p={};u(p,{Dotprompt:()=>j,PicoschemaParser:()=>L,picoschema:()=>R}),e.exports=c(o({},"__esModule",{value:!0}),p);var d=((e,t,r)=>(r=null!=e?n(s(e)):{},c(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(r(92436)),h={};u(h,{history:()=>y,ifEquals:()=>_,json:()=>f,media:()=>b,role:()=>g,section:()=>v,unlessEquals:()=>E});var m=r(92436);function f(e,t){return new m.SafeString(JSON.stringify(e,null,t.hash.indent||0))}function g(e){return new m.SafeString(`<<<dotprompt:role:${e}>>>`)}function y(){return new m.SafeString("<<<dotprompt:history>>>")}function v(e){return new m.SafeString(`<<<dotprompt:section ${e}>>>`)}function b(e){return new m.SafeString(`<<<dotprompt:media:url ${e.hash.url}${e.hash.contentType?` ${e.hash.contentType}`:""}>>>`)}function _(e,t,r){return e===t?r.fn(this):r.inverse(this)}function E(e,t,r){return e!==t?r.fn(this):r.inverse(this)}var S=r(86100),x="<<<dotprompt:role:",w="<<<dotprompt:media:",T="<<<dotprompt:section",A=/^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/,O=/(<<<dotprompt:(?:role:[a-z]+|history))>>>/g,N=/(<<<dotprompt:(?:media:url|section).*?)>>>/g,P=["config","description","ext","input","model","name","output","raw","toolDefs","tools","variant","version"],C={ext:{},metadata:{},config:{}};function k(e,t){return e.split(t).filter(e=>""!==e.trim())}function I(e){return e.startsWith(w)?function(e){if(!e.startsWith(w))throw Error("Invalid media piece");let[t,r,n]=e.split(" "),o={media:{url:r}};return n&&(o.media.contentType=n),o}(e):e.startsWith(T)?function(e){if(!e.startsWith(T))throw Error("Invalid section piece");let[t,r]=e.split(" ");return{metadata:{purpose:r,pending:!0}}}(e):{text:e}}var D=["string","boolean","null","number","integer","any"];async function R(e,t){return new L(t).parse(e)}var L=class{schemaResolver;constructor(e){this.schemaResolver=e?.schemaResolver}async mustResolveSchema(e){if(!this.schemaResolver)throw Error(`Picoschema: unsupported scalar type '${e}'.`);let t=await this.schemaResolver(e);if(!t)throw Error(`Picoschema: could not find schema with name '${e}'`);return t}async parse(e){if(!e)return null;if("string"==typeof e){let[t,r]=M(e);if(D.includes(t)){let e={type:t};return r&&(e={...e,description:r}),e}let n=await this.mustResolveSchema(t);return r?{...n,description:r}:n}return[...D,"object","array"].includes(e?.type)?e:"object"==typeof e?.properties?{...e,type:"object"}:this.parsePico(e)}async parsePico(e,t=[]){if("string"==typeof e){let[t,r]=M(e);if(!D.includes(t)){let e=await this.mustResolveSchema(t);return r&&(e={...e,description:r}),e}return"any"===t?r?{description:r}:{}:r?{type:t,description:r}:{type:t}}if("object"!=typeof e)throw Error("Picoschema: only consists of objects and strings. Got: "+JSON.stringify(e));let r={type:"object",properties:{},required:[],additionalProperties:!1};for(let n in e){if("(*)"===n){r.additionalProperties=await this.parsePico(e[n],[...t,n]);continue}let[o,i]=n.split("("),a=o.endsWith("?"),s=a?o.slice(0,-1):o;if(a||r.required.push(s),!i){let o={...await this.parsePico(e[n],[...t,n])};a&&"string"==typeof o.type&&(o.type=[o.type,"null"]),r.properties[s]=o;continue}let[l,u]=M(i.substring(0,i.length-1));if("array"===l)r.properties[s]={type:a?["array","null"]:"array",items:await this.parsePico(e[n],[...t,n])};else if("object"===l){let o=await this.parsePico(e[n],[...t,n]);a&&(o.type=[o.type,"null"]),r.properties[s]=o}else if("enum"===l){let t={enum:e[n]};a&&!t.enum.includes(null)&&t.enum.push(null),r.properties[s]=t}else throw Error("Picoschema: parenthetical types must be 'object' or 'array', got: "+l);u&&(r.properties[s].description=u)}return r.required.length||delete r.required,r}};function M(e){if(!e.includes(","))return[e,null];let t=e.match(/(.*?), *(.*)$/);return[t[1],t[2]]}var j=class{handlebars;knownHelpers={};defaultModel;modelConfigs={};tools={};toolResolver;schemas={};schemaResolver;partialResolver;store;constructor(e){for(let t in this.handlebars=d.noConflict(),this.modelConfigs=e?.modelConfigs||this.modelConfigs,this.defaultModel=e?.defaultModel,this.tools=e?.tools||{},this.toolResolver=e?.toolResolver,this.schemas=e?.schemas||{},this.schemaResolver=e?.schemaResolver,this.partialResolver=e?.partialResolver,h)this.defineHelper(t,h[t]),this.handlebars.registerHelper(t,h[t]);if(e?.helpers)for(let t in e.helpers)this.defineHelper(t,e.helpers[t]);if(e?.partials)for(let t in e.partials)this.definePartial(t,e.partials[t])}defineHelper(e,t){return this.handlebars.registerHelper(e,t),this.knownHelpers[e]=!0,this}definePartial(e,t){return this.handlebars.registerPartial(e,t),this}defineTool(e){return this.tools[e.name]=e,this}parse(e){let{frontmatter:t,body:r}=function(e){let t=e.match(A);if(t){let[,e,r]=t;return{frontmatter:e,body:r}}return{frontmatter:"",body:""}}(e);if(t)try{let e={...(0,S.parse)(t)},n={...C},o={};for(let t in e)P.includes(t)?n[t]=e[t]:t.includes(".")&&function(e,t,r={}){let n=r||{},o=e.lastIndexOf("."),i=e.substring(0,o),a=e.substring(o+1);n[i]=n[i]||{},n[i][a]=t}(t,e[t],o);return{...n,raw:e,ext:o,template:r.trim()}}catch(t){return console.error("Dotprompt: Error parsing YAML frontmatter:",t),{...C,template:e.trim()}}return{...C,template:e}}async render(e,t={},r){return(await this.compile(e))(t,r)}async renderPicoschema(e){if(!e.output?.schema&&!e.input?.schema)return e;let t={...e};return e.input?.schema&&(t.input={...e.input,schema:await R(e.input.schema,{schemaResolver:this.wrappedSchemaResolver.bind(this)})}),e.output?.schema&&(t.output={...e.output,schema:await R(e.output.schema,{schemaResolver:this.wrappedSchemaResolver.bind(this)})}),t}async wrappedSchemaResolver(e){return this.schemas[e]?this.schemas[e]:this.schemaResolver?await this.schemaResolver(e):null}async resolveMetadata(e,...t){let r={...e};for(let e=0;e<t.length;e++){if(!t[e])continue;let n=r.config||{};(r={...r,...t[e]}).config={...n,...t[e]?.config||{}}}let{template:n,...o}=r;return r=function e(t){if(null===t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(t=>e(t));let r={};for(let[n,o]of Object.entries(t))void 0!==o&&(r[n]=e(o));return r}(r=o),r=await this.resolveTools(r),r=await this.renderPicoschema(r)}async resolveTools(e){let t={...e};if(t.tools){let e=[];t.toolDefs=t.toolDefs||[],await Promise.all(t.tools.map(async r=>{if(this.tools[r])t.toolDefs&&t.toolDefs.push(this.tools[r]);else if(this.toolResolver){let e=await this.toolResolver(r);if(!e)throw Error(`Dotprompt: Unable to resolve tool '${r}' to a recognized tool definition.`);t.toolDefs&&t.toolDefs.push(e)}else e.push(r)})),t.tools=e}return t}identifyPartials(e){let t=this.handlebars.parse(e),r=new Set;return new class extends this.handlebars.Visitor{PartialStatement(e){e&&"object"==typeof e&&"name"in e&&e.name&&"object"==typeof e.name&&"original"in e.name&&"string"==typeof e.name.original&&r.add(e.name.original)}}().accept(t),r}async resolvePartials(e){if(!this.partialResolver&&!this.store)return;let t=this.identifyPartials(e);await Promise.all(Array.from(t).map(async e=>{if(!this.handlebars.partials[e]){let t=null;if(this.partialResolver&&(t=await this.partialResolver(e)),!t&&this.store){let r=await this.store.loadPartial(e);t=r?.source}t&&(this.definePartial(e,t),await this.resolvePartials(t))}}))}async compile(e,t){let r;r="string"==typeof e?this.parse(e):e,t&&(r={...r,...t}),await this.resolvePartials(r.template);let n=this.handlebars.compile(r.template,{knownHelpers:this.knownHelpers,knownHelpersOnly:!0,noEscape:!0}),o=async(e,t)=>{let{input:o,...i}=await this.renderMetadata(r),a=n({...t?.input?.default||{},...e.input},{data:{metadata:{prompt:i,docs:e.docs,messages:e.messages},...e.context||{}}});return{...i,messages:function(e,t){let r={role:"user",source:""},n=[r];for(let o of k(e,O))if(o.startsWith(x)){let e=o.substring(x.length);r.source?.trim()?(r={role:e,source:""},n.push(r)):r.role=e}else if(o.startsWith("<<<dotprompt:history")){let e=(t?.messages??[]).map(e=>({...e,metadata:{...e.metadata,purpose:"history"}}));e&&n.push(...e),r={role:"model",source:""},n.push(r)}else r.source+=o;return function(e,t=[]){if(!t||e.some(e=>e.metadata?.purpose==="history"))return e;if(0===e.length)return t;let r=e.at(-1);return r?.role==="user"?[...e.slice(0,-1),...t,r]:[...e,...t]}(n.filter(e=>e.content||e.source).map(e=>{let t={role:e.role,content:e.content||k(e.source||"",N).map(I)};return e.metadata&&(t.metadata=e.metadata),t}),t?.messages)}(a,e)}};return o.prompt=r,o}async renderMetadata(e,t){let r,n;r="string"==typeof e?this.parse(e):e;let o=t?.model||r.model||this.defaultModel;return o&&this.modelConfigs[o]&&(n=this.modelConfigs[o]),this.resolveMetadata(n?{config:n}:{},r,t)}}},85635:(e,t,r)=>{"use strict";e.exports=r(72111)},85642:(e,t,r)=>{"use strict";var n,o,i,a,s,l,u,c,p,d=r(29021);class h extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class m extends h{constructor(e,t,r,n){super(e),this.status=t,this.statusText=r,this.errorDetails=n}}class f extends h{}class g extends h{}let y="https://generativelanguage.googleapis.com",v="v1beta";async function b(e,t,r=fetch){let n;try{n=await r(e,t)}catch(r){var o=r,i=e;let t=o;throw"AbortError"===t.name?(t=new g(`Request aborted when fetching ${i.toString()}: ${o.message}`)).stack=o.stack:o instanceof m||o instanceof f||((t=new h(`Error fetching from ${i.toString()}: ${o.message}`)).stack=o.stack),t}return n.ok||await _(n,e),n}async function _(e,t){let r,n="";try{let t=await e.json();n=t.error.message,t.error.details&&(n+=` ${JSON.stringify(t.error.details)}`,r=t.error.details)}catch(e){}throw new m(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,r)}!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(n||(n={})),!function(e){e.UPLOAD="upload",e.LIST="list",e.GET="get",e.DELETE="delete",e.UPDATE="update",e.CREATE="create"}(o||(o={}));let E={[o.UPLOAD]:"POST",[o.LIST]:"GET",[o.GET]:"GET",[o.DELETE]:"DELETE",[o.UPDATE]:"PATCH",[o.CREATE]:"POST"};class S{constructor(e,t,r){this.task=e,this.apiKey=t,this.requestOptions=r}appendPath(e){this._url.pathname=this._url.pathname+`/${e}`}appendParam(e,t){this._url.searchParams.append(e,t)}toString(){return this._url.toString()}}class x extends S{constructor(e,t,r){var n,o;super(e,t,r),this.task=e,this.apiKey=t,this.requestOptions=r;let i=(null==(n=this.requestOptions)?void 0:n.apiVersion)||v,a=(null==(o=this.requestOptions)?void 0:o.baseUrl)||y;a+=`/${i}/cachedContents`,this._url=new URL(a)}}class w extends S{constructor(e,t,r){var n,i;super(e,t,r),this.task=e,this.apiKey=t,this.requestOptions=r;let a=(null==(n=this.requestOptions)?void 0:n.apiVersion)||v,s=(null==(i=this.requestOptions)?void 0:i.baseUrl)||y;this.task===o.UPLOAD&&(s+="/upload"),s+=`/${a}/files`,this._url=new URL(s)}}function T(e){var t;let r=new Headers;r.append("x-goog-api-client",function(e){let t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.24.1"),t.join(" ")}(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=null==(t=e.requestOptions)?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(e){throw new f(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${e.message}`)}for(let[e,t]of n.entries()){if("x-goog-api-key"===e)throw new f(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new f(`Header name ${e} can only be set using the apiClient field`);r.append(e,t)}}return r}async function A(e,t,r,n=fetch){let o={method:E[e.task],headers:t};r&&(o.body=r);let i=function(e){if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let t=new AbortController;return(null==e?void 0:e.timeout)>=0&&setTimeout(()=>t.abort(),e.timeout),e.signal&&e.signal.addEventListener("abort",()=>{t.abort()}),t.signal}}(e.requestOptions);return i&&(o.signal=i),b(e.toString(),o,n)}class O{constructor(e,t={}){this.apiKey=e,this._requestOptions=t}async uploadFile(e,t){let r=e instanceof Buffer?e:d.readFileSync(e),n=new w(o.UPLOAD,this.apiKey,this._requestOptions),i=T(n),a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();i.append("X-Goog-Upload-Protocol","multipart"),i.append("Content-Type",`multipart/related; boundary=${a}`);let s=new Blob(["--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+JSON.stringify({file:function(e){if(!e.mimeType)throw new f("Must provide a mimeType.");let t={mimeType:e.mimeType,displayName:e.displayName};return e.name&&(t.name=e.name.includes("/")?e.name:`files/${e.name}`),t}(t)})+"\r\n--"+a+"\r\nContent-Type: "+t.mimeType+"\r\n\r\n",r,"\r\n--"+a+"--"]);return(await A(n,i,s)).json()}async listFiles(e,t={}){let r=Object.assign(Object.assign({},this._requestOptions),t),n=new w(o.LIST,this.apiKey,r);(null==e?void 0:e.pageSize)&&n.appendParam("pageSize",e.pageSize.toString()),(null==e?void 0:e.pageToken)&&n.appendParam("pageToken",e.pageToken);let i=T(n);return(await A(n,i)).json()}async getFile(e,t={}){let r=Object.assign(Object.assign({},this._requestOptions),t),n=new w(o.GET,this.apiKey,r);n.appendPath(N(e));let i=T(n);return(await A(n,i)).json()}async deleteFile(e){let t=new w(o.DELETE,this.apiKey,this._requestOptions);t.appendPath(N(e));let r=T(t);await A(t,r)}}function N(e){if(e.startsWith("files/"))return e.split("files/")[1];if(!e)throw new h(`Invalid fileId ${e}. Must be in the format "files/filename" or "filename"`);return e}class P{constructor(e,t){this.apiKey=e,this._requestOptions=t}async create(e){let t=Object.assign({},e);if(e.ttlSeconds){if(e.expireTime)throw new f("You cannot specify both `ttlSeconds` and `expireTime` when creating a content cache. You must choose one.");t.ttl=e.ttlSeconds.toString()+"s",delete t.ttlSeconds}if(e.systemInstruction&&(t.systemInstruction=function(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)if(!e.role)return{role:"system",parts:e.parts};else return e}}(e.systemInstruction)),!t.model)throw new f("Cached content must contain a `model` field.");t.model.includes("/")||(t.model=`models/${t.model}`);let r=new x(o.CREATE,this.apiKey,this._requestOptions),n=T(r);return(await A(r,n,JSON.stringify(t))).json()}async list(e){let t=new x(o.LIST,this.apiKey,this._requestOptions);(null==e?void 0:e.pageSize)&&t.appendParam("pageSize",e.pageSize.toString()),(null==e?void 0:e.pageToken)&&t.appendParam("pageToken",e.pageToken);let r=T(t);return(await A(t,r)).json()}async get(e){let t=new x(o.GET,this.apiKey,this._requestOptions);t.appendPath(C(e));let r=T(t);return(await A(t,r)).json()}async update(e,t){let r=new x(o.UPDATE,this.apiKey,this._requestOptions);r.appendPath(C(e));let n=T(r),i=Object.assign({},t.cachedContent);return t.cachedContent.ttlSeconds&&(i.ttl=t.cachedContent.ttlSeconds.toString()+"s",delete i.ttlSeconds),t.updateMask&&r.appendParam("update_mask",t.updateMask.map(e=>e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)).join(",")),(await A(r,n,JSON.stringify(i))).json()}async delete(e){let t=new x(o.DELETE,this.apiKey,this._requestOptions);t.appendPath(C(e));let r=T(t);await A(t,r)}}function C(e){if(e.startsWith("cachedContents/"))return e.split("cachedContents/")[1];if(!e)throw new h(`Invalid name ${e}. Must be in the format "cachedContents/name" or "name"`);return e}t.FileState=void 0,function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"}(t.FileState||(t.FileState={})),t.SchemaType=void 0,function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(t.SchemaType||(t.SchemaType={})),t.ExecutableCodeLanguage=void 0,function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(t.ExecutableCodeLanguage||(t.ExecutableCodeLanguage={})),t.Outcome=void 0,function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(t.Outcome||(t.Outcome={})),function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(i||(i={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(a||(a={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(s||(s={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(l||(l={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"}(u||(u={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(c||(c={})),t.FunctionCallingMode=void 0,function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(t.FunctionCallingMode||(t.FunctionCallingMode={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(p||(p={})),t.GoogleAICacheManager=P,t.GoogleAIFileManager=O},85788:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResourceDetectorsFromEnv=void 0;let n=r(18617),o=r(23226);t.getResourceDetectorsFromEnv=function(){var e,t;let r=new Map([["env",o.envDetectorSync],["host",o.hostDetectorSync],["os",o.osDetectorSync],["serviceinstance",o.serviceInstanceIdDetectorSync],["process",o.processDetectorSync]]),i=null!=(t=null==(e=process.env.OTEL_NODE_RESOURCE_DETECTORS)?void 0:e.split(","))?t:["all"];return i.includes("all")?[...r.values()].flat():i.includes("none")?[]:i.flatMap(e=>{let t=r.get(e);return t||n.diag.error(`Invalid resource detector "${e}" specified in the environment variable OTEL_NODE_RESOURCE_DETECTORS`),t||[]})}},86100:(e,t,r)=>{"use strict";var n=r(9269),o=r(89900),i=r(22451),a=r(75853),s=r(12330),l=r(99122),u=r(29240),c=r(46076),p=r(36813),d=r(86104),h=r(97770),m=r(24102),f=r(16257),g=r(38477),y=r(35134),v=r(63715);t.Composer=n.Composer,t.Document=o.Document,t.Schema=i.Schema,t.YAMLError=a.YAMLError,t.YAMLParseError=a.YAMLParseError,t.YAMLWarning=a.YAMLWarning,t.Alias=s.Alias,t.isAlias=l.isAlias,t.isCollection=l.isCollection,t.isDocument=l.isDocument,t.isMap=l.isMap,t.isNode=l.isNode,t.isPair=l.isPair,t.isScalar=l.isScalar,t.isSeq=l.isSeq,t.Pair=u.Pair,t.Scalar=c.Scalar,t.YAMLMap=p.YAMLMap,t.YAMLSeq=d.YAMLSeq,t.CST=h,t.Lexer=m.Lexer,t.LineCounter=f.LineCounter,t.Parser=g.Parser,t.parse=y.parse,t.parseAllDocuments=y.parseAllDocuments,t.parseDocument=y.parseDocument,t.stringify=y.stringify,t.visit=v.visit,t.visitAsync=v.visitAsync},86104:(e,t,r)=>{"use strict";var n=r(57837),o=r(49951),i=r(16584),a=r(99122),s=r(46076),l=r(7562);class u extends i.Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(a.SEQ,e),this.items=[]}add(e){this.items.push(e)}delete(e){let t=c(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){let r=c(e);if("number"!=typeof r)return;let n=this.items[r];return!t&&a.isScalar(n)?n.value:n}has(e){let t=c(e);return"number"==typeof t&&t<this.items.length}set(e,t){let r=c(e);if("number"!=typeof r)throw Error(`Expected a valid index, not ${e}.`);let n=this.items[r];a.isScalar(n)&&s.isScalarValue(t)?n.value=t:this.items[r]=t}toJSON(e,t){let r=[];t?.onCreate&&t.onCreate(r);let n=0;for(let e of this.items)r.push(l.toJS(e,String(n++),t));return r}toString(e,t,r){return e?o.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:t}):JSON.stringify(this)}static from(e,t,r){let{replacer:o}=r,i=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let a of t){if("function"==typeof o){let r=t instanceof Set?a:String(e++);a=o.call(t,r,a)}i.items.push(n.createNode(a,void 0,r))}}return i}}function c(e){let t=a.isScalar(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}t.YAMLSeq=u},86116:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var n=r(86713),o=r(92518),i=r(18676),a=r(64328),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},u=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},c=function(){function e(e,t){var r,o=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!=(r=this._attributes)?r:{},this._asyncAttributesPromise=null==t?void 0:t.then(function(e){return o._attributes=Object.assign({},o._attributes,e),o.asyncAttributesPending=!1,e},function(e){return n.s.debug("a resource's async attributes promise rejected: %s",e),o.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})[o.AV]=(0,a.m)(),t[o.Pl]=i.q[o.Pl],t[o.$L]=i.q[o.$L],t[o.y$]=i.q[o.y$],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&n.s.error("Accessing resource attributes before async attributes settled"),null!=(e=this._attributes)?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){var e,t,r,n;return e=this,t=void 0,r=void 0,n=function(){return l(this,function(e){switch(e.label){case 0:if(!this.asyncAttributesPending)return[3,2];return[4,this._asyncAttributesPromise];case 1:e.sent(),e.label=2;case 2:return[2]}})},new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},e.prototype.merge=function(t){var r,n=this;if(!t)return this;var o=s(s({},this._syncAttributes),null!=(r=t._syncAttributes)?r:t.attributes);return this._asyncAttributesPromise||t._asyncAttributesPromise?new e(o,Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(e){var r,o=u(e,2),i=o[0],a=o[1];return s(s(s(s({},n._syncAttributes),i),null!=(r=t._syncAttributes)?r:t.attributes),a)})):new e(o)},e.EMPTY=new e({}),e}()},86605:(e,t,r)=>{"use strict";let n=r(33877);e.exports=(e,t,r)=>n(t,e,r)},86942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(58592),i=r(59819);t.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>(0,n._)`{allowedValue: ${e}}`},code(e){let{gen:t,data:r,$data:a,schemaCode:s,schema:l}=e;a||l&&"object"==typeof l?e.fail$data((0,n._)`!${(0,o.useFunc)(t,i.default)}(${r}, ${s})`):e.fail((0,n._)`${l} !== ${r}`)}}},87334:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{OperationSchema:()=>f,defineBackgroundAction:()=>v,lookupBackgroundAction:()=>g}),e.exports=u(o({},"__esModule",{value:!0}),c);var p=((e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(r(47649)),d=r(88581),h=r(27633),m=r(72448);let f=p.object({action:p.string().optional(),id:p.string(),done:p.boolean().optional(),output:p.any().optional(),error:p.object({message:p.string()}).passthrough().optional(),metadata:p.record(p.string(),p.any()).optional()});async function g(e,t){let r=await e.lookupAction(t);if(!r)return;let n=t.substring(t.indexOf("/",1)+1);return new y(r,await e.lookupAction(`/check-operation/${n}/check`),await e.lookupAction(`/cancel-operation/${n}/cancel`))}class y{__action;startAction;checkAction;cancelAction;constructor(e,t,r){this.__action={name:e.__action.name,description:e.__action.description,inputSchema:e.__action.inputSchema,inputJsonSchema:e.__action.inputJsonSchema,metadata:e.__action.metadata,actionType:e.__action.actionType},this.startAction=e,this.checkAction=t,this.cancelAction=r}async start(e,t){return await this.startAction(e,t)}async check(e){return await this.checkAction(e)}get supportsCancel(){return!!this.cancelAction}async cancel(e){return this.cancelAction?await this.cancelAction(e):e}}function v(e,t){let r,n=(0,d.defineAction)(e,{actionType:t.actionType,name:t.name,description:t.description,inputSchema:t.inputSchema,inputJsonSchema:t.inputJsonSchema,outputSchema:f,metadata:{...t.metadata,outputSchema:(0,m.toJsonSchema)({schema:t.outputSchema,jsonSchema:t.outputJsonSchema})},use:t.use},async(e,r)=>{let n=await t.start(e,r);return n.action=`/${t.actionType}/${t.name}`,n}),o=(0,d.defineAction)(e,{actionType:"check-operation",name:`${t.name}/check`,description:t.description,inputSchema:f,inputJsonSchema:t.inputJsonSchema,outputSchema:f,metadata:{...t.metadata,outputSchema:(0,m.toJsonSchema)({schema:t.outputSchema,jsonSchema:t.outputJsonSchema})}},async e=>{let r=await t.check(e);return r.action=`/${t.actionType}/${t.name}`,r});return t.cancel&&(r=(0,d.defineAction)(e,{actionType:"cancel-operation",name:`${t.name}/cancel`,description:t.description,inputSchema:f,inputJsonSchema:t.inputJsonSchema,outputSchema:f,metadata:{...t.metadata,outputSchema:(0,m.toJsonSchema)({schema:t.outputSchema,jsonSchema:t.outputJsonSchema})}},async e=>{if(!t.cancel)throw new h.GenkitError({status:"UNAVAILABLE",message:`${t.name} does not support cancellation.`});let r=await t.cancel(e);return r.action=`/${t.actionType}/${t.name}`,r})),new y(n,o,r)}},87535:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AlwaysOffSampler:()=>P,AlwaysOnSampler:()=>C,AnchoredClock:()=>i,BindOnceFuture:()=>q.I,CompositePropagator:()=>S.n,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>U.fv,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>U.aE,DEFAULT_ENVIRONMENT:()=>U.Uz,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>U.h9,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>U.V,ExportResultCode:()=>p.V,ParentBasedSampler:()=>R,RPCType:()=>n,RandomIdGenerator:()=>g,SDK_INFO:()=>_.q,TRACE_PARENT_HEADER:()=>x.ZS,TRACE_STATE_HEADER:()=>x.UD,TimeoutError:()=>B.M,TraceIdRatioBasedSampler:()=>L,TraceState:()=>j.n,TracesSamplerValues:()=>$.R,VERSION:()=>K.x,W3CBaggagePropagator:()=>o.t,W3CTraceContextPropagator:()=>x.lm,_globalThis:()=>m,addHrTimes:()=>u.mw,baggageUtils:()=>d,callWithTimeout:()=>B.o,deleteRPCMetadata:()=>A,getEnv:()=>h._,getEnvWithoutDefaults:()=>h.w,getRPCMetadata:()=>O,getTimeOrigin:()=>u.uc,globalErrorHandler:()=>s.s,hexToBase64:()=>f,hexToBinary:()=>c.Q,hrTime:()=>u._5,hrTimeDuration:()=>u.W5,hrTimeToMicroseconds:()=>u.w_,hrTimeToMilliseconds:()=>u.JU,hrTimeToNanoseconds:()=>u.u5,hrTimeToTimeStamp:()=>u.tq,internal:()=>Y,isAttributeKey:()=>a.oU,isAttributeValue:()=>a.m,isTimeInput:()=>u.Ir,isTimeInputHrTime:()=>u.VL,isTracingSuppressed:()=>M.Zf,isUrlIgnored:()=>G,isWrapped:()=>H,loggingErrorHandler:()=>l.o,merge:()=>F.h,millisToHrTime:()=>u.lg,otperformance:()=>b.u,parseEnvironment:()=>U.Nq,parseTraceParent:()=>x.ZI,sanitizeAttributes:()=>a.L,setGlobalErrorHandler:()=>s.u,setRPCMetadata:()=>T,suppressTracing:()=>M.M1,timeInputToHrTime:()=>u.KJ,unrefTimer:()=>E.K,unsuppressTracing:()=>M.FU,urlMatches:()=>z});var n,o=r(9984),i=function(){function e(e,t){this._monotonicClock=t,this._epochMillis=e.now(),this._performanceMillis=t.now()}return e.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},e}(),a=r(17139),s=r(987),l=r(48811),u=r(18803),c=r(48549),p=r(1037),d=r(34392),h=r(28038),m="object"==typeof globalThis?globalThis:global;function f(e){return Buffer.from((0,c.Q)(e)).toString("base64")}var g=function(){this.generateTraceId=v(16),this.generateSpanId=v(8)},y=Buffer.allocUnsafe(16);function v(e){return function(){for(var t=0;t<e/4;t++)y.writeUInt32BE(0x100000000*Math.random()>>>0,4*t);for(var t=0;t<e;t++)if(y[t]>0)break;else t===e-1&&(y[e-1]=1);return y.toString("hex",0,e)}}var b=r(63380),_=r(18676),E=r(80235),S=r(94134),x=r(10908),w=(0,r(13944).n)("OpenTelemetry SDK Context Key RPC_METADATA");function T(e,t){return e.setValue(w,t)}function A(e){return e.deleteValue(w)}function O(e){return e.getValue(w)}(n||(n={})).HTTP="http";var N=r(56233),P=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:N.i.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),C=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:N.i.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),k=r(76895),I=r(93158),D=r(33076),R=function(){function e(e){var t,r,n,o;this._root=e.root,this._root||((0,s.s)(Error("ParentBasedSampler must have a root sampler configured")),this._root=new C),this._remoteParentSampled=null!=(t=e.remoteParentSampled)?t:new C,this._remoteParentNotSampled=null!=(r=e.remoteParentNotSampled)?r:new P,this._localParentSampled=null!=(n=e.localParentSampled)?n:new C,this._localParentNotSampled=null!=(o=e.localParentNotSampled)?o:new P}return e.prototype.shouldSample=function(e,t,r,n,o,i){var a=k.u.getSpanContext(e);return a&&(0,I.YA)(a)?a.isRemote?a.traceFlags&D.X.SAMPLED?this._remoteParentSampled.shouldSample(e,t,r,n,o,i):this._remoteParentNotSampled.shouldSample(e,t,r,n,o,i):a.traceFlags&D.X.SAMPLED?this._localParentSampled.shouldSample(e,t,r,n,o,i):this._localParentNotSampled.shouldSample(e,t,r,n,o,i):this._root.shouldSample(e,t,r,n,o,i)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),L=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(0xffffffff*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,I.hX)(t)&&this._accumulate(t)<this._upperBound?N.i.RECORD_AND_SAMPLED:N.i.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,r=0;r<e.length/8;r++){var n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t},e}(),M=r(82136),j=r(35749),U=r(47751),F=r(16200),$=r(90357),B=r(49457),V=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function z(e,t){return"string"==typeof t?e===t:!!e.match(t)}function G(e,t){var r,n;if(!t)return!1;try{for(var o=V(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(z(e,a))return!0}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function H(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}var q=r(19312),K=r(40620),Z=r(66061),Y={_export:function(e,t){return new Promise(function(r){Z._.with((0,M.M1)(Z._.active()),function(){e.export(t,function(e){r(e)})})})}}},87864:(e,t)=>{"use strict";let r=Symbol("break visit"),n=Symbol("skip children"),o=Symbol("remove item");function i(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),function e(t,n,i){let a=i(n,t);if("symbol"==typeof a)return a;for(let s of["key","value"]){let l=n[s];if(l&&"items"in l){for(let n=0;n<l.items.length;++n){let a=e(Object.freeze(t.concat([[s,n]])),l.items[n],i);if("number"==typeof a)n=a-1;else{if(a===r)return r;a===o&&(l.items.splice(n,1),n-=1)}}"function"==typeof a&&"key"===s&&(a=a(n,t))}}return"function"==typeof a?a(n,t):a}(Object.freeze([]),e,t)}i.BREAK=r,i.SKIP=n,i.REMOVE=o,i.itemAtPath=(e,t)=>{let r=e;for(let[e,n]of t){let t=r?.[e];if(!t||!("items"in t))return;r=t.items[n]}return r},i.parentCollection=(e,t)=>{let r=i.itemAtPath(e,t.slice(0,-1)),n=t[t.length-1][0],o=r?.[n];if(o&&"items"in o)return o;throw Error("Parent collection not found")},t.visit=i},87963:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GenerateResponse:()=>f.GenerateResponse,GenerateResponseChunk:()=>m.GenerateResponseChunk,GenerationBlockedError:()=>w,GenerationResponseError:()=>S,generate:()=>T,generateOperation:()=>A,generateStream:()=>C,tagAsPreamble:()=>k,toGenerateActionOptions:()=>O,toGenerateRequest:()=>E}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(51255),c=r(8436),p=r(72448),d=r(58457),h=r(52060),m=r(32877),f=r(82753),g=r(68073),y=r(58799),v=r(92426),b=r(31440),_=r(71622);async function E(e,t){let r,n=[];if(t.system&&n.push({role:"system",content:g.Message.parseContent(t.system)}),t.messages&&n.push(...t.messages.map(e=>g.Message.parseData(e))),t.prompt&&n.push({role:"user",content:g.Message.parseContent(t.prompt)}),0===n.length)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:"at least one message is required in generate request"});if(t.resume&&!(n.at(-1)?.role==="model"&&n.at(-1)?.content.find(e=>!!e.toolRequest)))throw new l.GenkitError({status:"FAILED_PRECONDITION",message:"Last message must be a 'model' role with at least one tool request to 'resume' generation.",detail:n.at(-1)});t.tools&&(r=await (0,_.resolveTools)(e,t.tools));let o=(0,p.toJsonSchema)({schema:t.output?.schema,jsonSchema:t.output?.jsonSchema}),i=await (0,d.resolveFormat)(e,t.output),a=(0,d.resolveInstructions)(i,o,t?.output?.instructions),s={messages:(0,h.shouldInjectFormatInstructions)(i?.config,t.output)?(0,d.injectInstructions)(n,a):n,config:t.config,docs:t.docs,tools:r?.map(_.toToolDefinition)||[],output:{...i?.config||{},...t.output,schema:o}};return s?.output?.schema||delete s?.output?.schema,s}class S extends l.GenkitError{detail;constructor(e,t,r,n){super({status:r||"FAILED_PRECONDITION",message:t}),this.detail={response:e,...n}}}async function x(e,t){if(!t)return;let r=[];for(let n of t)if("string"==typeof n)r.push(await P(e,n));else if((0,l.isAction)(n)||(0,_.isDynamicTool)(n))r.push(`/${n.__action.metadata?.type}/${n.__action.name}`);else if((0,v.isExecutablePrompt)(n)){let e=await n.asTool();r.push(`/prompt/${e.__action.name}`)}else throw Error(`Unable to determine type of tool: ${JSON.stringify(n)}`);return r}class w extends S{}async function T(e,t){var r,n,o,i;let a,s,u={...await Promise.resolve(t)},p=await (0,d.resolveFormat)(e,u.output);o=(r=e,n=u,a=!1,n?.tools?.forEach(e=>{(0,_.isDynamicTool)(e)&&((0,l.isDetachedAction)(e)&&(e=e.attach(r)),a||(a=!0,r=c.Registry.withParent(r)),r.registerAction("tool",e))}),e=r),i=u,s=!1,i?.resources?.forEach(e=>{if((0,b.isDynamicResourceAction)(e)){let t=e.attach(o);s||(s=!0,o=c.Registry.withParent(o)),o.registerAction("resource",t)}}),e=o;let m=await O(e,u),g=await x(e,u.tools),y=function(e){if(e!==l.sentinelNoopStreamingCallback)return e}(u.onChunk??u.streamingCallback),v=await (0,l.runWithContext)(e,u.context,()=>(0,h.generateHelper)(e,{rawRequest:m,middleware:u.use,abortSignal:u.abortSignal,streamingCallback:y})),S=await E(e,{...u,tools:g});return new f.GenerateResponse(v,{request:v.request??S,parser:p?.handler(S.output?.schema).parseMessage})}async function A(e,t){(0,l.assertUnstable)(e,"beta","generateOperation is a beta feature."),t=await t;let r=await (0,y.resolveModel)(e,t.model);if(!r.modelAction.__action.metadata?.model.supports?.longRunning)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:`Model '${r.modelAction.__action.name}' does not support long running operations.`});let{operation:n}=await T(e,t);if(!n)throw new l.GenkitError({status:"FAILED_PRECONDITION",message:`Model '${r.modelAction.__action.name}' did not return an operation.`});return n}async function O(e,t){let r=await (0,y.resolveModel)(e,t.model),n=await x(e,t.tools),o=function(e){let t=[];if(e.system&&t.push({role:"system",content:g.Message.parseContent(e.system)}),e.messages&&t.push(...e.messages),e.prompt&&t.push({role:"user",content:g.Message.parseContent(e.prompt)}),0===t.length)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:"at least one message is required in generate request"});return t}(t),i=(0,p.toJsonSchema)({schema:t.output?.schema,jsonSchema:t.output?.jsonSchema});(t.output?.schema||t.output?.jsonSchema)&&!t.output?.format&&(t.output.format="json");let a={model:r.modelAction.__action.name,docs:t.docs,messages:o,tools:n,toolChoice:t.toolChoice,config:{version:r.version,...N(r.config),...N(t.config)},output:t.output&&{...t.output,format:t.output.format,jsonSchema:i},resume:t.resume&&{respond:[t.resume.respond||[]].flat(),restart:[t.resume.restart||[]].flat(),metadata:t.resume.metadata},returnToolRequests:t.returnToolRequests,maxTurns:t.maxTurns};return 0!==Object.keys(a.config).length||t.config||delete a.config,a}function N(e){if(!e)return e;let t={...e};return Object.keys(e).forEach(e=>{void 0===t[e]&&delete t[e]}),t}async function P(e,t){if(await e.lookupAction(`/tool/${t}`))return`/tool/${t}`;if(await e.lookupAction(`/prompt/${t}`))return`/prompt/${t}`;throw Error(`Unable to determine type of of tool: ${t}`)}function C(e,t){let r=new u.Channel,n=Promise.resolve(t).then(t=>T(e,{...t,onChunk:e=>r.send(e)}));return n.then(()=>r.close(),e=>r.error(e)),{response:n,stream:r}}function k(e){if(e)return e.map(e=>({...e,metadata:{...e.metadata,preamble:!0}}))}},88522:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{checkOperation:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455);async function u(e,t){if(!t.action)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:"Provided operation is missing original request information"});let r=await e.lookupBackgroundAction(t.action);if(!r)throw new l.GenkitError({status:"INVALID_ARGUMENT",message:`Failed to resolve background action from original request: ${t.action}`});return await r.check(t)}},88524:(e,t)=>{"use strict";function r(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.setResponseValueAndErrors=t.addErrorMessage=void 0,t.addErrorMessage=r,t.setResponseValueAndErrors=function(e,t,n,o,i){e[t]=n,r(e,t,o,i)}},88581:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{StatusCodes:()=>d.StatusCodes,StatusSchema:()=>d.StatusSchema,action:()=>f,actionWithMiddleware:()=>m,defineAction:()=>b,defineActionAsync:()=>_,detachedAction:()=>g,getStreamingCallback:()=>w,isAction:()=>y,isDetachedAction:()=>v,isInRuntimeContext:()=>A,runInActionRuntimeContext:()=>O,runOutsideActionRuntimeContext:()=>N,runWithStreamingCallback:()=>x,sentinelNoopStreamingCallback:()=>S}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(51255),u=r(73816),c=r(72448),p=r(40413),d=r(96856);let h=()=>new AbortController().signal;function m(e,t){let r=async(e,t)=>(await r.run(e,t)).result;return r.__action=e.__action,r.__registry=e.__registry,r.run=async(n,o)=>{let i,a=async(r,n,o)=>{if(r===t.length){let t=await e.run(n,o);return i=t.telemetry,t.result}let s=t[r];if(3===s.length)return s(n,o,async(e,t)=>a(r+1,e||n,t||o));if(2===s.length)return s(n,async e=>a(r+1,e||n,o));throw Error("unspported middleware function shape")};return r.stream=e.stream,{result:await a(0,n,o),telemetry:i}},r}function f(e,t,r){return g(t,r).attach(e)}function g(e,t){let r="string"==typeof e.name?e.name:`${e.name.pluginId}/${e.name.actionId}`,n={name:r,description:e.description,inputSchema:e.inputSchema,inputJsonSchema:e.inputJsonSchema,outputSchema:e.outputSchema,outputJsonSchema:e.outputJsonSchema,streamSchema:e.streamSchema,metadata:e.metadata,actionType:e.actionType,detached:!0};return{__action:n,attach(o){let i=async(e,t)=>(await i.run(e,t)).result;return(i.__registry=o,i.__action={...n},delete i.__action.detached,i.run=async(n,i)=>{let a,s;n=(0,c.parseSchema)(n,{schema:e.inputSchema,jsonSchema:e.inputJsonSchema});let l=await (0,p.newTrace)(o,{name:r,labels:{[p.SPAN_TYPE_ATTR]:"action","genkit:metadata:subtype":e.actionType,...i?.telemetryLabels}},async(l,c)=>{(0,p.setCustomMetadataAttributes)(o,{subtype:e.actionType}),i?.context&&(0,p.setCustomMetadataAttributes)(o,{context:JSON.stringify(i.context)}),a=c.spanContext().traceId,s=c.spanContext().spanId,l.name=r,l.input=n;try{let e=await (0,u.runWithContext)(o,i?.context,()=>t(n,{...i,context:{...o.context,...i?.context??(0,u.getContext)(o)},streamingRequested:!!i?.onChunk&&i.onChunk!==S,sendChunk:i?.onChunk??S,trace:{traceId:a,spanId:s},registry:o,abortSignal:i?.abortSignal??h()}));return l.output=JSON.stringify(e),e}catch(e){throw"object"==typeof e&&(e.traceId=a),e}});return{result:l=(0,c.parseSchema)(l,{schema:e.outputSchema,jsonSchema:e.outputJsonSchema}),telemetry:{traceId:a,spanId:s}}},i.stream=(t,r)=>{let n,a=new ReadableStream({start(e){n=e},pull(){},cancel(){}}),s=i.run(e.inputSchema?e.inputSchema.parse(t):t,{onChunk:e=>{n.enqueue(e)},context:{...o.context,...r?.context??(0,u.getContext)(o)},abortSignal:r?.abortSignal,telemetryLabels:r?.telemetryLabels}).then(e=>e.result).finally(()=>{n.close()});return{output:s,stream:async function*(){let e=a.getReader();for(;;){let t=await e.read();if(t.value&&(yield t.value),t.done)break}return await s}()}},e.use)?m(i,e.use):i}}}function y(e){return"function"==typeof e&&"__action"in e&&!e.__action.detached}function v(e){return!!e.__action&&!!e.__action.detached&&"function"==typeof e.attach}function b(e,t,r){if(A(e))throw Error("Cannot define new actions at runtime.\nSee: https://github.com/firebase/genkit/blob/main/docs/errors/no_new_actions_at_runtime.md");let n=f(e,t,async(t,n)=>(await e.initializeAllPlugins(),await O(e,()=>r(t,n))));return n.__action.actionType=t.actionType,e.registerAction(t.actionType,n),n}function _(e,t,r,n,o){let i="string"==typeof r?r:`${r.pluginId}/${r.actionId}`,a=(0,l.lazy)(()=>n.then(r=>{let n=f(e,r,async(t,n)=>(await e.initializeAllPlugins(),await O(e,()=>r.fn(t,n))));return n.__action.actionType=t,o?.(n),n}));return e.registerActionAsync(t,i,a),a}let E="core.action.streamingCallback",S=()=>null;function x(e,t,r){return e.asyncStore.run(E,t||S,r)}function w(e){let t=e.asyncStore.getStore(E);if(t!==S)return t}let T="core.action.runtimeContext";function A(e){return"runtime"===e.asyncStore.getStore(T)}function O(e,t){return e.asyncStore.run(T,"runtime",t)}function N(e,t){return e.asyncStore.run(T,"outside",t)}},88712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(58592);function i(e,t){let r=e.schema[t];return void 0!==r&&!(0,o.alwaysValidSchema)(e,r)}t.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>(0,n.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,n._)`{failingKeyword: ${e.ifClause}}`},code(e){let{gen:t,parentSchema:r,it:a}=e;void 0===r.then&&void 0===r.else&&(0,o.checkStrictMode)(a,'"if" without "then" and "else" is ignored');let s=i(a,"then"),l=i(a,"else");if(!s&&!l)return;let u=t.let("valid",!0),c=t.name("_valid");if(function(){let t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);e.mergeEvaluated(t)}(),e.reset(),s&&l){let r=t.let("ifClause");e.setParams({ifClause:r}),t.if(c,p("then",r),p("else",r))}else s?t.if(c,p("then")):t.if((0,n.not)(c),p("else"));function p(r,o){return()=>{let i=e.subschema({keyword:r},c);t.assign(u,c),e.mergeValidEvaluated(i,u),o?t.assign(o,(0,n._)`${r}`):e.setParams({ifClause:r})}}e.pass(u,()=>e.error(!0))}}},89047:(e,t,r)=>{"use strict";let n=r(27910).Transform;class o extends n{constructor(){super(),this.lastByte=!1}_transform(e,t,r){e.length&&(this.lastByte=e[e.length-1]),this.push(e),r()}_flush(e){return 10===this.lastByte||(13===this.lastByte?this.push(Buffer.from("\n")):this.push(Buffer.from("\r\n"))),e()}}e.exports=o},89066:(e,t,r)=>{"use strict";let n=r(27910).Transform;function o(e){return"string"==typeof e&&(e=Buffer.from(e,"utf-8")),e.toString("base64")}function i(e,t){if(e=(e||"").toString(),t=t||76,e.length<=t)return e;let r=[],n=0,o=1024*t;for(;n<e.length;){let i=e.substr(n,o).replace(RegExp(".{"+t+"}","g"),"$&\r\n").trim();r.push(i),n+=o}return r.join("\r\n").trim()}class a extends n{constructor(e){super(),this.options=e||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(e,t,r){if("buffer"!==t&&(e=Buffer.from(e,t)),!e||!e.length)return setImmediate(r);this.inputBytes+=e.length,this._remainingBytes&&this._remainingBytes.length&&(e=Buffer.concat([this._remainingBytes,e],this._remainingBytes.length+e.length),this._remainingBytes=!1),e.length%3?(this._remainingBytes=e.slice(e.length-e.length%3),e=e.slice(0,e.length-e.length%3)):this._remainingBytes=!1;let n=this._curLine+o(e);if(this.options.lineLength){let e=(n=i(n,this.options.lineLength)).lastIndexOf("\n");e<0?(this._curLine=n,n=""):e===n.length-1?this._curLine="":(this._curLine=n.substr(e+1),n=n.substr(0,e+1))}n&&(this.outputBytes+=n.length,this.push(Buffer.from(n,"ascii"))),setImmediate(r)}_flush(e){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=o(this._remainingBytes)),this._curLine&&(this._curLine=i(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),e()}}e.exports={encode:o,wrap:i,Encoder:a}},89231:(e,t,r)=>{"use strict";let n=r(20068),o=r(91292).assign,i=r(21940),a=r(94735);class s extends a{constructor(e){if(super(),this.pool=e,this.options=e.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let e=new i(this.options.auth,this.logger);e.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||e.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:e,method:"XOAUTH2"},e.on("token",e=>this.pool.mailer.emit("token",e)),e.on("error",e=>this.emit("error",e));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(e){this.pool.getSocket(this.options,(t,r)=>{if(t)return e(t);let i=!1,a=this.options;r&&r.connection&&(this.logger.info({tnx:"proxy",remoteAddress:r.connection.remoteAddress,remotePort:r.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",r.connection.remoteAddress,r.connection.remotePort,a.host||"",a.port||""),a=o(!1,a),Object.keys(r).forEach(e=>{a[e]=r[e]})),this.connection=new n(a),this.connection.once("error",t=>{if(this.emit("error",t),!i)return i=!0,e(t)}),this.connection.once("end",()=>{if(this.close(),i)return;i=!0;let t=setTimeout(()=>{if(i)return;let t=Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(t.code="ETLS"),e(t)},1e3);try{t.unref()}catch(e){}}),this.connection.connect(()=>{if(!i)if(!this.auth||!this.connection.allowsAuth&&!a.forceAuth)return i=!0,this._connected=!0,e(null,!0);else this.connection.login(this.auth,t=>{if(!i){if(i=!0,t)return this.connection.close(),this.emit("error",t),e(t);this._connected=!0,e(null,!0)}})})})}send(e,t){if(!this._connected)return this.connect(r=>r?t(r):this.send(e,t));let r=e.message.getEnvelope(),n=e.message.messageId(),o=[].concat(r.to||[]);o.length>3&&o.push("...and "+o.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n,cid:this.id},"Sending message %s using #%s to <%s>",n,this.id,o.join(", ")),e.data.dsn&&(r.dsn=e.data.dsn),this.connection.send(r,e.message.createReadStream(),(e,o)=>{if(this.messages++,e)return this.connection.close(),this.emit("error",e),t(e);o.envelope={from:r.from,to:r.to},o.messageId=n,setImmediate(()=>{let e;this.messages>=this.options.maxMessages?((e=Error("Resource exhausted")).code="EMAXLIMIT",this.connection.close(),this.emit("error",e)):this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),t(null,o)})}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}}e.exports=s},89470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;let n=r(70350);t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},t.parseUnionDef=function(e,r){if("openApi3"===r.target)return o(e,r);let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in t.primitiveMappings&&(!e._def.checks||!e._def.checks.length))){let e=n.reduce((e,r)=>{let n=t.primitiveMappings[r._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=n.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return o(e,r)};let o=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0}},89577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPGRPCExporterNodeBase=void 0;let n=r(18617),o=r(87535),i=r(991),a=r(19490),s=r(55954);class l extends i.OTLPExporterBase{constructor(e={},t,r,i,l){var u;super(e),this.grpcQueue=[],this._serializer=l,e.headers&&n.diag.warn("Headers cannot be set when using grpc");let c=Object.assign({},o.baggageUtils.parseKeyPairsIntoRecord((0,o.getEnv)().OTEL_EXPORTER_OTLP_HEADERS),t),p=()=>(0,s.configureCredentials)(void 0,this.getUrlFromConfig(e));if(null!=e.credentials){let t=e.credentials;p=()=>t}let d=null==(u=e.metadata)?void 0:u.clone();this.compression=(0,s.configureCompression)(e.compression),this._transport=new a.GrpcExporterTransport({address:this.getDefaultUrl(e),compression:this.compression,credentials:p,grpcName:r,grpcPath:i,metadata:()=>{let e=null!=d?d:(0,a.createEmptyMetadata)();for(let[t,r]of Object.entries(c))e.get(t).length<1&&e.set(t,r);return e},timeoutMillis:this.timeoutMillis})}onInit(){}onShutdown(){this._transport.shutdown()}send(e,t,r){if(this._shutdownOnce.isCalled)return void n.diag.debug("Shutdown already started. Cannot send objects");let o=this._serializer.serializeRequest(e);if(null==o)return void r(Error("Could not serialize message"));let a=this._transport.send(o).then(e=>{if("success"===e.status)return void t();"failure"===e.status&&e.error&&r(e.error),r(new i.OTLPExporterError("Export failed with unknown error"))},r);this._sendingPromises.push(a);let s=()=>{let e=this._sendingPromises.indexOf(a);this._sendingPromises.splice(e,1)};a.then(s,s)}}t.OTLPGRPCExporterNodeBase=l},89640:(e,t,r)=>{"use strict";let n,o=r(91645);class i extends Error{constructor(e){super(`${e} is locked`)}}let a={old:new Set,young:new Set},s=e=>new Promise((t,r)=>{let n=o.createServer();n.unref(),n.on("error",r),n.listen(e,()=>{let{port:e}=n.address();n.close(()=>{t(e)})})}),l=function*(e){e&&(yield*e),yield 0};e.exports=async e=>{let t;for(let r of(e&&(t="number"==typeof e.port?[e.port]:e.port),void 0===n&&(n=setInterval(()=>{a.old=a.young,a.young=new Set},15e3)).unref&&n.unref(),l(t)))try{let t=await s({...e,port:r});for(;a.old.has(t)||a.young.has(t);){if(0!==r)throw new i(r);t=await s({...e,port:r})}return a.young.add(t),t}catch(e){if(!["EADDRINUSE","EACCES"].includes(e.code)&&!(e instanceof i))throw e}throw Error("No available ports found")},e.exports.makeRange=(e,t)=>{if(!Number.isInteger(e)||!Number.isInteger(t))throw TypeError("`from` and `to` must be integer numbers");if(e<1024||e>65535)throw RangeError("`from` must be between 1024 and 65535");if(t<1024||t>65536)throw RangeError("`to` must be between 1024 and 65536");if(t<e)throw RangeError("`to` must be greater than or equal to `from`");return function*(e,t){for(let r=e;r<=t;r++)yield r}(e,t)}},89767:(e,t,r)=>{"use strict";let n=r(49074),o=r(91292);class i{constructor(e){e=e||{},this.options=e||{},this.name="JSONTransport",this.version=n.version,this.logger=o.getLogger(this.options,{component:this.options.component||"json-transport"})}send(e,t){e.message.keepBcc=!0;let r=e.data.envelope||e.message.getEnvelope(),n=e.message.messageId(),o=[].concat(r.to||[]);o.length>3&&o.push("...and "+o.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n},"Composing JSON structure of %s to <%s>",n,o.join(", ")),setImmediate(()=>{e.normalize((e,o)=>e?(this.logger.error({err:e,tnx:"send",messageId:n},"Failed building JSON structure for %s. %s",n,e.message),t(e)):(delete o.envelope,delete o.normalizedHeaders,t(null,{envelope:r,messageId:n,message:this.options.skipEncoding?o:JSON.stringify(o)})))})}}e.exports=i},89900:(e,t,r)=>{"use strict";var n=r(12330),o=r(16584),i=r(99122),a=r(29240),s=r(7562),l=r(22451),u=r(78166),c=r(58459),p=r(58364),d=r(57837),h=r(60823);class m{constructor(e,t,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,i.NODE_TYPE,{value:i.DOC});let n=null;"function"==typeof t||Array.isArray(t)?n=t:void 0===r&&t&&(r=t,t=void 0);let o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=o;let{version:a}=o;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new h.Directives({version:a}),this.setSchema(a,r),this.contents=void 0===e?null:this.createNode(e,n,r)}clone(){let e=Object.create(m.prototype,{[i.NODE_TYPE]:{value:i.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=i.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){f(this.contents)&&this.contents.add(e)}addIn(e,t){f(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){let r=c.anchorNames(this);e.anchor=!t||r.has(t)?c.findNewAnchor(t||"a",r):t}return new n.Alias(e.anchor)}createNode(e,t,r){let n;if("function"==typeof t)e=t.call({"":e},"",e),n=t;else if(Array.isArray(t)){let e=t.filter(e=>"number"==typeof e||e instanceof String||e instanceof Number).map(String);e.length>0&&(t=t.concat(e)),n=t}else void 0===r&&t&&(r=t,t=void 0);let{aliasDuplicateObjects:o,anchorPrefix:a,flow:s,keepUndefined:l,onTagObj:u,tag:p}=r??{},{onAnchor:h,setAnchors:m,sourceObjects:f}=c.createNodeAnchors(this,a||"a"),g={aliasDuplicateObjects:o??!0,keepUndefined:l??!1,onAnchor:h,onTagObj:u,replacer:n,schema:this.schema,sourceObjects:f},y=d.createNode(e,p,g);return s&&i.isCollection(y)&&(y.flow=!0),m(),y}createPair(e,t,r={}){let n=this.createNode(e,null,r),o=this.createNode(t,null,r);return new a.Pair(n,o)}delete(e){return!!f(this.contents)&&this.contents.delete(e)}deleteIn(e){return o.isEmptyPath(e)?null!=this.contents&&(this.contents=null,!0):!!f(this.contents)&&this.contents.deleteIn(e)}get(e,t){return i.isCollection(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return o.isEmptyPath(e)?!t&&i.isScalar(this.contents)?this.contents.value:this.contents:i.isCollection(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!i.isCollection(this.contents)&&this.contents.has(e)}hasIn(e){return o.isEmptyPath(e)?void 0!==this.contents:!!i.isCollection(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=o.collectionFromPath(this.schema,[e],t):f(this.contents)&&this.contents.set(e,t)}setIn(e,t){o.isEmptyPath(e)?this.contents=t:null==this.contents?this.contents=o.collectionFromPath(this.schema,Array.from(e),t):f(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let r;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new h.Directives({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new h.Directives({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{let t=JSON.stringify(e);throw Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(r)this.schema=new l.Schema(Object.assign(r,t));else throw Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:r,maxAliasCount:n,onAnchor:o,reviver:i}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===r,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},l=s.toJS(this.contents,t??"",a);if("function"==typeof o)for(let{count:e,res:t}of a.anchors.values())o(t,e);return"function"==typeof i?p.applyReviver(i,{"":l},"",l):l}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||0>=Number(e.indent))){let t=JSON.stringify(e.indent);throw Error(`"indent" option must be a positive integer, not ${t}`)}return u.stringifyDocument(this,e)}}function f(e){if(i.isCollection(e))return!0;throw Error("Expected a YAML collection as document contents")}t.Document=m},89901:(e,t,r)=>{"use strict";let{normalizeIPv6:n,normalizeIPv4:o,removeDotSegments:i,recomposeAuthority:a,normalizeComponentEncoding:s}=r(74016),l=r(69845);function u(e,t,r,n){let o={};return n||(e=h(c(e,r),r),t=h(c(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=i(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=i(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=i(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=i(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function c(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),o=[],s=l[(n.scheme||r.scheme||"").toLowerCase()];s&&s.serialize&&s.serialize(r,n),void 0!==r.path&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==n.reference&&r.scheme&&o.push(r.scheme,":");let u=a(r);if(void 0!==u&&("suffix"!==n.reference&&o.push("//"),o.push(u),r.path&&"/"!==r.path.charAt(0)&&o.push("/")),void 0!==r.path){let e=r.path;n.absolutePath||s&&s.absolutePath||(e=i(e)),void 0===u&&(e=e.replace(/^\/\//u,"/%2F")),o.push(e)}return void 0!==r.query&&o.push("?",r.query),void 0!==r.fragment&&o.push("#",r.fragment),o.join("")}let p=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t))),d=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function h(e,t){let r=Object.assign({},t),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},a=-1!==e.indexOf("%"),s=!1;"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let u=e.match(d);if(u){if(i.scheme=u[1],i.userinfo=u[3],i.host=u[4],i.port=parseInt(u[5],10),i.path=u[6]||"",i.query=u[7],i.fragment=u[8],isNaN(i.port)&&(i.port=u[5]),i.host){let e=o(i.host);if(!1===e.isIPV4){let t=n(e.host);i.host=t.host.toLowerCase(),s=t.isIPV6}else i.host=e.host,s=!0}void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||void 0!==i.query||i.path?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==i.reference&&(i.error=i.error||"URI is not a "+r.reference+" reference.");let e=l[(r.scheme||i.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!e||!e.unicodeSupport)&&i.host&&(r.domainHost||e&&e.domainHost)&&!1===s&&function(e){let t=0;for(let r=0,n=e.length;r<n;++r)if((t=e.charCodeAt(r))>126||p[t])return!0;return!1}(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(e){i.error=i.error||"Host's domain name can not be converted to ASCII: "+e}(!e||e&&!e.skipNormalize)&&(a&&void 0!==i.scheme&&(i.scheme=unescape(i.scheme)),a&&void 0!==i.host&&(i.host=unescape(i.host)),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),e&&e.parse&&e.parse(i,r)}else i.error=i.error||"URI can not be parsed.";return i}let m={SCHEMES:l,normalize:function(e,t){return"string"==typeof e?e=c(h(e,t),t):"object"==typeof e&&(e=h(c(e,t),t)),e},resolve:function(e,t,r){let n=Object.assign({scheme:"null"},r);return c(u(h(e,n),h(t,n),n,!0),{...n,skipEscape:!0})},resolveComponents:u,equal:function(e,t,r){return"string"==typeof e?e=c(s(h(e=unescape(e),r),!0),{...r,skipEscape:!0}):"object"==typeof e&&(e=c(s(e,!0),{...r,skipEscape:!0})),"string"==typeof t?t=c(s(h(t=unescape(t),r),!0),{...r,skipEscape:!0}):"object"==typeof t&&(t=c(s(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:c,parse:h};e.exports=m,e.exports.default=m,e.exports.fastUri=m},90201:(e,t,r)=>{"use strict";r.r(t),r.d(t,{JaegerPropagator:()=>p,UBER_BAGGAGE_HEADER_PREFIX:()=>c,UBER_TRACE_ID_HEADER:()=>u});var n=r(76895),o=r(10026),i=r(33076),a=r(82136),s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u="uber-trace-id",c="uberctx",p=function(){function e(e){"string"==typeof e?(this._jaegerTraceHeader=e,this._jaegerBaggageHeaderPrefix=c):(this._jaegerTraceHeader=(null==e?void 0:e.customTraceHeader)||u,this._jaegerBaggageHeaderPrefix=(null==e?void 0:e.customBaggageHeaderPrefix)||c)}return e.prototype.inject=function(e,t,r){var u,c,p=n.u.getSpanContext(e),d=o.$.getBaggage(e);if(p&&!1===(0,a.Zf)(e)){var h="0"+(p.traceFlags||i.X.NONE).toString(16);r.set(t,this._jaegerTraceHeader,p.traceId+":"+p.spanId+":0:"+h)}if(d)try{for(var m=s(d.getAllEntries()),f=m.next();!f.done;f=m.next()){var g=l(f.value,2),y=g[0],v=g[1];r.set(t,this._jaegerBaggageHeaderPrefix+"-"+y,encodeURIComponent(v.value))}}catch(e){u={error:e}}finally{try{f&&!f.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}},e.prototype.extract=function(e,t,r){var i,a,u,c=this,p=r.get(t,this._jaegerTraceHeader),h=Array.isArray(p)?p[0]:p,m=r.keys(t).filter(function(e){return e.startsWith(c._jaegerBaggageHeaderPrefix+"-")}).map(function(e){var n=r.get(t,e);return{key:e.substring(c._jaegerBaggageHeaderPrefix.length+1),value:Array.isArray(n)?n[0]:n}}),f=e;if("string"==typeof h){var g=function(e){var t=decodeURIComponent(e).split(":");if(4!==t.length)return null;var r=l(t,4),n=r[0],o=r[1],i=r[3];return{traceId:n.padStart(32,"0"),spanId:o.padStart(16,"0"),isRemote:!0,traceFlags:d.test(i)?1&parseInt(i,16):1}}(h);g&&(f=n.u.setSpanContext(f,g))}if(0===m.length)return f;var y=null!=(u=o.$.getBaggage(e))?u:o.$.createBaggage();try{for(var v=s(m),b=v.next();!b.done;b=v.next()){var _=b.value;void 0!==_.value&&(y=y.setEntry(_.key,{value:decodeURIComponent(_.value)}))}}catch(e){i={error:e}}finally{try{b&&!b.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}return o.$.setBaggage(f,y)},e.prototype.fields=function(){return[this._jaegerTraceHeader]},e}(),d=/^[0-9a-f]{1,2}$/i},90357:(e,t,r)=>{"use strict";var n;r.d(t,{R:()=>n}),function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(n||(n={}))},90456:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;let n=r(22964),o=r(58592);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:i,schemaPath:a,errSchemaPath:s,topSchemaRef:l}){if(void 0!==t&&void 0!==i)throw Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){let i=e.schema[t];return void 0===r?{schema:i,schemaPath:(0,n._)`${e.schemaPath}${(0,n.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:(0,n._)`${e.schemaPath}${(0,n.getProperty)(t)}${(0,n.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,o.escapeFragment)(r)}`}}if(void 0!==i){if(void 0===a||void 0===s||void 0===l)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:a,topSchemaRef:l,errSchemaPath:s}}throw Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:i,data:a,dataTypes:s,propertyName:l}){if(void 0!==a&&void 0!==r)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:u}=t;if(void 0!==r){let{errorPath:a,dataPathArr:s,opts:l}=t;c(u.let("data",(0,n._)`${t.data}${(0,n.getProperty)(r)}`,!0)),e.errorPath=(0,n.str)`${a}${(0,o.getErrorPath)(r,i,l.jsPropertySyntax)}`,e.parentDataProperty=(0,n._)`${r}`,e.dataPathArr=[...s,e.parentDataProperty]}function c(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==a&&(c(a instanceof n.Name?a:u.let("data",a,!0)),void 0!==l&&(e.propertyName=l)),s&&(e.dataTypes=s)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:o,allErrors:i}){void 0!==n&&(e.compositeRule=n),void 0!==o&&(e.createErrors=o),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}},90704:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{ATTR_PREFIX:()=>h,SPAN_TYPE_ATTR:()=>m,appendSpan:()=>v,newTrace:()=>g,runInNewSpan:()=>y,setCustomMetadataAttribute:()=>_,setCustomMetadataAttributes:()=>E,spanMetadataAlsKey:()=>p,toDisplayPath:()=>S,traceMetadataAlsKey:()=>d}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(18617),u=r(643),c=r(40413);let p="core.tracing.instrumentation.span",d="core.tracing.instrumentation.trace",h="genkit",m=h+":type",f="genkit-tracer";async function g(e,t,r){e=e.registry?e.registry:e,await (0,c.ensureBasicTelemetryInstrumentation)();let n=e.asyncStore.getStore(d)||{paths:new Set,timestamp:u.performance.now(),featureName:t.name};return await e.asyncStore.run(d,n,()=>y(e,{metadata:{name:t.name},labels:t.labels,links:t.links},async(e,t)=>await r(e,t)))}async function y(e,t,r){await (0,c.ensureBasicTelemetryInstrumentation)();let n=e.registry?e.registry:e,o=l.trace.getTracer(f,"v1"),i=n.asyncStore.getStore(p),a=i?.isRoot===!0;return i||(t.metadata.isRoot||=!0),await o.startActiveSpan(t.metadata.name,{links:t.links,root:t.metadata.isRoot},async e=>{t.labels&&e.setAttributes(t.labels);try{t.metadata.path=function(e,t,r){let n=r&&r["genkit:type"]?`,t:${"flow"===r["genkit:metadata:subtype"]?"flow":r["genkit:type"]}`:"";return t+`/{${e}${n}}`}(t.metadata.name,i?.path||"",t.labels);let o=await n.asyncStore.run(p,t.metadata,()=>r(t.metadata,e,a));return"error"!==t.metadata.state&&(t.metadata.state="success"),w(n,t.metadata),o}catch(r){var o;throw w(n,t.metadata,r),t.metadata.state="error",e.setStatus({code:l.SpanStatusCode.ERROR,message:(o=r)instanceof Error?o.message:`${o}`}),r instanceof Error&&e.recordException(r),"object"==typeof r&&(r.ignoreFailedSpan||(t.metadata.isFailureSource=!0),r.ignoreFailedSpan=!0),r}finally{e.setAttributes(b(t.metadata)),e.end()}})}async function v(e,t,r,n){await (0,c.ensureBasicTelemetryInstrumentation)();let o=l.trace.getTracer(f,"v1"),i=l.trace.setSpanContext(l.ROOT_CONTEXT,{traceId:e,traceFlags:1,spanId:t}),a=o.startSpan(r.name,{},i);a.setAttributes(b(r)),n&&a.setAttributes(n),a.end()}function b(e){let t={};return Object.keys(e).forEach(r=>{"metadata"===r&&"object"==typeof e[r]&&e.metadata?Object.entries(e.metadata).forEach(([e,r])=>{t[h+":metadata:"+e]=r}):"input"===r||"object"==typeof e[r]?t[h+":"+r]=JSON.stringify(e[r]):t[h+":"+r]=e[r]}),t}function _(e,t,r){let n=x(e);n&&(n.metadata||(n.metadata={}),n.metadata[t]=r)}function E(e,t){let r=x(e);if(r)for(let[e,n]of(r.metadata||(r.metadata={}),Object.entries(t)))r.metadata[e]=n}function S(e){return Array.from(e.matchAll(/\{([^\,}]+),[^\}]+\}/g),e=>e[1]).join(" > ")}function x(e){let t=e.asyncStore.getStore(p);if(!t)throw Error("running outside step context");return t}function w(e,t,r){let n=t.path||"",o=function(e){if(!e.path)return"";let t=e.path.split("}/{");if(1==t.length)return e.path;let r=e.metadata&&e.metadata.subtype?`,s:${e.metadata.subtype}`:"";return`${t.slice(0,-1).join("}/{")}}/{${t.at(-1)?.slice(0,-1)}${r}}`}(t),i=Array.from(e.asyncStore.getStore(d)?.paths||new Set),a=r?"failure":"success";if(!i.some(e=>e.path.startsWith(n)&&e.status===a)){let t=u.performance.now(),n=e.asyncStore.getStore(d)?.timestamp||t;e.asyncStore.getStore(d)?.paths?.add({path:o,error:r?.name,latency:t-n,status:a})}t.path=o}},90726:(e,t,r)=>{"use strict";let n=r(64487);e.exports=(e,t,r,o,i)=>{"string"==typeof r&&(i=o,o=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,o,i).version}catch(e){return null}}},90780:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{CONTEXT_CACHE_SUPPORTED_MODELS:()=>a,DEFAULT_TTL:()=>l,INVALID_ARGUMENT_MESSAGES:()=>s}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=["gemini-1.5-flash-001","gemini-1.5-pro-001"],s={modelVersion:`Model version is required for context caching, supported only in ${a.join(",")} models.`,tools:"Context caching cannot be used simultaneously with tools.",codeExecution:"Context caching cannot be used simultaneously with code execution."},l=300},90852:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(58592);t.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>(0,n._)`{propertyName: ${e.propertyName}}`},code(e){let{gen:t,schema:r,data:i,it:a}=e;if((0,o.alwaysValidSchema)(a,r))return;let s=t.name("valid");t.forIn("key",i,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},s),t.if((0,n.not)(s),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(s)}}},90911:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{ATTR_PREFIX:()=>h,BaseDataPointSchema:()=>f,BaseEvalDataPointSchema:()=>g,EVALUATOR_METADATA_KEY_DEFINITION:()=>E,EVALUATOR_METADATA_KEY_DISPLAY_NAME:()=>_,EVALUATOR_METADATA_KEY_IS_BILLED:()=>S,EvalResponseSchema:()=>x,EvalResponsesSchema:()=>w,EvalStatusEnum:()=>v,EvaluatorInfoSchema:()=>N,SPAN_STATE_ATTR:()=>m,ScoreSchema:()=>b,defineEvaluator:()=>A,evaluate:()=>O,evaluatorRef:()=>P}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(95566),c=r(72448),p=r(40413),d=r(55511);let h="genkit",m=h+":state",f=l.z.object({input:l.z.unknown(),output:l.z.unknown().optional(),context:l.z.array(l.z.unknown()).optional(),reference:l.z.unknown().optional(),testCaseId:l.z.string().optional(),traceIds:l.z.array(l.z.string()).optional()}),g=f.extend({testCaseId:l.z.string()}),y=l.z.enum(["UNKNOWN","PASS","FAIL"]);var v=(e=>(e.UNKNOWN="UNKNOWN",e.PASS="PASS",e.FAIL="FAIL",e))(v||{});let b=l.z.object({id:l.z.string().describe("Optional ID to differentiate different scores if applying in a single evaluation").optional(),score:l.z.union([l.z.number(),l.z.string(),l.z.boolean()]).optional(),status:y.optional(),error:l.z.string().optional(),details:l.z.object({reasoning:l.z.string().optional()}).passthrough().optional()}),_="evaluatorDisplayName",E="evaluatorDefinition",S="evaluatorIsBilled",x=l.z.object({sampleIndex:l.z.number().optional(),testCaseId:l.z.string(),traceId:l.z.string().optional(),spanId:l.z.string().optional(),evaluation:l.z.union([b,l.z.array(b)])}),w=l.z.array(x),T=l.z.object({dataset:l.z.array(f),evalRunId:l.z.string(),options:l.z.unknown()});function A(e,t,r){var n,o,i;let a={};return a[S]=void 0==t.isBilled||t.isBilled,a[_]=t.displayName,a[E]=t.definition,t.configSchema&&(a.customOptions=(0,c.toJsonSchema)({schema:t.configSchema})),n=(0,l.defineAction)(e,{actionType:"evaluator",name:t.name,inputSchema:T.extend({dataset:t.dataPointType?l.z.array(t.dataPointType):l.z.array(f),options:t.configSchema??l.z.unknown(),evalRunId:l.z.string(),batchSize:l.z.number().optional()}),outputSchema:w,metadata:{type:"evaluator",evaluator:a}},async t=>{let n=[],o=function(e,t){let r;r=t||1;let n=[];for(var o=0;o<e.length;o+=r)n.push(e.slice(o,o+r).map(e=>({...e,testCaseId:e.testCaseId??(0,d.randomUUID)()})));return n}(t.dataset,t.batchSize);for(let i=0;i<o.length;i++){let a=o[i];try{await (0,p.runInNewSpan)(e,{metadata:{name:t.batchSize?`Batch ${i}`:`Test Case ${a[0].testCaseId}`,metadata:{"evaluator:evalRunId":t.evalRunId}},labels:{[p.SPAN_TYPE_ATTR]:"evaluator"}},async(e,o)=>{let s=o.spanContext().spanId,l=o.spanContext().traceId,u=a.map((n,o)=>{let a=t.batchSize?t.batchSize*i+o:i;return e.input={input:n.input,output:n.output,context:n.context},r(n,t.options).then(e=>({...e,traceId:l,spanId:s,sampleIndex:a})).catch(e=>({sampleIndex:a,spanId:s,traceId:l,testCaseId:n.testCaseId,evaluation:{error:`Evaluation of test case ${n.testCaseId} failed: 
${e}`}}))}),c=await Promise.all(u);e.output=1===c.length?c[0]:c,c.map(e=>{n.push(e)})})}catch(e){u.logger.error(`Evaluation of batch ${i} failed: 
${e.stack}`);continue}}return n}),o=t.dataPointType,i=t.configSchema,n.__dataPointType=o,n.__configSchema=i,n}async function O(e,t){let r;if(!(r="string"==typeof t.evaluator?await e.lookupAction(`/evaluator/${t.evaluator}`):Object.hasOwnProperty.call(t.evaluator,"info")?await e.lookupAction(`/evaluator/${t.evaluator.name}`):t.evaluator))throw Error("Unable to utilize the provided evaluator");return await r({dataset:t.dataset,options:t.options,evalRunId:t.evalRunId??(0,d.randomUUID)()})}let N=l.z.object({label:l.z.string().optional(),metrics:l.z.array(l.z.string())});function P(e){return{...e}}},91292:(e,t,r)=>{"use strict";let n,o=r(79551),i=r(28354),a=r(29021),s=r(38099),l=r(37366),u=r(91645),c=r(21820);try{n=c.networkInterfaces()}catch(e){}e.exports.networkInterfaces=n;let p=(t,r)=>{let n=e.exports.networkInterfaces;return!n||Object.keys(n).map(e=>n[e]).reduce((e,t)=>e.concat(t),[]).filter(e=>!e.internal||r).filter(e=>e.family==="IPv"+t||e.family===t).length>0},d=(e,t,r,n)=>{if(!p(e,(r=r||{}).allowInternalNetworkInterfaces))return n(null,[]);(l.Resolver?new l.Resolver(r):l)["resolve"+e](t,(e,t)=>{if(e){switch(e.code){case l.NODATA:case l.NOTFOUND:case l.NOTIMP:case l.SERVFAIL:case l.CONNREFUSED:case l.REFUSED:case"EAI_AGAIN":return n(null,[])}return n(e)}return n(null,Array.isArray(t)?t:[].concat(t||[]))})},h=e.exports.dnsCache=new Map,m=(e,t)=>e?Object.assign({servername:e.servername,host:e.addresses&&e.addresses.length?1===e.addresses.length?e.addresses[0]:e.addresses[Math.floor(Math.random()*e.addresses.length)]:null},t||{}):Object.assign({},t||{});function f(e,t){let r=!1,n=[],o=0;e.on("error",e=>{r||(r=!0,t(e))}),e.on("readable",()=>{let t;for(;null!==(t=e.read());)n.push(t),o+=t.length}),e.on("end",()=>{let e;if(!r){r=!0;try{e=Buffer.concat(n,o)}catch(e){return t(e)}t(null,e)}})}e.exports.resolveHostname=(e,t)=>{let r;return(!(e=e||{}).host&&e.servername&&(e.host=e.servername),!e.host||u.isIP(e.host))?t(null,m({addresses:[e.host],servername:e.servername||!1},{cached:!1})):h.has(e.host)&&(!(r=h.get(e.host)).expires||r.expires>=Date.now())?t(null,m(r.value,{cached:!0})):void d(4,e.host,e,(n,o)=>{if(n)return r?t(null,m(r.value,{cached:!0,error:n})):t(n);if(o&&o.length){let r={addresses:o,servername:e.servername||e.host};return h.set(e.host,{value:r,expires:Date.now()+(e.dnsTtl||3e5)}),t(null,m(r,{cached:!1}))}d(6,e.host,e,(n,o)=>{if(n)return r?t(null,m(r.value,{cached:!0,error:n})):t(n);if(o&&o.length){let r={addresses:o,servername:e.servername||e.host};return h.set(e.host,{value:r,expires:Date.now()+(e.dnsTtl||3e5)}),t(null,m(r,{cached:!1}))}try{l.lookup(e.host,{all:!0},(n,o)=>{if(n)return r?t(null,m(r.value,{cached:!0,error:n})):t(n);let i=!!o&&o.filter(e=>p(e.family)).map(e=>e.address).shift();if(o&&o.length&&!i&&console.warn(`Failed to resolve IPv${o[0].family} addresses with current network`),!i&&r)return t(null,m(r.value,{cached:!0}));let a={addresses:i?[i]:[e.host],servername:e.servername||e.host};return h.set(e.host,{value:a,expires:Date.now()+(e.dnsTtl||3e5)}),t(null,m(a,{cached:!1}))})}catch(e){if(r)return t(null,m(r.value,{cached:!0,error:e}));return t(e)}})})},e.exports.parseConnectionUrl=e=>{e=e||"";let t={};return[o.parse(e,!0)].forEach(e=>{let r;switch(e.protocol){case"smtp:":t.secure=!1;break;case"smtps:":t.secure=!0;break;case"direct:":t.direct=!0}!isNaN(e.port)&&Number(e.port)&&(t.port=Number(e.port)),e.hostname&&(t.host=e.hostname),e.auth&&(r=e.auth.split(":"),t.auth||(t.auth={}),t.auth.user=r.shift(),t.auth.pass=r.join(":")),Object.keys(e.query||{}).forEach(r=>{let n=t,o=r,i=e.query[r];switch(!isNaN(i)&&(i=Number(i)),i){case"true":i=!0;break;case"false":i=!1}if(0===r.indexOf("tls."))o=r.substr(4),t.tls||(t.tls={}),n=t.tls;else if(r.indexOf(".")>=0)return;o in n||(n[o]=i)})}),t},e.exports._logFunc=(e,t,r,n,o,...i)=>{let a={};Object.keys(r||{}).forEach(e=>{"level"!==e&&(a[e]=r[e])}),Object.keys(n||{}).forEach(e=>{"level"!==e&&(a[e]=n[e])}),e[t](a,o,...i)},e.exports.getLogger=(t,r)=>{let n={},o=["trace","debug","info","warn","error","fatal"];if(!(t=t||{}).logger)return o.forEach(e=>{n[e]=()=>!1}),n;let a=t.logger;return!0===t.logger&&(a=function(e){let t=0,r=new Map;e.forEach(e=>{e.length>t&&(t=e.length)}),e.forEach(e=>{let n=e.toUpperCase();n.length<t&&(n+=" ".repeat(t-n.length)),r.set(e,n)});let n=(e,t,n,...o)=>{let a="";t&&("server"===t.tnx?a="S: ":"client"===t.tnx&&(a="C: "),t.sid&&(a="["+t.sid+"] "+a),t.cid&&(a="[#"+t.cid+"] "+a)),(n=i.format(n,...o)).split(/\r?\n/).forEach(t=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),r.get(e),a+t)})},o={};return e.forEach(e=>{o[e]=n.bind(null,e)}),o}(o)),o.forEach(t=>{n[t]=(n,o,...i)=>{e.exports._logFunc(a,t,r,n,o,...i)}}),n},e.exports.callbackPromise=(e,t)=>function(){let r=Array.from(arguments),n=r.shift();n?t(n):e(...r)},e.exports.parseDataURI=e=>{let t,r=e.indexOf(",");if(!r)return e;let n=e.substring(r+1),o=e.substring(5,r).split(";"),i=o.length>1&&o[o.length-1];i&&0>i.indexOf("=")&&(t=i.toLowerCase(),o.pop());let a=o.shift()||"application/octet-stream",s={};for(let e of o){let t=e.indexOf("=");if(t>=0){let r=e.substring(0,t),n=e.substring(t+1);s[r]=n}}switch(t){case"base64":n=Buffer.from(n,"base64");break;case"utf8":n=Buffer.from(n);break;default:try{n=Buffer.from(decodeURIComponent(n))}catch(e){n=Buffer.from(n)}n=Buffer.from(n)}return{data:n,encoding:t,contentType:a,params:s}},e.exports.resolveContent=(t,r,n)=>{let o;n||(o=new Promise((t,r)=>{n=e.exports.callbackPromise(t,r)}));let i=t&&t[r]&&t[r].content||t[r],l=("object"==typeof t[r]&&t[r].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!i)return n(null,i);if("object"==typeof i){if("function"==typeof i.pipe)return f(i,(e,o)=>{if(e)return n(e);t[r].content?t[r].content=o:t[r]=o,n(null,o)});else if(/^https?:\/\//i.test(i.path||i.href))return f(s(i.path||i.href),n);else if(/^data:/i.test(i.path||i.href)){let t=e.exports.parseDataURI(i.path||i.href);return t&&t.data?n(null,t.data):n(null,Buffer.from(0))}else if(i.path)return f(a.createReadStream(i.path),n)}return"string"!=typeof t[r].content||["utf8","usascii","ascii"].includes(l)||(i=Buffer.from(t[r].content,l)),setImmediate(()=>n(null,i)),o},e.exports.assign=function(){let e=Array.from(arguments),t=e.shift()||{};return e.forEach(e=>{Object.keys(e||{}).forEach(r=>{["tls","auth"].includes(r)&&e[r]&&"object"==typeof e[r]?(t[r]||(t[r]={}),Object.keys(e[r]).forEach(n=>{t[r][n]=e[r][n]})):t[r]=e[r]})}),t},e.exports.encodeXText=e=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(e))return e;let t=Buffer.from(e),r="";for(let e=0,n=t.length;e<n;e++){let n=t[e];n<33||n>126||43===n||61===n?r+="+"+(n<16?"0":"")+n.toString(16).toUpperCase():r+=String.fromCharCode(n)}return r}},91325:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},91570:(e,t,r)=>{"use strict";let n=r(34041),o=r(31534),i=r(74301),a=r(27910).PassThrough,s=r(29021),l=r(33873),u=r(55511);class c{constructor(e,t,r,n){this.options=e||{},this.keys=t,this.cacheTreshold=Number(this.options.cacheTreshold)||131072,this.hashAlgo=this.options.hashAlgo||"sha256",this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=!!this.cacheDir&&l.join(this.cacheDir,"message."+Date.now()+"-"+u.randomBytes(14).toString("hex")),this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=r,this.output=n,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",e=>{this.hasErrored=!0,this.cleanup(),n.emit("error",e)})}cleanup(){this.cache&&this.cachePath&&s.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=s.createReadStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.output.emit("error",e)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let e=this.chunks[this.readPos++];if(!1===this.output.write(e))return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let e=0,t=()=>{if(e>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let r=this.keys[e++],n=i(this.headers,this.hashAlgo,this.bodyHash,{domainName:r.domainName,keySelector:r.keySelector,privateKey:r.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return n&&this.output.write(Buffer.from(n+"\r\n")),setImmediate(t)};if(this.bodyHash&&this.headers)return t();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=s.createWriteStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{for(;null!==this.relaxedBody.read(););}),this.hasErrored=!0,this.output.emit("error",e)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new n,this.relaxedBody=new o({hashAlgo:this.hashAlgo}),this.parser.on("headers",e=>{this.headers=e}),this.relaxedBody.on("hash",e=>{this.bodyHash=e}),this.relaxedBody.on("readable",()=>{let e;if(!this.cache){for(;null!==(e=this.relaxedBody.read());)if(this.chunks.push(e),this.chunklen+=e.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}}),this.relaxedBody.on("end",()=>{this.cache||this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}}class p{constructor(e){this.options=e||{},this.keys=[].concat(this.options.keys||{domainName:e.domainName,keySelector:e.keySelector,privateKey:e.privateKey})}sign(e,t){let r=new a,n=e,o=!1;Buffer.isBuffer(e)?(o=e,n=new a):"string"==typeof e&&(o=Buffer.from(e),n=new a);let i=this.options;t&&Object.keys(t).length&&(i={},Object.keys(this.options||{}).forEach(e=>{i[e]=this.options[e]}),Object.keys(t||{}).forEach(e=>{e in i||(i[e]=t[e])}));let s=new c(i,this.keys,n,r);return setImmediate(()=>{s.signStream(),o&&setImmediate(()=>{n.end(o)})}),r}}e.exports=p},91645:e=>{"use strict";e.exports=require("net")},91738:(e,t,r)=>{"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function o(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],o=e[t-2];return n?"ContentStatement"===n.type?(o||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function i(e,t,r){void 0===t&&(t=-1);var n=e[t+1],o=e[t+2];return n?"ContentStatement"===n.type?(o||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var o=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==o}}function s(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var o=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==o,n.leftStripped}}t.__esModule=!0,n.prototype=new(function(e){return e&&e.__esModule?e:{default:e}}(r(581))).default,n.prototype.Program=function(e){var t=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,l=0,u=n.length;l<u;l++){var c=n[l],p=this.accept(c);if(p){var d=o(n,l,r),h=i(n,l,r),m=p.openStandalone&&d,f=p.closeStandalone&&h,g=p.inlineStandalone&&d&&h;p.close&&a(n,l,!0),p.open&&s(n,l,!0),t&&g&&(a(n,l),s(n,l)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[l-1].original)[1])),t&&m&&(a((c.program||c.inverse).body),s(n,l)),t&&f&&(a(n,l),s((c.inverse||c.program).body))}}return e},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,l=r;if(r&&r.chained)for(n=r.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var u={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:i(t.body),closeStandalone:o((n||t).body)};if(e.openStrip.close&&a(t.body,null,!0),r){var c=e.inverseStrip;c.open&&s(t.body,null,!0),c.close&&a(n.body,null,!0),e.closeStrip.open&&s(l.body,null,!0),!this.options.ignoreStandalone&&o(t.body)&&i(n.body)&&(s(t.body),a(n.body))}else e.closeStrip.open&&s(t.body,null,!0);return u},n.prototype.Decorator=n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=n,e.exports=t.default},92041:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDateDef=void 0;let n=r(88524);t.parseDateDef=function e(t,r,n){let i=n??r.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((n,o)=>e(t,r,n))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return o(t,r)}};let o=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let o of e.checks)switch(o.kind){case"min":(0,n.setResponseValueAndErrors)(r,"minimum",o.value,o.message,t);break;case"max":(0,n.setResponseValueAndErrors)(r,"maximum",o.value,o.message,t)}return r}},92426:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{defineHelper:()=>I,definePartial:()=>k,definePrompt:()=>_,isExecutablePrompt:()=>N,isPromptAction:()=>b,loadPromptFolder:()=>P,loadPromptFolderRecursively:()=>C,prompt:()=>D}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(51255),c=r(95566),p=r(72448),d=r(40413),h=r(29021),m=r(33873),f=r(87963),g=r(68073),y=r(58799),v=r(93814);function b(e){return e.__action.metadata?.type==="prompt"}function _(e,t){return E(e,`${t.name}${t.variant?`.${t.variant}`:""}`,Promise.resolve(t),t.metadata)}function E(e,t,r,n){let o={},i=async(t,n)=>await (0,d.runInNewSpan)(e,{metadata:{name:"render",input:t},labels:{[d.SPAN_TYPE_ATTR]:"promptTemplate"}},async i=>{let a,s=[];n={...n};let u=(0,v.getCurrentSession)(e),c=await r;await x(e,u,t,s,c,o,n),await w(e,u,t,s,c,n,o),await T(e,u,t,s,c,o,n),a="function"==typeof c.docs?await c.docs(t,{state:u?.state,context:n?.context||(0,l.getContext)(e)||{}}):c.docs;let p=(0,l.stripUndefinedProps)({model:c.model,maxTurns:c.maxTurns,messages:s,docs:a,tools:c.tools,returnToolRequests:c.returnToolRequests,toolChoice:c.toolChoice,context:c.context,output:c.output,use:c.use,...(0,l.stripUndefinedProps)(n),config:{...c?.config,...n?.config}});return 0!==Object.keys(p.config).length||n?.config||delete p.config,i.output=p,p}),a=(0,u.lazy)(()=>r.then(t=>{let r=S(t);return{name:`${t.name}${t.variant?`.${t.variant}`:""}`,inputJsonSchema:t.input?.jsonSchema,inputSchema:t.input?.schema,description:t.description,actionType:"prompt",metadata:r,fn:async t=>(0,f.toGenerateRequest)(e,await i(t,void 0))}})),s=(0,l.defineActionAsync)(e,"prompt",t,a,e=>{e.__executablePrompt=p}),c=(0,u.lazy)(()=>r.then(t=>{let r=S(t);return{name:`${t.name}${t.variant?`.${t.variant}`:""}`,inputJsonSchema:t.input?.jsonSchema,inputSchema:t.input?.schema,outputSchema:y.GenerateActionOptionsSchema,description:t.description,actionType:"executable-prompt",metadata:r,fn:async t=>await (0,f.toGenerateActionOptions)(e,await i(t,void 0))}}));(0,l.defineActionAsync)(e,"executable-prompt",t,c,e=>{e.__executablePrompt=p});let p=function(e){let t=async(t,r)=>await (0,d.runInNewSpan)(e.registry,{metadata:{name:(await e.rendererAction).__action.name,input:t},labels:{[d.SPAN_TYPE_ATTR]:"dotprompt"}},async n=>{let o=await (0,f.generate)(e.registry,{...await e.renderOptionsFn(t,r)});return n.output=o,o});return t.ref={name:e.name,metadata:e.metadata},t.render=async(t,r)=>({...await e.renderOptionsFn(t,r)}),t.stream=(t,r)=>(0,f.generateStream)(e.registry,e.renderOptionsFn(t,r)),t.asTool=async()=>await e.rendererAction,t}({registry:e,name:t,renderOptionsFn:i,rendererAction:s,metadata:n});return p}function S(e){let t={...e.metadata,prompt:{...e.metadata?.prompt,config:e.config,input:{schema:e.input?(0,p.toJsonSchema)(e.input):void 0},name:e.name.includes(".")?e.name.split(".")[0]:e.name,model:function(e){if(void 0!==e)return"string"==typeof e?e:e.name?e.name:e.__action.name}(e.model)},type:"prompt"};return e.variant&&(t.prompt.variant=e.variant),t}async function x(e,t,r,n,o,i,a){"function"==typeof o.system?n.push({role:"system",content:A(await o.system(r,{state:t?.state,context:a?.context||(0,l.getContext)(e)||{}}))}):"string"==typeof o.system?(i.system||(i.system=await e.dotprompt.compile(o.system)),n.push({role:"system",content:await O(e,i.system,r,t,o,a)})):o.system&&n.push({role:"system",content:A(o.system)})}async function w(e,t,r,n,o,i,a){if(o.messages)if("function"==typeof o.messages)n.push(...await o.messages(r,{state:t?.state,context:i?.context||(0,l.getContext)(e)||{},history:i?.messages}));else if("string"==typeof o.messages){a.messages||(a.messages=await e.dotprompt.compile(o.messages));let s=await a.messages({input:r,context:{...i?.context||(0,l.getContext)(e),state:t?.state},messages:i?.messages?.map(e=>g.Message.parseData(e))});n.push(...s.messages)}else n.push(...o.messages);else i.messages&&n.push(...i.messages);i?.messages&&delete i.messages}async function T(e,t,r,n,o,i,a){"function"==typeof o.prompt?n.push({role:"user",content:A(await o.prompt(r,{state:t?.state,context:a?.context||(0,l.getContext)(e)||{}}))}):"string"==typeof o.prompt?(i.userPrompt||(i.userPrompt=await e.dotprompt.compile(o.prompt)),n.push({role:"user",content:await O(e,i.userPrompt,r,t,o,a)})):o.prompt&&n.push({role:"user",content:A(o.prompt)})}function A(e){return Array.isArray(e)?e:"string"==typeof e?[{text:e}]:[e]}async function O(e,t,r,n,o,i){let a=await t({input:r,context:{...i?.context||(0,l.getContext)(e),state:n?.state}});if(1!==a.messages.length)throw Error("parts tempate must produce only one message");return a.messages[0].content}function N(e){return!!e?.render&&!!e?.asTool&&!!e?.stream}function P(e,t="./prompts",r){let n=(0,m.resolve)(t);(0,h.existsSync)(n)&&C(e,t,r,"")}function C(e,t,r,n){let o=(0,m.resolve)(t);for(let i of(0,h.readdirSync)((0,m.join)(o,n),{withFileTypes:!0})){let a=(0,m.join)(o,n),s=i.name;if(i.isFile()&&s.endsWith(".prompt"))if(s.startsWith("_")){let t=s.substring(1,s.length-7);k(e,t,(0,h.readFileSync)((0,m.join)(a,s),{encoding:"utf8"})),c.logger.debug(`Registered Dotprompt partial "${t}" from "${(0,m.join)(a,s)}"`)}else!function(e,t,r,n="",o="dotprompt"){let i=`${n??""}${(0,m.basename)(r,".prompt")}`,a=null;if(i.includes(".")){let e=i.split(".");i=e[0],a=e[1]}let s=(0,h.readFileSync)((0,m.join)(t,n??"",r),"utf8"),l=e.dotprompt.parse(s);E(e,L(i,a??void 0,o),(0,u.lazy)(async()=>{let t=await e.dotprompt.renderMetadata(l);return a&&(t.variant=a),t.output?.schema?.description===null&&delete t.output.schema.description,t.input?.schema?.description===null&&delete t.input.schema.description,{name:L(i,a??void 0,o),model:t.model,config:t.config,tools:t.tools,description:t.description,output:{jsonSchema:t.output?.schema,format:t.output?.format},input:{jsonSchema:t.input?.schema},metadata:{...t.metadata,type:"prompt",prompt:{...t,template:l.template}},maxTurns:t.raw?.maxTurns,toolChoice:t.raw?.toolChoice,returnToolRequests:t.raw?.returnToolRequests,messages:l.template}}))}(e,o,s,n?`${n}/`:"",r);else i.isDirectory()&&C(e,t,r,(0,m.join)(n,s))}}function k(e,t,r){e.dotprompt.definePartial(t,r)}function I(e,t,r){e.dotprompt.defineHelper(t,r)}async function D(e,t,r){return await R(e,t,r?.variant)}async function R(e,t,r){let n=await e.lookupAction(`/prompt/${L(t,r,void 0)}`);if(n)return n.__executablePrompt;throw new l.GenkitError({status:"NOT_FOUND",message:`Prompt ${t+(r?` (variant ${r})`:"")} not found`})}function L(e,t,r){return`${r?`${r}/`:""}${e}${t?`.${t}`:""}`}},92436:(e,t,r)=>{var n=r(38786).default,o=r(39767);n.PrintVisitor=o.PrintVisitor,n.print=o.print,e.exports=n},92518:(e,t,r)=>{"use strict";r.d(t,{$L:()=>tB,$R:()=>rb,$T:()=>rT,$c:()=>ny,AC:()=>tA,AS:()=>rC,AV:()=>tj,BF:()=>e0,BT:()=>r9,BY:()=>tQ,Bt:()=>e1,C3:()=>tM,Cg:()=>rG,Cn:()=>tC,DL:()=>rV,Dn:()=>eH,E3:()=>eI,Eh:()=>tW,Fz:()=>rP,HE:()=>nh,HF:()=>tH,HP:()=>tr,I2:()=>eX,IG:()=>to,Iq:()=>eL,JO:()=>rm,JW:()=>r3,Jn:()=>rN,Ky:()=>ti,L6:()=>r_,MK:()=>eB,Mm:()=>e3,Nw:()=>eD,OZ:()=>rB,PL:()=>tF,PO:()=>e8,PU:()=>tp,PZ:()=>eY,Pb:()=>tc,Pi:()=>nt,Pl:()=>tV,RB:()=>eW,RK:()=>e9,S5:()=>nc,SA:()=>eU,SV:()=>eM,Su:()=>tv,TH:()=>tu,Tg:()=>rE,Tl:()=>ts,U1:()=>tK,U2:()=>tI,UQ:()=>rF,Uf:()=>e2,VH:()=>ej,Vf:()=>rf,Vm:()=>rv,Vx:()=>rh,Vy:()=>tS,WC:()=>rp,WE:()=>ru,WN:()=>tq,XE:()=>np,Xm:()=>tX,Yb:()=>tD,Yh:()=>r2,ZZ:()=>eq,Zf:()=>e$,_2:()=>tZ,a1:()=>rw,aA:()=>eK,an:()=>eG,ar:()=>tU,av:()=>r$,be:()=>tt,cJ:()=>r7,cV:()=>tL,do:()=>tm,du:()=>nm,f8:()=>tf,fP:()=>tN,g9:()=>tn,gJ:()=>tl,gT:()=>tE,h0:()=>nr,h7:()=>r8,hQ:()=>tT,hi:()=>rU,ig:()=>rz,ik:()=>tw,jN:()=>nv,jV:()=>t1,k7:()=>th,kE:()=>e7,kn:()=>tg,ko:()=>tx,kv:()=>td,ky:()=>tO,l9:()=>ne,lO:()=>e4,lb:()=>tR,mA:()=>ek,mc:()=>tb,nA:()=>tG,ns:()=>rA,o2:()=>nd,oH:()=>ry,op:()=>rc,ov:()=>t0,p7:()=>rd,pV:()=>ta,qB:()=>rS,qF:()=>ez,qN:()=>rx,rK:()=>ty,sS:()=>r5,so:()=>rj,tD:()=>r6,tP:()=>ng,tn:()=>eQ,uB:()=>eJ,uh:()=>nb,uu:()=>e5,ux:()=>eZ,v0:()=>eV,wE:()=>nf,wP:()=>n_,x2:()=>tk,xC:()=>eR,xG:()=>r4,xQ:()=>tP,xR:()=>r1,xs:()=>t$,y$:()=>tz,yB:()=>eF,yT:()=>te,z3:()=>t_,zF:()=>rg,zs:()=>e6});var n=r(47643),o="cloud.provider",i="cloud.account.id",a="cloud.region",s="cloud.availability_zone",l="cloud.platform",u="aws.ecs.container.arn",c="aws.ecs.cluster.arn",p="aws.ecs.launchtype",d="aws.ecs.task.arn",h="aws.ecs.task.family",m="aws.ecs.task.revision",f="aws.eks.cluster.arn",g="aws.log.group.names",y="aws.log.group.arns",v="aws.log.stream.names",b="aws.log.stream.arns",_="container.name",E="container.id",S="container.runtime",x="container.image.name",w="container.image.tag",T="deployment.environment",A="device.id",O="device.model.identifier",N="device.model.name",P="faas.name",C="faas.id",k="faas.version",I="faas.instance",D="faas.max_memory",R="host.id",L="host.name",M="host.type",j="host.arch",U="host.image.name",F="host.image.id",$="host.image.version",B="k8s.cluster.name",V="k8s.node.name",z="k8s.node.uid",G="k8s.namespace.name",H="k8s.pod.uid",q="k8s.pod.name",K="k8s.container.name",Z="k8s.replicaset.uid",Y="k8s.replicaset.name",J="k8s.deployment.uid",W="k8s.deployment.name",X="k8s.statefulset.uid",Q="k8s.statefulset.name",ee="k8s.daemonset.uid",et="k8s.daemonset.name",er="k8s.job.uid",en="k8s.job.name",eo="k8s.cronjob.uid",ei="k8s.cronjob.name",ea="os.type",es="os.description",el="os.name",eu="os.version",ec="process.pid",ep="process.executable.name",ed="process.executable.path",eh="process.command",em="process.command_line",ef="process.command_args",eg="process.owner",ey="process.runtime.name",ev="process.runtime.version",eb="process.runtime.description",e_="service.name",eE="service.namespace",eS="service.instance.id",ex="service.version",ew="telemetry.sdk.name",eT="telemetry.sdk.language",eA="telemetry.sdk.version",eO="telemetry.auto.version",eN="webengine.name",eP="webengine.version",eC="webengine.description",ek=o,eI=i,eD=a,eR=s,eL=l,eM=u,ej=c,eU=p,eF=d,e$=h,eB=m,eV=f,ez=g,eG=y,eH=v,eq=b,eK=_,eZ=E,eY=S,eJ=x,eW=w,eX=T,eQ=A,e0=O,e1=N,e2=P,e3=C,e4=k,e5=I,e8=D,e6=R,e9=L,e7=M,te=j,tt=U,tr=F,tn=$,to=B,ti=V,ta=z,ts=G,tl=H,tu=q,tc=K,tp=Z,td=Y,th=J,tm=W,tf=X,tg=Q,ty=ee,tv=et,tb=er,t_=en,tE=eo,tS=ei,tx=ea,tw=es,tT=el,tA=eu,tO=ec,tN=ep,tP=ed,tC=eh,tk=em,tI=ef,tD=eg,tR=ey,tL=ev,tM=eb,tj=e_,tU=eE,tF=eS,t$=ex,tB=ew,tV=eT,tz=eA,tG=eO,tH=eN,tq=eP,tK=eC,tZ=(0,n.O)([o,i,a,s,l,u,c,p,d,h,m,f,g,y,v,b,_,E,S,x,w,T,A,O,N,P,C,k,I,D,R,L,M,j,U,F,$,B,V,z,G,H,q,K,Z,Y,J,W,X,Q,ee,et,er,en,eo,ei,ea,es,el,eu,ec,ep,ed,eh,em,ef,eg,ey,ev,eb,e_,eE,eS,ex,ew,eT,eA,eO,eN,eP,eC]),tY="alibaba_cloud",tJ="azure",tW=tY,tX="aws",tQ=tJ,t0="gcp",t1=(0,n.O)([tY,"aws",tJ,"gcp"]),t2="alibaba_cloud_ecs",t3="alibaba_cloud_fc",t4="aws_ec2",t5="aws_ecs",t8="aws_eks",t6="aws_lambda",t9="aws_elastic_beanstalk",t7="azure_vm",re="azure_container_instances",rt="azure_aks",rr="azure_functions",rn="azure_app_service",ro="gcp_compute_engine",ri="gcp_cloud_run",ra="gcp_kubernetes_engine",rs="gcp_cloud_functions",rl="gcp_app_engine",ru=t2,rc=t3,rp=t4,rd=t5,rh=t8,rm=t6,rf=t9,rg=t7,ry=re,rv=rt,rb=rr,r_=rn,rE=ro,rS=ri,rx=ra,rw=rs,rT=rl,rA=(0,n.O)([t2,t3,t4,t5,t8,t6,t9,t7,re,rt,rr,rn,ro,ri,ra,rs,rl]),rO="fargate",rN="ec2",rP=rO,rC=(0,n.O)(["ec2",rO]),rk="amd64",rI="arm32",rD="arm64",rR="ia64",rL="ppc32",rM="ppc64",rj=rk,rU=rI,rF=rD,r$=rR,rB=rL,rV=rM,rz="x86",rG=(0,n.O)([rk,rI,rD,rR,rL,rM,"x86"]),rH="windows",rq="linux",rK="darwin",rZ="freebsd",rY="netbsd",rJ="openbsd",rW="dragonflybsd",rX="hpux",rQ="solaris",r0="z_os",r1=rH,r2=rq,r3=rK,r4=rZ,r5=rY,r8=rJ,r6=rW,r9=rX,r7="aix",ne=rQ,nt=r0,nr=(0,n.O)([rH,rq,rK,rZ,rY,rJ,rW,rX,"aix",rQ,r0]),nn="dotnet",no="erlang",ni="java",na="nodejs",ns="python",nl="ruby",nu="webjs",nc="cpp",np=nn,nd=no,nh="go",nm=ni,nf=na,ng="php",ny=ns,nv=nl,nb=nu,n_=(0,n.O)(["cpp",nn,no,"go",ni,na,"php",ns,nl,nu])},92892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;let n=r(94371),o=r(22964),i=o.operators,a={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}};t.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,o.str)`should be ${a[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,o._)`{comparison: ${a[e].okStr}, limit: ${t}}`},code(e){let{gen:t,data:r,schemaCode:i,keyword:s,it:l}=e,{opts:u,self:c}=l;if(!u.validateFormats)return;let p=new n.KeywordCxt(l,c.RULES.all.format.definition,"format");function d(e){return(0,o._)`${e}.compare(${r}, ${i}) ${a[s].fail} 0`}p.$data?function(){let r=t.scopeValue("formats",{ref:c.formats,code:u.code.formats}),n=t.const("fmt",(0,o._)`${r}[${p.schemaCode}]`);e.fail$data((0,o.or)((0,o._)`typeof ${n} != "object"`,(0,o._)`${n} instanceof RegExp`,(0,o._)`typeof ${n}.compare != "function"`,d(n)))}():function(){let r=p.schema,n=c.formats[r];if(!n||!0===n)return;if("object"!=typeof n||n instanceof RegExp||"function"!=typeof n.compare)throw Error(`"${s}": format "${r}" does not define "compare" function`);let i=t.scopeValue("formats",{key:r,ref:n,code:u.code.formats?(0,o._)`${u.code.formats}${(0,o.getProperty)(r)}`:void 0});e.fail$data(d(i))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},92971:(e,t,r)=>{"use strict";r.d(t,{K:()=>c});var n=r(84217),o=r(58660),i=r(73888),a=r(14646),s=r(95917),l=r(9306);function u(e,t){return e.dataPoints.map(function(r){var o=e.descriptor.valueType,i={attributes:(0,s.Zs)(r.attributes),startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)};switch(o){case n.e.INT:i.asInt=r.value;break;case n.e.DOUBLE:i.asDouble=r.value}return i})}function c(e,t){return{resourceMetrics:e.map(function(e){var r,n,c;return r=(0,a.Az)(t),{resource:(0,l.Z)(e.resource),schemaUrl:void 0,scopeMetrics:(n=e.scopeMetrics,c=r,Array.from(n.map(function(e){return{scope:(0,s.d1)(e.scope),metrics:e.metrics.map(function(e){return function(e,t){var r,n,a,l,c={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},p=function(e){switch(e){case i.h.DELTA:return 1;case i.h.CUMULATIVE:return 2}}(e.aggregationTemporality);switch(e.dataPointType){case o.n.SUM:c.sum={aggregationTemporality:p,isMonotonic:e.isMonotonic,dataPoints:u(e,t)};break;case o.n.GAUGE:c.gauge={dataPoints:u(e,t)};break;case o.n.HISTOGRAM:c.histogram={aggregationTemporality:p,dataPoints:(r=e,n=t,r.dataPoints.map(function(e){var t=e.value;return{attributes:(0,s.Zs)(e.attributes),bucketCounts:t.buckets.counts,explicitBounds:t.buckets.boundaries,count:t.count,sum:t.sum,min:t.min,max:t.max,startTimeUnixNano:n.encodeHrTime(e.startTime),timeUnixNano:n.encodeHrTime(e.endTime)}}))};break;case o.n.EXPONENTIAL_HISTOGRAM:c.exponentialHistogram={aggregationTemporality:p,dataPoints:(a=e,l=t,a.dataPoints.map(function(e){var t=e.value;return{attributes:(0,s.Zs)(e.attributes),count:t.count,min:t.min,max:t.max,sum:t.sum,positive:{offset:t.positive.offset,bucketCounts:t.positive.bucketCounts},negative:{offset:t.negative.offset,bucketCounts:t.negative.bucketCounts},scale:t.scale,zeroCount:t.zeroCount,startTimeUnixNano:l.encodeHrTime(e.startTime),timeUnixNano:l.encodeHrTime(e.endTime)}}))}}return c}(e,c)}),schemaUrl:e.scope.schemaUrl}})))}})}}},93280:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(58592),i=r(59819);t.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,n._)`{allowedValues: ${e}}`},code(e){let t,r,{gen:a,data:s,$data:l,schema:u,schemaCode:c,it:p}=e;if(!l&&0===u.length)throw Error("enum must have non-empty array");let d=u.length>=p.opts.loopEnum,h=()=>null!=t?t:t=(0,o.useFunc)(a,i.default);if(d||l)r=a.let("valid"),e.block$data(r,function(){a.assign(r,!1),a.forOf("v",c,e=>a.if((0,n._)`${h()}(${s}, ${e})`,()=>a.assign(r,!0).break()))});else{if(!Array.isArray(u))throw Error("ajv implementation error");let e=a.const("vSchema",c);r=(0,n.or)(...u.map((t,r)=>(function(e,t){let r=u[t];return"object"==typeof r&&null!==r?(0,n._)`${h()}(${s}, ${e}[${t}])`:(0,n._)`${s} === ${r}`})(e,r)))}e.pass(r)}}},93283:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{CandidateErrorSchema:()=>x,CandidateSchema:()=>S,FinishReasonSchema:()=>E,GenerateActionOptionsSchema:()=>P,GenerateActionOutputConfig:()=>N,GenerateRequestSchema:()=>b,GenerateResponseChunkSchema:()=>O,GenerateResponseSchema:()=>T,GenerationCommonConfigDescriptions:()=>f,GenerationCommonConfigSchema:()=>g,GenerationUsageSchema:()=>_,MessageSchema:()=>d,ModelInfoSchema:()=>h,ModelRequestSchema:()=>v,ModelResponseChunkSchema:()=>A,ModelResponseSchema:()=>w,OutputConfigSchema:()=>y,PartSchema:()=>c,RoleSchema:()=>p,ToolDefinitionSchema:()=>m}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(83455),u=r(40101);let c=l.z.union([u.TextPartSchema,u.MediaPartSchema,u.ToolRequestPartSchema,u.ToolResponsePartSchema,u.DataPartSchema,u.CustomPartSchema,u.ReasoningPartSchema,u.ResourcePartSchema]),p=l.z.enum(["system","user","model","tool"]),d=l.z.object({role:p,content:l.z.array(c),metadata:l.z.record(l.z.unknown()).optional()}),h=l.z.object({versions:l.z.array(l.z.string()).optional(),label:l.z.string().optional(),configSchema:l.z.record(l.z.any()).optional(),supports:l.z.object({multiturn:l.z.boolean().optional(),media:l.z.boolean().optional(),tools:l.z.boolean().optional(),systemRole:l.z.boolean().optional(),output:l.z.array(l.z.string()).optional(),contentType:l.z.array(l.z.string()).optional(),context:l.z.boolean().optional(),constrained:l.z.enum(["none","all","no-tools"]).optional(),toolChoice:l.z.boolean().optional()}).optional(),stage:l.z.enum(["featured","stable","unstable","legacy","deprecated"]).optional()}),m=l.z.object({name:l.z.string(),description:l.z.string(),inputSchema:l.z.record(l.z.any()).describe("Valid JSON Schema representing the input of the tool.").nullish(),outputSchema:l.z.record(l.z.any()).describe("Valid JSON Schema describing the output of the tool.").nullish(),metadata:l.z.record(l.z.any()).describe("additional metadata for this tool definition").optional()}),f={temperature:"Controls the degree of randomness in token selection. A lower value is good for a more predictable response. A higher value leads to more diverse or unexpected results.",maxOutputTokens:"The maximum number of tokens to include in the response.",topK:"The maximum number of tokens to consider when sampling.",topP:"Decides how many possible words to consider. A higher value means that the model looks at more possible words, even the less likely ones, which makes the generated text more diverse."},g=l.z.object({version:l.z.string().describe("A specific version of a model family, e.g. `gemini-2.0-flash` for the `googleai` family.").optional(),temperature:l.z.number().describe(f.temperature).optional(),maxOutputTokens:l.z.number().describe(f.maxOutputTokens).optional(),topK:l.z.number().describe(f.topK).optional(),topP:l.z.number().describe(f.topP).optional(),stopSequences:l.z.array(l.z.string()).max(5).describe("Set of character sequences (up to 5) that will stop output generation.").optional()}).passthrough(),y=l.z.object({format:l.z.string().optional(),schema:l.z.record(l.z.any()).optional(),constrained:l.z.boolean().optional(),contentType:l.z.string().optional()}),v=l.z.object({messages:l.z.array(d),config:l.z.any().optional(),tools:l.z.array(m).optional(),toolChoice:l.z.enum(["auto","required","none"]).optional(),output:y.optional(),docs:l.z.array(u.DocumentDataSchema).optional()}),b=v.extend({candidates:l.z.number().optional()}),_=l.z.object({inputTokens:l.z.number().optional(),outputTokens:l.z.number().optional(),totalTokens:l.z.number().optional(),inputCharacters:l.z.number().optional(),outputCharacters:l.z.number().optional(),inputImages:l.z.number().optional(),outputImages:l.z.number().optional(),inputVideos:l.z.number().optional(),outputVideos:l.z.number().optional(),inputAudioFiles:l.z.number().optional(),outputAudioFiles:l.z.number().optional(),custom:l.z.record(l.z.number()).optional(),thoughtsTokens:l.z.number().optional(),cachedContentTokens:l.z.number().optional()}),E=l.z.enum(["stop","length","blocked","interrupted","other","unknown"]),S=l.z.object({index:l.z.number(),message:d,usage:_.optional(),finishReason:E,finishMessage:l.z.string().optional(),custom:l.z.unknown()}),x=l.z.object({index:l.z.number(),code:l.z.enum(["blocked","other","unknown"]),message:l.z.string().optional()}),w=l.z.object({message:d.optional(),finishReason:E,finishMessage:l.z.string().optional(),latencyMs:l.z.number().optional(),usage:_.optional(),custom:l.z.unknown(),raw:l.z.unknown(),request:b.optional(),operation:l.OperationSchema.optional()}),T=w.extend({candidates:l.z.array(S).optional(),finishReason:E.optional()}),A=l.z.object({role:p.optional(),index:l.z.number().optional(),content:l.z.array(c),custom:l.z.unknown().optional(),aggregated:l.z.boolean().optional()}),O=A,N=l.z.object({format:l.z.string().optional(),contentType:l.z.string().optional(),instructions:l.z.union([l.z.boolean(),l.z.string()]).optional(),jsonSchema:l.z.any().optional(),constrained:l.z.boolean().optional()}),P=l.z.object({model:l.z.string(),docs:l.z.array(u.DocumentDataSchema).optional(),messages:l.z.array(d),tools:l.z.array(l.z.string()).optional(),toolChoice:l.z.enum(["auto","required","none"]).optional(),config:l.z.any().optional(),output:N.optional(),resume:l.z.object({respond:l.z.array(u.ToolResponsePartSchema).optional(),restart:l.z.array(u.ToolRequestPartSchema).optional(),metadata:l.z.record(l.z.any()).optional()}).optional(),returnToolRequests:l.z.boolean().optional(),maxTurns:l.z.number().optional()})},93419:(e,t,r)=>{"use strict";let n=r(58361);e.exports=(e,t)=>{let r=n(e,null,!0),o=n(t,null,!0),i=r.compare(o);if(0===i)return null;let a=i>0,s=a?r:o,l=a?o:r,u=!!s.prerelease.length;if(l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}let c=u?"pre":"";return r.major!==o.major?c+"major":r.minor!==o.minor?c+"minor":r.patch!==o.patch?c+"patch":"prerelease"}},93814:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{Session:()=>p,SessionError:()=>f,getCurrentSession:()=>m,inMemorySessionStore:()=>g,runWithSession:()=>h}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(46821),u=r(59510),c=r(57298);class p{constructor(e,t){this.registry=e,this.id=t?.id??(0,l.v4)(),this.sessionData=t?.sessionData??{id:this.id},this.sessionData||(this.sessionData={id:this.id}),this.sessionData.threads||(this.sessionData.threads={}),this.store=t?.store??new y}id;sessionData;store;get state(){return this.sessionData.state}async updateState(e){let t=this.sessionData;t||(t={}),t.state=e,this.sessionData=t,await this.store.save(this.id,t)}async updateMessages(e,t){let r=this.sessionData;r||(r={}),r.threads||(r.threads={}),r.threads[e]=t.map(e=>e.toJSON?e.toJSON():e),this.sessionData=r,await this.store.save(this.id,r)}chat(e,t,r){return h(this.registry,this,()=>{let n,o,i,a=u.MAIN_THREAD;if(e&&("string"==typeof e?a=e:(0,c.isExecutablePrompt)(e)?o=e:n=e),t&&((0,c.isExecutablePrompt)(t)?o=t:n=t),r&&(n=r),o){let e=n;i=o.render(e?.input,e).then(e=>({...e,messages:(0,c.tagAsPreamble)(e?.messages)}))}else{let e={...n},t=[];e.system&&t.push({role:"system",content:c.Message.parseContent(e.system)}),delete e.system,e.messages&&t.push(...e.messages),e.messages=(0,c.tagAsPreamble)(t),i=Promise.resolve(e)}return new u.Chat(this,i,{thread:a,id:this.id,messages:(this.sessionData?.threads&&this.sessionData?.threads[a])??[]})})}run(e){return h(this.registry,this,e)}toJSON(){return this.sessionData}}let d="ai.session";function h(e,t,r){return e.asyncStore.run(d,t,r)}function m(e){return e.asyncStore.getStore(d)}class f extends Error{constructor(e){super(e)}}function g(){return new y}class y{data={};async get(e){return this.data[e]}async save(e,t){this.data[e]=t}}},94134:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});var n=r(86713),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!=(t=e.propagators)?t:[],this._fields=Array.from(new Set(this._propagators.map(function(e){return"function"==typeof e.fields?e.fields():[]}).reduce(function(e,t){return e.concat(t)},[])))}return e.prototype.inject=function(e,t,r){var i,a;try{for(var s=o(this._propagators),l=s.next();!l.done;l=s.next()){var u=l.value;try{u.inject(e,t,r)}catch(e){n.s.warn("Failed to inject with "+u.constructor.name+". Err: "+e.message)}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},e.prototype.extract=function(e,t,r){return this._propagators.reduce(function(e,o){try{return o.extract(e,t,r)}catch(e){n.s.warn("Failed to inject with "+o.constructor.name+". Err: "+e.message)}return e},e)},e.prototype.fields=function(){return this._fields.slice()},e}()},94188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullableDef=void 0;let n=r(70350),o=r(89470);t.parseNullableDef=function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:o.primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[o.primitiveMappings[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}},94199:(e,t,r)=>{"use strict";r.d(t,{G:()=>o,P:()=>n});var n=function(){function e(){}return e.prototype.emit=function(e){},e}(),o=new n},94267:(e,t)=>{"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){var r=arguments[arguments.length-1];return arguments[arguments.length-1]=t(r),e.apply(this,arguments)}}},94371:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;let n=r(64933),o=r(57557),i=r(76690),a=r(10931),s=["/properties"],l="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),o.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(a,s):a;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var c=r(73841);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var p=r(22964);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var d=r(97757);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var h=r(19166);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return h.default}})},94504:(e,t,r)=>{"use strict";var n=r(99122);t.mapIncludes=function(e,t,r){let{uniqueKeys:o}=e.options;if(!1===o)return!1;let i="function"==typeof o?o:(e,t)=>e===t||n.isScalar(e)&&n.isScalar(t)&&e.value===t.value;return t.some(e=>i(e.key,r))}},94735:e=>{"use strict";e.exports=require("events")},94751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(96275);t.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n.validateTuple)(e,"items")}},94871:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{GENERIC_VEO_INFO:()=>h,VeoConfigSchema:()=>d,defineVeoModel:()=>m}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(48334),u=r(95563),c=r(44192),p=r(36440);let d=l.z.object({negativePrompt:l.z.string().optional(),aspectRatio:l.z.enum(["9:16","16:9"]).describe("Desired aspect ratio of the output video.").optional(),personGeneration:l.z.enum(["dont_allow","allow_adult","allow_all"]).describe("Control if/how images of people will be generated by the model.").optional(),durationSeconds:l.z.number().step(1).min(5).max(8).describe("Length of each output video in seconds, between 5 and 8.").optional(),enhance_prompt:l.z.boolean().describe("Enable or disable the prompt rewriter. Enabled by default.").optional()}).passthrough(),h={label:"Google AI - Generic Veo",supports:{media:!0,multiturn:!1,tools:!1,systemRole:!1,output:["media"],longRunning:!0}};function m(e,t,r){if(!1!==r&&!(r=r||(0,c.getApiKeyFromEnvVar)()))throw new l.GenkitError({status:"FAILED_PRECONDITION",message:"Please pass in the API key or set the GEMINI_API_KEY or GOOGLE_API_KEY environment variable.\nFor more details see https://genkit.dev/docs/plugins/google-genai"});let n=`googleai/${t}`,o=(0,u.modelRef)({name:n,info:{...h,label:`Google AI - ${t}`},configSchema:d});return e.defineBackgroundModel({name:n,...o.info,configSchema:d,async start(e){let n={prompt:e.messages.at(-1).content.map(e=>e.text||"").join("")},i=function(e){let t=e.messages.at(-1)?.content.find(e=>!!e.media)?.media;if(t)return{bytesBase64Encoded:t?.url.split(",")[1],mimeType:t.contentType}}(e);i&&(n.image=i);let a=(0,p.predictModel)(o.version||t,r,"predictLongRunning");return f(await a([n],function(e){let t={...e?.config};for(let e in t)t[e]||delete t[e];return t}(e)))},check:async e=>f(await (0,p.checkOp)(e.id,r))})}function f(e){let t={id:e.name};return void 0!==e.done&&(t.done=e.done),e.error&&(t.error={message:e.error.message}),e.response&&e.response.generateVideoResponse&&e.response.generateVideoResponse.generatedSamples&&(t.output={finishReason:"stop",raw:e.response,message:{role:"model",content:e.response.generateVideoResponse.generatedSamples.map(e=>({media:{url:e.video.uri}}))}}),t}},95050:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(42495),o=r(28824);t.default=(e,t)=>{let r;switch(e.code){case o.ZodIssueCode.invalid_type:r=e.received===n.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case o.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.util.jsonStringifyReplacer)}`;break;case o.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.util.joinValues(e.keys,", ")}`;break;case o.ZodIssueCode.invalid_union:r="Invalid input";break;case o.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.util.joinValues(e.options)}`;break;case o.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${n.util.joinValues(e.options)}, received '${e.received}'`;break;case o.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case o.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case o.ZodIssueCode.invalid_date:r="Invalid date";break;case o.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case o.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case o.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case o.ZodIssueCode.custom:r="Invalid input";break;case o.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case o.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case o.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.util.assertNever(e)}return{message:r}}},95552:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{SPAN_TYPE_ATTR:()=>l.SPAN_TYPE_ATTR,SpanContextSchema:()=>l.SpanContextSchema,SpanDataSchema:()=>l.SpanDataSchema,SpanMetadataSchema:()=>l.SpanMetadataSchema,SpanStatusSchema:()=>l.SpanStatusSchema,TimeEventSchema:()=>l.TimeEventSchema,TraceDataSchema:()=>l.TraceDataSchema,TraceMetadataSchema:()=>l.TraceMetadataSchema,TraceServerExporter:()=>l.TraceServerExporter,appendSpan:()=>l.appendSpan,enableTelemetry:()=>l.enableTelemetry,flushTracing:()=>l.flushTracing,newTrace:()=>l.newTrace,runInNewSpan:()=>l.runInNewSpan,setCustomMetadataAttribute:()=>l.setCustomMetadataAttribute,setCustomMetadataAttributes:()=>l.setCustomMetadataAttributes,setTelemetryServerUrl:()=>l.setTelemetryServerUrl,toDisplayPath:()=>l.toDisplayPath}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(40413)},95563:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{CandidateErrorSchema:()=>l.CandidateErrorSchema,CandidateSchema:()=>l.CandidateSchema,CustomPartSchema:()=>l.CustomPartSchema,DataPartSchema:()=>l.DataPartSchema,GenerateRequestSchema:()=>l.GenerateRequestSchema,GenerateResponseChunkSchema:()=>l.GenerateResponseChunkSchema,GenerateResponseSchema:()=>l.GenerateResponseSchema,GenerationCommonConfigDescriptions:()=>l.GenerationCommonConfigDescriptions,GenerationCommonConfigSchema:()=>l.GenerationCommonConfigSchema,GenerationUsageSchema:()=>l.GenerationUsageSchema,MediaPartSchema:()=>l.MediaPartSchema,MessageSchema:()=>l.MessageSchema,ModelInfoSchema:()=>l.ModelInfoSchema,ModelRequestSchema:()=>l.ModelRequestSchema,ModelResponseSchema:()=>l.ModelResponseSchema,PartSchema:()=>l.PartSchema,RoleSchema:()=>l.RoleSchema,TextPartSchema:()=>l.TextPartSchema,ToolDefinitionSchema:()=>l.ToolDefinitionSchema,ToolRequestPartSchema:()=>l.ToolRequestPartSchema,ToolResponsePartSchema:()=>l.ToolResponsePartSchema,getBasicUsageStats:()=>l.getBasicUsageStats,modelRef:()=>l.modelRef,simulateConstrainedGeneration:()=>l.simulateConstrainedGeneration}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(58799)},95566:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{logger:()=>p}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))o.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=["debug","info","warn","error"],s="__genkit_logger",l={shouldLog(e){return a.indexOf(this.level)<=a.indexOf(e)},debug(...e){this.shouldLog("debug")&&console.debug(...e)},info(...e){this.shouldLog("info")&&console.info(...e)},warn(...e){this.shouldLog("warn")&&console.warn(...e)},error(...e){this.shouldLog("error")&&console.error(...e)},level:"info"};function u(){return global[s]||(global[s]=l),global[s]}class c{defaultLogger=l;init(e){global[s]=e}info(...e){u().info.apply(u(),e)}debug(...e){u().debug.apply(u(),e)}error(...e){u().error.apply(u(),e)}warn(...e){u().warn.apply(u(),e)}setLogLevel(e){u().level=e}logStructured(e,t){u().info(e,t)}logStructuredError(e,t){u().error(e,t)}}let p=new c},95652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIntersectionDef=void 0;let n=r(70350),o=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e;t.parseIntersectionDef=function(e,t){let r=[(0,n.parseDef)(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),(0,n.parseDef)(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),i="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,a=[];return r.forEach(e=>{if(o(e))a.push(...e.allOf),void 0===e.unevaluatedProperties&&(i=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}else i=void 0;a.push(t)}}),a.length?{allOf:a,...i}:void 0}},95900:(e,t,r)=>{"use strict";var n=r(99122),o=r(46076),i=r(12236),a=r(2929);t.composeScalar=function(e,t,r,s){let l,u,{value:c,type:p,comment:d,range:h}="block-scalar"===t.type?i.resolveBlockScalar(e,t,s):a.resolveFlowScalar(t,e.options.strict,s),m=r?e.directives.tagName(r.source,e=>s(r,"TAG_RESOLVE_FAILED",e)):null;l=e.options.stringKeys&&e.atKey?e.schema[n.SCALAR]:m?function(e,t,r,o,i){if("!"===r)return e[n.SCALAR];let a=[];for(let t of e.tags)if(!t.collection&&t.tag===r)if(!t.default||!t.test)return t;else a.push(t);for(let e of a)if(e.test?.test(t))return e;let s=e.knownTags[r];return s&&!s.collection?(e.tags.push(Object.assign({},s,{default:!1,test:void 0})),s):(i(o,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,"tag:yaml.org,2002:str"!==r),e[n.SCALAR])}(e.schema,c,m,r,s):"scalar"===t.type?function({atKey:e,directives:t,schema:r},o,i,a){let s=r.tags.find(t=>(!0===t.default||e&&"key"===t.default)&&t.test?.test(o))||r[n.SCALAR];if(r.compat){let e=r.compat.find(e=>e.default&&e.test?.test(o))??r[n.SCALAR];if(s.tag!==e.tag){let r=t.tagString(s.tag),n=t.tagString(e.tag);a(i,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${r} or ${n}`,!0)}}return s}(e,c,t,s):e.schema[n.SCALAR];try{let i=l.resolve(c,e=>s(r??t,"TAG_RESOLVE_FAILED",e),e.options);u=n.isScalar(i)?i:new o.Scalar(i)}catch(e){s(r??t,"TAG_RESOLVE_FAILED",e instanceof Error?e.message:String(e)),u=new o.Scalar(c)}return u.range=h,u.source=c,p&&(u.type=p),m&&(u.tag=m),l.format&&(u.format=l.format),d&&(u.comment=d),u}},95908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{B3InjectEncoding:()=>n,B3Propagator:()=>T,B3_CONTEXT_HEADER:()=>u,X_B3_FLAGS:()=>m,X_B3_PARENT_SPAN_ID:()=>h,X_B3_SAMPLED:()=>d,X_B3_SPAN_ID:()=>p,X_B3_TRACE_ID:()=>c});var n,o=r(82136),i=r(33076),a=r(76895),s=r(93158),l=(0,r(13944).n)("OpenTelemetry Context Key B3 Debug Flag"),u="b3",c="x-b3-traceid",p="x-b3-spanid",d="x-b3-sampled",h="x-b3-parentspanid",m="x-b3-flags",f=new Set([!0,"true","True","1",1]),g=new Set([!1,"false","False","0",0]);function y(e,t,r){var n;return Array.isArray(n=t.get(e,r))?n[0]:n}function v(e,t){return"1"===y(e,t,m)?"1":void 0}var b=function(){function e(){}return e.prototype.inject=function(e,t,r){var n=a.u.getSpanContext(e);if(!(!n||!(0,s.YA)(n)||(0,o.Zf)(e))){var u=e.getValue(l);r.set(t,c,n.traceId),r.set(t,p,n.spanId),"1"===u?r.set(t,m,u):void 0!==n.traceFlags&&r.set(t,d,(i.X.SAMPLED&n.traceFlags)===i.X.SAMPLED?"1":"0")}},e.prototype.extract=function(e,t,r){var n,o,u,h="string"==typeof(n=y(t,r,c))?n.padStart(32,"0"):"",m="string"==typeof(o=y(t,r,p))?o:"",b=(u=y(t,r,d),"1"===v(t,r)||f.has(u)?i.X.SAMPLED:void 0===u||g.has(u)?i.X.NONE:void 0),_=v(t,r);return(0,s.hX)(h)&&(0,s.wN)(m)&&(b===i.X.SAMPLED||b===i.X.NONE)?(e=e.setValue(l,_),a.u.setSpanContext(e,{traceId:h,spanId:m,isRemote:!0,traceFlags:b})):e},e.prototype.fields=function(){return[c,p,m,d,h]},e}(),_=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},E=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/,S="0".repeat(16),x=new Set(["d","1"]),w=function(){function e(){}return e.prototype.inject=function(e,t,r){var n=a.u.getSpanContext(e);if(!(!n||!(0,s.YA)(n)||(0,o.Zf)(e))){var i=e.getValue(l)||1&n.traceFlags,c=n.traceId+"-"+n.spanId+"-"+i;r.set(t,u,c)}},e.prototype.extract=function(e,t,r){var n=r.get(t,u),o=Array.isArray(n)?n[0]:n;if("string"!=typeof o)return e;var c=o.match(E);if(!c)return e;var p=_(c,4),d=p[1],h=p[2],m=p[3],f=32===d.length?d:""+S+d;if(!(0,s.hX)(f)||!(0,s.wN)(h))return e;var g=m&&x.has(m)?i.X.SAMPLED:i.X.NONE;return"d"===m&&(e=e.setValue(l,m)),a.u.setSpanContext(e,{traceId:f,spanId:h,isRemote:!0,traceFlags:g})},e.prototype.fields=function(){return[u]},e}();!function(e){e[e.SINGLE_HEADER=0]="SINGLE_HEADER",e[e.MULTI_HEADER=1]="MULTI_HEADER"}(n||(n={}));var T=function(){function e(e){void 0===e&&(e={}),this._b3MultiPropagator=new b,this._b3SinglePropagator=new w,e.injectEncoding===n.MULTI_HEADER?(this._inject=this._b3MultiPropagator.inject,this._fields=this._b3MultiPropagator.fields()):(this._inject=this._b3SinglePropagator.inject,this._fields=this._b3SinglePropagator.fields())}return e.prototype.inject=function(e,t,r){(0,o.Zf)(e)||this._inject(e,t,r)},e.prototype.extract=function(e,t,r){var n=r.get(t,u);return(Array.isArray(n)?n[0]:n)?this._b3SinglePropagator.extract(e,t,r):this._b3MultiPropagator.extract(e,t,r)},e.prototype.fields=function(){return this._fields},e}()},95917:(e,t,r)=>{"use strict";r.d(t,{EB:()=>a,Ff:()=>s,Zs:()=>i,d1:()=>o});var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function o(e){return{name:e.name,version:e.version}}function i(e){return Object.keys(e).map(function(t){return a(t,e[t])})}function a(e,t){return{key:e,value:s(t)}}function s(e){var t=typeof e;return"string"===t?{stringValue:e}:"number"===t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"===t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(s)}}:"object"===t&&null!=e?{kvlistValue:{values:Object.entries(e).map(function(e){var t=n(e,2);return a(t[0],t[1])})}}:{}}},96257:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[r(96710).default]},96275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;let n=r(22964),o=r(58592),i=r(67884);function a(e,t,r=e.schema){let{gen:i,parentSchema:s,data:l,keyword:u,it:c}=e;(function(e){let{opts:n,errSchemaPath:i}=c,a=r.length,s=a===e.minItems&&(a===e.maxItems||!1===e[t]);if(n.strictTuples&&!s){let e=`"${u}" is ${a}-tuple, but minItems or maxItems/${t} are not specified or different at path "${i}"`;(0,o.checkStrictMode)(c,e,n.strictTuples)}})(s),c.opts.unevaluated&&r.length&&!0!==c.items&&(c.items=o.mergeEvaluated.items(i,r.length,c.items));let p=i.name("valid"),d=i.const("len",(0,n._)`${l}.length`);r.forEach((t,r)=>{(0,o.alwaysValidSchema)(c,t)||(i.if((0,n._)`${d} > ${r}`,()=>e.subschema({keyword:u,schemaProp:r,dataProp:r},p)),e.ok(p))})}t.validateTuple=a,t.default={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return a(e,"additionalItems",t);r.items=!0,(0,o.alwaysValidSchema)(r,t)||e.ok((0,i.validateArray)(e))}}},96363:(e,t,r)=>{"use strict";var n=r(58459),o=r(99122),i=r(14386),a=r(70230);t.createStringifyContext=function(e,t){let r,n=Object.assign({blockQuote:!0,commentString:i.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:r,options:n}},t.stringify=function(e,t,r,i){let s;if(o.isPair(e))return e.toString(t,r,i);if(o.isAlias(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let l=o.isNode(e)?e:t.doc.createNode(e,{onTagObj:e=>s=e});s??(s=function(e,t){let r,n;if(t.tag){let r=e.filter(e=>e.tag===t.tag);if(r.length>0)return r.find(e=>e.format===t.format)??r[0]}if(o.isScalar(t)){r=t.value;let o=e.filter(e=>e.identify?.(r));if(o.length>1){let e=o.filter(e=>e.test);e.length>0&&(o=e)}n=o.find(e=>e.format===t.format)??o.find(e=>!e.format)}else r=t,n=e.find(e=>e.nodeClass&&r instanceof e.nodeClass);if(!n){let e=r?.constructor?.name??(null===r?"null":typeof r);throw Error(`Tag not resolved for ${e} value`)}return n}(t.doc.schema.tags,l));let u=function(e,t,{anchors:r,doc:i}){if(!i.directives)return"";let a=[],s=(o.isScalar(e)||o.isCollection(e))&&e.anchor;s&&n.anchorIsValid(s)&&(r.add(s),a.push(`&${s}`));let l=e.tag??(t.default?null:t.tag);return l&&a.push(i.directives.tagString(l)),a.join(" ")}(l,s,t);u.length>0&&(t.indentAtStart=(t.indentAtStart??0)+u.length+1);let c="function"==typeof s.stringify?s.stringify(l,t,r,i):o.isScalar(l)?a.stringifyString(l,t,r,i):l.toString(t,r,i);return u?o.isScalar(l)||"{"===c[0]||"["===c[0]?`${u} ${c}`:`${u}
${t.indent}${c}`:c}},96487:()=>{},96526:(e,t,r)=>{"use strict";var n;r.d(t,{U:()=>n}),function(e){e.NONE="none",e.GZIP="gzip"}(n||(n={}))},96710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964);t.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,n.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,n._)`{format: ${e}}`},code(e,t){let{gen:r,data:o,$data:i,schema:a,schemaCode:s,it:l}=e,{opts:u,errSchemaPath:c,schemaEnv:p,self:d}=l;u.validateFormats&&(i?function(){let i=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),a=r.const("fDef",(0,n._)`${i}[${s}]`),l=r.let("fType"),c=r.let("format");r.if((0,n._)`typeof ${a} == "object" && !(${a} instanceof RegExp)`,()=>r.assign(l,(0,n._)`${a}.type || "string"`).assign(c,(0,n._)`${a}.validate`),()=>r.assign(l,(0,n._)`"string"`).assign(c,a)),e.fail$data((0,n.or)(!1===u.strictSchema?n.nil:(0,n._)`${s} && !${c}`,function(){let e=p.$async?(0,n._)`(${a}.async ? await ${c}(${o}) : ${c}(${o}))`:(0,n._)`${c}(${o})`,r=(0,n._)`(typeof ${c} == "function" ? ${e} : ${c}.test(${o}))`;return(0,n._)`${c} && ${c} !== true && ${l} === ${t} && !${r}`}()))}():function(){let i=d.formats[a];if(!i){if(!1===u.strictSchema)return d.logger.warn(s());throw Error(s());function s(){return`unknown format "${a}" ignored in schema at path "${c}"`}}if(!0===i)return;let[l,h,m]=function(e){let t=e instanceof RegExp?(0,n.regexpCode)(e):u.code.formats?(0,n._)`${u.code.formats}${(0,n.getProperty)(a)}`:void 0,o=r.scopeValue("formats",{key:a,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,o]:[e.type||"string",e.validate,(0,n._)`${o}.validate`]}(i);l===t&&e.pass(function(){if("object"==typeof i&&!(i instanceof RegExp)&&i.async){if(!p.$async)throw Error("async format in sync schema");return(0,n._)`await ${m}(${o})`}return"function"==typeof h?(0,n._)`${m}(${o})`:(0,n._)`${m}.test(${o})`}())}())}}},96856:(e,t,r)=>{"use strict";var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))l.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{StatusCodes:()=>d,StatusNameSchema:()=>h,StatusSchema:()=>y,httpStatusCode:()=>f}),e.exports=u(o({},"__esModule",{value:!0}),c);var p=((e,t,r)=>(r=null!=e?n(s(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(r(47649)),d=(e=>(e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e))(d||{});let h=p.enum(["OK","CANCELLED","UNKNOWN","INVALID_ARGUMENT","DEADLINE_EXCEEDED","NOT_FOUND","ALREADY_EXISTS","PERMISSION_DENIED","UNAUTHENTICATED","RESOURCE_EXHAUSTED","FAILED_PRECONDITION","ABORTED","OUT_OF_RANGE","UNIMPLEMENTED","INTERNAL","UNAVAILABLE","DATA_LOSS"]),m={OK:200,CANCELLED:499,UNKNOWN:500,INVALID_ARGUMENT:400,DEADLINE_EXCEEDED:504,NOT_FOUND:404,ALREADY_EXISTS:409,PERMISSION_DENIED:403,UNAUTHENTICATED:401,RESOURCE_EXHAUSTED:429,FAILED_PRECONDITION:400,ABORTED:409,OUT_OF_RANGE:400,UNIMPLEMENTED:501,INTERNAL:500,UNAVAILABLE:503,DATA_LOSS:500};function f(e){if(!(e in m))throw Error(`Invalid status code ${e}`);return m[e]}let g=p.nativeEnum(d),y=p.object({code:g,message:p.string(),details:p.any().optional()})},97002:(e,t,r)=>{"use strict";let n=r(94735),o=r(49074),i=r(91292),a=r(39449);class s extends n{constructor(e){super(),e=e||{},this.options=e||{},this.ses=this.options.SES,this.name="SESTransport",this.version=o.version,this.logger=i.getLogger(this.options,{component:this.options.component||"ses-transport"}),this.maxConnections=Number(this.options.maxConnections)||1/0,this.connections=0,this.sendingRate=Number(this.options.sendingRate)||1/0,this.sendingRateTTL=null,this.rateInterval=1e3,this.rateMessages=[],this.pending=[],this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}send(e,t){if(this.connections>=this.maxConnections||!this._checkSendingRate())return this.idling=!1,this.pending.push({mail:e,callback:t});this._send(e,(...e)=>{setImmediate(()=>t(...e)),this._sent()})}_checkRatedQueue(){if(this.connections>=this.maxConnections||!this._checkSendingRate())return;if(!this.pending.length){this.idling||(this.idling=!0,this.emit("idle"));return}let e=this.pending.shift();this._send(e.mail,(...t)=>{setImmediate(()=>e.callback(...t)),this._sent()})}_checkSendingRate(){clearTimeout(this.sendingRateTTL);let e=Date.now(),t=!1;for(let r=this.rateMessages.length-1;r>=0;r--)this.rateMessages[r].ts>=e-this.rateInterval&&(!t||this.rateMessages[r].ts<t)&&(t=this.rateMessages[r].ts),this.rateMessages[r].ts<e-this.rateInterval&&!this.rateMessages[r].pending&&this.rateMessages.splice(r,1);if(this.rateMessages.length<this.sendingRate)return!0;let r=Math.max(t+1001,e+20);this.sendingRateTTL=setTimeout(()=>this._checkRatedQueue(),e-r);try{this.sendingRateTTL.unref()}catch(e){}return!1}_sent(){this.connections--,this._checkRatedQueue()}isIdle(){return this.idling}_send(e,t){let r={ts:Date.now(),pending:!0};this.connections++,this.rateMessages.push(r);let n=e.data.envelope||e.message.getEnvelope(),o=e.message.messageId(),i=[].concat(n.to||[]);i.length>3&&i.push("...and "+i.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:o},"Sending message %s to <%s>",o,i.join(", "));let s=t=>{e.data._dkim||(e.data._dkim={}),e.data._dkim.skipFields&&"string"==typeof e.data._dkim.skipFields?e.data._dkim.skipFields+=":date:message-id":e.data._dkim.skipFields="date:message-id";let r=e.message.createReadStream(),n=r.pipe(new a),o=[],i=0;n.on("readable",()=>{let e;for(;null!==(e=n.read());)o.push(e),i+=e.length}),r.once("error",e=>n.emit("error",e)),n.once("error",e=>{t(e)}),n.once("end",()=>t(null,Buffer.concat(o,i)))};setImmediate(()=>s((i,a)=>{var s;if(i)return this.logger.error({err:i,tnx:"send",messageId:o},"Failed creating message for %s. %s",o,i.message),r.pending=!1,t(i);let l={RawMessage:{Data:a},Source:n.from,Destinations:n.to};Object.keys(e.data.ses||{}).forEach(t=>{l[t]=e.data.ses[t]});let u=(this.ses.aws?this.ses.ses:this.ses)||{},c=this.ses.aws||{};s=(e,i)=>{let s;(e||!i)&&(i="us-east-1"),("function"==typeof u.send&&c.SendRawEmailCommand?u.send(new c.SendRawEmailCommand(l)):u.sendRawEmail(l).promise()).then(e=>{"us-east-1"===i&&(i="email"),r.pending=!1,t(null,{envelope:{from:n.from,to:n.to},messageId:"<"+e.MessageId+(/@/.test(e.MessageId)?"":"@"+i+".amazonses.com")+">",response:e.MessageId,raw:a})}).catch(e=>{this.logger.error({err:e,tnx:"send"},"Send error for %s: %s",o,e.message),r.pending=!1,t(e)})},u.config&&"function"==typeof u.config.region?u.config.region().then(e=>s(null,e)).catch(e=>s(e)):s(null,u.config&&u.config.region||"us-east-1")}))}verify(e){let t,r=(this.ses.aws?this.ses.ses:this.ses)||{},n=this.ses.aws||{},o={RawMessage:{Data:"From: invalid@invalid\r\nTo: invalid@invalid\r\n Subject: Invalid\r\n\r\nInvalid"},Source:"invalid@invalid",Destinations:["invalid@invalid"]};e||(t=new Promise((t,r)=>{e=i.callbackPromise(t,r)}));let a=t=>t&&"InvalidParameterValue"!==(t.code||t.Code)?e(t):e(null,!0);return"function"==typeof r.send&&n.SendRawEmailCommand?(o.RawMessage.Data=Buffer.from(o.RawMessage.Data),r.send(new n.SendRawEmailCommand(o),a)):r.sendRawEmail(o,a),t}}e.exports=s},97222:(e,t,r)=>{"use strict";var n=r(11206);let o=e=>"bigint"==typeof e||Number.isInteger(e);function i(e,t,r,{intAsBigInt:n}){let o=e[0];if(("-"===o||"+"===o)&&(t+=1),e=e.substring(t).replace(/_/g,""),n){switch(r){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}let t=BigInt(e);return"-"===o?BigInt(-1)*t:t}let i=parseInt(e,r);return"-"===o?-1*i:i}function a(e,t,r){let{value:i}=e;if(o(i)){let e=i.toString(t);return i<0?"-"+r+e.substr(1):r+e}return n.stringifyNumber(e)}t.int={identify:o,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,r)=>i(e,0,10,r),stringify:n.stringifyNumber},t.intBin={identify:o,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,r)=>i(e,2,2,r),stringify:e=>a(e,2,"0b")},t.intHex={identify:o,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,r)=>i(e,2,16,r),stringify:e=>a(e,16,"0x")},t.intOct={identify:o,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,r)=>i(e,1,8,r),stringify:e=>a(e,8,"0")}},97535:(e,t,r)=>{"use strict";var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{logger:()=>l.logger}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=o(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(95566)},97757:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=r},97770:(e,t,r)=>{"use strict";var n=r(67383),o=r(16486),i=r(87864);t.createScalarToken=n.createScalarToken,t.resolveAsScalar=n.resolveAsScalar,t.setScalarValue=n.setScalarValue,t.stringify=o.stringify,t.visit=i.visit,t.BOM="\uFEFF",t.DOCUMENT="\x02",t.FLOW_END="\x18",t.SCALAR="\x1f",t.isCollection=e=>!!e&&"items"in e,t.isScalar=e=>!!e&&("scalar"===e.type||"single-quoted-scalar"===e.type||"double-quoted-scalar"===e.type||"block-scalar"===e.type),t.prettyToken=function(e){switch(e){case"\uFEFF":return"<BOM>";case"\x02":return"<DOC>";case"\x18":return"<FLOW_END>";case"\x1f":return"<SCALAR>";default:return JSON.stringify(e)}},t.tokenType=function(e){switch(e){case"\uFEFF":return"byte-order-mark";case"\x02":return"doc-mode";case"\x18":return"flow-error-end";case"\x1f":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}},97955:(e,t,r)=>{"use strict";r.d(t,{genkit:()=>o.genkit});var n=r(23301);r.o(n,"embedderActionMetadata")&&r.d(t,{embedderActionMetadata:function(){return n.embedderActionMetadata}}),r.o(n,"embedderRef")&&r.d(t,{embedderRef:function(){return n.embedderRef}}),r.o(n,"modelActionMetadata")&&r.d(t,{modelActionMetadata:function(){return n.modelActionMetadata}});var o=r(18758)},97970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22964),o=r(58592);t.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?(0,n.str)`must contain at least ${e} valid item(s)`:(0,n.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?(0,n._)`{minContains: ${e}}`:(0,n._)`{minContains: ${e}, maxContains: ${t}}`},code(e){let t,r,{gen:i,schema:a,parentSchema:s,data:l,it:u}=e,{minContains:c,maxContains:p}=s;u.opts.next?(t=void 0===c?1:c,r=p):t=1;let d=i.const("len",(0,n._)`${l}.length`);if(e.setParams({min:t,max:r}),void 0===r&&0===t)return void(0,o.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==r&&t>r){(0,o.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,o.alwaysValidSchema)(u,a)){let o=(0,n._)`${d} >= ${t}`;void 0!==r&&(o=(0,n._)`${o} && ${d} <= ${r}`),e.pass(o);return}u.items=!0;let h=i.name("valid");function m(){let e=i.name("_valid"),o=i.let("count",0);f(e,()=>i.if(e,()=>{var e;return e=o,void(i.code((0,n._)`${e}++`),void 0===r?i.if((0,n._)`${e} >= ${t}`,()=>i.assign(h,!0).break()):(i.if((0,n._)`${e} > ${r}`,()=>i.assign(h,!1).break()),1===t?i.assign(h,!0):i.if((0,n._)`${e} >= ${t}`,()=>i.assign(h,!0))))}))}function f(t,r){i.forRange("i",0,d,n=>{e.subschema({keyword:"contains",dataProp:n,dataPropType:o.Type.Num,compositeRule:!0},t),r()})}void 0===r&&1===t?f(h,()=>i.if(h,()=>i.break())):0===t?(i.let(h,!0),void 0!==r&&i.if((0,n._)`${l}.length > 0`,m)):(i.let(h,!1),m()),e.result(h,()=>e.reset())}}},98300:e=>{"use strict";let t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},98542:(e,t,r)=>{"use strict";var n=r(85635),o=n.Reader,i=n.Writer,a=n.util,s=n.roots.default||(n.roots.default={});s.opentelemetry=function(){var e,t,r,l,u,c,p,d,h,m,f,g,y,v,b,_,E,S,x,w,T,A,O,N,P,C,k={};return e={},t={},(r={}).AnyValue=function(){var e;function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.stringValue=null,t.prototype.boolValue=null,t.prototype.intValue=null,t.prototype.doubleValue=null,t.prototype.arrayValue=null,t.prototype.kvlistValue=null,t.prototype.bytesValue=null,Object.defineProperty(t.prototype,"value",{get:a.oneOfGetter(e=["stringValue","boolValue","intValue","doubleValue","arrayValue","kvlistValue","bytesValue"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),null!=e.stringValue&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),null!=e.boolValue&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),null!=e.intValue&&Object.hasOwnProperty.call(e,"intValue")&&t.uint32(24).int64(e.intValue),null!=e.doubleValue&&Object.hasOwnProperty.call(e,"doubleValue")&&t.uint32(33).double(e.doubleValue),null!=e.arrayValue&&Object.hasOwnProperty.call(e,"arrayValue")&&s.opentelemetry.proto.common.v1.ArrayValue.encode(e.arrayValue,t.uint32(42).fork()).ldelim(),null!=e.kvlistValue&&Object.hasOwnProperty.call(e,"kvlistValue")&&s.opentelemetry.proto.common.v1.KeyValueList.encode(e.kvlistValue,t.uint32(50).fork()).ldelim(),null!=e.bytesValue&&Object.hasOwnProperty.call(e,"bytesValue")&&t.uint32(58).bytes(e.bytesValue),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.common.v1.AnyValue;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.stringValue=e.string();break;case 2:n.boolValue=e.bool();break;case 3:n.intValue=e.int64();break;case 4:n.doubleValue=e.double();break;case 5:n.arrayValue=s.opentelemetry.proto.common.v1.ArrayValue.decode(e,e.uint32());break;case 6:n.kvlistValue=s.opentelemetry.proto.common.v1.KeyValueList.decode(e,e.uint32());break;case 7:n.bytesValue=e.bytes();break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.stringValue&&e.hasOwnProperty("stringValue")&&(t.value=1,!a.isString(e.stringValue)))return"stringValue: string expected";if(null!=e.boolValue&&e.hasOwnProperty("boolValue")){if(1===t.value)return"value: multiple values";if(t.value=1,"boolean"!=typeof e.boolValue)return"boolValue: boolean expected"}if(null!=e.intValue&&e.hasOwnProperty("intValue")){if(1===t.value)return"value: multiple values";if(t.value=1,!a.isInteger(e.intValue)&&!(e.intValue&&a.isInteger(e.intValue.low)&&a.isInteger(e.intValue.high)))return"intValue: integer|Long expected"}if(null!=e.doubleValue&&e.hasOwnProperty("doubleValue")){if(1===t.value)return"value: multiple values";if(t.value=1,"number"!=typeof e.doubleValue)return"doubleValue: number expected"}if(null!=e.arrayValue&&e.hasOwnProperty("arrayValue")){if(1===t.value)return"value: multiple values";t.value=1;var r=s.opentelemetry.proto.common.v1.ArrayValue.verify(e.arrayValue);if(r)return"arrayValue."+r}if(null!=e.kvlistValue&&e.hasOwnProperty("kvlistValue")){if(1===t.value)return"value: multiple values";t.value=1;var r=s.opentelemetry.proto.common.v1.KeyValueList.verify(e.kvlistValue);if(r)return"kvlistValue."+r}if(null!=e.bytesValue&&e.hasOwnProperty("bytesValue")){if(1===t.value)return"value: multiple values";if(t.value=1,!(e.bytesValue&&"number"==typeof e.bytesValue.length||a.isString(e.bytesValue)))return"bytesValue: buffer expected"}return null},t.fromObject=function(e){if(e instanceof s.opentelemetry.proto.common.v1.AnyValue)return e;var t=new s.opentelemetry.proto.common.v1.AnyValue;if(null!=e.stringValue&&(t.stringValue=String(e.stringValue)),null!=e.boolValue&&(t.boolValue=!!e.boolValue),null!=e.intValue&&(a.Long?(t.intValue=a.Long.fromValue(e.intValue)).unsigned=!1:"string"==typeof e.intValue?t.intValue=parseInt(e.intValue,10):"number"==typeof e.intValue?t.intValue=e.intValue:"object"==typeof e.intValue&&(t.intValue=new a.LongBits(e.intValue.low>>>0,e.intValue.high>>>0).toNumber())),null!=e.doubleValue&&(t.doubleValue=Number(e.doubleValue)),null!=e.arrayValue){if("object"!=typeof e.arrayValue)throw TypeError(".opentelemetry.proto.common.v1.AnyValue.arrayValue: object expected");t.arrayValue=s.opentelemetry.proto.common.v1.ArrayValue.fromObject(e.arrayValue)}if(null!=e.kvlistValue){if("object"!=typeof e.kvlistValue)throw TypeError(".opentelemetry.proto.common.v1.AnyValue.kvlistValue: object expected");t.kvlistValue=s.opentelemetry.proto.common.v1.KeyValueList.fromObject(e.kvlistValue)}return null!=e.bytesValue&&("string"==typeof e.bytesValue?a.base64.decode(e.bytesValue,t.bytesValue=a.newBuffer(a.base64.length(e.bytesValue)),0):e.bytesValue.length>=0&&(t.bytesValue=e.bytesValue)),t},t.toObject=function(e,t){t||(t={});var r={};return null!=e.stringValue&&e.hasOwnProperty("stringValue")&&(r.stringValue=e.stringValue,t.oneofs&&(r.value="stringValue")),null!=e.boolValue&&e.hasOwnProperty("boolValue")&&(r.boolValue=e.boolValue,t.oneofs&&(r.value="boolValue")),null!=e.intValue&&e.hasOwnProperty("intValue")&&("number"==typeof e.intValue?r.intValue=t.longs===String?String(e.intValue):e.intValue:r.intValue=t.longs===String?a.Long.prototype.toString.call(e.intValue):t.longs===Number?new a.LongBits(e.intValue.low>>>0,e.intValue.high>>>0).toNumber():e.intValue,t.oneofs&&(r.value="intValue")),null!=e.doubleValue&&e.hasOwnProperty("doubleValue")&&(r.doubleValue=t.json&&!isFinite(e.doubleValue)?String(e.doubleValue):e.doubleValue,t.oneofs&&(r.value="doubleValue")),null!=e.arrayValue&&e.hasOwnProperty("arrayValue")&&(r.arrayValue=s.opentelemetry.proto.common.v1.ArrayValue.toObject(e.arrayValue,t),t.oneofs&&(r.value="arrayValue")),null!=e.kvlistValue&&e.hasOwnProperty("kvlistValue")&&(r.kvlistValue=s.opentelemetry.proto.common.v1.KeyValueList.toObject(e.kvlistValue,t),t.oneofs&&(r.value="kvlistValue")),null!=e.bytesValue&&e.hasOwnProperty("bytesValue")&&(r.bytesValue=t.bytes===String?a.base64.encode(e.bytesValue,0,e.bytesValue.length):t.bytes===Array?Array.prototype.slice.call(e.bytesValue):e.bytesValue,t.oneofs&&(r.value="bytesValue")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.AnyValue"},t}(),r.ArrayValue=function(){function e(e){if(this.values=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.values=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.values&&e.values.length)for(var r=0;r<e.values.length;++r)s.opentelemetry.proto.common.v1.AnyValue.encode(e.values[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.common.v1.ArrayValue;e.pos<r;){var i=e.uint32();i>>>3==1?(n.values&&n.values.length||(n.values=[]),n.values.push(s.opentelemetry.proto.common.v1.AnyValue.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.values&&e.hasOwnProperty("values")){if(!Array.isArray(e.values))return"values: array expected";for(var t=0;t<e.values.length;++t){var r=s.opentelemetry.proto.common.v1.AnyValue.verify(e.values[t]);if(r)return"values."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.common.v1.ArrayValue)return e;var t=new s.opentelemetry.proto.common.v1.ArrayValue;if(e.values){if(!Array.isArray(e.values))throw TypeError(".opentelemetry.proto.common.v1.ArrayValue.values: array expected");t.values=[];for(var r=0;r<e.values.length;++r){if("object"!=typeof e.values[r])throw TypeError(".opentelemetry.proto.common.v1.ArrayValue.values: object expected");t.values[r]=s.opentelemetry.proto.common.v1.AnyValue.fromObject(e.values[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.values=[]),e.values&&e.values.length){r.values=[];for(var n=0;n<e.values.length;++n)r.values[n]=s.opentelemetry.proto.common.v1.AnyValue.toObject(e.values[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.ArrayValue"},e}(),r.KeyValueList=function(){function e(e){if(this.values=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.values=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.values&&e.values.length)for(var r=0;r<e.values.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.values[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.common.v1.KeyValueList;e.pos<r;){var i=e.uint32();i>>>3==1?(n.values&&n.values.length||(n.values=[]),n.values.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.values&&e.hasOwnProperty("values")){if(!Array.isArray(e.values))return"values: array expected";for(var t=0;t<e.values.length;++t){var r=s.opentelemetry.proto.common.v1.KeyValue.verify(e.values[t]);if(r)return"values."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.common.v1.KeyValueList)return e;var t=new s.opentelemetry.proto.common.v1.KeyValueList;if(e.values){if(!Array.isArray(e.values))throw TypeError(".opentelemetry.proto.common.v1.KeyValueList.values: array expected");t.values=[];for(var r=0;r<e.values.length;++r){if("object"!=typeof e.values[r])throw TypeError(".opentelemetry.proto.common.v1.KeyValueList.values: object expected");t.values[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.values[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.values=[]),e.values&&e.values.length){r.values=[];for(var n=0;n<e.values.length;++n)r.values[n]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.values[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.KeyValueList"},e}(),r.KeyValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key=null,e.prototype.value=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&s.opentelemetry.proto.common.v1.AnyValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.common.v1.KeyValue;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=s.opentelemetry.proto.common.v1.AnyValue.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.key&&e.hasOwnProperty("key")&&!a.isString(e.key))return"key: string expected";if(null!=e.value&&e.hasOwnProperty("value")){var t=s.opentelemetry.proto.common.v1.AnyValue.verify(e.value);if(t)return"value."+t}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.common.v1.KeyValue)return e;var t=new s.opentelemetry.proto.common.v1.KeyValue;if(null!=e.key&&(t.key=String(e.key)),null!=e.value){if("object"!=typeof e.value)throw TypeError(".opentelemetry.proto.common.v1.KeyValue.value: object expected");t.value=s.opentelemetry.proto.common.v1.AnyValue.fromObject(e.value)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=null),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=s.opentelemetry.proto.common.v1.AnyValue.toObject(e.value,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.KeyValue"},e}(),r.InstrumentationScope=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name=null,e.prototype.version=null,e.prototype.attributes=a.emptyArray,e.prototype.droppedAttributesCount=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(18).string(e.version),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(26).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(32).uint32(e.droppedAttributesCount),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.common.v1.InstrumentationScope;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.name=e.string();break;case 2:n.version=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 4:n.droppedAttributesCount=e.uint32();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!a.isString(e.name))return"name: string expected";if(null!=e.version&&e.hasOwnProperty("version")&&!a.isString(e.version))return"version: string expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!a.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.common.v1.InstrumentationScope)return e;var t=new s.opentelemetry.proto.common.v1.InstrumentationScope;if(null!=e.name&&(t.name=String(e.name)),null!=e.version&&(t.version=String(e.version)),e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.common.v1.InstrumentationScope.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.common.v1.InstrumentationScope.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults&&(r.name="",r.version="",r.droppedAttributesCount=0),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),e.attributes&&e.attributes.length){r.attributes=[];for(var n=0;n<e.attributes.length;++n)r.attributes[n]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[n],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.InstrumentationScope"},e}(),t.v1=r,e.common=t,l={},(u={}).Resource=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.attributes=a.emptyArray,e.prototype.droppedAttributesCount=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(10).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(16).uint32(e.droppedAttributesCount),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.resource.v1.Resource;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:n.droppedAttributesCount=e.uint32();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!a.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.resource.v1.Resource)return e;var t=new s.opentelemetry.proto.resource.v1.Resource;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.resource.v1.Resource.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.resource.v1.Resource.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults&&(r.droppedAttributesCount=0),e.attributes&&e.attributes.length){r.attributes=[];for(var n=0;n<e.attributes.length;++n)r.attributes[n]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[n],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.resource.v1.Resource"},e}(),l.v1=u,e.resource=l,c={},(p={}).TracesData=function(){function e(e){if(this.resourceSpans=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceSpans=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resourceSpans&&e.resourceSpans.length)for(var r=0;r<e.resourceSpans.length;++r)s.opentelemetry.proto.trace.v1.ResourceSpans.encode(e.resourceSpans[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.trace.v1.TracesData;e.pos<r;){var i=e.uint32();i>>>3==1?(n.resourceSpans&&n.resourceSpans.length||(n.resourceSpans=[]),n.resourceSpans.push(s.opentelemetry.proto.trace.v1.ResourceSpans.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceSpans&&e.hasOwnProperty("resourceSpans")){if(!Array.isArray(e.resourceSpans))return"resourceSpans: array expected";for(var t=0;t<e.resourceSpans.length;++t){var r=s.opentelemetry.proto.trace.v1.ResourceSpans.verify(e.resourceSpans[t]);if(r)return"resourceSpans."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.trace.v1.TracesData)return e;var t=new s.opentelemetry.proto.trace.v1.TracesData;if(e.resourceSpans){if(!Array.isArray(e.resourceSpans))throw TypeError(".opentelemetry.proto.trace.v1.TracesData.resourceSpans: array expected");t.resourceSpans=[];for(var r=0;r<e.resourceSpans.length;++r){if("object"!=typeof e.resourceSpans[r])throw TypeError(".opentelemetry.proto.trace.v1.TracesData.resourceSpans: object expected");t.resourceSpans[r]=s.opentelemetry.proto.trace.v1.ResourceSpans.fromObject(e.resourceSpans[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceSpans=[]),e.resourceSpans&&e.resourceSpans.length){r.resourceSpans=[];for(var n=0;n<e.resourceSpans.length;++n)r.resourceSpans[n]=s.opentelemetry.proto.trace.v1.ResourceSpans.toObject(e.resourceSpans[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.TracesData"},e}(),p.ResourceSpans=function(){function e(e){if(this.scopeSpans=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource=null,e.prototype.scopeSpans=a.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resource&&Object.hasOwnProperty.call(e,"resource")&&s.opentelemetry.proto.resource.v1.Resource.encode(e.resource,t.uint32(10).fork()).ldelim(),null!=e.scopeSpans&&e.scopeSpans.length)for(var r=0;r<e.scopeSpans.length;++r)s.opentelemetry.proto.trace.v1.ScopeSpans.encode(e.scopeSpans[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.trace.v1.ResourceSpans;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.resource=s.opentelemetry.proto.resource.v1.Resource.decode(e,e.uint32());break;case 2:n.scopeSpans&&n.scopeSpans.length||(n.scopeSpans=[]),n.scopeSpans.push(s.opentelemetry.proto.trace.v1.ScopeSpans.decode(e,e.uint32()));break;case 3:n.schemaUrl=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resource&&e.hasOwnProperty("resource")){var t=s.opentelemetry.proto.resource.v1.Resource.verify(e.resource);if(t)return"resource."+t}if(null!=e.scopeSpans&&e.hasOwnProperty("scopeSpans")){if(!Array.isArray(e.scopeSpans))return"scopeSpans: array expected";for(var r=0;r<e.scopeSpans.length;++r){var t=s.opentelemetry.proto.trace.v1.ScopeSpans.verify(e.scopeSpans[r]);if(t)return"scopeSpans."+t}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!a.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.trace.v1.ResourceSpans)return e;var t=new s.opentelemetry.proto.trace.v1.ResourceSpans;if(null!=e.resource){if("object"!=typeof e.resource)throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.resource: object expected");t.resource=s.opentelemetry.proto.resource.v1.Resource.fromObject(e.resource)}if(e.scopeSpans){if(!Array.isArray(e.scopeSpans))throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.scopeSpans: array expected");t.scopeSpans=[];for(var r=0;r<e.scopeSpans.length;++r){if("object"!=typeof e.scopeSpans[r])throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.scopeSpans: object expected");t.scopeSpans[r]=s.opentelemetry.proto.trace.v1.ScopeSpans.fromObject(e.scopeSpans[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.scopeSpans=[]),t.defaults&&(r.resource=null,r.schemaUrl=""),null!=e.resource&&e.hasOwnProperty("resource")&&(r.resource=s.opentelemetry.proto.resource.v1.Resource.toObject(e.resource,t)),e.scopeSpans&&e.scopeSpans.length){r.scopeSpans=[];for(var n=0;n<e.scopeSpans.length;++n)r.scopeSpans[n]=s.opentelemetry.proto.trace.v1.ScopeSpans.toObject(e.scopeSpans[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.ResourceSpans"},e}(),p.ScopeSpans=function(){function e(e){if(this.spans=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scope=null,e.prototype.spans=a.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.scope&&Object.hasOwnProperty.call(e,"scope")&&s.opentelemetry.proto.common.v1.InstrumentationScope.encode(e.scope,t.uint32(10).fork()).ldelim(),null!=e.spans&&e.spans.length)for(var r=0;r<e.spans.length;++r)s.opentelemetry.proto.trace.v1.Span.encode(e.spans[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.trace.v1.ScopeSpans;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.decode(e,e.uint32());break;case 2:n.spans&&n.spans.length||(n.spans=[]),n.spans.push(s.opentelemetry.proto.trace.v1.Span.decode(e,e.uint32()));break;case 3:n.schemaUrl=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.scope&&e.hasOwnProperty("scope")){var t=s.opentelemetry.proto.common.v1.InstrumentationScope.verify(e.scope);if(t)return"scope."+t}if(null!=e.spans&&e.hasOwnProperty("spans")){if(!Array.isArray(e.spans))return"spans: array expected";for(var r=0;r<e.spans.length;++r){var t=s.opentelemetry.proto.trace.v1.Span.verify(e.spans[r]);if(t)return"spans."+t}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!a.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.trace.v1.ScopeSpans)return e;var t=new s.opentelemetry.proto.trace.v1.ScopeSpans;if(null!=e.scope){if("object"!=typeof e.scope)throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.scope: object expected");t.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(e.scope)}if(e.spans){if(!Array.isArray(e.spans))throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.spans: array expected");t.spans=[];for(var r=0;r<e.spans.length;++r){if("object"!=typeof e.spans[r])throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.spans: object expected");t.spans[r]=s.opentelemetry.proto.trace.v1.Span.fromObject(e.spans[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.spans=[]),t.defaults&&(r.scope=null,r.schemaUrl=""),null!=e.scope&&e.hasOwnProperty("scope")&&(r.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.toObject(e.scope,t)),e.spans&&e.spans.length){r.spans=[];for(var n=0;n<e.spans.length;++n)r.spans[n]=s.opentelemetry.proto.trace.v1.Span.toObject(e.spans[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.ScopeSpans"},e}(),p.Span=function(){var e,t;function r(e){if(this.attributes=[],this.events=[],this.links=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return r.prototype.traceId=null,r.prototype.spanId=null,r.prototype.traceState=null,r.prototype.parentSpanId=null,r.prototype.name=null,r.prototype.kind=null,r.prototype.startTimeUnixNano=null,r.prototype.endTimeUnixNano=null,r.prototype.attributes=a.emptyArray,r.prototype.droppedAttributesCount=null,r.prototype.events=a.emptyArray,r.prototype.droppedEventsCount=null,r.prototype.links=a.emptyArray,r.prototype.droppedLinksCount=null,r.prototype.status=null,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=i.create()),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(10).bytes(e.traceId),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(18).bytes(e.spanId),null!=e.traceState&&Object.hasOwnProperty.call(e,"traceState")&&t.uint32(26).string(e.traceState),null!=e.parentSpanId&&Object.hasOwnProperty.call(e,"parentSpanId")&&t.uint32(34).bytes(e.parentSpanId),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(42).string(e.name),null!=e.kind&&Object.hasOwnProperty.call(e,"kind")&&t.uint32(48).int32(e.kind),null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(57).fixed64(e.startTimeUnixNano),null!=e.endTimeUnixNano&&Object.hasOwnProperty.call(e,"endTimeUnixNano")&&t.uint32(65).fixed64(e.endTimeUnixNano),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(74).fork()).ldelim();if(null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(80).uint32(e.droppedAttributesCount),null!=e.events&&e.events.length)for(var r=0;r<e.events.length;++r)s.opentelemetry.proto.trace.v1.Span.Event.encode(e.events[r],t.uint32(90).fork()).ldelim();if(null!=e.droppedEventsCount&&Object.hasOwnProperty.call(e,"droppedEventsCount")&&t.uint32(96).uint32(e.droppedEventsCount),null!=e.links&&e.links.length)for(var r=0;r<e.links.length;++r)s.opentelemetry.proto.trace.v1.Span.Link.encode(e.links[r],t.uint32(106).fork()).ldelim();return null!=e.droppedLinksCount&&Object.hasOwnProperty.call(e,"droppedLinksCount")&&t.uint32(112).uint32(e.droppedLinksCount),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&s.opentelemetry.proto.trace.v1.Status.encode(e.status,t.uint32(122).fork()).ldelim(),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.trace.v1.Span;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.traceId=e.bytes();break;case 2:n.spanId=e.bytes();break;case 3:n.traceState=e.string();break;case 4:n.parentSpanId=e.bytes();break;case 5:n.name=e.string();break;case 6:n.kind=e.int32();break;case 7:n.startTimeUnixNano=e.fixed64();break;case 8:n.endTimeUnixNano=e.fixed64();break;case 9:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 10:n.droppedAttributesCount=e.uint32();break;case 11:n.events&&n.events.length||(n.events=[]),n.events.push(s.opentelemetry.proto.trace.v1.Span.Event.decode(e,e.uint32()));break;case 12:n.droppedEventsCount=e.uint32();break;case 13:n.links&&n.links.length||(n.links=[]),n.links.push(s.opentelemetry.proto.trace.v1.Span.Link.decode(e,e.uint32()));break;case 14:n.droppedLinksCount=e.uint32();break;case 15:n.status=s.opentelemetry.proto.trace.v1.Status.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},r.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},r.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.traceId&&e.hasOwnProperty("traceId")&&!(e.traceId&&"number"==typeof e.traceId.length||a.isString(e.traceId)))return"traceId: buffer expected";if(null!=e.spanId&&e.hasOwnProperty("spanId")&&!(e.spanId&&"number"==typeof e.spanId.length||a.isString(e.spanId)))return"spanId: buffer expected";if(null!=e.traceState&&e.hasOwnProperty("traceState")&&!a.isString(e.traceState))return"traceState: string expected";if(null!=e.parentSpanId&&e.hasOwnProperty("parentSpanId")&&!(e.parentSpanId&&"number"==typeof e.parentSpanId.length||a.isString(e.parentSpanId)))return"parentSpanId: buffer expected";if(null!=e.name&&e.hasOwnProperty("name")&&!a.isString(e.name))return"name: string expected";if(null!=e.kind&&e.hasOwnProperty("kind"))switch(e.kind){default:return"kind: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!a.isInteger(e.startTimeUnixNano)&&!(e.startTimeUnixNano&&a.isInteger(e.startTimeUnixNano.low)&&a.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.endTimeUnixNano&&e.hasOwnProperty("endTimeUnixNano")&&!a.isInteger(e.endTimeUnixNano)&&!(e.endTimeUnixNano&&a.isInteger(e.endTimeUnixNano.low)&&a.isInteger(e.endTimeUnixNano.high)))return"endTimeUnixNano: integer|Long expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}if(null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!a.isInteger(e.droppedAttributesCount))return"droppedAttributesCount: integer expected";if(null!=e.events&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var r=s.opentelemetry.proto.trace.v1.Span.Event.verify(e.events[t]);if(r)return"events."+r}}if(null!=e.droppedEventsCount&&e.hasOwnProperty("droppedEventsCount")&&!a.isInteger(e.droppedEventsCount))return"droppedEventsCount: integer expected";if(null!=e.links&&e.hasOwnProperty("links")){if(!Array.isArray(e.links))return"links: array expected";for(var t=0;t<e.links.length;++t){var r=s.opentelemetry.proto.trace.v1.Span.Link.verify(e.links[t]);if(r)return"links."+r}}if(null!=e.droppedLinksCount&&e.hasOwnProperty("droppedLinksCount")&&!a.isInteger(e.droppedLinksCount))return"droppedLinksCount: integer expected";if(null!=e.status&&e.hasOwnProperty("status")){var r=s.opentelemetry.proto.trace.v1.Status.verify(e.status);if(r)return"status."+r}return null},r.fromObject=function(e){if(e instanceof s.opentelemetry.proto.trace.v1.Span)return e;var t=new s.opentelemetry.proto.trace.v1.Span;switch(null!=e.traceId&&("string"==typeof e.traceId?a.base64.decode(e.traceId,t.traceId=a.newBuffer(a.base64.length(e.traceId)),0):e.traceId.length>=0&&(t.traceId=e.traceId)),null!=e.spanId&&("string"==typeof e.spanId?a.base64.decode(e.spanId,t.spanId=a.newBuffer(a.base64.length(e.spanId)),0):e.spanId.length>=0&&(t.spanId=e.spanId)),null!=e.traceState&&(t.traceState=String(e.traceState)),null!=e.parentSpanId&&("string"==typeof e.parentSpanId?a.base64.decode(e.parentSpanId,t.parentSpanId=a.newBuffer(a.base64.length(e.parentSpanId)),0):e.parentSpanId.length>=0&&(t.parentSpanId=e.parentSpanId)),null!=e.name&&(t.name=String(e.name)),e.kind){default:"number"==typeof e.kind&&(t.kind=e.kind);break;case"SPAN_KIND_UNSPECIFIED":case 0:t.kind=0;break;case"SPAN_KIND_INTERNAL":case 1:t.kind=1;break;case"SPAN_KIND_SERVER":case 2:t.kind=2;break;case"SPAN_KIND_CLIENT":case 3:t.kind=3;break;case"SPAN_KIND_PRODUCER":case 4:t.kind=4;break;case"SPAN_KIND_CONSUMER":case 5:t.kind=5}if(null!=e.startTimeUnixNano&&(a.Long?(t.startTimeUnixNano=a.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.endTimeUnixNano&&(a.Long?(t.endTimeUnixNano=a.Long.fromValue(e.endTimeUnixNano)).unsigned=!1:"string"==typeof e.endTimeUnixNano?t.endTimeUnixNano=parseInt(e.endTimeUnixNano,10):"number"==typeof e.endTimeUnixNano?t.endTimeUnixNano=e.endTimeUnixNano:"object"==typeof e.endTimeUnixNano&&(t.endTimeUnixNano=new a.LongBits(e.endTimeUnixNano.low>>>0,e.endTimeUnixNano.high>>>0).toNumber())),e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),e.events){if(!Array.isArray(e.events))throw TypeError(".opentelemetry.proto.trace.v1.Span.events: array expected");t.events=[];for(var r=0;r<e.events.length;++r){if("object"!=typeof e.events[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.events: object expected");t.events[r]=s.opentelemetry.proto.trace.v1.Span.Event.fromObject(e.events[r])}}if(null!=e.droppedEventsCount&&(t.droppedEventsCount=e.droppedEventsCount>>>0),e.links){if(!Array.isArray(e.links))throw TypeError(".opentelemetry.proto.trace.v1.Span.links: array expected");t.links=[];for(var r=0;r<e.links.length;++r){if("object"!=typeof e.links[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.links: object expected");t.links[r]=s.opentelemetry.proto.trace.v1.Span.Link.fromObject(e.links[r])}}if(null!=e.droppedLinksCount&&(t.droppedLinksCount=e.droppedLinksCount>>>0),null!=e.status){if("object"!=typeof e.status)throw TypeError(".opentelemetry.proto.trace.v1.Span.status: object expected");t.status=s.opentelemetry.proto.trace.v1.Status.fromObject(e.status)}return t},r.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[],r.events=[],r.links=[]),t.defaults){if(t.bytes===String?r.traceId="":(r.traceId=[],t.bytes!==Array&&(r.traceId=a.newBuffer(r.traceId))),t.bytes===String?r.spanId="":(r.spanId=[],t.bytes!==Array&&(r.spanId=a.newBuffer(r.spanId))),r.traceState="",t.bytes===String?r.parentSpanId="":(r.parentSpanId=[],t.bytes!==Array&&(r.parentSpanId=a.newBuffer(r.parentSpanId))),r.name="",r.kind=t.enums===String?"SPAN_KIND_UNSPECIFIED":0,a.Long){var n=new a.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;if(a.Long){var n=new a.Long(0,0,!1);r.endTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.endTimeUnixNano=t.longs===String?"0":0;r.droppedAttributesCount=0,r.droppedEventsCount=0,r.droppedLinksCount=0,r.status=null}if(null!=e.traceId&&e.hasOwnProperty("traceId")&&(r.traceId=t.bytes===String?a.base64.encode(e.traceId,0,e.traceId.length):t.bytes===Array?Array.prototype.slice.call(e.traceId):e.traceId),null!=e.spanId&&e.hasOwnProperty("spanId")&&(r.spanId=t.bytes===String?a.base64.encode(e.spanId,0,e.spanId.length):t.bytes===Array?Array.prototype.slice.call(e.spanId):e.spanId),null!=e.traceState&&e.hasOwnProperty("traceState")&&(r.traceState=e.traceState),null!=e.parentSpanId&&e.hasOwnProperty("parentSpanId")&&(r.parentSpanId=t.bytes===String?a.base64.encode(e.parentSpanId,0,e.parentSpanId.length):t.bytes===Array?Array.prototype.slice.call(e.parentSpanId):e.parentSpanId),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.kind&&e.hasOwnProperty("kind")&&(r.kind=t.enums===String?void 0===s.opentelemetry.proto.trace.v1.Span.SpanKind[e.kind]?e.kind:s.opentelemetry.proto.trace.v1.Span.SpanKind[e.kind]:e.kind),null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.endTimeUnixNano&&e.hasOwnProperty("endTimeUnixNano")&&("number"==typeof e.endTimeUnixNano?r.endTimeUnixNano=t.longs===String?String(e.endTimeUnixNano):e.endTimeUnixNano:r.endTimeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.endTimeUnixNano):t.longs===Number?new a.LongBits(e.endTimeUnixNano.low>>>0,e.endTimeUnixNano.high>>>0).toNumber():e.endTimeUnixNano),e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}if(null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),e.events&&e.events.length){r.events=[];for(var o=0;o<e.events.length;++o)r.events[o]=s.opentelemetry.proto.trace.v1.Span.Event.toObject(e.events[o],t)}if(null!=e.droppedEventsCount&&e.hasOwnProperty("droppedEventsCount")&&(r.droppedEventsCount=e.droppedEventsCount),e.links&&e.links.length){r.links=[];for(var o=0;o<e.links.length;++o)r.links[o]=s.opentelemetry.proto.trace.v1.Span.Link.toObject(e.links[o],t)}return null!=e.droppedLinksCount&&e.hasOwnProperty("droppedLinksCount")&&(r.droppedLinksCount=e.droppedLinksCount),null!=e.status&&e.hasOwnProperty("status")&&(r.status=s.opentelemetry.proto.trace.v1.Status.toObject(e.status,t)),r},r.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},r.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.Span"},(t=Object.create(e={}))[e[0]="SPAN_KIND_UNSPECIFIED"]=0,t[e[1]="SPAN_KIND_INTERNAL"]=1,t[e[2]="SPAN_KIND_SERVER"]=2,t[e[3]="SPAN_KIND_CLIENT"]=3,t[e[4]="SPAN_KIND_PRODUCER"]=4,t[e[5]="SPAN_KIND_CONSUMER"]=5,r.SpanKind=t,r.Event=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timeUnixNano=null,e.prototype.name=null,e.prototype.attributes=a.emptyArray,e.prototype.droppedAttributesCount=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(9).fixed64(e.timeUnixNano),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(26).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(32).uint32(e.droppedAttributesCount),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.trace.v1.Span.Event;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.timeUnixNano=e.fixed64();break;case 2:n.name=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 4:n.droppedAttributesCount=e.uint32();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!a.isInteger(e.timeUnixNano)&&!(e.timeUnixNano&&a.isInteger(e.timeUnixNano.low)&&a.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.name&&e.hasOwnProperty("name")&&!a.isString(e.name))return"name: string expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!a.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.trace.v1.Span.Event)return e;var t=new s.opentelemetry.proto.trace.v1.Span.Event;if(null!=e.timeUnixNano&&(a.Long?(t.timeUnixNano=a.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.name&&(t.name=String(e.name)),e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.Event.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.Event.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;r.name="",r.droppedAttributesCount=0}if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.Span.Event"},e}(),r.Link=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.traceId=null,e.prototype.spanId=null,e.prototype.traceState=null,e.prototype.attributes=a.emptyArray,e.prototype.droppedAttributesCount=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(10).bytes(e.traceId),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(18).bytes(e.spanId),null!=e.traceState&&Object.hasOwnProperty.call(e,"traceState")&&t.uint32(26).string(e.traceState),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(34).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(40).uint32(e.droppedAttributesCount),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.trace.v1.Span.Link;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.traceId=e.bytes();break;case 2:n.spanId=e.bytes();break;case 3:n.traceState=e.string();break;case 4:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 5:n.droppedAttributesCount=e.uint32();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.traceId&&e.hasOwnProperty("traceId")&&!(e.traceId&&"number"==typeof e.traceId.length||a.isString(e.traceId)))return"traceId: buffer expected";if(null!=e.spanId&&e.hasOwnProperty("spanId")&&!(e.spanId&&"number"==typeof e.spanId.length||a.isString(e.spanId)))return"spanId: buffer expected";if(null!=e.traceState&&e.hasOwnProperty("traceState")&&!a.isString(e.traceState))return"traceState: string expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!a.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.trace.v1.Span.Link)return e;var t=new s.opentelemetry.proto.trace.v1.Span.Link;if(null!=e.traceId&&("string"==typeof e.traceId?a.base64.decode(e.traceId,t.traceId=a.newBuffer(a.base64.length(e.traceId)),0):e.traceId.length>=0&&(t.traceId=e.traceId)),null!=e.spanId&&("string"==typeof e.spanId?a.base64.decode(e.spanId,t.spanId=a.newBuffer(a.base64.length(e.spanId)),0):e.spanId.length>=0&&(t.spanId=e.spanId)),null!=e.traceState&&(t.traceState=String(e.traceState)),e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.Link.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.Link.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults&&(t.bytes===String?r.traceId="":(r.traceId=[],t.bytes!==Array&&(r.traceId=a.newBuffer(r.traceId))),t.bytes===String?r.spanId="":(r.spanId=[],t.bytes!==Array&&(r.spanId=a.newBuffer(r.spanId))),r.traceState="",r.droppedAttributesCount=0),null!=e.traceId&&e.hasOwnProperty("traceId")&&(r.traceId=t.bytes===String?a.base64.encode(e.traceId,0,e.traceId.length):t.bytes===Array?Array.prototype.slice.call(e.traceId):e.traceId),null!=e.spanId&&e.hasOwnProperty("spanId")&&(r.spanId=t.bytes===String?a.base64.encode(e.spanId,0,e.spanId.length):t.bytes===Array?Array.prototype.slice.call(e.spanId):e.spanId),null!=e.traceState&&e.hasOwnProperty("traceState")&&(r.traceState=e.traceState),e.attributes&&e.attributes.length){r.attributes=[];for(var n=0;n<e.attributes.length;++n)r.attributes[n]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[n],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.Span.Link"},e}(),r}(),p.Status=function(){var e,t;function r(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return r.prototype.message=null,r.prototype.code=null,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=i.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).int32(e.code),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.trace.v1.Status;e.pos<r;){var i=e.uint32();switch(i>>>3){case 2:n.message=e.string();break;case 3:n.code=e.int32();break;default:e.skipType(7&i)}}return n},r.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},r.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message")&&!a.isString(e.message))return"message: string expected";if(null!=e.code&&e.hasOwnProperty("code"))switch(e.code){default:return"code: enum value expected";case 0:case 1:case 2:}return null},r.fromObject=function(e){if(e instanceof s.opentelemetry.proto.trace.v1.Status)return e;var t=new s.opentelemetry.proto.trace.v1.Status;switch(null!=e.message&&(t.message=String(e.message)),e.code){default:"number"==typeof e.code&&(t.code=e.code);break;case"STATUS_CODE_UNSET":case 0:t.code=0;break;case"STATUS_CODE_OK":case 1:t.code=1;break;case"STATUS_CODE_ERROR":case 2:t.code=2}return t},r.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.message="",r.code=t.enums===String?"STATUS_CODE_UNSET":0),null!=e.message&&e.hasOwnProperty("message")&&(r.message=e.message),null!=e.code&&e.hasOwnProperty("code")&&(r.code=t.enums===String?void 0===s.opentelemetry.proto.trace.v1.Status.StatusCode[e.code]?e.code:s.opentelemetry.proto.trace.v1.Status.StatusCode[e.code]:e.code),r},r.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},r.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.Status"},(t=Object.create(e={}))[e[0]="STATUS_CODE_UNSET"]=0,t[e[1]="STATUS_CODE_OK"]=1,t[e[2]="STATUS_CODE_ERROR"]=2,r.StatusCode=t,r}(),c.v1=p,e.trace=c,d={},h={},(m={}).TraceService=function(){function e(e,t,r){n.rpc.Service.call(this,e,t,r)}return(e.prototype=Object.create(n.rpc.Service.prototype)).constructor=e,e.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(e.prototype.export=function e(t,r){return this.rpcCall(e,s.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest,s.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse,t,r)},"name",{value:"Export"}),e}(),m.ExportTraceServiceRequest=function(){function e(e){if(this.resourceSpans=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceSpans=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resourceSpans&&e.resourceSpans.length)for(var r=0;r<e.resourceSpans.length;++r)s.opentelemetry.proto.trace.v1.ResourceSpans.encode(e.resourceSpans[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;e.pos<r;){var i=e.uint32();i>>>3==1?(n.resourceSpans&&n.resourceSpans.length||(n.resourceSpans=[]),n.resourceSpans.push(s.opentelemetry.proto.trace.v1.ResourceSpans.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceSpans&&e.hasOwnProperty("resourceSpans")){if(!Array.isArray(e.resourceSpans))return"resourceSpans: array expected";for(var t=0;t<e.resourceSpans.length;++t){var r=s.opentelemetry.proto.trace.v1.ResourceSpans.verify(e.resourceSpans[t]);if(r)return"resourceSpans."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest)return e;var t=new s.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;if(e.resourceSpans){if(!Array.isArray(e.resourceSpans))throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest.resourceSpans: array expected");t.resourceSpans=[];for(var r=0;r<e.resourceSpans.length;++r){if("object"!=typeof e.resourceSpans[r])throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest.resourceSpans: object expected");t.resourceSpans[r]=s.opentelemetry.proto.trace.v1.ResourceSpans.fromObject(e.resourceSpans[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceSpans=[]),e.resourceSpans&&e.resourceSpans.length){r.resourceSpans=[];for(var n=0;n<e.resourceSpans.length;++n)r.resourceSpans[n]=s.opentelemetry.proto.trace.v1.ResourceSpans.toObject(e.resourceSpans[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest"},e}(),m.ExportTraceServiceResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.partialSuccess=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.partialSuccess&&Object.hasOwnProperty.call(e,"partialSuccess")&&s.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.encode(e.partialSuccess,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse;e.pos<r;){var i=e.uint32();i>>>3==1?n.partialSuccess=s.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.decode(e,e.uint32()):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")){var t=s.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.verify(e.partialSuccess);if(t)return"partialSuccess."+t}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse)return e;var t=new s.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse;if(null!=e.partialSuccess){if("object"!=typeof e.partialSuccess)throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse.partialSuccess: object expected");t.partialSuccess=s.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.fromObject(e.partialSuccess)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.partialSuccess=null),null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")&&(r.partialSuccess=s.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.toObject(e.partialSuccess,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse"},e}(),m.ExportTracePartialSuccess=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rejectedSpans=null,e.prototype.errorMessage=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.rejectedSpans&&Object.hasOwnProperty.call(e,"rejectedSpans")&&t.uint32(8).int64(e.rejectedSpans),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.rejectedSpans=e.int64();break;case 2:n.errorMessage=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rejectedSpans&&e.hasOwnProperty("rejectedSpans")&&!a.isInteger(e.rejectedSpans)&&!(e.rejectedSpans&&a.isInteger(e.rejectedSpans.low)&&a.isInteger(e.rejectedSpans.high))?"rejectedSpans: integer|Long expected":null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&!a.isString(e.errorMessage)?"errorMessage: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess)return e;var t=new s.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess;return null!=e.rejectedSpans&&(a.Long?(t.rejectedSpans=a.Long.fromValue(e.rejectedSpans)).unsigned=!1:"string"==typeof e.rejectedSpans?t.rejectedSpans=parseInt(e.rejectedSpans,10):"number"==typeof e.rejectedSpans?t.rejectedSpans=e.rejectedSpans:"object"==typeof e.rejectedSpans&&(t.rejectedSpans=new a.LongBits(e.rejectedSpans.low>>>0,e.rejectedSpans.high>>>0).toNumber())),null!=e.errorMessage&&(t.errorMessage=String(e.errorMessage)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.rejectedSpans=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.rejectedSpans=t.longs===String?"0":0;r.errorMessage=""}return null!=e.rejectedSpans&&e.hasOwnProperty("rejectedSpans")&&("number"==typeof e.rejectedSpans?r.rejectedSpans=t.longs===String?String(e.rejectedSpans):e.rejectedSpans:r.rejectedSpans=t.longs===String?a.Long.prototype.toString.call(e.rejectedSpans):t.longs===Number?new a.LongBits(e.rejectedSpans.low>>>0,e.rejectedSpans.high>>>0).toNumber():e.rejectedSpans),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(r.errorMessage=e.errorMessage),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess"},e}(),h.v1=m,d.trace=h,f={},(g={}).MetricsService=function(){function e(e,t,r){n.rpc.Service.call(this,e,t,r)}return(e.prototype=Object.create(n.rpc.Service.prototype)).constructor=e,e.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(e.prototype.export=function e(t,r){return this.rpcCall(e,s.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest,s.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse,t,r)},"name",{value:"Export"}),e}(),g.ExportMetricsServiceRequest=function(){function e(e){if(this.resourceMetrics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceMetrics=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resourceMetrics&&e.resourceMetrics.length)for(var r=0;r<e.resourceMetrics.length;++r)s.opentelemetry.proto.metrics.v1.ResourceMetrics.encode(e.resourceMetrics[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;e.pos<r;){var i=e.uint32();i>>>3==1?(n.resourceMetrics&&n.resourceMetrics.length||(n.resourceMetrics=[]),n.resourceMetrics.push(s.opentelemetry.proto.metrics.v1.ResourceMetrics.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceMetrics&&e.hasOwnProperty("resourceMetrics")){if(!Array.isArray(e.resourceMetrics))return"resourceMetrics: array expected";for(var t=0;t<e.resourceMetrics.length;++t){var r=s.opentelemetry.proto.metrics.v1.ResourceMetrics.verify(e.resourceMetrics[t]);if(r)return"resourceMetrics."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest)return e;var t=new s.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;if(e.resourceMetrics){if(!Array.isArray(e.resourceMetrics))throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest.resourceMetrics: array expected");t.resourceMetrics=[];for(var r=0;r<e.resourceMetrics.length;++r){if("object"!=typeof e.resourceMetrics[r])throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest.resourceMetrics: object expected");t.resourceMetrics[r]=s.opentelemetry.proto.metrics.v1.ResourceMetrics.fromObject(e.resourceMetrics[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceMetrics=[]),e.resourceMetrics&&e.resourceMetrics.length){r.resourceMetrics=[];for(var n=0;n<e.resourceMetrics.length;++n)r.resourceMetrics[n]=s.opentelemetry.proto.metrics.v1.ResourceMetrics.toObject(e.resourceMetrics[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest"},e}(),g.ExportMetricsServiceResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.partialSuccess=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.partialSuccess&&Object.hasOwnProperty.call(e,"partialSuccess")&&s.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.encode(e.partialSuccess,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse;e.pos<r;){var i=e.uint32();i>>>3==1?n.partialSuccess=s.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.decode(e,e.uint32()):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")){var t=s.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.verify(e.partialSuccess);if(t)return"partialSuccess."+t}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse)return e;var t=new s.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse;if(null!=e.partialSuccess){if("object"!=typeof e.partialSuccess)throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse.partialSuccess: object expected");t.partialSuccess=s.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.fromObject(e.partialSuccess)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.partialSuccess=null),null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")&&(r.partialSuccess=s.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.toObject(e.partialSuccess,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse"},e}(),g.ExportMetricsPartialSuccess=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rejectedDataPoints=null,e.prototype.errorMessage=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.rejectedDataPoints&&Object.hasOwnProperty.call(e,"rejectedDataPoints")&&t.uint32(8).int64(e.rejectedDataPoints),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.rejectedDataPoints=e.int64();break;case 2:n.errorMessage=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rejectedDataPoints&&e.hasOwnProperty("rejectedDataPoints")&&!a.isInteger(e.rejectedDataPoints)&&!(e.rejectedDataPoints&&a.isInteger(e.rejectedDataPoints.low)&&a.isInteger(e.rejectedDataPoints.high))?"rejectedDataPoints: integer|Long expected":null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&!a.isString(e.errorMessage)?"errorMessage: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess)return e;var t=new s.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess;return null!=e.rejectedDataPoints&&(a.Long?(t.rejectedDataPoints=a.Long.fromValue(e.rejectedDataPoints)).unsigned=!1:"string"==typeof e.rejectedDataPoints?t.rejectedDataPoints=parseInt(e.rejectedDataPoints,10):"number"==typeof e.rejectedDataPoints?t.rejectedDataPoints=e.rejectedDataPoints:"object"==typeof e.rejectedDataPoints&&(t.rejectedDataPoints=new a.LongBits(e.rejectedDataPoints.low>>>0,e.rejectedDataPoints.high>>>0).toNumber())),null!=e.errorMessage&&(t.errorMessage=String(e.errorMessage)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.rejectedDataPoints=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.rejectedDataPoints=t.longs===String?"0":0;r.errorMessage=""}return null!=e.rejectedDataPoints&&e.hasOwnProperty("rejectedDataPoints")&&("number"==typeof e.rejectedDataPoints?r.rejectedDataPoints=t.longs===String?String(e.rejectedDataPoints):e.rejectedDataPoints:r.rejectedDataPoints=t.longs===String?a.Long.prototype.toString.call(e.rejectedDataPoints):t.longs===Number?new a.LongBits(e.rejectedDataPoints.low>>>0,e.rejectedDataPoints.high>>>0).toNumber():e.rejectedDataPoints),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(r.errorMessage=e.errorMessage),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess"},e}(),f.v1=g,d.metrics=f,y={},(v={}).LogsService=function(){function e(e,t,r){n.rpc.Service.call(this,e,t,r)}return(e.prototype=Object.create(n.rpc.Service.prototype)).constructor=e,e.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(e.prototype.export=function e(t,r){return this.rpcCall(e,s.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest,s.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse,t,r)},"name",{value:"Export"}),e}(),v.ExportLogsServiceRequest=function(){function e(e){if(this.resourceLogs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceLogs=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resourceLogs&&e.resourceLogs.length)for(var r=0;r<e.resourceLogs.length;++r)s.opentelemetry.proto.logs.v1.ResourceLogs.encode(e.resourceLogs[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;e.pos<r;){var i=e.uint32();i>>>3==1?(n.resourceLogs&&n.resourceLogs.length||(n.resourceLogs=[]),n.resourceLogs.push(s.opentelemetry.proto.logs.v1.ResourceLogs.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceLogs&&e.hasOwnProperty("resourceLogs")){if(!Array.isArray(e.resourceLogs))return"resourceLogs: array expected";for(var t=0;t<e.resourceLogs.length;++t){var r=s.opentelemetry.proto.logs.v1.ResourceLogs.verify(e.resourceLogs[t]);if(r)return"resourceLogs."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest)return e;var t=new s.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;if(e.resourceLogs){if(!Array.isArray(e.resourceLogs))throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest.resourceLogs: array expected");t.resourceLogs=[];for(var r=0;r<e.resourceLogs.length;++r){if("object"!=typeof e.resourceLogs[r])throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest.resourceLogs: object expected");t.resourceLogs[r]=s.opentelemetry.proto.logs.v1.ResourceLogs.fromObject(e.resourceLogs[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceLogs=[]),e.resourceLogs&&e.resourceLogs.length){r.resourceLogs=[];for(var n=0;n<e.resourceLogs.length;++n)r.resourceLogs[n]=s.opentelemetry.proto.logs.v1.ResourceLogs.toObject(e.resourceLogs[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest"},e}(),v.ExportLogsServiceResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.partialSuccess=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.partialSuccess&&Object.hasOwnProperty.call(e,"partialSuccess")&&s.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.encode(e.partialSuccess,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse;e.pos<r;){var i=e.uint32();i>>>3==1?n.partialSuccess=s.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.decode(e,e.uint32()):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")){var t=s.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.verify(e.partialSuccess);if(t)return"partialSuccess."+t}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse)return e;var t=new s.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse;if(null!=e.partialSuccess){if("object"!=typeof e.partialSuccess)throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse.partialSuccess: object expected");t.partialSuccess=s.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.fromObject(e.partialSuccess)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.partialSuccess=null),null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")&&(r.partialSuccess=s.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.toObject(e.partialSuccess,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse"},e}(),v.ExportLogsPartialSuccess=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rejectedLogRecords=null,e.prototype.errorMessage=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.rejectedLogRecords&&Object.hasOwnProperty.call(e,"rejectedLogRecords")&&t.uint32(8).int64(e.rejectedLogRecords),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.rejectedLogRecords=e.int64();break;case 2:n.errorMessage=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rejectedLogRecords&&e.hasOwnProperty("rejectedLogRecords")&&!a.isInteger(e.rejectedLogRecords)&&!(e.rejectedLogRecords&&a.isInteger(e.rejectedLogRecords.low)&&a.isInteger(e.rejectedLogRecords.high))?"rejectedLogRecords: integer|Long expected":null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&!a.isString(e.errorMessage)?"errorMessage: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess)return e;var t=new s.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess;return null!=e.rejectedLogRecords&&(a.Long?(t.rejectedLogRecords=a.Long.fromValue(e.rejectedLogRecords)).unsigned=!1:"string"==typeof e.rejectedLogRecords?t.rejectedLogRecords=parseInt(e.rejectedLogRecords,10):"number"==typeof e.rejectedLogRecords?t.rejectedLogRecords=e.rejectedLogRecords:"object"==typeof e.rejectedLogRecords&&(t.rejectedLogRecords=new a.LongBits(e.rejectedLogRecords.low>>>0,e.rejectedLogRecords.high>>>0).toNumber())),null!=e.errorMessage&&(t.errorMessage=String(e.errorMessage)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.rejectedLogRecords=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.rejectedLogRecords=t.longs===String?"0":0;r.errorMessage=""}return null!=e.rejectedLogRecords&&e.hasOwnProperty("rejectedLogRecords")&&("number"==typeof e.rejectedLogRecords?r.rejectedLogRecords=t.longs===String?String(e.rejectedLogRecords):e.rejectedLogRecords:r.rejectedLogRecords=t.longs===String?a.Long.prototype.toString.call(e.rejectedLogRecords):t.longs===Number?new a.LongBits(e.rejectedLogRecords.low>>>0,e.rejectedLogRecords.high>>>0).toNumber():e.rejectedLogRecords),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(r.errorMessage=e.errorMessage),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess"},e}(),y.v1=v,d.logs=y,e.collector=d,b={},(_={}).MetricsData=function(){function e(e){if(this.resourceMetrics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceMetrics=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resourceMetrics&&e.resourceMetrics.length)for(var r=0;r<e.resourceMetrics.length;++r)s.opentelemetry.proto.metrics.v1.ResourceMetrics.encode(e.resourceMetrics[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.MetricsData;e.pos<r;){var i=e.uint32();i>>>3==1?(n.resourceMetrics&&n.resourceMetrics.length||(n.resourceMetrics=[]),n.resourceMetrics.push(s.opentelemetry.proto.metrics.v1.ResourceMetrics.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceMetrics&&e.hasOwnProperty("resourceMetrics")){if(!Array.isArray(e.resourceMetrics))return"resourceMetrics: array expected";for(var t=0;t<e.resourceMetrics.length;++t){var r=s.opentelemetry.proto.metrics.v1.ResourceMetrics.verify(e.resourceMetrics[t]);if(r)return"resourceMetrics."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.MetricsData)return e;var t=new s.opentelemetry.proto.metrics.v1.MetricsData;if(e.resourceMetrics){if(!Array.isArray(e.resourceMetrics))throw TypeError(".opentelemetry.proto.metrics.v1.MetricsData.resourceMetrics: array expected");t.resourceMetrics=[];for(var r=0;r<e.resourceMetrics.length;++r){if("object"!=typeof e.resourceMetrics[r])throw TypeError(".opentelemetry.proto.metrics.v1.MetricsData.resourceMetrics: object expected");t.resourceMetrics[r]=s.opentelemetry.proto.metrics.v1.ResourceMetrics.fromObject(e.resourceMetrics[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceMetrics=[]),e.resourceMetrics&&e.resourceMetrics.length){r.resourceMetrics=[];for(var n=0;n<e.resourceMetrics.length;++n)r.resourceMetrics[n]=s.opentelemetry.proto.metrics.v1.ResourceMetrics.toObject(e.resourceMetrics[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.MetricsData"},e}(),_.ResourceMetrics=function(){function e(e){if(this.scopeMetrics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource=null,e.prototype.scopeMetrics=a.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resource&&Object.hasOwnProperty.call(e,"resource")&&s.opentelemetry.proto.resource.v1.Resource.encode(e.resource,t.uint32(10).fork()).ldelim(),null!=e.scopeMetrics&&e.scopeMetrics.length)for(var r=0;r<e.scopeMetrics.length;++r)s.opentelemetry.proto.metrics.v1.ScopeMetrics.encode(e.scopeMetrics[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.ResourceMetrics;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.resource=s.opentelemetry.proto.resource.v1.Resource.decode(e,e.uint32());break;case 2:n.scopeMetrics&&n.scopeMetrics.length||(n.scopeMetrics=[]),n.scopeMetrics.push(s.opentelemetry.proto.metrics.v1.ScopeMetrics.decode(e,e.uint32()));break;case 3:n.schemaUrl=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resource&&e.hasOwnProperty("resource")){var t=s.opentelemetry.proto.resource.v1.Resource.verify(e.resource);if(t)return"resource."+t}if(null!=e.scopeMetrics&&e.hasOwnProperty("scopeMetrics")){if(!Array.isArray(e.scopeMetrics))return"scopeMetrics: array expected";for(var r=0;r<e.scopeMetrics.length;++r){var t=s.opentelemetry.proto.metrics.v1.ScopeMetrics.verify(e.scopeMetrics[r]);if(t)return"scopeMetrics."+t}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!a.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.ResourceMetrics)return e;var t=new s.opentelemetry.proto.metrics.v1.ResourceMetrics;if(null!=e.resource){if("object"!=typeof e.resource)throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.resource: object expected");t.resource=s.opentelemetry.proto.resource.v1.Resource.fromObject(e.resource)}if(e.scopeMetrics){if(!Array.isArray(e.scopeMetrics))throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.scopeMetrics: array expected");t.scopeMetrics=[];for(var r=0;r<e.scopeMetrics.length;++r){if("object"!=typeof e.scopeMetrics[r])throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.scopeMetrics: object expected");t.scopeMetrics[r]=s.opentelemetry.proto.metrics.v1.ScopeMetrics.fromObject(e.scopeMetrics[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.scopeMetrics=[]),t.defaults&&(r.resource=null,r.schemaUrl=""),null!=e.resource&&e.hasOwnProperty("resource")&&(r.resource=s.opentelemetry.proto.resource.v1.Resource.toObject(e.resource,t)),e.scopeMetrics&&e.scopeMetrics.length){r.scopeMetrics=[];for(var n=0;n<e.scopeMetrics.length;++n)r.scopeMetrics[n]=s.opentelemetry.proto.metrics.v1.ScopeMetrics.toObject(e.scopeMetrics[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ResourceMetrics"},e}(),_.ScopeMetrics=function(){function e(e){if(this.metrics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scope=null,e.prototype.metrics=a.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.scope&&Object.hasOwnProperty.call(e,"scope")&&s.opentelemetry.proto.common.v1.InstrumentationScope.encode(e.scope,t.uint32(10).fork()).ldelim(),null!=e.metrics&&e.metrics.length)for(var r=0;r<e.metrics.length;++r)s.opentelemetry.proto.metrics.v1.Metric.encode(e.metrics[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.ScopeMetrics;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.decode(e,e.uint32());break;case 2:n.metrics&&n.metrics.length||(n.metrics=[]),n.metrics.push(s.opentelemetry.proto.metrics.v1.Metric.decode(e,e.uint32()));break;case 3:n.schemaUrl=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.scope&&e.hasOwnProperty("scope")){var t=s.opentelemetry.proto.common.v1.InstrumentationScope.verify(e.scope);if(t)return"scope."+t}if(null!=e.metrics&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var r=0;r<e.metrics.length;++r){var t=s.opentelemetry.proto.metrics.v1.Metric.verify(e.metrics[r]);if(t)return"metrics."+t}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!a.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.ScopeMetrics)return e;var t=new s.opentelemetry.proto.metrics.v1.ScopeMetrics;if(null!=e.scope){if("object"!=typeof e.scope)throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.scope: object expected");t.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(e.scope)}if(e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.metrics: array expected");t.metrics=[];for(var r=0;r<e.metrics.length;++r){if("object"!=typeof e.metrics[r])throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.metrics: object expected");t.metrics[r]=s.opentelemetry.proto.metrics.v1.Metric.fromObject(e.metrics[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.metrics=[]),t.defaults&&(r.scope=null,r.schemaUrl=""),null!=e.scope&&e.hasOwnProperty("scope")&&(r.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.toObject(e.scope,t)),e.metrics&&e.metrics.length){r.metrics=[];for(var n=0;n<e.metrics.length;++n)r.metrics[n]=s.opentelemetry.proto.metrics.v1.Metric.toObject(e.metrics[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ScopeMetrics"},e}(),_.Metric=function(){var e;function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.name=null,t.prototype.description=null,t.prototype.unit=null,t.prototype.gauge=null,t.prototype.sum=null,t.prototype.histogram=null,t.prototype.exponentialHistogram=null,t.prototype.summary=null,Object.defineProperty(t.prototype,"data",{get:a.oneOfGetter(e=["gauge","sum","histogram","exponentialHistogram","summary"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(26).string(e.unit),null!=e.gauge&&Object.hasOwnProperty.call(e,"gauge")&&s.opentelemetry.proto.metrics.v1.Gauge.encode(e.gauge,t.uint32(42).fork()).ldelim(),null!=e.sum&&Object.hasOwnProperty.call(e,"sum")&&s.opentelemetry.proto.metrics.v1.Sum.encode(e.sum,t.uint32(58).fork()).ldelim(),null!=e.histogram&&Object.hasOwnProperty.call(e,"histogram")&&s.opentelemetry.proto.metrics.v1.Histogram.encode(e.histogram,t.uint32(74).fork()).ldelim(),null!=e.exponentialHistogram&&Object.hasOwnProperty.call(e,"exponentialHistogram")&&s.opentelemetry.proto.metrics.v1.ExponentialHistogram.encode(e.exponentialHistogram,t.uint32(82).fork()).ldelim(),null!=e.summary&&Object.hasOwnProperty.call(e,"summary")&&s.opentelemetry.proto.metrics.v1.Summary.encode(e.summary,t.uint32(90).fork()).ldelim(),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.Metric;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.name=e.string();break;case 2:n.description=e.string();break;case 3:n.unit=e.string();break;case 5:n.gauge=s.opentelemetry.proto.metrics.v1.Gauge.decode(e,e.uint32());break;case 7:n.sum=s.opentelemetry.proto.metrics.v1.Sum.decode(e,e.uint32());break;case 9:n.histogram=s.opentelemetry.proto.metrics.v1.Histogram.decode(e,e.uint32());break;case 10:n.exponentialHistogram=s.opentelemetry.proto.metrics.v1.ExponentialHistogram.decode(e,e.uint32());break;case 11:n.summary=s.opentelemetry.proto.metrics.v1.Summary.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.name&&e.hasOwnProperty("name")&&!a.isString(e.name))return"name: string expected";if(null!=e.description&&e.hasOwnProperty("description")&&!a.isString(e.description))return"description: string expected";if(null!=e.unit&&e.hasOwnProperty("unit")&&!a.isString(e.unit))return"unit: string expected";if(null!=e.gauge&&e.hasOwnProperty("gauge")){t.data=1;var r=s.opentelemetry.proto.metrics.v1.Gauge.verify(e.gauge);if(r)return"gauge."+r}if(null!=e.sum&&e.hasOwnProperty("sum")){if(1===t.data)return"data: multiple values";t.data=1;var r=s.opentelemetry.proto.metrics.v1.Sum.verify(e.sum);if(r)return"sum."+r}if(null!=e.histogram&&e.hasOwnProperty("histogram")){if(1===t.data)return"data: multiple values";t.data=1;var r=s.opentelemetry.proto.metrics.v1.Histogram.verify(e.histogram);if(r)return"histogram."+r}if(null!=e.exponentialHistogram&&e.hasOwnProperty("exponentialHistogram")){if(1===t.data)return"data: multiple values";t.data=1;var r=s.opentelemetry.proto.metrics.v1.ExponentialHistogram.verify(e.exponentialHistogram);if(r)return"exponentialHistogram."+r}if(null!=e.summary&&e.hasOwnProperty("summary")){if(1===t.data)return"data: multiple values";t.data=1;var r=s.opentelemetry.proto.metrics.v1.Summary.verify(e.summary);if(r)return"summary."+r}return null},t.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.Metric)return e;var t=new s.opentelemetry.proto.metrics.v1.Metric;if(null!=e.name&&(t.name=String(e.name)),null!=e.description&&(t.description=String(e.description)),null!=e.unit&&(t.unit=String(e.unit)),null!=e.gauge){if("object"!=typeof e.gauge)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.gauge: object expected");t.gauge=s.opentelemetry.proto.metrics.v1.Gauge.fromObject(e.gauge)}if(null!=e.sum){if("object"!=typeof e.sum)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.sum: object expected");t.sum=s.opentelemetry.proto.metrics.v1.Sum.fromObject(e.sum)}if(null!=e.histogram){if("object"!=typeof e.histogram)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.histogram: object expected");t.histogram=s.opentelemetry.proto.metrics.v1.Histogram.fromObject(e.histogram)}if(null!=e.exponentialHistogram){if("object"!=typeof e.exponentialHistogram)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.exponentialHistogram: object expected");t.exponentialHistogram=s.opentelemetry.proto.metrics.v1.ExponentialHistogram.fromObject(e.exponentialHistogram)}if(null!=e.summary){if("object"!=typeof e.summary)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.summary: object expected");t.summary=s.opentelemetry.proto.metrics.v1.Summary.fromObject(e.summary)}return t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.name="",r.description="",r.unit=""),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.description&&e.hasOwnProperty("description")&&(r.description=e.description),null!=e.unit&&e.hasOwnProperty("unit")&&(r.unit=e.unit),null!=e.gauge&&e.hasOwnProperty("gauge")&&(r.gauge=s.opentelemetry.proto.metrics.v1.Gauge.toObject(e.gauge,t),t.oneofs&&(r.data="gauge")),null!=e.sum&&e.hasOwnProperty("sum")&&(r.sum=s.opentelemetry.proto.metrics.v1.Sum.toObject(e.sum,t),t.oneofs&&(r.data="sum")),null!=e.histogram&&e.hasOwnProperty("histogram")&&(r.histogram=s.opentelemetry.proto.metrics.v1.Histogram.toObject(e.histogram,t),t.oneofs&&(r.data="histogram")),null!=e.exponentialHistogram&&e.hasOwnProperty("exponentialHistogram")&&(r.exponentialHistogram=s.opentelemetry.proto.metrics.v1.ExponentialHistogram.toObject(e.exponentialHistogram,t),t.oneofs&&(r.data="exponentialHistogram")),null!=e.summary&&e.hasOwnProperty("summary")&&(r.summary=s.opentelemetry.proto.metrics.v1.Summary.toObject(e.summary,t),t.oneofs&&(r.data="summary")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Metric"},t}(),_.Gauge=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)s.opentelemetry.proto.metrics.v1.NumberDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.Gauge;e.pos<r;){var i=e.uint32();i>>>3==1?(n.dataPoints&&n.dataPoints.length||(n.dataPoints=[]),n.dataPoints.push(s.opentelemetry.proto.metrics.v1.NumberDataPoint.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=s.opentelemetry.proto.metrics.v1.NumberDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.Gauge)return e;var t=new s.opentelemetry.proto.metrics.v1.Gauge;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Gauge.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.Gauge.dataPoints: object expected");t.dataPoints[r]=s.opentelemetry.proto.metrics.v1.NumberDataPoint.fromObject(e.dataPoints[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=s.opentelemetry.proto.metrics.v1.NumberDataPoint.toObject(e.dataPoints[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Gauge"},e}(),_.Sum=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=a.emptyArray,e.prototype.aggregationTemporality=null,e.prototype.isMonotonic=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)s.opentelemetry.proto.metrics.v1.NumberDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return null!=e.aggregationTemporality&&Object.hasOwnProperty.call(e,"aggregationTemporality")&&t.uint32(16).int32(e.aggregationTemporality),null!=e.isMonotonic&&Object.hasOwnProperty.call(e,"isMonotonic")&&t.uint32(24).bool(e.isMonotonic),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.Sum;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.dataPoints&&n.dataPoints.length||(n.dataPoints=[]),n.dataPoints.push(s.opentelemetry.proto.metrics.v1.NumberDataPoint.decode(e,e.uint32()));break;case 2:n.aggregationTemporality=e.int32();break;case 3:n.isMonotonic=e.bool();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=s.opentelemetry.proto.metrics.v1.NumberDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}if(null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality"))switch(e.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:}return null!=e.isMonotonic&&e.hasOwnProperty("isMonotonic")&&"boolean"!=typeof e.isMonotonic?"isMonotonic: boolean expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.Sum)return e;var t=new s.opentelemetry.proto.metrics.v1.Sum;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Sum.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.Sum.dataPoints: object expected");t.dataPoints[r]=s.opentelemetry.proto.metrics.v1.NumberDataPoint.fromObject(e.dataPoints[r])}}switch(e.aggregationTemporality){default:"number"==typeof e.aggregationTemporality&&(t.aggregationTemporality=e.aggregationTemporality);break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:t.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:t.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:t.aggregationTemporality=2}return null!=e.isMonotonic&&(t.isMonotonic=!!e.isMonotonic),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),t.defaults&&(r.aggregationTemporality=t.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0,r.isMonotonic=!1),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=s.opentelemetry.proto.metrics.v1.NumberDataPoint.toObject(e.dataPoints[n],t)}return null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality")&&(r.aggregationTemporality=t.enums===String?void 0===s.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]?e.aggregationTemporality:s.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]:e.aggregationTemporality),null!=e.isMonotonic&&e.hasOwnProperty("isMonotonic")&&(r.isMonotonic=e.isMonotonic),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Sum"},e}(),_.Histogram=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=a.emptyArray,e.prototype.aggregationTemporality=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)s.opentelemetry.proto.metrics.v1.HistogramDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return null!=e.aggregationTemporality&&Object.hasOwnProperty.call(e,"aggregationTemporality")&&t.uint32(16).int32(e.aggregationTemporality),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.Histogram;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.dataPoints&&n.dataPoints.length||(n.dataPoints=[]),n.dataPoints.push(s.opentelemetry.proto.metrics.v1.HistogramDataPoint.decode(e,e.uint32()));break;case 2:n.aggregationTemporality=e.int32();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=s.opentelemetry.proto.metrics.v1.HistogramDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}if(null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality"))switch(e.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.Histogram)return e;var t=new s.opentelemetry.proto.metrics.v1.Histogram;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Histogram.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.Histogram.dataPoints: object expected");t.dataPoints[r]=s.opentelemetry.proto.metrics.v1.HistogramDataPoint.fromObject(e.dataPoints[r])}}switch(e.aggregationTemporality){default:"number"==typeof e.aggregationTemporality&&(t.aggregationTemporality=e.aggregationTemporality);break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:t.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:t.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:t.aggregationTemporality=2}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),t.defaults&&(r.aggregationTemporality=t.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=s.opentelemetry.proto.metrics.v1.HistogramDataPoint.toObject(e.dataPoints[n],t)}return null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality")&&(r.aggregationTemporality=t.enums===String?void 0===s.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]?e.aggregationTemporality:s.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]:e.aggregationTemporality),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Histogram"},e}(),_.ExponentialHistogram=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=a.emptyArray,e.prototype.aggregationTemporality=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return null!=e.aggregationTemporality&&Object.hasOwnProperty.call(e,"aggregationTemporality")&&t.uint32(16).int32(e.aggregationTemporality),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.ExponentialHistogram;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.dataPoints&&n.dataPoints.length||(n.dataPoints=[]),n.dataPoints.push(s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.decode(e,e.uint32()));break;case 2:n.aggregationTemporality=e.int32();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}if(null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality"))switch(e.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.ExponentialHistogram)return e;var t=new s.opentelemetry.proto.metrics.v1.ExponentialHistogram;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogram.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogram.dataPoints: object expected");t.dataPoints[r]=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.fromObject(e.dataPoints[r])}}switch(e.aggregationTemporality){default:"number"==typeof e.aggregationTemporality&&(t.aggregationTemporality=e.aggregationTemporality);break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:t.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:t.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:t.aggregationTemporality=2}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),t.defaults&&(r.aggregationTemporality=t.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.toObject(e.dataPoints[n],t)}return null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality")&&(r.aggregationTemporality=t.enums===String?void 0===s.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]?e.aggregationTemporality:s.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]:e.aggregationTemporality),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ExponentialHistogram"},e}(),_.Summary=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)s.opentelemetry.proto.metrics.v1.SummaryDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.Summary;e.pos<r;){var i=e.uint32();i>>>3==1?(n.dataPoints&&n.dataPoints.length||(n.dataPoints=[]),n.dataPoints.push(s.opentelemetry.proto.metrics.v1.SummaryDataPoint.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=s.opentelemetry.proto.metrics.v1.SummaryDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.Summary)return e;var t=new s.opentelemetry.proto.metrics.v1.Summary;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Summary.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.Summary.dataPoints: object expected");t.dataPoints[r]=s.opentelemetry.proto.metrics.v1.SummaryDataPoint.fromObject(e.dataPoints[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=s.opentelemetry.proto.metrics.v1.SummaryDataPoint.toObject(e.dataPoints[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Summary"},e}(),(S=Object.create(E={}))[E[0]="AGGREGATION_TEMPORALITY_UNSPECIFIED"]=0,S[E[1]="AGGREGATION_TEMPORALITY_DELTA"]=1,S[E[2]="AGGREGATION_TEMPORALITY_CUMULATIVE"]=2,_.AggregationTemporality=S,(w=Object.create(x={}))[x[0]="DATA_POINT_FLAGS_DO_NOT_USE"]=0,w[x[1]="DATA_POINT_FLAGS_NO_RECORDED_VALUE_MASK"]=1,_.DataPointFlags=w,_.NumberDataPoint=function(){var e;function t(e){if(this.attributes=[],this.exemplars=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.attributes=a.emptyArray,t.prototype.startTimeUnixNano=null,t.prototype.timeUnixNano=null,t.prototype.asDouble=null,t.prototype.asInt=null,t.prototype.exemplars=a.emptyArray,t.prototype.flags=null,Object.defineProperty(t.prototype,"value",{get:a.oneOfGetter(e=["asDouble","asInt"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=i.create()),null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(17).fixed64(e.startTimeUnixNano),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(25).fixed64(e.timeUnixNano),null!=e.asDouble&&Object.hasOwnProperty.call(e,"asDouble")&&t.uint32(33).double(e.asDouble),null!=e.exemplars&&e.exemplars.length)for(var r=0;r<e.exemplars.length;++r)s.opentelemetry.proto.metrics.v1.Exemplar.encode(e.exemplars[r],t.uint32(42).fork()).ldelim();if(null!=e.asInt&&Object.hasOwnProperty.call(e,"asInt")&&t.uint32(49).sfixed64(e.asInt),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(58).fork()).ldelim();return null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(64).uint32(e.flags),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.NumberDataPoint;e.pos<r;){var i=e.uint32();switch(i>>>3){case 7:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:n.startTimeUnixNano=e.fixed64();break;case 3:n.timeUnixNano=e.fixed64();break;case 4:n.asDouble=e.double();break;case 6:n.asInt=e.sfixed64();break;case 5:n.exemplars&&n.exemplars.length||(n.exemplars=[]),n.exemplars.push(s.opentelemetry.proto.metrics.v1.Exemplar.decode(e,e.uint32()));break;case 8:n.flags=e.uint32();break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var r=0;r<e.attributes.length;++r){var n=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[r]);if(n)return"attributes."+n}}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!a.isInteger(e.startTimeUnixNano)&&!(e.startTimeUnixNano&&a.isInteger(e.startTimeUnixNano.low)&&a.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!a.isInteger(e.timeUnixNano)&&!(e.timeUnixNano&&a.isInteger(e.timeUnixNano.low)&&a.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.asDouble&&e.hasOwnProperty("asDouble")&&(t.value=1,"number"!=typeof e.asDouble))return"asDouble: number expected";if(null!=e.asInt&&e.hasOwnProperty("asInt")){if(1===t.value)return"value: multiple values";if(t.value=1,!a.isInteger(e.asInt)&&!(e.asInt&&a.isInteger(e.asInt.low)&&a.isInteger(e.asInt.high)))return"asInt: integer|Long expected"}if(null!=e.exemplars&&e.hasOwnProperty("exemplars")){if(!Array.isArray(e.exemplars))return"exemplars: array expected";for(var r=0;r<e.exemplars.length;++r){var n=s.opentelemetry.proto.metrics.v1.Exemplar.verify(e.exemplars[r]);if(n)return"exemplars."+n}}return null!=e.flags&&e.hasOwnProperty("flags")&&!a.isInteger(e.flags)?"flags: integer expected":null},t.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.NumberDataPoint)return e;var t=new s.opentelemetry.proto.metrics.v1.NumberDataPoint;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.startTimeUnixNano&&(a.Long?(t.startTimeUnixNano=a.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.timeUnixNano&&(a.Long?(t.timeUnixNano=a.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.asDouble&&(t.asDouble=Number(e.asDouble)),null!=e.asInt&&(a.Long?(t.asInt=a.Long.fromValue(e.asInt)).unsigned=!1:"string"==typeof e.asInt?t.asInt=parseInt(e.asInt,10):"number"==typeof e.asInt?t.asInt=e.asInt:"object"==typeof e.asInt&&(t.asInt=new a.LongBits(e.asInt.low>>>0,e.asInt.high>>>0).toNumber())),e.exemplars){if(!Array.isArray(e.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.exemplars: array expected");t.exemplars=[];for(var r=0;r<e.exemplars.length;++r){if("object"!=typeof e.exemplars[r])throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.exemplars: object expected");t.exemplars[r]=s.opentelemetry.proto.metrics.v1.Exemplar.fromObject(e.exemplars[r])}}return null!=e.flags&&(t.flags=e.flags>>>0),t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.exemplars=[],r.attributes=[]),t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;if(a.Long){var n=new a.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;r.flags=0}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.asDouble&&e.hasOwnProperty("asDouble")&&(r.asDouble=t.json&&!isFinite(e.asDouble)?String(e.asDouble):e.asDouble,t.oneofs&&(r.value="asDouble")),e.exemplars&&e.exemplars.length){r.exemplars=[];for(var o=0;o<e.exemplars.length;++o)r.exemplars[o]=s.opentelemetry.proto.metrics.v1.Exemplar.toObject(e.exemplars[o],t)}if(null!=e.asInt&&e.hasOwnProperty("asInt")&&("number"==typeof e.asInt?r.asInt=t.longs===String?String(e.asInt):e.asInt:r.asInt=t.longs===String?a.Long.prototype.toString.call(e.asInt):t.longs===Number?new a.LongBits(e.asInt.low>>>0,e.asInt.high>>>0).toNumber():e.asInt,t.oneofs&&(r.value="asInt")),e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}return null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.NumberDataPoint"},t}(),_.HistogramDataPoint=function(){var e;function t(e){if(this.attributes=[],this.bucketCounts=[],this.explicitBounds=[],this.exemplars=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.attributes=a.emptyArray,t.prototype.startTimeUnixNano=null,t.prototype.timeUnixNano=null,t.prototype.count=null,t.prototype.sum=null,t.prototype.bucketCounts=a.emptyArray,t.prototype.explicitBounds=a.emptyArray,t.prototype.exemplars=a.emptyArray,t.prototype.flags=null,t.prototype.min=null,t.prototype.max=null,Object.defineProperty(t.prototype,"_sum",{get:a.oneOfGetter(e=["sum"]),set:a.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_min",{get:a.oneOfGetter(e=["min"]),set:a.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_max",{get:a.oneOfGetter(e=["max"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=i.create()),null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(17).fixed64(e.startTimeUnixNano),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(25).fixed64(e.timeUnixNano),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(33).fixed64(e.count),null!=e.sum&&Object.hasOwnProperty.call(e,"sum")&&t.uint32(41).double(e.sum),null!=e.bucketCounts&&e.bucketCounts.length){t.uint32(50).fork();for(var r=0;r<e.bucketCounts.length;++r)t.fixed64(e.bucketCounts[r]);t.ldelim()}if(null!=e.explicitBounds&&e.explicitBounds.length){t.uint32(58).fork();for(var r=0;r<e.explicitBounds.length;++r)t.double(e.explicitBounds[r]);t.ldelim()}if(null!=e.exemplars&&e.exemplars.length)for(var r=0;r<e.exemplars.length;++r)s.opentelemetry.proto.metrics.v1.Exemplar.encode(e.exemplars[r],t.uint32(66).fork()).ldelim();if(null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(74).fork()).ldelim();return null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(80).uint32(e.flags),null!=e.min&&Object.hasOwnProperty.call(e,"min")&&t.uint32(89).double(e.min),null!=e.max&&Object.hasOwnProperty.call(e,"max")&&t.uint32(97).double(e.max),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.HistogramDataPoint;e.pos<r;){var i=e.uint32();switch(i>>>3){case 9:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:n.startTimeUnixNano=e.fixed64();break;case 3:n.timeUnixNano=e.fixed64();break;case 4:n.count=e.fixed64();break;case 5:n.sum=e.double();break;case 6:if(n.bucketCounts&&n.bucketCounts.length||(n.bucketCounts=[]),(7&i)==2)for(var a=e.uint32()+e.pos;e.pos<a;)n.bucketCounts.push(e.fixed64());else n.bucketCounts.push(e.fixed64());break;case 7:if(n.explicitBounds&&n.explicitBounds.length||(n.explicitBounds=[]),(7&i)==2)for(var a=e.uint32()+e.pos;e.pos<a;)n.explicitBounds.push(e.double());else n.explicitBounds.push(e.double());break;case 8:n.exemplars&&n.exemplars.length||(n.exemplars=[]),n.exemplars.push(s.opentelemetry.proto.metrics.v1.Exemplar.decode(e,e.uint32()));break;case 10:n.flags=e.uint32();break;case 11:n.min=e.double();break;case 12:n.max=e.double();break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var r=0;r<e.attributes.length;++r){var n=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[r]);if(n)return"attributes."+n}}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!a.isInteger(e.startTimeUnixNano)&&!(e.startTimeUnixNano&&a.isInteger(e.startTimeUnixNano.low)&&a.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!a.isInteger(e.timeUnixNano)&&!(e.timeUnixNano&&a.isInteger(e.timeUnixNano.low)&&a.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.count&&e.hasOwnProperty("count")&&!a.isInteger(e.count)&&!(e.count&&a.isInteger(e.count.low)&&a.isInteger(e.count.high)))return"count: integer|Long expected";if(null!=e.sum&&e.hasOwnProperty("sum")&&(t._sum=1,"number"!=typeof e.sum))return"sum: number expected";if(null!=e.bucketCounts&&e.hasOwnProperty("bucketCounts")){if(!Array.isArray(e.bucketCounts))return"bucketCounts: array expected";for(var r=0;r<e.bucketCounts.length;++r)if(!a.isInteger(e.bucketCounts[r])&&!(e.bucketCounts[r]&&a.isInteger(e.bucketCounts[r].low)&&a.isInteger(e.bucketCounts[r].high)))return"bucketCounts: integer|Long[] expected"}if(null!=e.explicitBounds&&e.hasOwnProperty("explicitBounds")){if(!Array.isArray(e.explicitBounds))return"explicitBounds: array expected";for(var r=0;r<e.explicitBounds.length;++r)if("number"!=typeof e.explicitBounds[r])return"explicitBounds: number[] expected"}if(null!=e.exemplars&&e.hasOwnProperty("exemplars")){if(!Array.isArray(e.exemplars))return"exemplars: array expected";for(var r=0;r<e.exemplars.length;++r){var n=s.opentelemetry.proto.metrics.v1.Exemplar.verify(e.exemplars[r]);if(n)return"exemplars."+n}}return null!=e.flags&&e.hasOwnProperty("flags")&&!a.isInteger(e.flags)?"flags: integer expected":null!=e.min&&e.hasOwnProperty("min")&&(t._min=1,"number"!=typeof e.min)?"min: number expected":null!=e.max&&e.hasOwnProperty("max")&&(t._max=1,"number"!=typeof e.max)?"max: number expected":null},t.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.HistogramDataPoint)return e;var t=new s.opentelemetry.proto.metrics.v1.HistogramDataPoint;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.startTimeUnixNano&&(a.Long?(t.startTimeUnixNano=a.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.timeUnixNano&&(a.Long?(t.timeUnixNano=a.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.count&&(a.Long?(t.count=a.Long.fromValue(e.count)).unsigned=!1:"string"==typeof e.count?t.count=parseInt(e.count,10):"number"==typeof e.count?t.count=e.count:"object"==typeof e.count&&(t.count=new a.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber())),null!=e.sum&&(t.sum=Number(e.sum)),e.bucketCounts){if(!Array.isArray(e.bucketCounts))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.bucketCounts: array expected");t.bucketCounts=[];for(var r=0;r<e.bucketCounts.length;++r)a.Long?(t.bucketCounts[r]=a.Long.fromValue(e.bucketCounts[r])).unsigned=!1:"string"==typeof e.bucketCounts[r]?t.bucketCounts[r]=parseInt(e.bucketCounts[r],10):"number"==typeof e.bucketCounts[r]?t.bucketCounts[r]=e.bucketCounts[r]:"object"==typeof e.bucketCounts[r]&&(t.bucketCounts[r]=new a.LongBits(e.bucketCounts[r].low>>>0,e.bucketCounts[r].high>>>0).toNumber())}if(e.explicitBounds){if(!Array.isArray(e.explicitBounds))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.explicitBounds: array expected");t.explicitBounds=[];for(var r=0;r<e.explicitBounds.length;++r)t.explicitBounds[r]=Number(e.explicitBounds[r])}if(e.exemplars){if(!Array.isArray(e.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.exemplars: array expected");t.exemplars=[];for(var r=0;r<e.exemplars.length;++r){if("object"!=typeof e.exemplars[r])throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.exemplars: object expected");t.exemplars[r]=s.opentelemetry.proto.metrics.v1.Exemplar.fromObject(e.exemplars[r])}}return null!=e.flags&&(t.flags=e.flags>>>0),null!=e.min&&(t.min=Number(e.min)),null!=e.max&&(t.max=Number(e.max)),t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.bucketCounts=[],r.explicitBounds=[],r.exemplars=[],r.attributes=[]),t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;if(a.Long){var n=new a.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;if(a.Long){var n=new a.Long(0,0,!1);r.count=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.count=t.longs===String?"0":0;r.flags=0}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.count&&e.hasOwnProperty("count")&&("number"==typeof e.count?r.count=t.longs===String?String(e.count):e.count:r.count=t.longs===String?a.Long.prototype.toString.call(e.count):t.longs===Number?new a.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber():e.count),null!=e.sum&&e.hasOwnProperty("sum")&&(r.sum=t.json&&!isFinite(e.sum)?String(e.sum):e.sum,t.oneofs&&(r._sum="sum")),e.bucketCounts&&e.bucketCounts.length){r.bucketCounts=[];for(var o=0;o<e.bucketCounts.length;++o)"number"==typeof e.bucketCounts[o]?r.bucketCounts[o]=t.longs===String?String(e.bucketCounts[o]):e.bucketCounts[o]:r.bucketCounts[o]=t.longs===String?a.Long.prototype.toString.call(e.bucketCounts[o]):t.longs===Number?new a.LongBits(e.bucketCounts[o].low>>>0,e.bucketCounts[o].high>>>0).toNumber():e.bucketCounts[o]}if(e.explicitBounds&&e.explicitBounds.length){r.explicitBounds=[];for(var o=0;o<e.explicitBounds.length;++o)r.explicitBounds[o]=t.json&&!isFinite(e.explicitBounds[o])?String(e.explicitBounds[o]):e.explicitBounds[o]}if(e.exemplars&&e.exemplars.length){r.exemplars=[];for(var o=0;o<e.exemplars.length;++o)r.exemplars[o]=s.opentelemetry.proto.metrics.v1.Exemplar.toObject(e.exemplars[o],t)}if(e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}return null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),null!=e.min&&e.hasOwnProperty("min")&&(r.min=t.json&&!isFinite(e.min)?String(e.min):e.min,t.oneofs&&(r._min="min")),null!=e.max&&e.hasOwnProperty("max")&&(r.max=t.json&&!isFinite(e.max)?String(e.max):e.max,t.oneofs&&(r._max="max")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.HistogramDataPoint"},t}(),_.ExponentialHistogramDataPoint=function(){var e;function t(e){if(this.attributes=[],this.exemplars=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.attributes=a.emptyArray,t.prototype.startTimeUnixNano=null,t.prototype.timeUnixNano=null,t.prototype.count=null,t.prototype.sum=null,t.prototype.scale=null,t.prototype.zeroCount=null,t.prototype.positive=null,t.prototype.negative=null,t.prototype.flags=null,t.prototype.exemplars=a.emptyArray,t.prototype.min=null,t.prototype.max=null,t.prototype.zeroThreshold=null,Object.defineProperty(t.prototype,"_sum",{get:a.oneOfGetter(e=["sum"]),set:a.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_min",{get:a.oneOfGetter(e=["min"]),set:a.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_max",{get:a.oneOfGetter(e=["max"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=i.create()),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(10).fork()).ldelim();if(null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(17).fixed64(e.startTimeUnixNano),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(25).fixed64(e.timeUnixNano),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(33).fixed64(e.count),null!=e.sum&&Object.hasOwnProperty.call(e,"sum")&&t.uint32(41).double(e.sum),null!=e.scale&&Object.hasOwnProperty.call(e,"scale")&&t.uint32(48).sint32(e.scale),null!=e.zeroCount&&Object.hasOwnProperty.call(e,"zeroCount")&&t.uint32(57).fixed64(e.zeroCount),null!=e.positive&&Object.hasOwnProperty.call(e,"positive")&&s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.encode(e.positive,t.uint32(66).fork()).ldelim(),null!=e.negative&&Object.hasOwnProperty.call(e,"negative")&&s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.encode(e.negative,t.uint32(74).fork()).ldelim(),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(80).uint32(e.flags),null!=e.exemplars&&e.exemplars.length)for(var r=0;r<e.exemplars.length;++r)s.opentelemetry.proto.metrics.v1.Exemplar.encode(e.exemplars[r],t.uint32(90).fork()).ldelim();return null!=e.min&&Object.hasOwnProperty.call(e,"min")&&t.uint32(97).double(e.min),null!=e.max&&Object.hasOwnProperty.call(e,"max")&&t.uint32(105).double(e.max),null!=e.zeroThreshold&&Object.hasOwnProperty.call(e,"zeroThreshold")&&t.uint32(113).double(e.zeroThreshold),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:n.startTimeUnixNano=e.fixed64();break;case 3:n.timeUnixNano=e.fixed64();break;case 4:n.count=e.fixed64();break;case 5:n.sum=e.double();break;case 6:n.scale=e.sint32();break;case 7:n.zeroCount=e.fixed64();break;case 8:n.positive=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.decode(e,e.uint32());break;case 9:n.negative=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.decode(e,e.uint32());break;case 10:n.flags=e.uint32();break;case 11:n.exemplars&&n.exemplars.length||(n.exemplars=[]),n.exemplars.push(s.opentelemetry.proto.metrics.v1.Exemplar.decode(e,e.uint32()));break;case 12:n.min=e.double();break;case 13:n.max=e.double();break;case 14:n.zeroThreshold=e.double();break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var r=0;r<e.attributes.length;++r){var n=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[r]);if(n)return"attributes."+n}}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!a.isInteger(e.startTimeUnixNano)&&!(e.startTimeUnixNano&&a.isInteger(e.startTimeUnixNano.low)&&a.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!a.isInteger(e.timeUnixNano)&&!(e.timeUnixNano&&a.isInteger(e.timeUnixNano.low)&&a.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.count&&e.hasOwnProperty("count")&&!a.isInteger(e.count)&&!(e.count&&a.isInteger(e.count.low)&&a.isInteger(e.count.high)))return"count: integer|Long expected";if(null!=e.sum&&e.hasOwnProperty("sum")&&(t._sum=1,"number"!=typeof e.sum))return"sum: number expected";if(null!=e.scale&&e.hasOwnProperty("scale")&&!a.isInteger(e.scale))return"scale: integer expected";if(null!=e.zeroCount&&e.hasOwnProperty("zeroCount")&&!a.isInteger(e.zeroCount)&&!(e.zeroCount&&a.isInteger(e.zeroCount.low)&&a.isInteger(e.zeroCount.high)))return"zeroCount: integer|Long expected";if(null!=e.positive&&e.hasOwnProperty("positive")){var n=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.verify(e.positive);if(n)return"positive."+n}if(null!=e.negative&&e.hasOwnProperty("negative")){var n=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.verify(e.negative);if(n)return"negative."+n}if(null!=e.flags&&e.hasOwnProperty("flags")&&!a.isInteger(e.flags))return"flags: integer expected";if(null!=e.exemplars&&e.hasOwnProperty("exemplars")){if(!Array.isArray(e.exemplars))return"exemplars: array expected";for(var r=0;r<e.exemplars.length;++r){var n=s.opentelemetry.proto.metrics.v1.Exemplar.verify(e.exemplars[r]);if(n)return"exemplars."+n}}return null!=e.min&&e.hasOwnProperty("min")&&(t._min=1,"number"!=typeof e.min)?"min: number expected":null!=e.max&&e.hasOwnProperty("max")&&(t._max=1,"number"!=typeof e.max)?"max: number expected":null!=e.zeroThreshold&&e.hasOwnProperty("zeroThreshold")&&"number"!=typeof e.zeroThreshold?"zeroThreshold: number expected":null},t.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint)return e;var t=new s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.startTimeUnixNano&&(a.Long?(t.startTimeUnixNano=a.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.timeUnixNano&&(a.Long?(t.timeUnixNano=a.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.count&&(a.Long?(t.count=a.Long.fromValue(e.count)).unsigned=!1:"string"==typeof e.count?t.count=parseInt(e.count,10):"number"==typeof e.count?t.count=e.count:"object"==typeof e.count&&(t.count=new a.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber())),null!=e.sum&&(t.sum=Number(e.sum)),null!=e.scale&&(t.scale=0|e.scale),null!=e.zeroCount&&(a.Long?(t.zeroCount=a.Long.fromValue(e.zeroCount)).unsigned=!1:"string"==typeof e.zeroCount?t.zeroCount=parseInt(e.zeroCount,10):"number"==typeof e.zeroCount?t.zeroCount=e.zeroCount:"object"==typeof e.zeroCount&&(t.zeroCount=new a.LongBits(e.zeroCount.low>>>0,e.zeroCount.high>>>0).toNumber())),null!=e.positive){if("object"!=typeof e.positive)throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.positive: object expected");t.positive=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.fromObject(e.positive)}if(null!=e.negative){if("object"!=typeof e.negative)throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.negative: object expected");t.negative=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.fromObject(e.negative)}if(null!=e.flags&&(t.flags=e.flags>>>0),e.exemplars){if(!Array.isArray(e.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.exemplars: array expected");t.exemplars=[];for(var r=0;r<e.exemplars.length;++r){if("object"!=typeof e.exemplars[r])throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.exemplars: object expected");t.exemplars[r]=s.opentelemetry.proto.metrics.v1.Exemplar.fromObject(e.exemplars[r])}}return null!=e.min&&(t.min=Number(e.min)),null!=e.max&&(t.max=Number(e.max)),null!=e.zeroThreshold&&(t.zeroThreshold=Number(e.zeroThreshold)),t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[],r.exemplars=[]),t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;if(a.Long){var n=new a.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;if(a.Long){var n=new a.Long(0,0,!1);r.count=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.count=t.longs===String?"0":0;if(r.scale=0,a.Long){var n=new a.Long(0,0,!1);r.zeroCount=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.zeroCount=t.longs===String?"0":0;r.positive=null,r.negative=null,r.flags=0,r.zeroThreshold=0}if(e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.count&&e.hasOwnProperty("count")&&("number"==typeof e.count?r.count=t.longs===String?String(e.count):e.count:r.count=t.longs===String?a.Long.prototype.toString.call(e.count):t.longs===Number?new a.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber():e.count),null!=e.sum&&e.hasOwnProperty("sum")&&(r.sum=t.json&&!isFinite(e.sum)?String(e.sum):e.sum,t.oneofs&&(r._sum="sum")),null!=e.scale&&e.hasOwnProperty("scale")&&(r.scale=e.scale),null!=e.zeroCount&&e.hasOwnProperty("zeroCount")&&("number"==typeof e.zeroCount?r.zeroCount=t.longs===String?String(e.zeroCount):e.zeroCount:r.zeroCount=t.longs===String?a.Long.prototype.toString.call(e.zeroCount):t.longs===Number?new a.LongBits(e.zeroCount.low>>>0,e.zeroCount.high>>>0).toNumber():e.zeroCount),null!=e.positive&&e.hasOwnProperty("positive")&&(r.positive=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.toObject(e.positive,t)),null!=e.negative&&e.hasOwnProperty("negative")&&(r.negative=s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.toObject(e.negative,t)),null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),e.exemplars&&e.exemplars.length){r.exemplars=[];for(var o=0;o<e.exemplars.length;++o)r.exemplars[o]=s.opentelemetry.proto.metrics.v1.Exemplar.toObject(e.exemplars[o],t)}return null!=e.min&&e.hasOwnProperty("min")&&(r.min=t.json&&!isFinite(e.min)?String(e.min):e.min,t.oneofs&&(r._min="min")),null!=e.max&&e.hasOwnProperty("max")&&(r.max=t.json&&!isFinite(e.max)?String(e.max):e.max,t.oneofs&&(r._max="max")),null!=e.zeroThreshold&&e.hasOwnProperty("zeroThreshold")&&(r.zeroThreshold=t.json&&!isFinite(e.zeroThreshold)?String(e.zeroThreshold):e.zeroThreshold),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint"},t.Buckets=function(){function e(e){if(this.bucketCounts=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.offset=null,e.prototype.bucketCounts=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.offset&&Object.hasOwnProperty.call(e,"offset")&&t.uint32(8).sint32(e.offset),null!=e.bucketCounts&&e.bucketCounts.length){t.uint32(18).fork();for(var r=0;r<e.bucketCounts.length;++r)t.uint64(e.bucketCounts[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.offset=e.sint32();break;case 2:if(n.bucketCounts&&n.bucketCounts.length||(n.bucketCounts=[]),(7&i)==2)for(var a=e.uint32()+e.pos;e.pos<a;)n.bucketCounts.push(e.uint64());else n.bucketCounts.push(e.uint64());break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.offset&&e.hasOwnProperty("offset")&&!a.isInteger(e.offset))return"offset: integer expected";if(null!=e.bucketCounts&&e.hasOwnProperty("bucketCounts")){if(!Array.isArray(e.bucketCounts))return"bucketCounts: array expected";for(var t=0;t<e.bucketCounts.length;++t)if(!a.isInteger(e.bucketCounts[t])&&!(e.bucketCounts[t]&&a.isInteger(e.bucketCounts[t].low)&&a.isInteger(e.bucketCounts[t].high)))return"bucketCounts: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets)return e;var t=new s.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets;if(null!=e.offset&&(t.offset=0|e.offset),e.bucketCounts){if(!Array.isArray(e.bucketCounts))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.bucketCounts: array expected");t.bucketCounts=[];for(var r=0;r<e.bucketCounts.length;++r)a.Long?(t.bucketCounts[r]=a.Long.fromValue(e.bucketCounts[r])).unsigned=!0:"string"==typeof e.bucketCounts[r]?t.bucketCounts[r]=parseInt(e.bucketCounts[r],10):"number"==typeof e.bucketCounts[r]?t.bucketCounts[r]=e.bucketCounts[r]:"object"==typeof e.bucketCounts[r]&&(t.bucketCounts[r]=new a.LongBits(e.bucketCounts[r].low>>>0,e.bucketCounts[r].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.bucketCounts=[]),t.defaults&&(r.offset=0),null!=e.offset&&e.hasOwnProperty("offset")&&(r.offset=e.offset),e.bucketCounts&&e.bucketCounts.length){r.bucketCounts=[];for(var n=0;n<e.bucketCounts.length;++n)"number"==typeof e.bucketCounts[n]?r.bucketCounts[n]=t.longs===String?String(e.bucketCounts[n]):e.bucketCounts[n]:r.bucketCounts[n]=t.longs===String?a.Long.prototype.toString.call(e.bucketCounts[n]):t.longs===Number?new a.LongBits(e.bucketCounts[n].low>>>0,e.bucketCounts[n].high>>>0).toNumber(!0):e.bucketCounts[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets"},e}(),t}(),_.SummaryDataPoint=function(){function e(e){if(this.attributes=[],this.quantileValues=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.attributes=a.emptyArray,e.prototype.startTimeUnixNano=null,e.prototype.timeUnixNano=null,e.prototype.count=null,e.prototype.sum=null,e.prototype.quantileValues=a.emptyArray,e.prototype.flags=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(17).fixed64(e.startTimeUnixNano),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(25).fixed64(e.timeUnixNano),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(33).fixed64(e.count),null!=e.sum&&Object.hasOwnProperty.call(e,"sum")&&t.uint32(41).double(e.sum),null!=e.quantileValues&&e.quantileValues.length)for(var r=0;r<e.quantileValues.length;++r)s.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.encode(e.quantileValues[r],t.uint32(50).fork()).ldelim();if(null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(58).fork()).ldelim();return null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(64).uint32(e.flags),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.SummaryDataPoint;e.pos<r;){var i=e.uint32();switch(i>>>3){case 7:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:n.startTimeUnixNano=e.fixed64();break;case 3:n.timeUnixNano=e.fixed64();break;case 4:n.count=e.fixed64();break;case 5:n.sum=e.double();break;case 6:n.quantileValues&&n.quantileValues.length||(n.quantileValues=[]),n.quantileValues.push(s.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.decode(e,e.uint32()));break;case 8:n.flags=e.uint32();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!a.isInteger(e.startTimeUnixNano)&&!(e.startTimeUnixNano&&a.isInteger(e.startTimeUnixNano.low)&&a.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!a.isInteger(e.timeUnixNano)&&!(e.timeUnixNano&&a.isInteger(e.timeUnixNano.low)&&a.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.count&&e.hasOwnProperty("count")&&!a.isInteger(e.count)&&!(e.count&&a.isInteger(e.count.low)&&a.isInteger(e.count.high)))return"count: integer|Long expected";if(null!=e.sum&&e.hasOwnProperty("sum")&&"number"!=typeof e.sum)return"sum: number expected";if(null!=e.quantileValues&&e.hasOwnProperty("quantileValues")){if(!Array.isArray(e.quantileValues))return"quantileValues: array expected";for(var t=0;t<e.quantileValues.length;++t){var r=s.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.verify(e.quantileValues[t]);if(r)return"quantileValues."+r}}return null!=e.flags&&e.hasOwnProperty("flags")&&!a.isInteger(e.flags)?"flags: integer expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.SummaryDataPoint)return e;var t=new s.opentelemetry.proto.metrics.v1.SummaryDataPoint;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.startTimeUnixNano&&(a.Long?(t.startTimeUnixNano=a.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.timeUnixNano&&(a.Long?(t.timeUnixNano=a.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.count&&(a.Long?(t.count=a.Long.fromValue(e.count)).unsigned=!1:"string"==typeof e.count?t.count=parseInt(e.count,10):"number"==typeof e.count?t.count=e.count:"object"==typeof e.count&&(t.count=new a.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber())),null!=e.sum&&(t.sum=Number(e.sum)),e.quantileValues){if(!Array.isArray(e.quantileValues))throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.quantileValues: array expected");t.quantileValues=[];for(var r=0;r<e.quantileValues.length;++r){if("object"!=typeof e.quantileValues[r])throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.quantileValues: object expected");t.quantileValues[r]=s.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.fromObject(e.quantileValues[r])}}return null!=e.flags&&(t.flags=e.flags>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.quantileValues=[],r.attributes=[]),t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;if(a.Long){var n=new a.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;if(a.Long){var n=new a.Long(0,0,!1);r.count=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.count=t.longs===String?"0":0;r.sum=0,r.flags=0}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new a.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.count&&e.hasOwnProperty("count")&&("number"==typeof e.count?r.count=t.longs===String?String(e.count):e.count:r.count=t.longs===String?a.Long.prototype.toString.call(e.count):t.longs===Number?new a.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber():e.count),null!=e.sum&&e.hasOwnProperty("sum")&&(r.sum=t.json&&!isFinite(e.sum)?String(e.sum):e.sum),e.quantileValues&&e.quantileValues.length){r.quantileValues=[];for(var o=0;o<e.quantileValues.length;++o)r.quantileValues[o]=s.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.toObject(e.quantileValues[o],t)}if(e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}return null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.SummaryDataPoint"},e.ValueAtQuantile=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.quantile=null,e.prototype.value=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.quantile&&Object.hasOwnProperty.call(e,"quantile")&&t.uint32(9).double(e.quantile),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.quantile=e.double();break;case 2:n.value=e.double();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.quantile&&e.hasOwnProperty("quantile")&&"number"!=typeof e.quantile?"quantile: number expected":null!=e.value&&e.hasOwnProperty("value")&&"number"!=typeof e.value?"value: number expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile)return e;var t=new s.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile;return null!=e.quantile&&(t.quantile=Number(e.quantile)),null!=e.value&&(t.value=Number(e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.quantile=0,r.value=0),null!=e.quantile&&e.hasOwnProperty("quantile")&&(r.quantile=t.json&&!isFinite(e.quantile)?String(e.quantile):e.quantile),null!=e.value&&e.hasOwnProperty("value")&&(r.value=t.json&&!isFinite(e.value)?String(e.value):e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile"},e}(),e}(),_.Exemplar=function(){var e;function t(e){if(this.filteredAttributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.filteredAttributes=a.emptyArray,t.prototype.timeUnixNano=null,t.prototype.asDouble=null,t.prototype.asInt=null,t.prototype.spanId=null,t.prototype.traceId=null,Object.defineProperty(t.prototype,"value",{get:a.oneOfGetter(e=["asDouble","asInt"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=i.create()),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(17).fixed64(e.timeUnixNano),null!=e.asDouble&&Object.hasOwnProperty.call(e,"asDouble")&&t.uint32(25).double(e.asDouble),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(34).bytes(e.spanId),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(42).bytes(e.traceId),null!=e.asInt&&Object.hasOwnProperty.call(e,"asInt")&&t.uint32(49).sfixed64(e.asInt),null!=e.filteredAttributes&&e.filteredAttributes.length)for(var r=0;r<e.filteredAttributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.filteredAttributes[r],t.uint32(58).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.metrics.v1.Exemplar;e.pos<r;){var i=e.uint32();switch(i>>>3){case 7:n.filteredAttributes&&n.filteredAttributes.length||(n.filteredAttributes=[]),n.filteredAttributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:n.timeUnixNano=e.fixed64();break;case 3:n.asDouble=e.double();break;case 6:n.asInt=e.sfixed64();break;case 4:n.spanId=e.bytes();break;case 5:n.traceId=e.bytes();break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.filteredAttributes&&e.hasOwnProperty("filteredAttributes")){if(!Array.isArray(e.filteredAttributes))return"filteredAttributes: array expected";for(var r=0;r<e.filteredAttributes.length;++r){var n=s.opentelemetry.proto.common.v1.KeyValue.verify(e.filteredAttributes[r]);if(n)return"filteredAttributes."+n}}if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!a.isInteger(e.timeUnixNano)&&!(e.timeUnixNano&&a.isInteger(e.timeUnixNano.low)&&a.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.asDouble&&e.hasOwnProperty("asDouble")&&(t.value=1,"number"!=typeof e.asDouble))return"asDouble: number expected";if(null!=e.asInt&&e.hasOwnProperty("asInt")){if(1===t.value)return"value: multiple values";if(t.value=1,!a.isInteger(e.asInt)&&!(e.asInt&&a.isInteger(e.asInt.low)&&a.isInteger(e.asInt.high)))return"asInt: integer|Long expected"}return null!=e.spanId&&e.hasOwnProperty("spanId")&&!(e.spanId&&"number"==typeof e.spanId.length||a.isString(e.spanId))?"spanId: buffer expected":null!=e.traceId&&e.hasOwnProperty("traceId")&&!(e.traceId&&"number"==typeof e.traceId.length||a.isString(e.traceId))?"traceId: buffer expected":null},t.fromObject=function(e){if(e instanceof s.opentelemetry.proto.metrics.v1.Exemplar)return e;var t=new s.opentelemetry.proto.metrics.v1.Exemplar;if(e.filteredAttributes){if(!Array.isArray(e.filteredAttributes))throw TypeError(".opentelemetry.proto.metrics.v1.Exemplar.filteredAttributes: array expected");t.filteredAttributes=[];for(var r=0;r<e.filteredAttributes.length;++r){if("object"!=typeof e.filteredAttributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.Exemplar.filteredAttributes: object expected");t.filteredAttributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.filteredAttributes[r])}}return null!=e.timeUnixNano&&(a.Long?(t.timeUnixNano=a.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.asDouble&&(t.asDouble=Number(e.asDouble)),null!=e.asInt&&(a.Long?(t.asInt=a.Long.fromValue(e.asInt)).unsigned=!1:"string"==typeof e.asInt?t.asInt=parseInt(e.asInt,10):"number"==typeof e.asInt?t.asInt=e.asInt:"object"==typeof e.asInt&&(t.asInt=new a.LongBits(e.asInt.low>>>0,e.asInt.high>>>0).toNumber())),null!=e.spanId&&("string"==typeof e.spanId?a.base64.decode(e.spanId,t.spanId=a.newBuffer(a.base64.length(e.spanId)),0):e.spanId.length>=0&&(t.spanId=e.spanId)),null!=e.traceId&&("string"==typeof e.traceId?a.base64.decode(e.traceId,t.traceId=a.newBuffer(a.base64.length(e.traceId)),0):e.traceId.length>=0&&(t.traceId=e.traceId)),t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.filteredAttributes=[]),t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;t.bytes===String?r.spanId="":(r.spanId=[],t.bytes!==Array&&(r.spanId=a.newBuffer(r.spanId))),t.bytes===String?r.traceId="":(r.traceId=[],t.bytes!==Array&&(r.traceId=a.newBuffer(r.traceId)))}if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.asDouble&&e.hasOwnProperty("asDouble")&&(r.asDouble=t.json&&!isFinite(e.asDouble)?String(e.asDouble):e.asDouble,t.oneofs&&(r.value="asDouble")),null!=e.spanId&&e.hasOwnProperty("spanId")&&(r.spanId=t.bytes===String?a.base64.encode(e.spanId,0,e.spanId.length):t.bytes===Array?Array.prototype.slice.call(e.spanId):e.spanId),null!=e.traceId&&e.hasOwnProperty("traceId")&&(r.traceId=t.bytes===String?a.base64.encode(e.traceId,0,e.traceId.length):t.bytes===Array?Array.prototype.slice.call(e.traceId):e.traceId),null!=e.asInt&&e.hasOwnProperty("asInt")&&("number"==typeof e.asInt?r.asInt=t.longs===String?String(e.asInt):e.asInt:r.asInt=t.longs===String?a.Long.prototype.toString.call(e.asInt):t.longs===Number?new a.LongBits(e.asInt.low>>>0,e.asInt.high>>>0).toNumber():e.asInt,t.oneofs&&(r.value="asInt")),e.filteredAttributes&&e.filteredAttributes.length){r.filteredAttributes=[];for(var o=0;o<e.filteredAttributes.length;++o)r.filteredAttributes[o]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.filteredAttributes[o],t)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Exemplar"},t}(),b.v1=_,e.metrics=b,T={},(A={}).LogsData=function(){function e(e){if(this.resourceLogs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceLogs=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resourceLogs&&e.resourceLogs.length)for(var r=0;r<e.resourceLogs.length;++r)s.opentelemetry.proto.logs.v1.ResourceLogs.encode(e.resourceLogs[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.logs.v1.LogsData;e.pos<r;){var i=e.uint32();i>>>3==1?(n.resourceLogs&&n.resourceLogs.length||(n.resourceLogs=[]),n.resourceLogs.push(s.opentelemetry.proto.logs.v1.ResourceLogs.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceLogs&&e.hasOwnProperty("resourceLogs")){if(!Array.isArray(e.resourceLogs))return"resourceLogs: array expected";for(var t=0;t<e.resourceLogs.length;++t){var r=s.opentelemetry.proto.logs.v1.ResourceLogs.verify(e.resourceLogs[t]);if(r)return"resourceLogs."+r}}return null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.logs.v1.LogsData)return e;var t=new s.opentelemetry.proto.logs.v1.LogsData;if(e.resourceLogs){if(!Array.isArray(e.resourceLogs))throw TypeError(".opentelemetry.proto.logs.v1.LogsData.resourceLogs: array expected");t.resourceLogs=[];for(var r=0;r<e.resourceLogs.length;++r){if("object"!=typeof e.resourceLogs[r])throw TypeError(".opentelemetry.proto.logs.v1.LogsData.resourceLogs: object expected");t.resourceLogs[r]=s.opentelemetry.proto.logs.v1.ResourceLogs.fromObject(e.resourceLogs[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceLogs=[]),e.resourceLogs&&e.resourceLogs.length){r.resourceLogs=[];for(var n=0;n<e.resourceLogs.length;++n)r.resourceLogs[n]=s.opentelemetry.proto.logs.v1.ResourceLogs.toObject(e.resourceLogs[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.logs.v1.LogsData"},e}(),A.ResourceLogs=function(){function e(e){if(this.scopeLogs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource=null,e.prototype.scopeLogs=a.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.resource&&Object.hasOwnProperty.call(e,"resource")&&s.opentelemetry.proto.resource.v1.Resource.encode(e.resource,t.uint32(10).fork()).ldelim(),null!=e.scopeLogs&&e.scopeLogs.length)for(var r=0;r<e.scopeLogs.length;++r)s.opentelemetry.proto.logs.v1.ScopeLogs.encode(e.scopeLogs[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.logs.v1.ResourceLogs;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.resource=s.opentelemetry.proto.resource.v1.Resource.decode(e,e.uint32());break;case 2:n.scopeLogs&&n.scopeLogs.length||(n.scopeLogs=[]),n.scopeLogs.push(s.opentelemetry.proto.logs.v1.ScopeLogs.decode(e,e.uint32()));break;case 3:n.schemaUrl=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resource&&e.hasOwnProperty("resource")){var t=s.opentelemetry.proto.resource.v1.Resource.verify(e.resource);if(t)return"resource."+t}if(null!=e.scopeLogs&&e.hasOwnProperty("scopeLogs")){if(!Array.isArray(e.scopeLogs))return"scopeLogs: array expected";for(var r=0;r<e.scopeLogs.length;++r){var t=s.opentelemetry.proto.logs.v1.ScopeLogs.verify(e.scopeLogs[r]);if(t)return"scopeLogs."+t}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!a.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.logs.v1.ResourceLogs)return e;var t=new s.opentelemetry.proto.logs.v1.ResourceLogs;if(null!=e.resource){if("object"!=typeof e.resource)throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.resource: object expected");t.resource=s.opentelemetry.proto.resource.v1.Resource.fromObject(e.resource)}if(e.scopeLogs){if(!Array.isArray(e.scopeLogs))throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.scopeLogs: array expected");t.scopeLogs=[];for(var r=0;r<e.scopeLogs.length;++r){if("object"!=typeof e.scopeLogs[r])throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.scopeLogs: object expected");t.scopeLogs[r]=s.opentelemetry.proto.logs.v1.ScopeLogs.fromObject(e.scopeLogs[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.scopeLogs=[]),t.defaults&&(r.resource=null,r.schemaUrl=""),null!=e.resource&&e.hasOwnProperty("resource")&&(r.resource=s.opentelemetry.proto.resource.v1.Resource.toObject(e.resource,t)),e.scopeLogs&&e.scopeLogs.length){r.scopeLogs=[];for(var n=0;n<e.scopeLogs.length;++n)r.scopeLogs[n]=s.opentelemetry.proto.logs.v1.ScopeLogs.toObject(e.scopeLogs[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.logs.v1.ResourceLogs"},e}(),A.ScopeLogs=function(){function e(e){if(this.logRecords=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scope=null,e.prototype.logRecords=a.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.scope&&Object.hasOwnProperty.call(e,"scope")&&s.opentelemetry.proto.common.v1.InstrumentationScope.encode(e.scope,t.uint32(10).fork()).ldelim(),null!=e.logRecords&&e.logRecords.length)for(var r=0;r<e.logRecords.length;++r)s.opentelemetry.proto.logs.v1.LogRecord.encode(e.logRecords[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.logs.v1.ScopeLogs;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.decode(e,e.uint32());break;case 2:n.logRecords&&n.logRecords.length||(n.logRecords=[]),n.logRecords.push(s.opentelemetry.proto.logs.v1.LogRecord.decode(e,e.uint32()));break;case 3:n.schemaUrl=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.scope&&e.hasOwnProperty("scope")){var t=s.opentelemetry.proto.common.v1.InstrumentationScope.verify(e.scope);if(t)return"scope."+t}if(null!=e.logRecords&&e.hasOwnProperty("logRecords")){if(!Array.isArray(e.logRecords))return"logRecords: array expected";for(var r=0;r<e.logRecords.length;++r){var t=s.opentelemetry.proto.logs.v1.LogRecord.verify(e.logRecords[r]);if(t)return"logRecords."+t}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!a.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.logs.v1.ScopeLogs)return e;var t=new s.opentelemetry.proto.logs.v1.ScopeLogs;if(null!=e.scope){if("object"!=typeof e.scope)throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.scope: object expected");t.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(e.scope)}if(e.logRecords){if(!Array.isArray(e.logRecords))throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.logRecords: array expected");t.logRecords=[];for(var r=0;r<e.logRecords.length;++r){if("object"!=typeof e.logRecords[r])throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.logRecords: object expected");t.logRecords[r]=s.opentelemetry.proto.logs.v1.LogRecord.fromObject(e.logRecords[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.logRecords=[]),t.defaults&&(r.scope=null,r.schemaUrl=""),null!=e.scope&&e.hasOwnProperty("scope")&&(r.scope=s.opentelemetry.proto.common.v1.InstrumentationScope.toObject(e.scope,t)),e.logRecords&&e.logRecords.length){r.logRecords=[];for(var n=0;n<e.logRecords.length;++n)r.logRecords[n]=s.opentelemetry.proto.logs.v1.LogRecord.toObject(e.logRecords[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.logs.v1.ScopeLogs"},e}(),(N=Object.create(O={}))[O[0]="SEVERITY_NUMBER_UNSPECIFIED"]=0,N[O[1]="SEVERITY_NUMBER_TRACE"]=1,N[O[2]="SEVERITY_NUMBER_TRACE2"]=2,N[O[3]="SEVERITY_NUMBER_TRACE3"]=3,N[O[4]="SEVERITY_NUMBER_TRACE4"]=4,N[O[5]="SEVERITY_NUMBER_DEBUG"]=5,N[O[6]="SEVERITY_NUMBER_DEBUG2"]=6,N[O[7]="SEVERITY_NUMBER_DEBUG3"]=7,N[O[8]="SEVERITY_NUMBER_DEBUG4"]=8,N[O[9]="SEVERITY_NUMBER_INFO"]=9,N[O[10]="SEVERITY_NUMBER_INFO2"]=10,N[O[11]="SEVERITY_NUMBER_INFO3"]=11,N[O[12]="SEVERITY_NUMBER_INFO4"]=12,N[O[13]="SEVERITY_NUMBER_WARN"]=13,N[O[14]="SEVERITY_NUMBER_WARN2"]=14,N[O[15]="SEVERITY_NUMBER_WARN3"]=15,N[O[16]="SEVERITY_NUMBER_WARN4"]=16,N[O[17]="SEVERITY_NUMBER_ERROR"]=17,N[O[18]="SEVERITY_NUMBER_ERROR2"]=18,N[O[19]="SEVERITY_NUMBER_ERROR3"]=19,N[O[20]="SEVERITY_NUMBER_ERROR4"]=20,N[O[21]="SEVERITY_NUMBER_FATAL"]=21,N[O[22]="SEVERITY_NUMBER_FATAL2"]=22,N[O[23]="SEVERITY_NUMBER_FATAL3"]=23,N[O[24]="SEVERITY_NUMBER_FATAL4"]=24,A.SeverityNumber=N,(C=Object.create(P={}))[P[0]="LOG_RECORD_FLAGS_DO_NOT_USE"]=0,C[P[255]="LOG_RECORD_FLAGS_TRACE_FLAGS_MASK"]=255,A.LogRecordFlags=C,A.LogRecord=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timeUnixNano=null,e.prototype.observedTimeUnixNano=null,e.prototype.severityNumber=null,e.prototype.severityText=null,e.prototype.body=null,e.prototype.attributes=a.emptyArray,e.prototype.droppedAttributesCount=null,e.prototype.flags=null,e.prototype.traceId=null,e.prototype.spanId=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(9).fixed64(e.timeUnixNano),null!=e.severityNumber&&Object.hasOwnProperty.call(e,"severityNumber")&&t.uint32(16).int32(e.severityNumber),null!=e.severityText&&Object.hasOwnProperty.call(e,"severityText")&&t.uint32(26).string(e.severityText),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&s.opentelemetry.proto.common.v1.AnyValue.encode(e.body,t.uint32(42).fork()).ldelim(),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)s.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(50).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(56).uint32(e.droppedAttributesCount),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(69).fixed32(e.flags),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(74).bytes(e.traceId),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(82).bytes(e.spanId),null!=e.observedTimeUnixNano&&Object.hasOwnProperty.call(e,"observedTimeUnixNano")&&t.uint32(89).fixed64(e.observedTimeUnixNano),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.opentelemetry.proto.logs.v1.LogRecord;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.timeUnixNano=e.fixed64();break;case 11:n.observedTimeUnixNano=e.fixed64();break;case 2:n.severityNumber=e.int32();break;case 3:n.severityText=e.string();break;case 5:n.body=s.opentelemetry.proto.common.v1.AnyValue.decode(e,e.uint32());break;case 6:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(s.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 7:n.droppedAttributesCount=e.uint32();break;case 8:n.flags=e.fixed32();break;case 9:n.traceId=e.bytes();break;case 10:n.spanId=e.bytes();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!a.isInteger(e.timeUnixNano)&&!(e.timeUnixNano&&a.isInteger(e.timeUnixNano.low)&&a.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.observedTimeUnixNano&&e.hasOwnProperty("observedTimeUnixNano")&&!a.isInteger(e.observedTimeUnixNano)&&!(e.observedTimeUnixNano&&a.isInteger(e.observedTimeUnixNano.low)&&a.isInteger(e.observedTimeUnixNano.high)))return"observedTimeUnixNano: integer|Long expected";if(null!=e.severityNumber&&e.hasOwnProperty("severityNumber"))switch(e.severityNumber){default:return"severityNumber: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}if(null!=e.severityText&&e.hasOwnProperty("severityText")&&!a.isString(e.severityText))return"severityText: string expected";if(null!=e.body&&e.hasOwnProperty("body")){var t=s.opentelemetry.proto.common.v1.AnyValue.verify(e.body);if(t)return"body."+t}if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var r=0;r<e.attributes.length;++r){var t=s.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[r]);if(t)return"attributes."+t}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!a.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null!=e.flags&&e.hasOwnProperty("flags")&&!a.isInteger(e.flags)?"flags: integer expected":null!=e.traceId&&e.hasOwnProperty("traceId")&&!(e.traceId&&"number"==typeof e.traceId.length||a.isString(e.traceId))?"traceId: buffer expected":null!=e.spanId&&e.hasOwnProperty("spanId")&&!(e.spanId&&"number"==typeof e.spanId.length||a.isString(e.spanId))?"spanId: buffer expected":null},e.fromObject=function(e){if(e instanceof s.opentelemetry.proto.logs.v1.LogRecord)return e;var t=new s.opentelemetry.proto.logs.v1.LogRecord;switch(null!=e.timeUnixNano&&(a.Long?(t.timeUnixNano=a.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.observedTimeUnixNano&&(a.Long?(t.observedTimeUnixNano=a.Long.fromValue(e.observedTimeUnixNano)).unsigned=!1:"string"==typeof e.observedTimeUnixNano?t.observedTimeUnixNano=parseInt(e.observedTimeUnixNano,10):"number"==typeof e.observedTimeUnixNano?t.observedTimeUnixNano=e.observedTimeUnixNano:"object"==typeof e.observedTimeUnixNano&&(t.observedTimeUnixNano=new a.LongBits(e.observedTimeUnixNano.low>>>0,e.observedTimeUnixNano.high>>>0).toNumber())),e.severityNumber){default:"number"==typeof e.severityNumber&&(t.severityNumber=e.severityNumber);break;case"SEVERITY_NUMBER_UNSPECIFIED":case 0:t.severityNumber=0;break;case"SEVERITY_NUMBER_TRACE":case 1:t.severityNumber=1;break;case"SEVERITY_NUMBER_TRACE2":case 2:t.severityNumber=2;break;case"SEVERITY_NUMBER_TRACE3":case 3:t.severityNumber=3;break;case"SEVERITY_NUMBER_TRACE4":case 4:t.severityNumber=4;break;case"SEVERITY_NUMBER_DEBUG":case 5:t.severityNumber=5;break;case"SEVERITY_NUMBER_DEBUG2":case 6:t.severityNumber=6;break;case"SEVERITY_NUMBER_DEBUG3":case 7:t.severityNumber=7;break;case"SEVERITY_NUMBER_DEBUG4":case 8:t.severityNumber=8;break;case"SEVERITY_NUMBER_INFO":case 9:t.severityNumber=9;break;case"SEVERITY_NUMBER_INFO2":case 10:t.severityNumber=10;break;case"SEVERITY_NUMBER_INFO3":case 11:t.severityNumber=11;break;case"SEVERITY_NUMBER_INFO4":case 12:t.severityNumber=12;break;case"SEVERITY_NUMBER_WARN":case 13:t.severityNumber=13;break;case"SEVERITY_NUMBER_WARN2":case 14:t.severityNumber=14;break;case"SEVERITY_NUMBER_WARN3":case 15:t.severityNumber=15;break;case"SEVERITY_NUMBER_WARN4":case 16:t.severityNumber=16;break;case"SEVERITY_NUMBER_ERROR":case 17:t.severityNumber=17;break;case"SEVERITY_NUMBER_ERROR2":case 18:t.severityNumber=18;break;case"SEVERITY_NUMBER_ERROR3":case 19:t.severityNumber=19;break;case"SEVERITY_NUMBER_ERROR4":case 20:t.severityNumber=20;break;case"SEVERITY_NUMBER_FATAL":case 21:t.severityNumber=21;break;case"SEVERITY_NUMBER_FATAL2":case 22:t.severityNumber=22;break;case"SEVERITY_NUMBER_FATAL3":case 23:t.severityNumber=23;break;case"SEVERITY_NUMBER_FATAL4":case 24:t.severityNumber=24}if(null!=e.severityText&&(t.severityText=String(e.severityText)),null!=e.body){if("object"!=typeof e.body)throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.body: object expected");t.body=s.opentelemetry.proto.common.v1.AnyValue.fromObject(e.body)}if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.attributes: object expected");t.attributes[r]=s.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),null!=e.flags&&(t.flags=e.flags>>>0),null!=e.traceId&&("string"==typeof e.traceId?a.base64.decode(e.traceId,t.traceId=a.newBuffer(a.base64.length(e.traceId)),0):e.traceId.length>=0&&(t.traceId=e.traceId)),null!=e.spanId&&("string"==typeof e.spanId?a.base64.decode(e.spanId,t.spanId=a.newBuffer(a.base64.length(e.spanId)),0):e.spanId.length>=0&&(t.spanId=e.spanId)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;if(r.severityNumber=t.enums===String?"SEVERITY_NUMBER_UNSPECIFIED":0,r.severityText="",r.body=null,r.droppedAttributesCount=0,r.flags=0,t.bytes===String?r.traceId="":(r.traceId=[],t.bytes!==Array&&(r.traceId=a.newBuffer(r.traceId))),t.bytes===String?r.spanId="":(r.spanId=[],t.bytes!==Array&&(r.spanId=a.newBuffer(r.spanId))),a.Long){var n=new a.Long(0,0,!1);r.observedTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.observedTimeUnixNano=t.longs===String?"0":0}if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new a.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.severityNumber&&e.hasOwnProperty("severityNumber")&&(r.severityNumber=t.enums===String?void 0===s.opentelemetry.proto.logs.v1.SeverityNumber[e.severityNumber]?e.severityNumber:s.opentelemetry.proto.logs.v1.SeverityNumber[e.severityNumber]:e.severityNumber),null!=e.severityText&&e.hasOwnProperty("severityText")&&(r.severityText=e.severityText),null!=e.body&&e.hasOwnProperty("body")&&(r.body=s.opentelemetry.proto.common.v1.AnyValue.toObject(e.body,t)),e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=s.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),null!=e.traceId&&e.hasOwnProperty("traceId")&&(r.traceId=t.bytes===String?a.base64.encode(e.traceId,0,e.traceId.length):t.bytes===Array?Array.prototype.slice.call(e.traceId):e.traceId),null!=e.spanId&&e.hasOwnProperty("spanId")&&(r.spanId=t.bytes===String?a.base64.encode(e.spanId,0,e.spanId.length):t.bytes===Array?Array.prototype.slice.call(e.spanId):e.spanId),null!=e.observedTimeUnixNano&&e.hasOwnProperty("observedTimeUnixNano")&&("number"==typeof e.observedTimeUnixNano?r.observedTimeUnixNano=t.longs===String?String(e.observedTimeUnixNano):e.observedTimeUnixNano:r.observedTimeUnixNano=t.longs===String?a.Long.prototype.toString.call(e.observedTimeUnixNano):t.longs===Number?new a.LongBits(e.observedTimeUnixNano.low>>>0,e.observedTimeUnixNano.high>>>0).toNumber():e.observedTimeUnixNano),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.logs.v1.LogRecord"},e}(),T.v1=A,e.logs=T,k.proto=e,k}(),e.exports=s},99122:(e,t)=>{"use strict";let r=Symbol.for("yaml.alias"),n=Symbol.for("yaml.document"),o=Symbol.for("yaml.map"),i=Symbol.for("yaml.pair"),a=Symbol.for("yaml.scalar"),s=Symbol.for("yaml.seq"),l=Symbol.for("yaml.node.type"),u=e=>!!e&&"object"==typeof e&&e[l]===a;function c(e){if(e&&"object"==typeof e)switch(e[l]){case o:case s:return!0}return!1}t.ALIAS=r,t.DOC=n,t.MAP=o,t.NODE_TYPE=l,t.PAIR=i,t.SCALAR=a,t.SEQ=s,t.hasAnchor=e=>(u(e)||c(e))&&!!e.anchor,t.isAlias=e=>!!e&&"object"==typeof e&&e[l]===r,t.isCollection=c,t.isDocument=e=>!!e&&"object"==typeof e&&e[l]===n,t.isMap=e=>!!e&&"object"==typeof e&&e[l]===o,t.isNode=function(e){if(e&&"object"==typeof e)switch(e[l]){case r:case o:case a:case s:return!0}return!1},t.isPair=e=>!!e&&"object"==typeof e&&e[l]===i,t.isScalar=u,t.isSeq=e=>!!e&&"object"==typeof e&&e[l]===s},99848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;let n=r(22964),o=r(58592);function i(e,t){let{gen:r,schema:i,data:a,keyword:s,it:l}=e;l.items=!0;let u=r.const("len",(0,n._)`${a}.length`);if(!1===i)e.setParams({len:t.length}),e.pass((0,n._)`${u} <= ${t.length}`);else if("object"==typeof i&&!(0,o.alwaysValidSchema)(l,i)){let i=r.var("valid",(0,n._)`${u} <= ${t.length}`);r.if((0,n.not)(i),()=>{var a;return a=i,void r.forRange("i",t.length,u,t=>{e.subschema({keyword:s,dataProp:t,dataPropType:o.Type.Num},a),l.allErrors||r.if((0,n.not)(a),()=>r.break())})}),e.ok(i)}}t.validateAdditionalItems=i,t.default={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,n.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,n._)`{limit: ${e}}`},code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n))return void(0,o.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');i(e,n)}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,724,580,799],()=>r(38558));module.exports=n})();