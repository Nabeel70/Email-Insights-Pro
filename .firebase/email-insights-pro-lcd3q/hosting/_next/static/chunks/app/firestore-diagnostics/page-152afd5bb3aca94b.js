(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(5155),a=s(2115),i=s(9708),n=s(2085),c=s(9434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:l=!1,...o}=e,u=l?i.DX:"button";return(0,r.jsx)(u,{className:(0,c.cn)(d({variant:a,size:n,className:s})),ref:t,...o})});l.displayName="Button"},1133:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(157).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1541:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>c});var r=s(5155),a=s(2115),i=s(9323);let n=(0,a.createContext)({user:null,loading:!0});function c(e){let{children:t}=e,[s,c]=(0,a.useState)(null),[d,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,i.Bh)(e=>{c(e),l(!1)});return()=>e()},[]),(0,r.jsx)(n.Provider,{value:{user:s,loading:d},children:t})}let d=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2527:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(5155),a=s(2115),i=s(285),n=s(6695),c=s(2085),d=s(9434);let l=(0,c.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,...i}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,d.cn)(l({variant:a}),s),...i})});o.displayName="Alert";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});u.displayName="AlertTitle";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",s),...a})});m.displayName="AlertDescription";var f=s(4913),p=s(8376),h=s(1133);let g=(0,s(157).A)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var x=s(6104),v=s(5317),y=s(7481),j=s(5695),b=s(6365);function N(){let e=(0,j.useRouter)(),[t,s]=(0,a.useState)("idle"),[c,d]=(0,a.useState)("idle"),[l,b]=(0,a.useState)("idle"),[N,w]=(0,a.useState)(null),{toast:A}=(0,y.dj)(),k=async()=>{w(null),s("loading"),d("idle"),b("idle"),d("loading");let e=(0,v.H9)(x.db,"diagnostics","test-document");try{await (0,v.BN)(e,{message:"Hello Firestore!",timestamp:(0,v.O5)()}),d("success"),A({title:"Write Test Successful",description:"Successfully wrote a document to Firestore."}),s("loading");let t=await (0,v.x7)(e);if(t.exists())s("success"),A({title:"Read Test Successful",description:'Read back: "'.concat(t.data().message,'"')});else throw Error("Document did not exist after writing.");b("loading"),await (0,v.kd)(e),b("success"),A({title:"Delete Test Successful",description:"Successfully cleaned up the test document."})}catch(r){console.error("Firestore Diagnostics Error:",r);let e=r.message||"An unknown error occurred.";w(e),"permission-denied"===r.code?("success"!==c?d("error"):"success"!==t?s("error"):b("error"),A({title:"Permission Denied",description:"Your Firestore security rules are blocking the operation. Ensure authenticated users have read/write access.",variant:"destructive"})):("success"!==c&&d("error"),"success"!==t&&s("error"),"success"!==l&&b("error"),A({title:"Diagnostics Failed",description:e,variant:"destructive"}))}},S=e=>{let{status:t}=e;switch(t){case"loading":return(0,r.jsx)(f.A,{className:"h-5 w-5 animate-spin text-muted-foreground"});case"success":return(0,r.jsx)(p.A,{className:"h-5 w-5 text-green-500"});case"error":return(0,r.jsx)(h.A,{className:"h-5 w-5 text-destructive"});default:return(0,r.jsx)(g,{className:"h-5 w-5 text-muted-foreground"})}};return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background p-4",children:(0,r.jsxs)(n.Zp,{className:"w-full max-w-2xl",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{className:"text-2xl",children:"Firestore Diagnostics"}),(0,r.jsx)(n.BT,{children:"This page tests the connection to your Firestore database and verifies that your security rules allow for basic read/write operations for authenticated users."})]}),(0,r.jsxs)(n.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,r.jsx)("span",{className:"font-medium",children:"1. Write Document Test"}),(0,r.jsx)(S,{status:c})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,r.jsx)("span",{className:"font-medium",children:"2. Read Document Test"}),(0,r.jsx)(S,{status:t})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,r.jsx)("span",{className:"font-medium",children:"3. Delete Document Test"}),(0,r.jsx)(S,{status:l})]})]}),N&&(0,r.jsxs)(o,{variant:"destructive",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),(0,r.jsx)(u,{children:"Error Detected"}),(0,r.jsx)(m,{children:N})]}),"success"===c&&"success"===t&&"success"===l&&(0,r.jsxs)(o,{variant:"default",className:"bg-green-500/10 border-green-500/50 text-green-700",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 text-green-600"}),(0,r.jsx)(u,{className:"text-green-800",children:"All Tests Passed!"}),(0,r.jsx)(m,{children:"Your Firestore connection and security rules are configured correctly for basic operations."})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(i.$,{onClick:k,disabled:"loading"===c||"loading"===t||"loading"===l,className:"w-full",children:"loading"===c||"loading"===t||"loading"===l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"})," Running..."]}):"Run Diagnostics"}),(0,r.jsx)(i.$,{variant:"outline",onClick:()=>e.push("/"),className:"w-full",children:"Back to Dashboard"})]})]})]})})}function w(){return(0,r.jsx)(b.C,{children:(0,r.jsx)(N,{})})}},4913:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(157).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},6104:(e,t,s)=>{"use strict";s.d(t,{db:()=>d,j:()=>c});var r=s(3915),a=s(4903),i=s(5317);let n=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyDLtdLHWg5nW07lFUlcmqsa90WKjTHMtlM",authDomain:"email-insights-pro-lcd3q.firebaseapp.com",projectId:"email-insights-pro-lcd3q",storageBucket:"email-insights-pro-lcd3q.appspot.com",messagingSenderId:"56610768571",appId:"1:56610768571:web:04c62c52c047925da14b9e"}),c=(0,a.xI)(n),d=(0,i.aU)(n)},6365:(e,t,s)=>{"use strict";s.d(t,{C:()=>d});var r=s(5155),a=s(2115),i=s(5695),n=s(1541),c=s(4913);function d(e){let{children:t}=e,{user:s,loading:d}=(0,n.A)(),l=(0,i.useRouter)();return((0,a.useEffect)(()=>{d||s||l.push("/login")},[s,d,l]),d||!s)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,r.jsx)(r.Fragment,{children:t})}},6695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>c});var r=s(5155),a=s(2115),i=s(9434);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});c.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});l.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(2115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function o(e){l=c(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},8376:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(157).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9323:(e,t,s)=>{"use strict";s.d(t,{Bh:()=>c,CI:()=>n,Jv:()=>i});var r=s(4903),a=s(6104);let i=(e,t)=>(0,r.x9)(a.j,e,t),n=()=>(0,r.CI)(a.j),c=e=>(0,r.hg)(a.j,e)},9434:(e,t,s)=>{"use strict";s.d(t,{b:()=>n,cn:()=>i});var r=s(2596),a=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}function n(e){if(!e||""===e.trim()||e.startsWith("0000-00-00"))return"N/A";try{let t=new Date(e);if(isNaN(t.getTime())){let t=new Date(e.replace(" ","T"));if(isNaN(t.getTime()))return"N/A";return t.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}return t.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}catch(t){return console.error("Could not parse date: ".concat(e),t),"N/A"}}},9488:(e,t,s)=>{Promise.resolve().then(s.bind(s,2527))}},e=>{var t=t=>e(e.s=t);e.O(0,[135,210,553,441,684,358],()=>t(9488)),_N_E=e.O()}]);